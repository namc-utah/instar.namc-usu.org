(this["webpackJsonp@namcbugdb/instar"]=this["webpackJsonp@namcbugdb/instar"]||[]).push([[0],{21:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.pubGraphql=t.graphql=t.util=t.api=t.pubTypes=void 0,i(n(345),t),t.pubTypes=o(n(347));var s=o(n(348)),l=o(n(349));t.api=o(n(350)),t.util=o(n(368)),t.graphql={typeDefs:s.default,queryLimits:s.queryLimits},t.pubGraphql={typeDefs:l.default,queryLimits:l.pubQueryLimits}},221:function(e){e.exports=JSON.parse('{"id":"namc-sites","type":"circle","interactive":true,"paint":{"circle-radius":["interpolate",["linear"],["zoom"],1,2.5,22,10],"circle-color":"#ff00ff","circle-opacity":["interpolate",["linear"],["zoom"],1,0.5,12,1]}}')},240:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n(14));t.default=(0,o.default)(i||(i=a(["\n  type Lookups {\n    geo: GeoLookups\n    entity: EntityLookups\n    taxa: TaxaLookups\n    sample: SampleLookups\n    metric: MetricLookups\n    billing: BillingLookups\n  }\n\n  ##########################################\n  # Sample Lookups\n  ##########################################\n\n  type GeoLookups {\n    countries: JSONObject\n    states: JSONObject\n    landUses: JSONObject\n    ecosystems: JSONObject\n    habitats: JSONObject\n    systems: JSONObject\n    waterbodyTypes: JSONObject\n    predictorTypes: JSONObject\n    modelTypes: JSONObject\n    taxonomicEffort: JSONObject\n  }\n\n  type TaxaLookups {\n    taxaLevels: JSONObject\n    lifeStages: JSONObject\n    fishDietSpecies: JSONObject\n    attributeTypes: JSONObject\n  }\n\n  ##########################################\n  # Sample Lookups\n  ##########################################\n  type EntityLookups {\n    organizationTypes: JSONObject\n    roles: JSONObject\n  }\n  ##########################################\n  # Sample Lookups\n  ##########################################\n  type SampleLookups {\n    sampleMethods: JSONObject\n    sampleTypes: JSONObject\n    designTypes: JSONObject\n    effortTypes: JSONObject\n    boxStates: JSONObject\n    massMethods: JSONObject\n    massTypes: JSONObject\n    noteTypes: JSONObject\n    towTypes: JSONObject\n  }\n\n  ##########################################\n  # Metric Lookups\n  ##########################################\n  type MetricLookups {\n    metricGroups: JSONObject\n    calculations: JSONObject\n    metricReports: JSONObject\n    rarefactionTypes: JSONObject\n  }\n\n  ##########################################\n  # Billing Lookups\n  ##########################################\n  type BillingLookups {\n    lineItemTypes: JSONObject\n    agreementTypes: JSONObject\n  }\n"],["\n  type Lookups {\n    geo: GeoLookups\n    entity: EntityLookups\n    taxa: TaxaLookups\n    sample: SampleLookups\n    metric: MetricLookups\n    billing: BillingLookups\n  }\n\n  ##########################################\n  # Sample Lookups\n  ##########################################\n\n  type GeoLookups {\n    countries: JSONObject\n    states: JSONObject\n    landUses: JSONObject\n    ecosystems: JSONObject\n    habitats: JSONObject\n    systems: JSONObject\n    waterbodyTypes: JSONObject\n    predictorTypes: JSONObject\n    modelTypes: JSONObject\n    taxonomicEffort: JSONObject\n  }\n\n  type TaxaLookups {\n    taxaLevels: JSONObject\n    lifeStages: JSONObject\n    fishDietSpecies: JSONObject\n    attributeTypes: JSONObject\n  }\n\n  ##########################################\n  # Sample Lookups\n  ##########################################\n  type EntityLookups {\n    organizationTypes: JSONObject\n    roles: JSONObject\n  }\n  ##########################################\n  # Sample Lookups\n  ##########################################\n  type SampleLookups {\n    sampleMethods: JSONObject\n    sampleTypes: JSONObject\n    designTypes: JSONObject\n    effortTypes: JSONObject\n    boxStates: JSONObject\n    massMethods: JSONObject\n    massTypes: JSONObject\n    noteTypes: JSONObject\n    towTypes: JSONObject\n  }\n\n  ##########################################\n  # Metric Lookups\n  ##########################################\n  type MetricLookups {\n    metricGroups: JSONObject\n    calculations: JSONObject\n    metricReports: JSONObject\n    rarefactionTypes: JSONObject\n  }\n\n  ##########################################\n  # Billing Lookups\n  ##########################################\n  type BillingLookups {\n    lineItemTypes: JSONObject\n    agreementTypes: JSONObject\n  }\n"])))},279:function(e){e.exports=JSON.parse('{"version":8,"name":"Basic","metadata":{"mapbox:type":"default","mapbox:origin":"basic-v1","mapbox:sdk-support":{"android":"9.3.0","ios":"5.10.0","js":"2.0.0"},"mapbox:autocomposite":true,"mapbox:groups":{"Land, water, & sky, land":{"name":"Land, water, & sky, land","collapsed":false},"Land, water, & sky, water":{"name":"Land, water, & sky, water","collapsed":false},"Land, water, & sky, built":{"name":"Land, water, & sky, built","collapsed":false},"Transit, built":{"name":"Transit, built","collapsed":false},"Buildings, built":{"name":"Buildings, built","collapsed":false},"Walking, cycling, etc., tunnels":{"name":"Walking, cycling, etc., tunnels","collapsed":false},"Road network, tunnels":{"name":"Road network, tunnels","collapsed":false},"Walking, cycling, etc., surface":{"name":"Walking, cycling, etc., surface","collapsed":false},"Road network, surface":{"name":"Road network, surface","collapsed":false},"Walking, cycling, etc., barriers-bridges":{"name":"Walking, cycling, etc., barriers-bridges","collapsed":false},"Road network, bridges":{"name":"Road network, bridges","collapsed":false},"Administrative boundaries, admin":{"name":"Administrative boundaries, admin","collapsed":false},"Road network, road-labels":{"name":"Road network, road-labels","collapsed":false},"Walking, cycling, etc., walking-cycling-labels":{"name":"Walking, cycling, etc., walking-cycling-labels","collapsed":false},"Natural features, natural-labels":{"name":"Natural features, natural-labels","collapsed":false},"Point of interest labels, poi-labels":{"name":"Point of interest labels, poi-labels","collapsed":false},"Transit, transit-labels":{"name":"Transit, transit-labels","collapsed":false},"Place labels, place-labels":{"name":"Place labels, place-labels","collapsed":false}},"mapbox:decompiler":{"id":"basic-v1","componentVersion":"9.0.0","strata":[{"id":"basic-v1","order":[["land-and-water","land"],["land-and-water","water"],["land-and-water","built"],["transit","built"],["buildings","built"],["road-network","tunnels-case"],["walking-cycling","tunnels"],["road-network","tunnels"],["transit","ferries"],["walking-cycling","surface"],["road-network","surface"],["transit","surface"],["road-network","surface-icons"],["walking-cycling","barriers-bridges"],["road-network","bridges"],["transit","bridges"],["road-network","traffic-and-closures"],["buildings","extruded"],["transit","elevated"],["admin-boundaries","admin"],["buildings","building-labels"],["road-network","road-labels"],["walking-cycling","walking-cycling-labels"],["transit","ferry-aerialway-labels"],["natural-features","natural-labels"],["point-of-interest-labels","poi-labels"],["transit","transit-labels"],["place-labels","place-labels"],["land-and-water","sky"]]}],"components":{"road-network":"9.0.0","natural-features":"9.0.0","place-labels":"9.0.0","admin-boundaries":"9.0.0","point-of-interest-labels":"9.0.0","walking-cycling":"9.0.0","transit":"9.0.0","land-and-water":"9.0.0","buildings":"9.0.0"},"propConfig":{"road-network":{"color-base":"hsl(40, 48%, 92%)","color-road":"hsl(38, 55%, 100%)","roadNetwork":"Simple"},"natural-features":{"color-base":"hsl(40, 48%, 92%)","color-water":"hsl(205, 76%, 70%)","color-poi":"hsl(26, 20%, 38%)"},"place-labels":{"color-base":"hsl(40, 48%, 92%)","color-place-label":"hsl(0, 0%, 15%)","settlementSubdivisionsDensity":3,"settlementLabelStyle":"Text only"},"admin-boundaries":{"color-base":"hsl(40, 48%, 92%)","color-place-label":"hsl(0, 0%, 15%)"},"point-of-interest-labels":{"color-base":"hsl(40, 48%, 92%)","color-greenspace":"hsl(78, 50%, 73%)","color-greenspace-label":"hsl(76, 50%, 16%)","color-hospital":"hsl(3, 45%, 55%)","color-school":"hsl(40, 45%, 45%)","color-poi":"hsl(26, 20%, 38%)","density":2},"walking-cycling":{"color-base":"hsl(40, 48%, 92%)","color-road":"hsl(38, 55%, 100%)","color-greenspace":"hsl(78, 50%, 73%)","color-greenspace-label":"hsl(76, 50%, 16%)","walkingCyclingPisteBackground":false,"golfHoleLabelLine":false,"pedestrianPolygonFeatures":false},"transit":{"color-airport":"hsl(225, 4%, 40%)","color-transit":"hsl(345, 6%, 40%)","aerialways":false,"color-road":"hsl(38, 55%, 100%)","color-water":"hsl(205, 76%, 70%)","transitLabels":false,"railways":false,"ferries":false,"color-base":"hsl(40, 48%, 92%)"},"land-and-water":{"color-airport":"hsl(225, 4%, 40%)","color-hospital":"hsl(3, 45%, 55%)","landType":"Landuse only","color-greenspace":"hsl(78, 50%, 73%)","color-water":"hsl(205, 76%, 70%)","transitionLandOnZoom":false,"waterStyle":"Simple","color-base":"hsl(40, 48%, 92%)","color-school":"hsl(40, 45%, 45%)"},"buildings":{"color-base":"hsl(40, 48%, 92%)","houseNumbers":false}}}},"center":[2.3176,48.8665],"zoom":12,"sources":{"mapbox://mapbox.mapbox-traffic-v1":{"url":"mapbox://mapbox.mapbox-traffic-v1","type":"vector"},"composite":{"url":"mapbox://mapbox.mapbox-streets-v8,mapbox.mapbox-terrain-v2","type":"vector"}},"sprite":"mapbox://sprites/northarrowresearch/ckmuv21s85dd317s3sii3rhg7/5aimie0s459ihq4jyhsfvi0wl","glyphs":"mapbox://fonts/northarrowresearch/{fontstack}/{range}.pbf","layers":[{"id":"land","type":"background","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"layout":{},"paint":{"background-color":"hsl(40, 46%, 86%)"}},{"id":"national-park","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["==",["get","class"],"national_park"],"layout":{},"paint":{"fill-color":"hsl(78, 50%, 73%)","fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,0.5,10,0.5]}},{"id":"landuse","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse","minzoom":5,"filter":["match",["get","class"],["park","airport","glacier","pitch","sand","facility"],true,"cemetery",true,"school",true,"hospital",true,false],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,["match",["get","class"],"park","hsl(78, 50%, 73%)","airport","hsl(225, 49%, 88%)","cemetery","hsl(60, 49%, 79%)","glacier","hsl(205, 66%, 90%)","hospital","hsl(3, 47%, 84%)","pitch","hsl(78, 51%, 68%)","sand","hsl(43, 50%, 83%)","school","hsl(40, 47%, 78%)","hsl(40, 49%, 82%)"],16,["match",["get","class"],"park","hsl(78, 50%, 73%)","airport","hsl(225, 63%, 86%)","cemetery","hsl(60, 49%, 79%)","glacier","hsl(205, 66%, 90%)","hospital","hsl(3, 46%, 86%)","pitch","hsl(78, 51%, 68%)","sand","hsl(43, 50%, 83%)","school","hsl(40, 47%, 78%)","hsl(40, 49%, 82%)"]],"fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,["match",["get","class"],"glacier",0.5,1]]}},{"id":"pitch-outline","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse","minzoom":15,"filter":["==",["get","class"],"pitch"],"layout":{},"paint":{"line-color":"hsl(60, 29%, 81%)"}},{"id":"waterway","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"waterway","minzoom":8,"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"hsl(205, 76%, 70%)","line-width":["interpolate",["exponential",1.3],["zoom"],9,["match",["get","class"],["canal","river"],0.1,0],20,["match",["get","class"],["canal","river"],8,3]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(205, 76%, 70%)"}},{"id":"land-structure-polygon","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, built"},"source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"Polygon"],["==",["get","class"],"land"]],"layout":{},"paint":{"fill-color":"hsl(40, 46%, 86%)"}},{"id":"land-structure-line","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, built"},"source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["==",["get","class"],"land"]],"layout":{"line-cap":"round"},"paint":{"line-width":["interpolate",["exponential",1.99],["zoom"],14,0.75,20,40],"line-color":"hsl(40, 46%, 86%)"}},{"id":"aeroway-polygon","type":"fill","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, built"},"source":"composite","source-layer":"aeroway","minzoom":11,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","type"],["runway","taxiway","helipad"],true,false]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(225, 37%, 79%)",16,"hsl(225, 19%, 81%)"],"fill-opacity":["interpolate",["linear"],["zoom"],11,0,11.5,1]}},{"id":"aeroway-line","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, built"},"source":"composite","source-layer":"aeroway","minzoom":9,"filter":["==",["geometry-type"],"LineString"],"layout":{},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(225, 37%, 79%)",16,"hsl(225, 19%, 81%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],9,["match",["get","type"],"runway",1,0.5],18,["match",["get","type"],"runway",80,20]]}},{"id":"building-outline","type":"line","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, built"},"source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"line-color":"hsl(40, 42%, 77%)","line-width":["interpolate",["exponential",1.5],["zoom"],15,0.75,20,3],"line-opacity":["interpolate",["linear"],["zoom"],15,0,16,1]}},{"id":"building","type":"fill","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, built"},"source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(40, 45%, 83%)",16,"hsl(40, 41%, 82%)"],"fill-opacity":["interpolate",["linear"],["zoom"],15,0,16,1],"fill-outline-color":"hsl(40, 42%, 77%)"}},{"id":"tunnel-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["!=",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(40, 42%, 77%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]]}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(40, 42%, 77%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(40, 42%, 77%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-simple","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","street","street_limited","service","track"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,["match",["get","class"],["motorway","trunk","primary"],4,["secondary","tertiary"],2.5,["motorway_link","trunk_link","street","street_limited","primary_link"],1,0.5],18,["match",["get","class"],["motorway","trunk","primary"],32,["secondary","tertiary"],26,["motorway_link","trunk_link","street","street_limited","primary_link"],18,12]],"line-color":"hsl(38, 55%, 93%)"}},{"id":"road-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,0.5,14,1,15,1,18,4],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"road-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-simple","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["step",["zoom"],["match",["get","class"],["motorway","trunk"],true,false],6,["match",["get","class"],["motorway","trunk","primary"],true,false],8,["match",["get","class"],["motorway","trunk","primary","secondary"],true,false],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","motorway_link","trunk_link"],true,false],11,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street"],true,false],12,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street","street_limited","primary_link"],true,false],13,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","street","street_limited","service","track"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],["motorway","trunk","primary"],0.75,["secondary","tertiary"],0.1,0],13,["match",["get","class"],["motorway","trunk","primary"],4,["secondary","tertiary"],2.5,["motorway_link","trunk_link","primary_link","street","street_limited"],1,0.5],18,["match",["get","class"],["motorway","trunk","primary"],32,["secondary","tertiary"],26,["motorway_link","trunk_link","primary_link","street","street_limited"],18,10]],"line-color":["match",["get","class"],["primary_link","secondary_link","tertiary_link","street","street_limited","service","track"],"hsl(38, 55%, 95%)","hsl(38, 55%, 100%)"]}},{"id":"bridge-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["==",["geometry-type"],"LineString"],["!=",["get","type"],"steps"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(40, 47%, 96%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-case-simple","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","street","street_limited","service","track"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,["match",["get","class"],["motorway","trunk","primary"],6,["secondary","tertiary"],4,["motorway_link","trunk_link","street","street_limited","primary_link"],2.5,1.25],18,["match",["get","class"],["motorway","trunk","primary"],36,["secondary","tertiary"],30,["motorway_link","trunk_link","street","street_limited","primary_link"],22,16]],"line-color":"hsl(40, 46%, 86%)"}},{"id":"bridge-simple","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["motorway","trunk"],true,false],13,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","secondary","tertiary","street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","street","street_limited","service","track"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,["match",["get","class"],["motorway","trunk","primary"],4,["secondary","tertiary"],2.5,["motorway_link","trunk_link","street","street_limited","primary_link"],1,0.5],18,["match",["get","class"],["motorway","trunk","primary"],32,["secondary","tertiary"],26,["motorway_link","trunk_link","street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],["primary_link","secondary_link","tertiary_link","street","street_limited","service","track"],"hsl(38, 55%, 95%)","hsl(38, 55%, 100%)"]}},{"id":"admin-1-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":7,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"bevel"},"paint":{"line-color":["interpolate",["linear"],["zoom"],8,"hsl(40, 46%, 86%)",16,"hsl(0, 0%, 87%)"],"line-width":["interpolate",["linear"],["zoom"],7,3.75,12,5.5],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,0.75],"line-dasharray":[1,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-0-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,3.5,10,8],"line-color":["interpolate",["linear"],["zoom"],6,"hsl(40, 46%, 86%)",8,"hsl(0, 0%, 87%)"],"line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,2]}},{"id":"admin-1-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":2,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(0, 0%, 77%)",7,"hsl(0, 0%, 62%)"]}},{"id":"admin-0-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":"hsl(0, 0%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2],"line-dasharray":[10,0]}},{"id":"admin-0-boundary-disputed","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(0, 0%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2],"line-dasharray":["step",["zoom"],["literal",[3.25,3.25]],6,["literal",[2.5,2.5]],7,["literal",[2,2.25]],8,["literal",[1.75,2]]]}},{"id":"road-label-simple","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":12,"filter":["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","street","street_limited"],true,false],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],10,9],18,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],16,14]],"text-max-angle":30,"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(40, 47%, 41%)","text-halo-color":"hsl(38, 55%, 100%)","text-halo-width":1}},{"id":"path-pedestrian-label","type":"symbol","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., walking-cycling-labels"},"source":"composite","source-layer":"road","minzoom":12,"filter":["step",["zoom"],["match",["get","class"],["pedestrian"],true,false],15,["match",["get","class"],["path","pedestrian"],true,false]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],"pedestrian",9,6.5],18,["match",["get","class"],"pedestrian",14,13]],"text-max-angle":30,"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(40, 47%, 41%)","text-halo-color":"hsl(40, 46%, 95%)","text-halo-width":1,"text-halo-blur":1}},{"id":"waterway-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":13,"filter":["all",["match",["get","class"],["canal","river","stream"],["match",["get","worldview"],["all","US"],true,false],["disputed_canal","disputed_river","disputed_stream"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"symbol-spacing":["interpolate",["linear",1],["zoom"],15,250,17,400],"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":"hsl(205, 44%, 90%)"}},{"id":"natural-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["glacier","landform"],["match",["get","worldview"],["all","US"],true,false],["disputed_glacier","disputed_landform"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"text-max-angle":30,"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport"},"paint":{"text-halo-width":0.5,"text-halo-color":"hsl(40, 53%, 100%)","text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 15%, 48%)",5,"hsl(26, 20%, 38%)"],17,["step",["get","sizerank"],"hsl(26, 15%, 48%)",13,"hsl(26, 20%, 38%)"]]}},{"id":"natural-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["dock","glacier","landform","water_feature","wetland"],["match",["get","worldview"],["all","US"],true,false],["disputed_dock","disputed_glacier","disputed_landform","disputed_water_feature","disputed_wetland"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(40, 53%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 15%, 48%)",5,"hsl(26, 20%, 38%)"],17,["step",["get","sizerank"],"hsl(26, 15%, 48%)",13,"hsl(26, 20%, 38%)"]]}},{"id":"water-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,18,12,12],10,["step",["get","sizerank"],15,9,12],18,["step",["get","sizerank"],15,9,14]],"text-max-angle":30,"text-letter-spacing":["match",["get","class"],"ocean",0.25,["sea","bay"],0.15,0],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 72%, 90%)","hsl(205, 44%, 90%)"]}},{"id":"water-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"]],"layout":{"text-line-height":1.3,"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,15,12,12],10,["step",["get","sizerank"],15,9,12]],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":["match",["get","class"],"ocean",0.25,["bay","sea"],0.15,0.01],"text-max-width":["match",["get","class"],"ocean",4,"sea",5,["bay","water"],7,10]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 72%, 90%)","hsl(205, 44%, 90%)"]}},{"id":"poi-label","type":"symbol","metadata":{"mapbox:featureComponent":"point-of-interest-labels","mapbox:group":"Point of interest labels, poi-labels"},"source":"composite","source-layer":"poi_label","minzoom":6,"filter":["<=",["get","filterrank"],["+",["step",["zoom"],0,16,1,17,2],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["case",["has","maki_beta"],["image",["concat",["get","maki_beta"],"-11"]],["image",["concat",["get","maki"],"-11"]]],15,["case",["has","maki_beta"],["image",["concat",["get","maki_beta"],"-15"]],["image",["concat",["get","maki"],"-15"]]]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":["match",["get","class"],"park_like","hsl(78, 55%, 100%)","education","hsl(40, 52%, 100%)","medical","hsl(3, 51%, 100%)","hsl(40, 53%, 100%)"],"text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(22, 44%, 61%)","park_like","hsl(76, 51%, 26%)","education","hsl(40, 18%, 45%)","medical","hsl(3, 18%, 55%)","hsl(26, 15%, 48%)"],5,["match",["get","class"],"food_and_drink","hsl(22, 68%, 44%)","park_like","hsl(76, 50%, 15%)","education","hsl(40, 45%, 25%)","medical","hsl(3, 24%, 45%)","hsl(26, 20%, 38%)"]],17,["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(22, 44%, 61%)","park_like","hsl(76, 51%, 26%)","education","hsl(40, 18%, 45%)","medical","hsl(3, 18%, 55%)","hsl(26, 15%, 48%)"],13,["match",["get","class"],"food_and_drink","hsl(22, 68%, 44%)","park_like","hsl(76, 50%, 15%)","education","hsl(40, 45%, 25%)","medical","hsl(3, 24%, 45%)","hsl(26, 20%, 38%)"]]]}},{"id":"airport-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"airport_label","minzoom":8,"filter":["match",["get","class"],["military","civil"],["match",["get","worldview"],["all","US"],true,false],["disputed_military","disputed_civil"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-line-height":1.1,"text-size":["step",["get","sizerank"],18,9,12],"icon-image":["step",["get","sizerank"],["concat",["get","maki"],"-15"],9,["concat",["get","maki"],"-11"]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,0.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":["step",["get","sizerank"],["coalesce",["get","name_en"],["get","name"]],15,["get","ref"]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"hsl(225, 4%, 40%)","text-halo-color":"hsl(225, 68%, 100%)","text-halo-width":1}},{"id":"settlement-subdivision-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":15,"filter":["all",["match",["get","class"],"settlement_subdivision",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement_subdivision",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["<=",["get","filterrank"],3]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-transform":"uppercase","text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":["match",["get","type"],"suburb",0.15,0.1],"text-max-width":7,"text-padding":3,"text-size":["interpolate",["cubic-bezier",0.5,0,1,1],["zoom"],11,["match",["get","type"],"suburb",11,10.5],15,["match",["get","type"],"suburb",15,14]]},"paint":{"text-halo-color":"hsla(40, 53%, 100%, 0.75)","text-halo-width":1,"text-color":"hsl(0, 0%, 27%)","text-halo-blur":0.5}},{"id":"settlement-minor-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],true,8,[">=",["get","symbolrank"],11],10,[">=",["get","symbolrank"],12],11,[">=",["get","symbolrank"],13],12,[">=",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],12,9,11,10,10.5,12,9.5,14,8.5,16,6.5,17,4],13,["step",["get","symbolrank"],23,9,21,10,19,11,17,12,16,13,15,15,13]],"icon-image":"","text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["literal",[0,0]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],"center",8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(40, 53%, 100%)","text-halo-width":1,"icon-opacity":["step",["zoom"],1,8,0],"text-halo-blur":1}},{"id":"settlement-major-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],false,8,["<",["get","symbolrank"],11],10,["<",["get","symbolrank"],12],11,["<",["get","symbolrank"],13],12,["<",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],8,["step",["get","symbolrank"],18,9,17,10,15],15,["step",["get","symbolrank"],23,9,22,10,20,11,18,12,16,13,15,15,13]],"icon-image":"","text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["literal",[0,0]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],"center",8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(40, 53%, 100%)","text-halo-width":1,"icon-opacity":["step",["zoom"],1,8,0],"text-halo-blur":1}},{"id":"state-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["match",["get","class"],"state",["match",["get","worldview"],["all","US"],true,false],"disputed_state",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-size":["interpolate",["cubic-bezier",0.85,0.7,0.65,1],["zoom"],4,["step",["get","symbolrank"],10,6,9.5,7,9],9,["step",["get","symbolrank"],21,6,16,7,13]],"text-transform":"uppercase","text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["step",["get","symbolrank"],["coalesce",["get","name_en"],["get","name"]],5,["coalesce",["get","abbr"],["get","name_en"],["get","name"]]],5,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(40, 53%, 100%)","text-halo-width":1}},{"id":"country-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["match",["get","class"],"country",["match",["get","worldview"],["all","US"],true,false],"disputed_country",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.7,1],["zoom"],1,["step",["get","symbolrank"],11,4,9,5,8],9,["step",["get","symbolrank"],22,4,19,5,17]],"icon-image":"","text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["literal",[0,0]],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":6},"paint":{"icon-opacity":["step",["zoom"],["case",["has","text_anchor"],1,0],7,0],"text-color":"hsl(0, 0%, 0%)","text-halo-color":["interpolate",["linear"],["zoom"],2,"hsla(40, 53%, 100%, 0.75)",3,"hsl(40, 53%, 100%)"],"text-halo-width":1.25}}],"created":"2021-03-29T17:24:02.794Z","modified":"2021-03-29T17:24:12.872Z","id":"ckmuv21s85dd317s3sii3rhg7","owner":"northarrowresearch","visibility":"private","draft":false}')},280:function(e){e.exports=JSON.parse('{"version":8,"name":"Satellite Streets","metadata":{"mapbox:type":"default","mapbox:origin":"satellite-streets-v11","mapbox:sdk-support":{"android":"9.3.0","ios":"5.10.0","js":"2.0.0"},"mapbox:autocomposite":true,"mapbox:groups":{"Satellite imagery, land":{"name":"Satellite imagery, land","collapsed":false},"Road network, tunnels-case":{"name":"Road network, tunnels-case","collapsed":false},"Walking, cycling, etc., tunnels":{"name":"Walking, cycling, etc., tunnels","collapsed":false},"Road network, tunnels":{"name":"Road network, tunnels","collapsed":false},"Walking, cycling, etc., surface":{"name":"Walking, cycling, etc., surface","collapsed":false},"Road network, surface":{"name":"Road network, surface","collapsed":false},"Road network, surface-icons":{"name":"Road network, surface-icons","collapsed":false},"Walking, cycling, etc., barriers-bridges":{"name":"Walking, cycling, etc., barriers-bridges","collapsed":false},"Road network, bridges":{"name":"Road network, bridges","collapsed":false},"Transit, elevated":{"name":"Transit, elevated","collapsed":false},"Administrative boundaries, admin":{"name":"Administrative boundaries, admin","collapsed":false},"Road network, road-labels":{"name":"Road network, road-labels","collapsed":false},"Transit, ferry-aerialway-labels":{"name":"Transit, ferry-aerialway-labels","collapsed":false},"Natural features, natural-labels":{"name":"Natural features, natural-labels","collapsed":false},"Point of interest labels, poi-labels":{"name":"Point of interest labels, poi-labels","collapsed":false},"Transit, transit-labels":{"name":"Transit, transit-labels","collapsed":false},"Place labels, place-labels":{"name":"Place labels, place-labels","collapsed":false}},"mapbox:decompiler":{"id":"satellite-streets-v11","componentVersion":"9.0.0","strata":[{"id":"satellite-streets-v11","order":[["transit","built"],["satellite","land"],["road-network","tunnels-case"],["walking-cycling","tunnels"],["road-network","tunnels"],["transit","ferries"],["walking-cycling","surface"],["road-network","surface"],["transit","surface"],["road-network","surface-icons"],["walking-cycling","barriers-bridges"],["road-network","bridges"],["transit","bridges"],["road-network","traffic-and-closures"],["transit","elevated"],["admin-boundaries","admin"],["road-network","road-labels"],["walking-cycling","walking-cycling-labels"],["transit","ferry-aerialway-labels"],["natural-features","natural-labels"],["point-of-interest-labels","poi-labels"],["transit","transit-labels"],["place-labels","place-labels"]]}],"components":{"satellite":"9.0.0","road-network":"9.0.0","walking-cycling":"9.0.0","admin-boundaries":"9.0.0","natural-features":"9.0.0","point-of-interest-labels":"9.0.0","transit":"9.0.0","place-labels":"9.0.0"},"propConfig":{"satellite":{},"road-network":{"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"color-road":"hsla(0, 0%, 90%, 0.5)","color-motorway-trunk":"hsla(36, 87%, 68%, 0.7)","construction":false,"color-road-label":"hsl(0, 0%, 100%)","fadeOutRoadsOnZoom":true,"railwayCrossings":false,"polygonFeatures":false,"color-base":"hsl(0, 0%, 0%)","minorRoads":false,"turningCircles":false,"color-road-outline":"hsla(0, 1%, 10%, 0.5)"},"walking-cycling":{"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"golfHoleLabelLine":false,"color-road":"hsla(0, 0%, 90%, 0.5)","color-greenspace":"hsl(94, 100%, 14%)","walkingCyclingPisteBackground":false,"color-road-label":"hsl(0, 0%, 100%)","color-greenspace-label":"hsl(94, 100%, 74%)","poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","pedestrianPolygonFeatures":false,"color-road-outline":"hsla(0, 1%, 10%, 0.5)","labels":false},"admin-boundaries":{"admin0Width":1.5,"color-base":"hsl(0, 0%, 0%)","color-place-label":"hsl(0, 0%, 100%)","color-admin-boundary":"hsl(0, 0%, 0%)"},"natural-features":{"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","color-water":"hsl(196, 50%, 50%)","color-poi":"hsl(0, 0%, 100%)"},"point-of-interest-labels":{"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","color-poi":"hsl(0, 0%, 100%)","color-greenspace":"hsl(94, 100%, 14%)","color-greenspace-label":"hsl(94, 100%, 74%)","color-hospital":"hsl(0, 0%, 100%)","color-school":"hsl(0, 0%, 100%)"},"transit":{"color-airport":"hsl(0, 0%, 100%)","matchLabelAndIcon":false,"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"aeroways":false,"color-transit":"hsl(0, 0%, 100%)","color-road":"hsla(0, 0%, 90%, 0.5)","color-water":"hsl(196, 50%, 50%)","color-road-label":"hsl(0, 0%, 100%)","railways":false,"ferries":false,"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","color-road-outline":"hsla(0, 1%, 10%, 0.5)"},"place-labels":{"settlementsMinorFont":["DIN Pro Medium","Arial Unicode MS Regular"],"settlementSubdivisionsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"color-base":"hsl(0, 0%, 0%)","color-place-label":"hsl(0, 0%, 100%)"}}}},"center":[-118.4106,33.750013],"zoom":13,"sources":{"mapbox://mapbox.satellite":{"url":"mapbox://mapbox.satellite","type":"raster","tileSize":256},"mapbox://mapbox.mapbox-traffic-v1":{"url":"mapbox://mapbox.mapbox-traffic-v1","type":"vector"},"composite":{"url":"mapbox://mapbox.mapbox-streets-v8","type":"vector"}},"sprite":"mapbox://sprites/northarrowresearch/ckmuw9x2e5f0417pe3vy7y0cz/55jsegcrpjhdm8ibxtin56tly","glyphs":"mapbox://fonts/northarrowresearch/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","metadata":{"mapbox:featureComponent":"satellite","mapbox:group":"Satellite imagery, land"},"layout":{},"paint":{"background-color":"hsl(222, 56%, 4%)"}},{"id":"satellite","type":"raster","metadata":{"mapbox:featureComponent":"satellite","mapbox:group":"Satellite imagery, land"},"source":"mapbox://mapbox.satellite","layout":{},"paint":{}},{"id":"tunnel-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 0%, 0%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0],"line-dasharray":[3,3]}},{"id":"tunnel-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsla(0, 0%, 0%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"tunnel-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 0%, 90%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["!=",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]]}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 78%, 0.7)","hsla(46, 77%, 78%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"tunnel-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","street","street_limited","tertiary"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"tunnel-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 78%, 0.7)","hsla(46, 77%, 78%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"road-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,0.5,14,1,15,1,18,4],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"road-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-street-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-street-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,0.75,18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-primary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":7,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-street","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-primary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":6,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"road-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["step",["zoom"],["match",["get","class"],"motorway","hsla(26, 87%, 62%, 0.7)","hsla(0, 0%, 90%, 0.5)"],6,["match",["get","class"],"motorway","hsla(26, 87%, 62%, 0.7)","hsla(46, 80%, 60%, 0.7)"],9,["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-icons"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","oneway"],"true"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"bridge-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["==",["geometry-type"],"LineString"],["!=",["get","type"],"steps"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"bridge-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"bridge-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"bridge-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-major-link-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-major-link-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"aerialway","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, elevated"},"source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsla(0, 0%, 25%, 0.5)","line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"admin-1-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":7,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"bevel"},"paint":{"line-color":["interpolate",["linear"],["zoom"],8,"hsl(0, 0%, 14%)",16,"hsl(0, 0%, 30%)"],"line-width":["interpolate",["linear"],["zoom"],7,3.75,12,5.5],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,0.75],"line-dasharray":[1,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-0-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,5.25,10,12],"line-color":["interpolate",["linear"],["zoom"],6,"hsl(0, 0%, 14%)",8,"hsl(0, 0%, 30%)"],"line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,3]}},{"id":"admin-1-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":2,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(0, 0%, 0%)",7,"hsl(0, 0%, 5%)"]}},{"id":"admin-0-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":"hsl(0, 0%, 0%)","line-width":["interpolate",["linear"],["zoom"],3,0.75,10,3],"line-dasharray":[10,0]}},{"id":"admin-0-boundary-disputed","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(0, 0%, 0%)","line-width":["interpolate",["linear"],["zoom"],3,0.75,10,3],"line-dasharray":["step",["zoom"],["literal",[3.25,3.25]],6,["literal",[2.5,2.5]],7,["literal",[2,2.25]],8,["literal",[1.75,2]]]}},{"id":"road-label","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":10,"filter":["step",["zoom"],["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],true,false],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","street","street_limited"],true,false],15,["match",["get","class"],["path","pedestrian","golf","ferry","aerialway","track","service"],false,true]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],10,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited"],9,6.5],18,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],16,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited"],14,13]],"text-max-angle":30,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(0, 0%, 100%)","text-halo-color":["match",["get","class"],["motorway","trunk"],"hsla(0, 5%, 0%, 0.75)","hsl(0, 5%, 0%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"road-intersection","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","class"],"intersection"],["has","name"]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"icon-image":"intersection","icon-text-fit":"both","icon-text-fit-padding":[1,2,1,2],"text-size":["interpolate",["exponential",1.2],["zoom"],15,9,18,12],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(230, 57%, 64%)"}},{"id":"road-number-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":6,"filter":["all",["has","reflen"],["<=",["get","reflen"],6],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,[">",["get","len"],1000],14,true]],"layout":{"text-size":9,"icon-image":["concat",["get","shield"],"-",["to-string",["get","reflen"]]],"icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":["interpolate",["linear"],["zoom"],11,150,14,200],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"symbol-placement":["step",["zoom"],"point",11,"line"],"text-rotation-alignment":"viewport","text-field":["get","ref"],"text-letter-spacing":0.05},"paint":{"text-color":["match",["get","shield_text_color"],"white","hsl(0, 0%, 100%)","yellow","hsl(50, 100%, 70%)","orange","hsl(25, 100%, 75%)","blue","hsl(230, 57%, 44%)","hsl(230, 18%, 13%)"]}},{"id":"road-exit-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"motorway_junction","minzoom":14,"filter":["all",["has","reflen"],["<=",["get","reflen"],9]],"layout":{"text-field":["get","ref"],"text-size":9,"icon-image":["concat","motorway-exit-",["to-string",["get","reflen"]]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(0, 0%, 100%)","text-translate":[0,0]}},{"id":"ferry-aerialway-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, ferry-aerialway-labels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["match",["get","class"],"aerialway",true,false],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,6.5,18,13],"text-max-angle":30,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":["match",["get","class"],"ferry","hsl(196, 18%, 86%)","hsl(0, 0%, 100%)"],"text-halo-color":["match",["get","class"],"ferry","hsl(196, 50%, 50%)","hsl(0, 5%, 0%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"waterway-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":13,"filter":["all",["match",["get","class"],["canal","river","stream"],["match",["get","worldview"],["all","US"],true,false],["disputed_canal","disputed_river","disputed_stream"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"symbol-spacing":["interpolate",["linear",1],["zoom"],15,250,17,400],"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":"hsl(196, 18%, 90%)"}},{"id":"natural-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["glacier","landform"],["match",["get","worldview"],["all","US"],true,false],["disputed_glacier","disputed_landform"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"text-max-angle":30,"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"symbol-placement":"line-center","text-pitch-alignment":"viewport"},"paint":{"text-halo-width":0.5,"text-halo-color":"hsl(0, 5%, 0%)","text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(0, 0%, 100%)",5,"hsl(0, 0%, 100%)"],17,["step",["get","sizerank"],"hsl(0, 0%, 100%)",13,"hsl(0, 0%, 100%)"]]}},{"id":"natural-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["dock","glacier","landform","water_feature","wetland"],["match",["get","worldview"],["all","US"],true,false],["disputed_dock","disputed_glacier","disputed_landform","disputed_water_feature","disputed_wetland"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(0, 0%, 100%)",5,"hsl(0, 0%, 100%)"],17,["step",["get","sizerank"],"hsl(0, 0%, 100%)",13,"hsl(0, 0%, 100%)"]]}},{"id":"water-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,18,12,12],10,["step",["get","sizerank"],15,9,12],18,["step",["get","sizerank"],15,9,14]],"text-max-angle":30,"text-letter-spacing":["match",["get","class"],"ocean",0.25,["sea","bay"],0.15,0],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(196, 46%, 70%)","hsl(196, 18%, 90%)"]}},{"id":"water-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"]],"layout":{"text-line-height":1.3,"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,15,12,12],10,["step",["get","sizerank"],15,9,12]],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":["match",["get","class"],"ocean",0.25,["bay","sea"],0.15,0.01],"text-max-width":["match",["get","class"],"ocean",4,"sea",5,["bay","water"],7,10]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(196, 46%, 70%)","hsl(196, 18%, 90%)"]}},{"id":"poi-label","type":"symbol","metadata":{"mapbox:featureComponent":"point-of-interest-labels","mapbox:group":"Point of interest labels, poi-labels"},"source":"composite","source-layer":"poi_label","minzoom":6,"filter":["<=",["get","filterrank"],["+",["step",["zoom"],0,16,1,17,2],3]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["case",["has","maki_beta"],["image",["concat",["get","maki_beta"],"-11"]],["image",["concat",["get","maki"],"-11"]]],15,["case",["has","maki_beta"],["image",["concat",["get","maki_beta"],"-15"]],["image",["concat",["get","maki"],"-15"]]]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":["match",["get","class"],"park_like","hsl(94, 100%, 0%)","medical","hsl(0, 5%, 3%)","hsl(0, 5%, 0%)"],"text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(94, 100%, 84%)","hsl(0, 0%, 100%)"],5,["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(94, 100%, 73%)","hsl(0, 0%, 100%)"]],17,["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(94, 100%, 84%)","hsl(0, 0%, 100%)"],13,["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(94, 100%, 73%)","hsl(0, 0%, 100%)"]]]}},{"id":"transit-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"transit_stop_label","minzoom":12,"filter":["step",["zoom"],["all",["match",["get","mode"],"rail",true,"metro_rail",true,false],["!=",["get","stop_type"],"entrance"]],15,["all",["match",["get","mode"],"rail",true,"metro_rail",true,"light_rail",true,false],["!=",["get","stop_type"],"entrance"]],16,["all",["match",["get","mode"],"ferry",false,"bus",false,true],["!=",["get","stop_type"],"entrance"]],17,["all",["match",["get","mode"],"ferry",false,true],["!=",["get","stop_type"],"entrance"]],19,["match",["get","mode"],"ferry",false,true]],"layout":{"text-size":12,"icon-image":["get","network"],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-justify":["match",["get","stop_type"],"entrance","left","center"],"text-offset":["match",["get","stop_type"],"entrance",["literal",[1,0]],["literal",[0,0.8]]],"text-anchor":["match",["get","stop_type"],"entrance","left","top"],"text-field":["step",["zoom"],"",14,["match",["get","mode"],["rail","metro_rail"],["coalesce",["get","name_en"],["get","name"]],""],16,["match",["get","mode"],["bus","bicycle"],"",["coalesce",["get","name_en"],["get","name"]]],18,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":["match",["get","stop_type"],"entrance",15,9]},"paint":{"text-halo-color":"hsl(0, 5%, 0%)","text-color":"hsl(0, 0%, 100%)","text-halo-blur":0.5,"text-halo-width":0.5}},{"id":"airport-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"airport_label","minzoom":8,"filter":["match",["get","class"],["military","civil"],["match",["get","worldview"],["all","US"],true,false],["disputed_military","disputed_civil"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-line-height":1.1,"text-size":["step",["get","sizerank"],18,9,12],"icon-image":["step",["get","sizerank"],["concat",["get","maki"],"-15"],9,["concat",["get","maki"],"-11"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":[0,0.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":["step",["get","sizerank"],["coalesce",["get","name_en"],["get","name"]],15,["get","ref"]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"hsl(0, 0%, 100%)","text-halo-color":"hsl(0, 20%, 3%)","text-halo-width":1}},{"id":"settlement-subdivision-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":15,"filter":["all",["match",["get","class"],"settlement_subdivision",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement_subdivision",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["<=",["get","filterrank"],4]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-transform":"uppercase","text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-letter-spacing":["match",["get","type"],"suburb",0.15,0.1],"text-max-width":7,"text-padding":3,"text-size":["interpolate",["cubic-bezier",0.5,0,1,1],["zoom"],11,["match",["get","type"],"suburb",11,10.5],15,["match",["get","type"],"suburb",15,14]]},"paint":{"text-halo-color":"hsla(0, 5%, 0%, 0.75)","text-halo-width":1,"text-color":"hsl(0, 0%, 100%)","text-halo-blur":0.5}},{"id":"settlement-minor-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],true,8,[">=",["get","symbolrank"],11],10,[">=",["get","symbolrank"],12],11,[">=",["get","symbolrank"],13],12,[">=",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],12,9,11,10,10.5,12,9.5,14,8.5,16,6.5,17,4],13,["step",["get","symbolrank"],23,9,21,10,19,11,17,12,16,13,15,15,13]],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-offset":["step",["zoom"],["match",["get","capital"],2,["match",["get","text_anchor"],"bottom",["literal",[0,-0.3]],"bottom-left",["literal",[0.3,-0.1]],"left",["literal",[0.45,0.1]],"top-left",["literal",[0.3,0.1]],"top",["literal",[0,0.3]],"top-right",["literal",[-0.3,0.1]],"right",["literal",[-0.45,0]],"bottom-right",["literal",[-0.3,-0.1]],["literal",[0,-0.3]]],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1,"text-halo-blur":1}},{"id":"settlement-major-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],false,8,["<",["get","symbolrank"],11],10,["<",["get","symbolrank"],12],11,["<",["get","symbolrank"],13],12,["<",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],8,["step",["get","symbolrank"],18,9,17,10,15],15,["step",["get","symbolrank"],23,9,22,10,20,11,18,12,16,13,15,15,13]],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-offset":["step",["zoom"],["match",["get","capital"],2,["match",["get","text_anchor"],"bottom",["literal",[0,-0.3]],"bottom-left",["literal",[0.3,-0.1]],"left",["literal",[0.45,0.1]],"top-left",["literal",[0.3,0.1]],"top",["literal",[0,0.3]],"top-right",["literal",[-0.3,0.1]],"right",["literal",[-0.45,0]],"bottom-right",["literal",[-0.3,-0.1]],["literal",[0,-0.3]]],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1,"text-halo-blur":1}},{"id":"state-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["match",["get","class"],"state",["match",["get","worldview"],["all","US"],true,false],"disputed_state",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-size":["interpolate",["cubic-bezier",0.85,0.7,0.65,1],["zoom"],4,["step",["get","symbolrank"],10,6,9.5,7,9],9,["step",["get","symbolrank"],21,6,16,7,13]],"text-transform":"uppercase","text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["step",["get","symbolrank"],["coalesce",["get","name_en"],["get","name"]],5,["coalesce",["get","abbr"],["get","name_en"],["get","name"]]],5,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1}},{"id":"country-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["match",["get","class"],"country",["match",["get","worldview"],["all","US"],true,false],"disputed_country",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.7,1],["zoom"],1,["step",["get","symbolrank"],11,4,9,5,8],9,["step",["get","symbolrank"],22,4,19,5,17]],"icon-image":"","text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],7,"center"],"text-offset":["literal",[0,0]],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":6},"paint":{"icon-opacity":["step",["zoom"],["case",["has","text_anchor"],1,0],7,0],"text-color":"hsl(0, 0%, 95%)","text-halo-color":["interpolate",["linear"],["zoom"],2,"hsla(0, 5%, 0%, 0.75)",3,"hsl(0, 5%, 0%)"],"text-halo-width":1.25}}],"created":"2021-03-29T17:58:09.569Z","modified":"2021-03-29T17:58:21.965Z","id":"ckmuw9x2e5f0417pe3vy7y0cz","owner":"northarrowresearch","visibility":"private","draft":false}')},281:function(e){e.exports=JSON.parse('{"version":8,"name":"RiverscapesTopo","metadata":{"mapbox:type":"default","mapbox:origin":"outdoors-v11","mapbox:sdk-support":{"android":"10.0.0","ios":"10.0.0","js":"2.3.0"},"mapbox:autocomposite":true,"mapbox:groups":{"Terrain, terrain-labels":{"name":"Terrain, terrain-labels","collapsed":true},"Transit, transit-labels":{"name":"Transit, transit-labels","collapsed":true},"Administrative boundaries, admin":{"name":"Administrative boundaries, admin","collapsed":true},"Transit, bridges":{"name":"Transit, bridges","collapsed":true},"Terrain, surface":{"name":"Terrain, surface","collapsed":true},"Buildings, building-labels":{"name":"Buildings, building-labels","collapsed":true},"Transit, surface":{"name":"Transit, surface","collapsed":true},"Road network, bridges":{"name":"Road network, bridges","collapsed":true},"Land, water, & sky, water":{"name":"Land, water, & sky, water","collapsed":true},"Road network, tunnels":{"name":"Road network, tunnels","collapsed":true},"Road network, road-labels":{"name":"Road network, road-labels","collapsed":true},"Buildings, built":{"name":"Buildings, built","collapsed":true},"Natural features, natural-labels":{"name":"Natural features, natural-labels","collapsed":true},"Road network, surface":{"name":"Road network, surface","collapsed":true},"Land, water, & sky, built":{"name":"Land, water, & sky, built","collapsed":true},"Walking, cycling, etc., barriers-bridges":{"name":"Walking, cycling, etc., barriers-bridges","collapsed":true},"Place labels, place-labels":{"name":"Place labels, place-labels","collapsed":true},"Transit, ferries":{"name":"Transit, ferries","collapsed":true},"Transit, elevated":{"name":"Transit, elevated","collapsed":true},"Point of interest labels, poi-labels":{"name":"Point of interest labels, poi-labels","collapsed":true},"Walking, cycling, etc., tunnels":{"name":"Walking, cycling, etc., tunnels","collapsed":true},"Terrain, land":{"name":"Terrain, land","collapsed":false},"Road network, tunnels-case":{"name":"Road network, tunnels-case","collapsed":true},"Walking, cycling, etc., walking-cycling-labels":{"name":"Walking, cycling, etc., walking-cycling-labels","collapsed":true},"Walking, cycling, etc., surface":{"name":"Walking, cycling, etc., surface","collapsed":true},"Transit, built":{"name":"Transit, built","collapsed":true},"Road network, surface-icons":{"name":"Road network, surface-icons","collapsed":true},"Land, water, & sky, land":{"name":"Land, water, & sky, land","collapsed":true},"Transit, ferry-aerialway-labels":{"name":"Transit, ferry-aerialway-labels","collapsed":true}},"mapbox:decompiler":{"id":"ckusifw413fsi17rl383dxxl1","componentVersion":"11.1.1","strata":[{"id":"outdoors-v11","order":[["land-and-water","land"],["land-and-water","water"],"mapbox-mapbox-terrain-dem-v1",["terrain","land"],["land-and-water","built"],["transit","built"],["buildings","built"],["road-network","tunnels-case"],["walking-cycling","tunnels"],["road-network","tunnels"],["terrain","surface"],["transit","ferries"],["walking-cycling","surface"],["road-network","surface"],["transit","surface"],["road-network","surface-icons"],["walking-cycling","barriers-bridges"],["road-network","bridges"],["transit","bridges"],["road-network","traffic-and-closures"],["buildings","extruded"],["transit","elevated"],["admin-boundaries","admin"],["terrain","terrain-labels"],["buildings","building-labels"],["road-network","road-labels"],["walking-cycling","walking-cycling-labels"],["transit","ferry-aerialway-labels"],["natural-features","natural-labels"],["point-of-interest-labels","poi-labels"],["transit","transit-labels"],["place-labels","place-labels"],["land-and-water","sky"]]}],"overrides":{"terrain":{"contour-line":{"paint":{"line-color":"hsla(30, 43%, 45%, 0.57)"}}}},"components":{"road-network":"11.1.1","natural-features":"11.1.1","place-labels":"11.1.1","admin-boundaries":"11.1.1","point-of-interest-labels":"11.1.1","walking-cycling":"11.1.1","transit":"11.1.1","terrain":"11.1.1","land-and-water":"11.1.1","buildings":"11.1.1"},"propConfig":{"road-network":{"colorBase":"hsl(35, 11%, 95%)","colorRoad":"hsl(0, 0%, 100%)","colorRoadOutline":"hsl(230, 26%, 88%)","colorMotorwayTrunk":"hsl(36, 54%, 68%)","colorRoadLabel":"hsl(0,0%, 0%)","colorPathOutline":"hsl(50, 100%, 40%)","labelStyle":"Outdoors","iconSaturation":-0.5},"natural-features":{"colorBase":"hsl(35, 11%, 95%)","colorWater":"hsl(196, 80%, 70%)","colorPoi":"hsl(26, 35%, 35%)","density":4},"place-labels":{"colorBase":"hsl(35, 11%, 95%)","colorPlaceLabel":"hsl(230, 29%, 25%)"},"admin-boundaries":{"colorBase":"hsl(35, 11%, 95%)","colorPlaceLabel":"hsl(230, 29%, 25%)"},"point-of-interest-labels":{"educationDensity":2,"commercialServicesDensity":2,"generalDensity":2,"sportAndLeisureDensity":4,"colorGreenspace":"hsl(99, 57%, 75%)","artsAndEntertainmentDensity":2,"parkLikeDensity":4,"colorPoi":"hsl(26, 35%, 35%)","foodAndDrinkDensity":2,"historicDensity":3,"placeLikeDensity":2,"lodgingDensity":2,"colorGreenspaceLabel":"hsl(100, 99%, 20%)","industrialDensity":2,"storeLikeDensity":2,"landmarkDensity":3,"motoristDensity":3,"colorBase":"hsl(35, 11%, 95%)","buildingDensity":2,"controlDensityByClass":true,"colorSchool":"hsl(50, 100%, 43%)","medicalDensity":3,"religionDensity":2,"foodAndDrinkStoresDensity":3,"colorHospital":"hsl(340, 37%, 52%)","publicFacilitiesDensity":2,"visitorAmenitiesDensity":4},"walking-cycling":{"walkingPathDashPattern":"Long dash","controlDashStyle":true,"colorRoad":"hsl(0, 0%, 100%)","colorGreenspace":"hsl(99, 57%, 75%)","colorGreenspaceLabel":"hsl(100, 99%, 20%)","colorRoadLabel":"hsl(0,0%, 0%)","colorBase":"hsl(35, 11%, 95%)","gatesFencesHedges":true,"trailDashPattern":"Short dash","colorPathOutline":"hsl(50, 100%, 40%)","cyclewayPisteDashPattern":"Solid","colorRoadOutline":"hsl(230, 26%, 88%)"},"transit":{"colorRoad":"hsl(0, 0%, 100%)","aerialwayStyle":true,"colorAirport":"hsl(230, 48%, 44%)","iconSaturation":-0.5,"colorTransit":"hsl(230, 48%, 50%)","colorRoadLabel":"hsl(0,0%, 0%)","colorBase":"hsl(35, 11%, 95%)","colorWater":"hsl(196, 80%, 70%)","colorRoadOutline":"hsl(230, 26%, 88%)"},"terrain":{"colorBase":"hsl(35, 11%, 95%)","colorGreenspace":"hsl(99, 57%, 75%)","colorGreenspaceLabel":"hsl(100, 99%, 20%)","colorPoi":"hsl(26, 35%, 35%)","contours":true,"cliffs":true,"hillshadeStyle":"Outdoors","hillshade":false},"land-and-water":{"colorBase":"hsl(35, 11%, 95%)","colorWater":"hsl(196, 80%, 70%)","colorGreenspace":"hsl(99, 57%, 75%)","colorHospital":"hsl(340, 37%, 52%)","colorSchool":"hsl(50, 100%, 43%)","colorAirport":"hsl(230, 48%, 44%)","transitionLandOnZoom":true,"landStyle":"Outdoors"},"buildings":{"colorBase":"hsl(35, 11%, 95%)","colorUnderground":"hsl(260, 67%, 80%)","underground":true}}},"mapbox:uiParadigm":"layers"},"center":[-113.70234541580527,37.21165015031157],"zoom":14.497954352167346,"bearing":0,"pitch":0,"sources":{"mapbox://mapbox.mapbox-terrain-dem-v1":{"url":"mapbox://mapbox.mapbox-terrain-dem-v1","type":"raster-dem","tileSize":256},"composite":{"url":"mapbox://mapbox.mapbox-streets-v8,mapbox.mapbox-terrain-v2","type":"vector"}},"sprite":"mapbox://sprites/northarrowresearch/ckusifw413fsi17rl383dxxl1/b63t50jtam7g6j1ltm44d6op0","glyphs":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf","layers":[{"id":"land","type":"background","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"layout":{},"paint":{"background-color":["interpolate",["linear"],["zoom"],11,"hsl(35, 25%, 93%)",13,"hsl(35, 9%, 91%)"]}},{"id":"landcover-outdoors","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landcover","maxzoom":12,"layout":{},"paint":{"fill-color":["match",["get","class"],"snow","hsl(35, 11%, 100%)","hsl(81, 37%, 83%)"],"fill-opacity":["interpolate",["exponential",1.5],["zoom"],2,0.3,12,0],"fill-antialias":false}},{"id":"national-park","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["==",["get","class"],"national_park"],"layout":{},"paint":{"fill-color":"hsl(99, 57%, 75%)","fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,0.75,10,0.35]}},{"id":"national-park_tint-band","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse_overlay","minzoom":9,"filter":["==",["get","class"],"national_park"],"layout":{"line-cap":"round"},"paint":{"line-color":"hsl(99, 58%, 70%)","line-width":["interpolate",["exponential",1.4],["zoom"],9,1,14,8],"line-offset":["interpolate",["exponential",1.4],["zoom"],9,0,14,-2.5],"line-opacity":["interpolate",["linear"],["zoom"],9,0,10,0.75],"line-blur":3}},{"id":"landuse","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse","minzoom":5,"filter":["match",["get","class"],["park","airport","glacier","pitch","sand","facility"],true,["agriculture","wood","grass","scrub"],true,"cemetery",true,"school",true,"hospital",true,false],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,["match",["get","class"],"park",["match",["get","type"],["garden","playground","zoo"],"hsl(99, 35%, 73%)","hsl(99, 57%, 75%)"],"airport","hsl(230, 12%, 92%)","cemetery","hsl(81, 26%, 81%)","glacier","hsl(196, 60%, 85%)","hospital","hsl(340, 21%, 88%)","pitch","hsl(99, 58%, 70%)","sand","hsl(65, 46%, 89%)","school","hsl(50, 46%, 82%)","agriculture","hsl(81, 26%, 81%)",["wood","grass","scrub"],"hsl(81, 25%, 66%)","hsl(35, 13%, 86%)"],16,["match",["get","class"],"park",["match",["get","type"],["garden","playground","zoo"],"hsl(99, 35%, 73%)","hsl(99, 57%, 75%)"],"airport","hsl(230, 26%, 90%)","cemetery","hsl(81, 26%, 81%)","glacier","hsl(196, 60%, 85%)","hospital","hsl(340, 32%, 90%)","pitch","hsl(99, 58%, 70%)","sand","hsl(65, 46%, 89%)","school","hsl(50, 46%, 82%)","agriculture","hsl(81, 26%, 81%)",["wood","grass","scrub"],"hsl(81, 25%, 66%)","hsl(35, 13%, 86%)"]],"fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,["match",["get","class"],["agriculture","wood","grass","scrub"],0,"glacier",0.5,1],15,["match",["get","class"],"agriculture",0.75,["wood","glacier"],0.5,"grass",0.4,"scrub",0.2,1]]}},{"id":"pitch-outline","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, land"},"source":"composite","source-layer":"landuse","minzoom":15,"filter":["==",["get","class"],"pitch"],"layout":{},"paint":{"line-color":"hsl(81, 33%, 86%)"}},{"id":"waterway-shadow","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"waterway","minzoom":8,"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"hsl(215, 84%, 69%)","line-width":["interpolate",["exponential",1.3],["zoom"],9,["match",["get","class"],["canal","river"],0.1,0],20,["match",["get","class"],["canal","river"],8,3]],"line-translate":["interpolate",["exponential",1.2],["zoom"],7,["literal",[0,0]],16,["literal",[-1,-1]]],"line-translate-anchor":"viewport","line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water-shadow","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(215, 84%, 69%)","fill-translate":["interpolate",["exponential",1.2],["zoom"],7,["literal",[0,0]],16,["literal",[-1,-1]]],"fill-translate-anchor":"viewport"}},{"id":"waterway","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"waterway","minzoom":8,"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"hsl(196, 80%, 70%)","line-width":["interpolate",["exponential",1.3],["zoom"],9,["match",["get","class"],["canal","river"],0.1,0],20,["match",["get","class"],["canal","river"],8,3]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(196, 80%, 70%)"}},{"id":"wetland","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["match",["get","class"],["wetland","wetland_noveg"],true,false],"paint":{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":["interpolate",["linear"],["zoom"],10,0.25,10.5,0.15]}},{"id":"wetland-pattern","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, water"},"source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["match",["get","class"],["wetland","wetland_noveg"],true,false],"paint":{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":["interpolate",["linear"],["zoom"],10,0,10.5,1],"fill-pattern":"wetland","fill-translate-anchor":"viewport"}},{"id":"mapbox-mapbox-terrain-dem-v1","type":"hillshade","source":"mapbox://mapbox.mapbox-terrain-dem-v1","layout":{},"paint":{"hillshade-shadow-color":"hsla(0, 0%, 0%, 0.5)","hillshade-highlight-color":"hsl(0, 0%, 100%)","hillshade-accent-color":"hsla(0, 0%, 0%, 0.73)"}},{"id":"contour-line","type":"line","metadata":{"mapbox:featureComponent":"terrain","mapbox:group":"Terrain, land"},"source":"composite","source-layer":"contour","minzoom":11,"filter":["!=",["get","index"],-1],"layout":{},"paint":{"line-opacity":["interpolate",["linear"],["zoom"],11,["match",["get","index"],[1,2],0.15,0.25],12,["match",["get","index"],[1,2],0.3,0.5]],"line-color":"hsla(30, 43%, 45%, 0.7)","line-width":["interpolate",["linear"],["zoom"],13,["match",["get","index"],[1,2],0.5,0.6],16,["match",["get","index"],[1,2],0.8,1.2]],"line-offset":["interpolate",["linear"],["zoom"],13,["match",["get","index"],[1,2],1,0.6],16,["match",["get","index"],[1,2],1.6,1.2]]}},{"id":"land-structure-polygon","type":"fill","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, built"},"source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"Polygon"],["==",["get","class"],"land"]],"layout":{},"paint":{"fill-color":"hsl(35, 9%, 91%)"}},{"id":"land-structure-line","type":"line","metadata":{"mapbox:featureComponent":"land-and-water","mapbox:group":"Land, water, & sky, built"},"source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["==",["get","class"],"land"]],"layout":{"line-cap":"round"},"paint":{"line-width":["interpolate",["exponential",1.99],["zoom"],14,0.75,20,40],"line-color":"hsl(35, 9%, 91%)"}},{"id":"aeroway-polygon","type":"fill","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, built"},"source":"composite","source-layer":"aeroway","minzoom":11,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","type"],["runway","taxiway","helipad"],true,false]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(230, 20%, 83%)",16,"hsl(230, 36%, 85%)"],"fill-opacity":["interpolate",["linear"],["zoom"],11,0,11.5,1]}},{"id":"aeroway-line","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, built"},"source":"composite","source-layer":"aeroway","minzoom":9,"filter":["==",["geometry-type"],"LineString"],"layout":{},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(230, 20%, 83%)",16,"hsl(230, 36%, 85%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],9,["match",["get","type"],"runway",1,0.5],18,["match",["get","type"],"runway",80,20]]}},{"id":"building-outline","type":"line","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, built"},"source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"line-color":"hsl(35, 5%, 81%)","line-width":["interpolate",["exponential",1.5],["zoom"],15,0.75,20,3],"line-opacity":["interpolate",["linear"],["zoom"],15,0,16,1]}},{"id":"building","type":"fill","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, built"},"source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(35, 8%, 87%)",16,"hsl(35, 4%, 87%)"],"fill-opacity":["interpolate",["linear"],["zoom"],15,0,16,1],"fill-outline-color":"hsl(35, 5%, 81%)"}},{"id":"building-underground","type":"fill","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, built"},"source":"composite","source-layer":"building","minzoom":15,"filter":["all",["==",["get","underground"],"true"],["==",["geometry-type"],"Polygon"]],"layout":{},"paint":{"fill-color":"hsl(260, 67%, 80%)","fill-opacity":["interpolate",["linear"],["zoom"],15,0,16,0.5]}},{"id":"tunnel-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"tunnel-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 19%, 75%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["step",["zoom"],0,14,1],"line-dasharray":[3,3]}},{"id":"tunnel-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsl(230, 19%, 75%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-dasharray":[3,3]}},{"id":"tunnel-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3]}},{"id":"tunnel-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-dasharray":[3,3]}},{"id":"tunnel-construction","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"construction"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(230, 26%, 88%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"tunnel-path-trail","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["match",["get","type"],["hiking","mountain_bike","trail"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(35, 23%, 95%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"tunnel-path-cycleway-piste","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(35, 23%, 95%)","line-dasharray":[10,0]}},{"id":"tunnel-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["!=",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(35, 23%, 95%)","line-dasharray":["step",["zoom"],["literal",[5,0.5]],15,["literal",[4,0.5]],16,["literal",[4,0.45]]]}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(35, 23%, 95%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 74%, 78%)","hsl(46, 64%, 78%)"]}},{"id":"tunnel-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(35, 13%, 94%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"tunnel-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsl(0, 0%, 100%)"}},{"id":"tunnel-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","street","street_limited","tertiary"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","service","track"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"tunnel-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 74%, 78%)","hsl(46, 64%, 78%)"]}},{"id":"tunnel-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",18,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"cliff","type":"line","metadata":{"mapbox:featureComponent":"terrain","mapbox:group":"Terrain, surface"},"source":"composite","source-layer":"structure","minzoom":15,"filter":["==",["get","class"],"cliff"],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-opacity":["interpolate",["linear"],["zoom"],15,0,15.25,1],"line-width":10,"line-pattern":"cliff"}},{"id":"ferry","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, ferries"},"source":"composite","source-layer":"road","minzoom":8,"filter":["==",["get","type"],"ferry"],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(205, 73%, 63%)",17,"hsl(230, 73%, 63%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1],"line-dasharray":["step",["zoom"],["literal",[1,0]],13,["literal",[12,4]]]}},{"id":"ferry-auto","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, ferries"},"source":"composite","source-layer":"road","filter":["==",["get","type"],"ferry_auto"],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(205, 73%, 63%)",17,"hsl(230, 73%, 63%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"road-path-bg","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2,18,7],"line-color":["match",["get","type"],"piste","hsl(230, 100%, 60%)",["mountain_bike","hiking","trail","cycleway","footway","path","bridleway"],"hsl(50, 100%, 40%)","hsl(230, 17%, 82%)"]}},{"id":"road-steps-bg","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2,17,4.6,18,7],"line-opacity":0.75,"line-color":"hsl(50, 100%, 40%)"}},{"id":"road-pedestrian-case","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":"hsl(230, 26%, 88%)"}},{"id":"road-path-trail","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["match",["get","type"],["hiking","mountain_bike","trail"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"road-path-cycleway-piste","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":[10,0]}},{"id":"road-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,0.5,14,1,15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[5,0.5]],15,["literal",[4,0.5]],16,["literal",[4,0.45]]]}},{"id":"road-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-pedestrian-polygon-fill","type":"fill","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["path","pedestrian"],true,false],["match",["get","structure"],["none","ford"],true,false],["case",["has","layer"],[">=",["get","layer"],0],true]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],16,"hsl(230, 16%, 94%)",16.25,"hsl(230, 52%, 98%)"],"fill-outline-color":"hsl(230, 26%, 88%)"}},{"id":"road-pedestrian-polygon-pattern","type":"fill","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["path","pedestrian"],true,false],["match",["get","structure"],["none","ford"],true,false],["case",["has","layer"],[">=",["get","layer"],0],true]],"layout":{},"paint":{"fill-pattern":"pedestrian-polygon","fill-opacity":["interpolate",["linear"],["zoom"],16,0,16.25,1]}},{"id":"golf-hole-line","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"golf"],"layout":{},"paint":{"line-color":"hsl(99, 27%, 70%)"}},{"id":"turning-feature-outline","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["geometry-type"],"Point"],["match",["get","class"],["turning_circle","turning_loop"],true,false]],"layout":{"icon-image":"turning-circle-outline","icon-size":["interpolate",["exponential",1.5],["zoom"],14,0.122,18,0.969,20,1],"icon-allow-overlap":true,"icon-ignore-placement":true,"icon-padding":0,"icon-rotation-alignment":"map"},"paint":{}},{"id":"road-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],["==",["get","class"],"track"],14,["match",["get","class"],["track","secondary_link","tertiary_link","service"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"road-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],["==",["get","class"],"track"],14,["match",["get","class"],["track","secondary_link","tertiary_link","service"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["match",["get","class"],"track","hsl(50, 100%, 40%)","hsl(230, 26%, 88%)"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-street-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"road-street-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 26%, 88%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,0.75,18,2],"line-color":"hsl(230, 26%, 88%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"road-primary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":7,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 26%, 88%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"road-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["step",["zoom"],0,11,1]}},{"id":"road-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["step",["zoom"],["match",["get","class"],"motorway",1,0],6,1]}},{"id":"road-construction","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","class"],"construction"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"road-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"road-polygon","type":"fill","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["primary","secondary","tertiary","primary_link","secondary_link","tertiary_link","trunk","trunk_link","street","street_limited","track","service"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"hsl(230, 26%, 88%)"}},{"id":"road-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],["==",["get","class"],"track"],14,["match",["get","class"],["track","secondary_link","tertiary_link","service"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-street","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"street_limited","hsl(35, 13%, 94%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-color":"hsl(0, 0%, 100%)"}},{"id":"road-primary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":6,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsl(0, 0%, 100%)"}},{"id":"road-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","service","track"],true,false]],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"road-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["step",["zoom"],["match",["get","class"],"motorway","hsl(26, 74%, 62%)","hsl(0, 0%, 100%)"],6,["match",["get","class"],"motorway","hsl(26, 74%, 62%)","hsl(46, 67%, 60%)"],9,["match",["get","class"],"motorway","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]]}},{"id":"road-rail","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["match",["get","class"],["major_rail","minor_rail"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 16%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"road-rail-tracks","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["match",["get","class"],["major_rail","minor_rail"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 16%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,4,20,8],"line-dasharray":[0.1,15],"line-opacity":["interpolate",["linear"],["zoom"],13.75,0,14,1]}},{"id":"level-crossing","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-icons"},"source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"level_crossing"],"layout":{"icon-image":"level-crossing","icon-allow-overlap":true},"paint":{}},{"id":"road-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-icons"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","oneway"],"true"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",18,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"turning-feature","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-icons"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["geometry-type"],"Point"],["match",["get","class"],["turning_circle","turning_loop"],true,false]],"layout":{"icon-image":"turning-circle","icon-size":["interpolate",["exponential",1.5],["zoom"],14,0.095,18,1],"icon-allow-overlap":true,"icon-ignore-placement":true,"icon-padding":0,"icon-rotation-alignment":"map"},"paint":{}},{"id":"gate-fence-hedge","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"structure","minzoom":16,"filter":["match",["get","class"],["gate","fence","hedge"],true,false],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":["match",["get","class"],"hedge","hsl(99, 34%, 70%)","hsl(35, 16%, 77%)"],"line-width":["interpolate",["linear"],["zoom"],16,1,20,3],"line-opacity":["match",["get","class"],"gate",0.5,1],"line-dasharray":[1,2,5,2,1,2]}},{"id":"bridge-path-bg","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2,18,7],"line-color":["match",["get","type"],"piste","hsl(230, 100%, 60%)",["mountain_bike","hiking","trail","cycleway","footway","path","bridleway"],"hsl(50, 100%, 40%)","hsl(230, 17%, 82%)"]}},{"id":"bridge-steps-bg","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2,17,4.6,18,7],"line-opacity":0.75,"line-color":"hsl(50, 100%, 40%)"}},{"id":"bridge-pedestrian-case","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":"hsl(230, 26%, 88%)"}},{"id":"bridge-path-trail","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["match",["get","type"],["hiking","mountain_bike","trail"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[4,0.3]],15,["literal",[1.75,0.3]],16,["literal",[1,0.3]],17,["literal",[1,0.25]]]}},{"id":"bridge-path-cycleway-piste","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":[10,0]}},{"id":"bridge-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["==",["geometry-type"],"LineString"],["!=",["get","type"],"steps"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[5,0.5]],15,["literal",[4,0.5]],16,["literal",[4,0.45]]]}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., barriers-bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"bridge-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["match",["get","class"],"track","hsl(50, 100%, 40%)","hsl(230, 26%, 88%)"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"bridge-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsl(230, 26%, 88%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"bridge-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18]}},{"id":"bridge-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-construction","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"construction"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(230, 26%, 88%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"bridge-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link","track"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(35, 13%, 94%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"bridge-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsl(0, 0%, 100%)"}},{"id":"bridge-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","service","track"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"bridge-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-major-link-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18]}},{"id":"bridge-motorway-trunk-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 26%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-major-link-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-motorway-trunk-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 67%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":"oneway-white-small","symbol-spacing":200},"paint":{}},{"id":"bridge-rail","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["major_rail","minor_rail"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 16%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"bridge-rail-tracks","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["major_rail","minor_rail"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 16%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,4,20,8],"line-dasharray":[0.1,15],"line-opacity":["interpolate",["linear"],["zoom"],13.75,0,14,1]}},{"id":"aerialway-bg","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, elevated"},"source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(0, 0%, 100%)","line-width":["interpolate",["exponential",1.5],["zoom"],14,2.5,20,3],"line-blur":0.5}},{"id":"aerialway","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, elevated"},"source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(230, 4%, 29%)","line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"admin-1-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":7,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"bevel"},"paint":{"line-color":["interpolate",["linear"],["zoom"],8,"hsl(35, 9%, 91%)",16,"hsl(230, 49%, 91%)"],"line-width":["interpolate",["linear"],["zoom"],7,3.75,12,5.5],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,0.75],"line-dasharray":[1,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-0-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,3.5,10,8],"line-color":["interpolate",["linear"],["zoom"],6,"hsl(35, 9%, 91%)",8,"hsl(230, 49%, 91%)"],"line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,2]}},{"id":"admin-1-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":2,"filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(230, 15%, 77%)",7,"hsl(230, 8%, 62%)"]}},{"id":"admin-0-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":"hsl(230, 8%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2],"line-dasharray":[10,0]}},{"id":"admin-0-boundary-disputed","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(230, 8%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2],"line-dasharray":["step",["zoom"],["literal",[3.25,3.25]],6,["literal",[2.5,2.5]],7,["literal",[2,2.25]],8,["literal",[1.75,2]]]}},{"id":"contour-label","type":"symbol","metadata":{"mapbox:featureComponent":"terrain","mapbox:group":"Terrain, terrain-labels"},"source":"composite","source-layer":"contour","minzoom":11,"filter":["any",["==",["get","index"],10],["==",["get","index"],5]],"layout":{"text-field":["concat",["get","ele"]," m"],"symbol-placement":"line","text-pitch-alignment":"viewport","text-max-angle":25,"text-padding":5,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],15,9.5,20,12]},"paint":{"text-color":"hsl(100, 86%, 21%)","text-halo-width":1,"text-halo-color":"hsla(35, 16%, 100%, 0.5)"}},{"id":"building-number-label","type":"symbol","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, building-labels"},"source":"composite","source-layer":"housenum_label","minzoom":17,"layout":{"text-field":["get","house_num"],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-padding":4,"text-max-width":7,"text-size":9.5},"paint":{"text-color":"hsl(35, 0%, 70%)","text-halo-color":"hsl(35, 4%, 92%)","text-halo-width":0.5}},{"id":"block-number-label","type":"symbol","metadata":{"mapbox:featureComponent":"buildings","mapbox:group":"Buildings, building-labels"},"source":"composite","source-layer":"place_label","minzoom":16,"filter":["all",["==",["get","class"],"settlement_subdivision"],["==",["get","type"],"block"]],"layout":{"text-field":["get","name"],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":11},"paint":{"text-color":"hsl(35, 9%, 57%)","text-halo-color":"hsl(35, 7%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5}},{"id":"road-label-outdoors","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":10,"filter":["step",["zoom"],["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],true,false],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","street","street_limited","track"],true,false],15,["match",["get","class"],["path","pedestrian","golf","ferry","aerialway"],false,true]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],10,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited","track"],9,6.5],18,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],16,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited"],14,13]],"text-max-angle":30,"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(0,0%, 0%)","text-halo-color":["match",["get","class"],["motorway","trunk"],"hsla(35, 16%, 100%, 0.75)","hsl(35, 16%, 100%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"road-intersection","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","class"],"intersection"],["has","name"]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"icon-image":"intersection","icon-text-fit":"both","icon-text-fit-padding":[1,2,1,2],"text-size":["interpolate",["exponential",1.2],["zoom"],15,9,18,12],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(230, 36%, 64%)"}},{"id":"road-number-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":6,"filter":["all",["has","reflen"],["<=",["get","reflen"],6],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,[">",["get","len"],1000],14,true]],"layout":{"text-size":9,"icon-image":["concat",["get","shield"],"-",["to-string",["get","reflen"]]],"icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":["interpolate",["linear"],["zoom"],11,400,14,600],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"symbol-placement":["step",["zoom"],"point",11,"line"],"text-rotation-alignment":"viewport","text-field":["get","ref"],"text-letter-spacing":0.05},"paint":{"text-color":["match",["get","shield_text_color"],"white","hsl(0, 0%, 100%)","yellow","hsl(50, 63%, 70%)","orange","hsl(25, 63%, 75%)","blue","hsl(230, 36%, 44%)","hsl(230, 11%, 13%)"]}},{"id":"road-exit-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"motorway_junction","minzoom":14,"filter":["all",["has","reflen"],["<=",["get","reflen"],9]],"layout":{"text-field":["get","ref"],"text-size":9,"icon-image":["concat","motorway-exit-",["to-string",["get","reflen"]]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(0, 0%, 100%)","text-translate":[0,0]}},{"id":"path-pedestrian-label","type":"symbol","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., walking-cycling-labels"},"source":"composite","source-layer":"road","minzoom":12,"filter":["step",["zoom"],["match",["get","class"],["pedestrian"],true,false],15,["match",["get","class"],["path","pedestrian"],true,false]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],"pedestrian",9,6.5],18,["match",["get","class"],"pedestrian",14,13]],"text-max-angle":30,"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(0,0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1}},{"id":"golf-hole-label","type":"symbol","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., walking-cycling-labels"},"source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"golf"],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":12},"paint":{"text-halo-color":"hsl(99, 62%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":"hsl(100, 99%, 19%)"}},{"id":"ferry-aerialway-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, ferry-aerialway-labels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["match",["get","class"],"aerialway",true,"ferry",true,false],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,6.5,18,13],"text-max-angle":30,"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":["match",["get","class"],"ferry","hsl(196, 48%, 50%)","hsl(0,0%, 0%)"],"text-halo-color":["match",["get","class"],"ferry","hsl(196, 80%, 70%)","hsl(35, 16%, 100%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"waterway-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":13,"filter":["all",["match",["get","class"],["canal","river","stream"],["match",["get","worldview"],["all","US"],true,false],["disputed_canal","disputed_river","disputed_stream"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"symbol-spacing":["interpolate",["linear",1],["zoom"],15,250,17,400],"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":"hsl(196, 48%, 57%)"}},{"id":"natural-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["glacier","landform"],["match",["get","worldview"],["all","US"],true,false],["disputed_glacier","disputed_landform"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"],["<=",["get","filterrank"],4]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"text-max-angle":30,"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport"},"paint":{"text-halo-width":0.5,"text-halo-color":"hsl(35, 16%, 100%)","text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 30%, 45%)",5,"hsl(26, 35%, 35%)"],17,["step",["get","sizerank"],"hsl(26, 30%, 45%)",13,"hsl(26, 35%, 35%)"]]}},{"id":"natural-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["dock","glacier","landform","water_feature","wetland"],["match",["get","worldview"],["all","US"],true,false],["disputed_dock","disputed_glacier","disputed_landform","disputed_water_feature","disputed_wetland"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"],["<=",["get","filterrank"],4]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["get","maki"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(35, 16%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 30%, 45%)",5,"hsl(26, 35%, 35%)"],17,["step",["get","sizerank"],"hsl(26, 30%, 45%)",13,"hsl(26, 35%, 35%)"]]}},{"id":"water-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"LineString"]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,18,12,12],10,["step",["get","sizerank"],15,9,12],18,["step",["get","sizerank"],15,9,14]],"text-max-angle":30,"text-letter-spacing":["match",["get","class"],"ocean",0.25,["sea","bay"],0.15,0],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(196, 76%, 50%)","hsl(196, 48%, 57%)"]}},{"id":"water-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],["match",["get","worldview"],["all","US"],true,false],["disputed_bay","disputed_ocean","disputed_reservoir","disputed_sea","disputed_water"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["==",["geometry-type"],"Point"]],"layout":{"text-line-height":1.3,"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],20,6,15,12,12],10,["step",["get","sizerank"],15,9,12]],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":["match",["get","class"],"ocean",0.25,["bay","sea"],0.15,0.01],"text-max-width":["match",["get","class"],"ocean",4,"sea",5,["bay","water"],7,10]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(196, 76%, 50%)","hsl(196, 48%, 57%)"]}},{"id":"poi-label","type":"symbol","metadata":{"mapbox:featureComponent":"point-of-interest-labels","mapbox:group":"Point of interest labels, poi-labels"},"source":"composite","source-layer":"poi_label","minzoom":6,"filter":["<=",["get","filterrank"],["+",["step",["zoom"],0,16,1,17,2],["match",["get","class"],"food_and_drink_stores",3,"historic",3,"landmark",3,"medical",3,"motorist",3,"park_like",4,"sport_and_leisure",4,"visitor_amenities",4,2]]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["case",["has","maki_beta"],["coalesce",["image",["get","maki_beta"]],["image",["get","maki"]]],["image",["get","maki"]]],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":["match",["get","class"],"park_like","hsl(99, 62%, 100%)","education","hsl(50, 61%, 100%)","medical","hsl(340, 37%, 100%)","hsl(35, 16%, 100%)"],"text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(20, 42%, 58%)","park_like","hsl(100, 100%, 30%)","education","hsl(50, 40%, 43%)","medical","hsl(340, 15%, 52%)","hsl(26, 30%, 45%)"],5,["match",["get","class"],"food_and_drink","hsl(20, 74%, 41%)","park_like","hsl(100, 99%, 19%)","education","hsl(50, 100%, 23%)","medical","hsl(340, 19%, 42%)","hsl(26, 35%, 35%)"]],17,["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(20, 42%, 58%)","park_like","hsl(100, 100%, 30%)","education","hsl(50, 40%, 43%)","medical","hsl(340, 15%, 52%)","hsl(26, 30%, 45%)"],13,["match",["get","class"],"food_and_drink","hsl(20, 74%, 41%)","park_like","hsl(100, 99%, 19%)","education","hsl(50, 100%, 23%)","medical","hsl(340, 19%, 42%)","hsl(26, 35%, 35%)"]]]}},{"id":"transit-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"transit_stop_label","minzoom":12,"filter":["step",["zoom"],["all",["match",["get","mode"],"rail",true,"metro_rail",true,false],["!=",["get","stop_type"],"entrance"]],15,["all",["match",["get","mode"],"rail",true,"metro_rail",true,"ferry",true,"light_rail",true,false],["!=",["get","stop_type"],"entrance"]],16,["all",["match",["get","mode"],"bus",false,true],["!=",["get","stop_type"],"entrance"]],17,["!=",["get","stop_type"],"entrance"],19,true],"layout":{"text-size":12,"icon-image":["get","network"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["match",["get","stop_type"],"entrance","left","center"],"text-offset":["match",["get","stop_type"],"entrance",["literal",[1,0]],["literal",[0,0.8]]],"text-anchor":["match",["get","stop_type"],"entrance","left","top"],"text-field":["step",["zoom"],"",14,["match",["get","mode"],["rail","metro_rail"],["coalesce",["get","name_en"],["get","name"]],""],16,["match",["get","mode"],["bus","bicycle"],"",["coalesce",["get","name_en"],["get","name"]]],18,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":["match",["get","stop_type"],"entrance",15,9]},"paint":{"text-halo-color":"hsl(35, 16%, 100%)","text-color":["match",["get","network"],"tokyo-metro","hsl(180, 30%, 30%)","mexico-city-metro","hsl(25, 63%, 63%)",["barcelona-metro","delhi-metro","hong-kong-mtr","milan-metro","osaka-subway"],"hsl(0, 57%, 47%)",["boston-t","washington-metro"],"hsl(230, 11%, 20%)",["chongqing-rail-transit","kiev-metro","singapore-mrt","taipei-metro"],"hsl(140, 56%, 25%)","hsl(230, 48%, 50%)"],"text-halo-blur":0.5,"text-halo-width":0.5}},{"id":"airport-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"airport_label","minzoom":8,"filter":["match",["get","class"],["military","civil"],["match",["get","worldview"],["all","US"],true,false],["disputed_military","disputed_civil"],["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-line-height":1.1,"text-size":["step",["get","sizerank"],18,9,12],"icon-image":["get","maki"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,0.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":["step",["get","sizerank"],["coalesce",["get","name_en"],["get","name"]],15,["get","ref"]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"hsl(230, 48%, 44%)","text-halo-color":"hsl(230, 31%, 100%)","text-halo-width":1}},{"id":"settlement-subdivision-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":15,"filter":["all",["match",["get","class"],"settlement_subdivision",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement_subdivision",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["<=",["get","filterrank"],4]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-transform":"uppercase","text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":["match",["get","type"],"suburb",0.15,0.1],"text-max-width":7,"text-padding":3,"text-size":["interpolate",["cubic-bezier",0.5,0,1,1],["zoom"],11,["match",["get","type"],"suburb",11,10.5],15,["match",["get","type"],"suburb",15,14]]},"paint":{"text-halo-color":"hsla(35, 16%, 100%, 0.75)","text-halo-width":1,"text-color":"hsl(230, 29%, 36%)","text-halo-blur":0.5}},{"id":"settlement-minor-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":13,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],[">",["get","symbolrank"],6],4,[">=",["get","symbolrank"],7],6,[">=",["get","symbolrank"],8],7,[">=",["get","symbolrank"],10],10,[">=",["get","symbolrank"],11],11,[">=",["get","symbolrank"],13],12,[">=",["get","symbolrank"],15]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],12,9,11,10,10.5,12,9.5,14,8.5,16,6.5,17,4],13,["step",["get","symbolrank"],23,9,21,10,19,11,17,12,16,13,15,15,13]],"text-radial-offset":["step",["zoom"],["match",["get","capital"],2,0.6,0.55],8,0],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Regular","Arial Unicode MS Regular"],"text-justify":"auto","text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(230, 29%, 0%)","text-halo-color":"hsl(35, 16%, 100%)","text-halo-width":1,"text-halo-blur":1}},{"id":"settlement-major-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["match",["get","class"],"settlement",["match",["get","worldview"],["all","US"],true,false],"disputed_settlement",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],["step",["zoom"],false,3,["<=",["get","symbolrank"],6],4,["<",["get","symbolrank"],7],6,["<",["get","symbolrank"],8],7,["<",["get","symbolrank"],10],10,["<",["get","symbolrank"],11],11,["<",["get","symbolrank"],13],12,["<",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],15]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],13,6,12],6,["step",["get","symbolrank"],16,6,15,7,14],8,["step",["get","symbolrank"],18,9,17,10,15],15,["step",["get","symbolrank"],23,9,22,10,20,11,18,12,16,13,15,15,13]],"text-radial-offset":["step",["zoom"],["match",["get","capital"],2,0.6,0.55],8,0],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(230, 29%, 0%)","text-halo-color":"hsl(35, 16%, 100%)","text-halo-width":1,"text-halo-blur":1}},{"id":"state-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["match",["get","class"],"state",["match",["get","worldview"],["all","US"],true,false],"disputed_state",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"text-size":["interpolate",["cubic-bezier",0.85,0.7,0.65,1],["zoom"],4,["step",["get","symbolrank"],10,6,9.5,7,9],9,["step",["get","symbolrank"],21,6,16,7,13]],"text-transform":"uppercase","text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["step",["get","symbolrank"],["coalesce",["get","name_en"],["get","name"]],5,["coalesce",["get","abbr"],["get","name_en"],["get","name"]]],5,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-color":"hsl(230, 29%, 0%)","text-halo-color":"hsl(35, 16%, 100%)","text-halo-width":1}},{"id":"country-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["match",["get","class"],"country",["match",["get","worldview"],["all","US"],true,false],"disputed_country",["all",["==",["get","disputed"],"true"],["match",["get","worldview"],["all","US"],true,false]],false],"layout":{"icon-image":"","text-field":["coalesce",["get","name_en"],["get","name"]],"text-line-height":1.1,"text-max-width":6,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-radial-offset":["step",["zoom"],0.6,8,0],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],7,"auto"],"text-size":["interpolate",["cubic-bezier",0.2,0,0.7,1],["zoom"],1,["step",["get","symbolrank"],11,4,9,5,8],9,["step",["get","symbolrank"],22,4,19,5,17]]},"paint":{"icon-opacity":["step",["zoom"],["case",["has","text_anchor"],1,0],7,0],"text-color":"hsl(230, 29%, 0%)","text-halo-color":["interpolate",["linear"],["zoom"],2,"hsla(35, 16%, 100%, 0.75)",3,"hsl(35, 16%, 100%)"],"text-halo-width":1.25}}],"created":"2021-10-15T15:12:59.499Z","modified":"2021-10-15T15:25:46.022Z","id":"ckusifw413fsi17rl383dxxl1","owner":"northarrowresearch","visibility":"private","protected":false,"draft":false}')},345:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NAMCResource=t.GrantAction=void 0,r(n(346),t),function(e){e.createAny="createAny",e.createOwn="createOwn",e.readAny="readAny",e.readOwn="readOwn",e.updateAny="updateAny",e.updateOwn="updateOwn",e.deleteAny="deleteAny",e.deleteOwn="deleteOwn"}(t.GrantAction||(t.GrantAction={})),function(e){e.billing="billing",e.boxes="boxes",e.communications="communications",e.individualRoles="individual_roles",e.individuals="individuals",e.metrics="metrics",e.models="models",e.organisms="organisms",e.organizations="organizations",e.projects="projects",e.qaqc="qaqc",e.samples="samples",e.sites="sites",e.submissions="submissions",e.taxonomy="taxonomy",e.translations="translations",e.sorting="sorting",e.sqlReports="sql_reports"}(t.NAMCResource||(t.NAMCResource={}))},346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CSVRowHeadings=void 0,function(e){e.sampleId="Sample ID",e.siteName="Site",e.area="Area",e.labSplit="Lab Split",e.qualitative="Qualitative",e.mesh="Mesh",e.sampleDate="Date",e.sampleMethod="Method",e.lifeStage="Life Stage",e.splitCount="Count",e.usState="State",e.phylum="Phylum",e.class="Class",e.subclass="Subclass",e.order="Order",e.family="Family",e.genus="Genus",e.species="Species",e.scientificName="Scientific Name"}(t.CSVRowHeadings||(t.CSVRowHeadings={}))},348:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.queryLimits=void 0;var i=r(n(14)),o=r(n(240));t.queryLimits={samples:1e3,sites:1e3,boxes:1e3,projects:1e3,taxonomy:1e3,predictors:500,models:500,organizations:500,sitePredictorValues:500,modelResults:500,translations:500,metrics:1e3,reports:500,mapSites:1e4};var s,l='\n        entityId: Int\n        parentId: Int\n        "Street address line 1."\n        address1: String\n\n        "Street address line 2."\n        address2: String\n\n        "City."\n        city: String\n\n        "US State. Null for international organizations."\n        usState: String\n\n        "Country."\n        country: String\n\n        "Postal code."\n        zipCode: String\n\n        "Telephone number with area code. Format (xxx) xxx-xxxx"\n        phone: String\n\n        "Fax number. Format (xxx) xxx-xxxx"\n        fax: String\n\n        "Organization\'s website URL. Includes the http:// or https:// prefix."\n        website: String\n\n        "Miscellaneous information about the organization."\n        notes: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that the organization was added to the database."\n        createdDate: String\n\n        "Date and time that the organization was last updated in the database."\n        updatedDate: String\n',c=(0,i.default)(s||(s=a(['\n\n    scalar JSONObject\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    # enum LogLevel {\n    #   DEBUG\n    #   ERROR\n    #   INFO\n    #   WARN\n    # }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        lookups: Lookups\n\n        submissionData(submissionId: Int): JSONObject\n\n        # disabled for now.\n        # log(level: LogLevel, message: String, context: JSONObject): Boolean\n\n        "API endpoint that calls entity.fn_organization_search"\n        organizations(limit: Int = ',", offset: Int = 0): PaginatedOrganizations\n        organizationsById(limit: Int = ",", offset: Int = 0, ids: [Int]): PaginatedOrganizations\n\n        user(id: Int!): Individual\n        users(limit: Int = ",', offset: Int = 0): PaginatedIndividuals\n\n        # user(userId: Int): Individual\n\n        ####################################################################################################################################################################################\n        # Geo queries\n\n        "Detailed information about a single site. Includes the point location and upstream catchment geometries as [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html)."\n        siteInfo(siteId: Int!): SiteInfo\n\n        "Detailed information about a single model, including the number of predictors associated with the model."\n        modelInfo(modelId: Int!): ModelInfo\n\n        "List of all model conditions (e.g. good, fair, poor) for a particular model"\n        modelConditions(modelId: Int!, limit: Int = ',', offset: Int = 0): PaginatedModelConditions\n\n        ####################################################################################################################################################################################\n        # Sample queries\n\n        "Detailed information about a single box, including information about the customer and number of samples associated with the box."\n        boxInfo(boxId: Int!): BoxInfo\n\n        """\n        The samples API endpoint returns a set of samples that satisfty one of the mandatory arguments.\n\n        The samples API endpoint returns a set of samples that satisfty one of the mandatory arguments. You can request all samples associated with one or more boxes, or all samples belonging to a particular customer or project.\n\n        Note that samples associated with completed boxes should have the same sample ID in the new database as they had in the Pilot database. However, any samples associated with boxes that were incomplete at the time of the data migration are assigned new sample IDs in the new database; they will not match those in either BugLab or Pilot.\n        \n        **You must provide exactly one of the arguments**, either a list of sample IDs, box IDs, entity IDs, site IDs, a polygon or a point and distance.\n        You will get an error if you fail to provide at least one of these arguments!\n        You also can\'t provide multiple arguments (i.e. both sample IDs and box IDs).\n        And finally, you can\'t provide an empty list of IDs.\n        """\n        samples(limit: Int = ',', offset: Int = 0 , \n        \n            "List of integer sample IDs."\n            sampleIds: [Int], \n            \n            "List of integer box IDs. Returns all samples associated with the specified box(es)."\n            boxId: Int,\n            \n            "List of integer project IDs. Returns all samples associated with the specified project(s)."\n            projectId: Int,\n\n            entityId: Int, \n            taxonomyId: Int, \n            usStateId: Int,\n            siteId: Int,\n\n            "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon. Returns all sites within the polygon."\n            polygon: String\n        \n        ): PaginatedSamples\n        """\n        Summary information for all sites, including location coordinates and number of samples.\n        Use the siteInfo query to get more detailed information about a single site, including the catchment as a [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon.\n        \n        The sites returned in this query are the official NAMC sites. If you want the actual locations of sites at which\n        samples were collected then use the samples API endpoint and the customerLocation fields. \n        """\n        sites(limit: Int = ',', offset: Int = 0, \n\n            "List of integer sample IDs. Returns the list of sites for the sample(s)."\n            sampleIds: [Int],\n            \n            "List of integer Box IDs. Returns the sites at which samples within the box(es) were collected."\n            boxIds: [Int],\n            \n            "List of integer project IDs. Returns the sites at which samples within the project(s) were collected."\n            projectIds: [Int],\n            \n            "List of integer customer IDs. Returns all samples belonging to the customer(s). Note that customer organizations are hierarchical. If you provide the customer ID for the BLM you will get back all samples for the entire BLM (i.e. all states and all field offices). If you provide the customer ID for the Colorado BLM you will get back all samples belonging to field offices within the state of Colorado."\n            entityIds: [Int],\n            \n            "List of integer site IDs. Returns the specified sites."\n            siteIds: [Int], \n            \n            "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon. Returns all sites within the polygon."\n            polygon: String,\n            \n            "Point defined as latitude and longitude in decimal degrees) and distance (meters). Returns all sites within the specified distance of the point."\n            pointDistance: QueryDistance\n        \n        ): PaginatedSites\n        \n        """\n        The boxes API endpoint returns a set of boxes that satisfty one of the mandatory arguments.\n        You can request boxes by specifying a list of box IDs, or by specifying a list of customers.\n\n        Note that Box IDs are retained from the old NAMC database.\n        A box with a specific ID in either the BugLab or Pilot database should have the same ID in the new database.\n        """\n        boxes(limit: Int = ',', offset: Int = 0,\n        \n            "List of integer box IDs. Returns the specified box(es)."\n            boxIds: [Int],\n            \n            "List of integer customer IDs. Returns all boxes belonging to the customer(s). Note that customer organizations are hierarchical. If you provide the customer ID for the BLM you will get back all samples for the entire BLM (i.e. all states and all field offices). If you provide the customer ID for the Colorado BLM you will get back all samples belonging to field offices within the state of Colorado."\n            entityIds: [Int]\n\n            boxStateId: Int\n        \n        ): PaginatedBoxes\n\n        userBoxes(limit: Int = ',', offset: Int = 0): PaginatedBoxes\n\n        """\n        The projects API endpoint returns a set of all projects in the database.\n        Projects are intended to be flexible containers that make it easy to work with custom collections of samples.\n        API users can create projects, add and remove samples to a project.\n        Each sample can be associated with multiple projects. \n        """\n        projects(limit: Int = ',', offset: Int = 0): PaginatedProjects\n\n        """\n        List of all predictors in the system.\n        Includes summary information about how many models rely on each predictor.\n        """\n        predictors(limit: Int = ',', offset: Int = 0,\n        \n            "Optional integer model ID. Returns only predictors associated with this model."\n            modelId: Int\n        \n        ): PaginatedPredictors\n\n        """\n        List of all models in the system.\n        Includes summary information about how many predictors are used by the model\n        as well as the translation that is be required.\n\n        Use the modelInfo API endpoint for more detailed information about a specific model, including its model extent polygon.\n        """\n        models(limit: Int = ',', offset: Int = 0): PaginatedModels\n\n        """\n        List of predictor values at a single site.\n        Site predictors are non-temporal.\n        The value applies to all samples collected at the specific site.\n\n        See samplePredictors for temporal predictors that vary by the sample date.\n        """\n        sitePredictorValues(\n            \n            "Mandatory site ID for which predictor values are required."\n            siteId: Int!,\n            \n            limit: Int = ',', offset: Int = 0\n        \n        ): PaginatedSitePredictorValues\n\n        """\n        List of all predictor values for a single sample.\n        This includes both temporal and non-temporal predictors as well as their calculation status (current, missing, expired).\n        """\n        samplePredictorValues(limit: Int = ',', offset: Int = 0,\n            \n            "integer Sample ID for which sample predictor values are required."\n            sampleIds: [Int]\n\n            boxId: Int\n\n            projectId: Int\n\n        ): PaginatedSamplePredictorValue\n\n        """\n        Returns all model results for the specified sample(s).\n        Model results refer to the outputs of running one of the O2E, MMI or physical models (temperature, phosphoros, water quality).\n        """\n        modelResults(limit: Int = ',', offset: Int = 0,\n        \n            "List of integer sample IDs for which to return model results."\n            sampleIds: [Int]\n\n            boxId: Int\n\n            projectId: Int\n        \n        ): PaginatedModelResult\n\n        ####################################################################################################################################################################################\n        # Taxonomy queries\n\n        """\n        List of all taxa in the system.\n        Includes information about each level of the taxonomic hierarchy above each taxa.\n        """\n        taxonomy(limit: Int = ',', offset: Int = 0,\n        \n            """\n            Optional search term to filter the taxa returned.\n            SQL wildcards are permited.\n            i.e. to find taxa starting with Clor use \'Clor%\'.\n            To search for clor anywhere in the name of a taxa uses \'%clor%\'.\n            An asterix can also be used to wildcard a single character.\n\n            Search terms are case insensitive.\n            """\n            searchTerm: String\n        \n            taxonomyIds: [Int]\n\n        ): PaginatedTaxonomies\n\n        """\n        List of all taxonomic attributes (e.g. clinger, swimmer, HBI) in the system.\n\n        Use the taxaAttributes endpoint if you want the attribute values for a specific taxon.\n        """\n        attributes(limit: Int = ',', offset: Int = 0): PaginatedAttributes\n\n        """\n        List of all attribute values for a single taxon.\n\n        Use the taxonomy API endpoint to discover the taxonomy ID for a particular taxon.\n        """\n        taxaAttributes(\n            \n            """\n            Mandatory integer taxonomy ID for which attributes are required.\n            \n            Use the taxonomy API endpoint to discover the taxonomy ID for a particular taxon.\n            """\n            taxonomyId: Int, limit: Int = ',', offset: Int = 0): PaginatedAttributeValues\n  \n        """\n        List all the taxa within a specific translation (OTU)\n\n        The taxa associated with a translation are only those taxa at which organism counts are rolled.\n        In other words a translation in the database does not store every taxa included in an OTU,\n        only those taxa at which counts are roll up to.\n\n        For example, an OTU might include many species, genus and families that all roll up to a single \n        order. In the database, the translation is defined with only a single taxon, that of the order.\n        Any taxa below this order are automatically rolled up to this order during processing.\n\n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.\n        """\n        translationTaxa(limit: Int = ',', offset: Int = 0, \n        \n            """\n            Mandatory integer translation ID for which you require taxa.\n\n            Use the translations API endpoint to discover the database IDs for each translation.\n            """\n            translationId: Int!\n        \n        ): PaginatedTranslationTaxa\n\n\n        translationGroups(limit: Int = ',', offset: Int = 0, \n        \n            """\n            Mandatory integer translation ID for which you require taxa.\n\n            Use the translations API endpoint to discover the database IDs for each translation.\n            """\n            translationId: Int!\n        \n        ): PaginatedTranslationGroup\n       \n        """\n        List of all translations (OUT) in the system.\n        Translations have replaced OTUs in the new database.\n     \n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.\n        """\n        translations(limit: Int = ',', offset: Int = 0): PaginatedTranslations\n\n        ####################################################################################################################################################################################\n        # Sample side table queries\n\n        "List of all plankton samples in the system."\n        planktonSamples(limit: Int = ',', offset: Int = 0): PaginatedPlankton\n\n        "List of all drift samples in the system."\n        driftSamples(limit: Int = ',', offset: Int = 0): PaginatedDrift\n\n        "List of all fish samples in the system."\n        fishSamples(limit: Int = ',', offset: Int = 0): PaginatedFish\n\n        "List of all mass samples in the system."\n        massSamples(limit: Int = ',', offset: Int = 0): PaginatedMass\n\n        # "List all fish diet samples in the system"\n        # fishDiet(limit: Int = ',', offset: Int = 0, sampleIds: [Int]): PaginatedFishDiet\n\n        ####################################################################################################################################################################################\n        # Sample Taxa queries\n        \n        "Returns all attributes possessed by organisms identified with an array of samples, or a box, or a project."\n        sampleTaxaAttributes(limit: Int = ',', offset: Int = 0, \n          "Returns all attributes associated with organisms in the specified samples."\n          sampleIds: [Int], \n\n          "Returns all attributes associated with organism samples in the specified box."\n          boxId: Int,\n\n          "Returns all attributes associated organism samples in the specified project."\n          projectId: Int,\n\n        ): PaginatedSampleTaxaAttribute\n\n        """\n        Sample organisms summed by taxonomy, life stage and bug size. This is a more detailed query that provides\n        access to the raw organism counts.\n        \n        Raw organism counts are summed by laboratory taxon, bug size and lifestage. No conversion to abundance is applied.\n        """\n        sampleTaxa(\n            \n            "Mandatory integer sample ID"\n            sampleIds: [Int],\n\n            boxId: Int,\n\n            projectId: Int,\n            \n            limit: Int = ',', \n            \n            offset: Int = 0\n        ): PaginatedSampleTaxaInfo\n        """\n        Sample organisms converted to a translation (OTU).\n\n        This query first converts each organism to an abundance using lab and field splits and then rolls\n        up the abundance to those taxa present in the translation.\n        Any organism that does not rollup to a taxon present in the specified translation is omitted.\n\n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.      \n        """\n        sampleTaxaTranslation(\n            \n            "Mandatory integer sample ID"\n            sampleIds: [Int],\n\n            boxId: Int,\n\n            projectId: Int,\n\n            "Mandatory translation (OTU) ID. Use the translations API endpoint to obtain the database IDs for each translation."\n            translationId: Int!\n            limit: Int = ',', \n            offset: Int = 0\n        ): PaginatedSampleTaxaTranslated\n\n        """\n        Sample organisms converted to the translation (OTU) and then rarefied to the specified fixed count.\n\n        organism are first grouped by laboratory taxa (ignoring bug size, life sage and big rare count) and then\n        converted to abundance. Taxa are then converted to the specified translation (OTU) rolling up to the next\n        highest taxa present in the translation. Organisms that don\'t roll up to a taxa present in the translation\n        are omitted.\n        \n        The abundances are expanded to create one record for each organism, from which random\n        selections are made until the fixed count is achieved. If the total number of organisms is less than the \n        fixed count then all records are returned. Finally the selected records are re-grouped by translation\n        taxa, summing the abundances.\n        """\n        sampleTaxaTranslationRarefied(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n            \n            "Mandatory translation (OTU) ID. Use the translations query to obtain the database IDs for each translations."\n            translationId: Int!,\n            \n            "The total count of organisms to be returned (across all taxa). The actual total might be less if the sample contains fewer organisms than the specified fixed count."\n            fixedCount:Int!\n\n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxaTranslated\n\n        """\n        Sample organisms with ambiguous organisms removed and then rarefied.\n        \n        Ambiguous organisms are those organisms in a sample that have other organisms below them in the taxonomic hierarchy.\n        """\n        sampleTaxaUnambiguousRarefied(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n\n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxa\n\n\n        sampleTaxaUnambiguous(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n            \n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxa\n\n        ####################################################################################################################################################################################\n        # Metric queries\n\n        """\n        Returns a list of all metrics defined in the system. \n        """\n        metrics(limit: Int = ',', offset: Int = 0): PaginatedMetrics\n\n        """\n        Calculates active metrics for the sample using the specified translation and fixed count.\n        Note that the values returned are not stored in the database. They are calculated anew with each API\n        request. Metrics that depend on rarefaction will be different with each subsequent request.\n\n        Metrics can be calculated for a list of samples, boxes or projects. You must provide one of these\n        lists or an error is returned. You cannot provide more than one list (e.g. a list of samples and a list of projects).\n        The list provided cannot be empty.\n\n        Use the projects and translations (OTU) API endpoints to determine the database IDs for these arguments.\n        """\n        # sampleMetrics(\n            \n        #     "List of integer sample IDs"\n        #     sampleIds: [Int],\n            \n        #     "List of integer box IDs. All boxes associated with the box(es) are returned."\n        #     boxIds: [Int],\n            \n        #     "List of integer project IDs. All samples associated with the project(s) are returnded."\n        #     projectIds: [Int],\n            \n        #     "Mandatory integer translation (OTU) ID"\n        #     translationId: Int!,\n            \n        #     "Mandatory total number of organisms to be used by those metrics that use rarefaction."\n        #     fixedCount: Int!\n        # ): PaginatedMetricResult\n\n        # Query for populating the sites map UI\n        mapSites(limit: Int = ',", offset: Int = 0): PaginatedMapSites\n\n        sampleMetrics(limit: Int = ",", offset: Int = 0\n          sampleIds: [Int]\n          projectId: Int,\n          boxId: Int,\n          translationId: Int!,\n          fixedCount: Int!,\n        ): PaginatedMetricResult\n\n        reportMetrics(limit: Int = ",", offset: Int = 0\n          reportId: Int!\n          boxId: Int!\n        ): PaginatedMetricResult\n\n        boxTaxa(limit: Int = ",", offset: Int = 0,\n          boxId: Int!\n        ): PaginatedBoxTaxa\n\n        # Retrieve the currently logged in user's account information and permissions\n        myProfile: Profile\n\n        # Retrieve a list of users that can perform sort operations\n        sorters: [SortingUser]\n\n        getUSState(longitude: Float!, latitude: Float!): USState\n\n        reports(limit: Int = ",", offset: Int = 0): PaginatedReports\n        \n        reportData(limit: Int = ",", offset: Int = 0, reportId: Int): PaginatedReportData\n\n        modelSamples(limit: Int = ",', offset: Int = 0, modelId: Int):PaginatedModelSamples\n\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        \n        """\n        Store a non-temporal predictor value for a specific site. Non-temporal predictors do not vary over time. There is a\n        single value per site.\n\n        See setSamplePredictorValue if you want to store a temporal predictor value associated with a particular sample.\n        """\n        setSitePredictorValue(\n            \n            "Mandatory Integer site ID"\n            siteId: Int!,\n            \n            "Mandatory predictor ID. See predictors endpoint to identify the ID for a predictor."\n            predictorId: Int!, \n            \n            "Mandatory site predictor value. The value should be a floating point value represented as a string."\n            value:String!\n            \n        ): Int\n\n        """\n        Store a temporal predictor value for a specific sample. Temporal predictors vary over time and correspond to the sample date of a sample.\n\n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the value cannot be stored.\n        \n        See setSitePredictorValue if you want to store a temporal predictor value associated with a particular site.\n        """\n        setSamplePredictorValue(\n            \n            "Mandatory integer sample ID"\n            sampleId: Int!,\n            \n            "Mandatory predictor ID. See predictors endpoint to identify the ID for a particular predictor."\n            predictorId: Int!,\n            \n            "The predictor value should be a single floating point value represented as a string."\n            value: String!\n        \n        ): Int\n\n        """\n        Set or clear the date when a particular sample predictor value was quality controlled.\n        The data format needed is YYYY-MM-DD. Do not pass a date value to clear the QC date\n        for a particular sample predictor value.\n        """\n        setSamplePredictorValueQC(\n\n            "Sample ID"\n            sampleId: Int!,\n            \n            "Predictor ID"\n            predictorId: Int!,\n            \n            "Date that the sample predictor value was quality controlled. The format required is YYYY-MM-DD. Do not pass a value to clear the quality control date for a particular sample predictor value."\n            qcDate: String\n        ): Int\n\n\n        """\n        Set or clear the date when a particular site predictor value was quality controlled.\n        The data format needed is YYYY-MM-DD. Do not pass a date value to clear the QC date\n        for a particular site predictor value.\n        """\n        setSitePredictorValueQC(\n\n            "Site ID"\n            siteId: Int!,\n\n            "Predictor Value"\n            predictorId: Int!,\n\n            "Date that the site predictor value was quality controlled. The format required is YYYY-MM-DD. Do not pass a value to clear the quality control date for a particular site predictor value."\n            qcDate: String\n        ): Int\n\n        """\n        Store the upstream catchment polygon for a specific site.\n        The catchment polygon must be a valid, non-empty \n        [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon that partially or entirely intersects with the United States.\n     \n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the value cannot be stored.\n        """\n        setSiteCatchment(\n            \n            "ID that uniquely identifies the site"\n            siteId: Int!,\n            \n            " [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon that partially or entirely intersects with the United States."\n            catchment: String!\n        \n        ): Int\n\n        """\n        Create a new translation (OTU). The name is mandatory and cannot be an empty string. The description is optional.\n\n        The translation name must also be unique across the entire database. Use the translations endpoint to see a list\n        of all existing translations in the database.\n\n        After creating the translation, use the setTranslationTaxa endpoint to associate taxa with this translation.\n\n        This endpoint returns the database ID assigned to the new translation.\n        """\n        createTranslation(\n            \n            "Name for the new translation. Cannot be empty and must be unique across all translations in the database."\n            translationName: String!,\n            \n            "Optional descriptive information about the translation."\n            description: String\n        \n        ): Int\n\n\n        """\n        Update information related to a specific taxon. Change its scientific name, move its level or change its parent taxon.\n\n        See the taxonomy endpoint to determine the unique taxonomy ID for a specific taxon.\n\n        See createTaxonomy endpoint for adding new taxa.\n\n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the change cannot be performed. \n        """\n        setTaxonomy(\n          id: Int!,\n          taxonomy: TaxonomyInput!\n        ): Int\n\n        """\n        The createProject API endpoint creates a new project in the database.\n        Projects are intended to be flexible containers that make it easy to work with custom collections of samples.\n        API users can add and remove samples to a project. Each sample can be associated with multiple projects. \n\n        New projects are created with no associated samples.\n        You must call the [add samples]({{ site.baseurl}}/API/Projects/addProjectSamples.html) API endpoint before the project is useful.\n       \n        This endpoint returns the database ID associated with the new project, for use in other endpoints.\n        """\n        createProject(project: ProjectInput!): Int\n\n        updateProject(id: Int!, project: ProjectInput!): Int\n\n        createSite(site: SiteInput!): Int\n\n        updateSite(id: Int!, site: SiteInput!): Int\n\n        deleteSite(id:Int!): Int\n\n        """\n        This API endpoint associates samples with a project. The project must already exist and have been created using the [createProject]({{site.baseurl}}/API/Projects/createProject.html) API end point.\n\n        Only existing samples can be associated with a project (i.e. this endpoint does not create new samples). Each sample can be associated with multiple projects.  \n\n        If the sample is already associated with the project then no action is taken.\n\n        This endpoint returns the number of rows saved to the database. 0 indicates something went wrong and the change cannot be performed.   \n        """\n        addProjectSamples(\n            \n            "Project ID of a project that already exists in the system. Use the projects query to determine the ID of an existing project."\n            projectId: Int!,\n\n            "List of sample IDs to be associated with the project."\n            sampleIds: [Int]\n        \n        ): Int\n\n        """\n        This endpoint associates all samples that are part of the specified boses to the project.\n        Any samples that are already associated with a project are unaffected.\n       \n        This endpoint returns the number of rows saved to the database. 0 indicates something went wrong and the change cannot be performed.   \n        """\n        addProjectBoxes(projectId: Int!, boxIds: [Int]): Int\n        \n        """\n        Removes the specified sample(s) from the project. The samples and all their\n        associated data remain in the database and are unaffected. The only change\n        is to disassociate the sample from the project.\n        """\n        removeProjectSamples(\n            \n            "Project ID from which the samples are to be removed."\n            projectId: Int!,\n            \n            "List of samples to be removed from the project. Any samples in the argument list that are not part of the project are ignored."\n            sampleIds:[Int]\n        \n        ): Int\n\n        """\n        Permanently deletes a project from the system. It does not alter or affect any of the \n        samples that are associated with the project.\n        """\n        deleteProject(\n            \n            "ID of the project to be deleted."\n            projectId: Int!\n            \n        ): Int\n\n        createPredictor(predictor: PredictorInput!): Int\n\n        updatePredictor(id: Int!, predictor: PredictorInput!): Int\n\n        deletePredictor(id:Int!):Int\n\n        createModel(model: ModelInput!): Int\n\n        updateModel(id: Int!, model: ModelInput!): Int\n\n        deleteModel(id:Int!): Int\n        createMetric(metric: MetricInput!): Int\n\n        updateMetric(id: Int!, metric: MetricInput!): Int\n\n        deleteMetric(id: Int!): Int\n\n\n        createTaxonomy(\n          taxonomy: TaxonomyInput!\n        ): Int\n\n        deleteTaxonomy(\n          taxonomyId: Int!\n        ): Int\n\n        taxIdentificationStart(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n        taxIdentificationStop(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!, \n          "the time it took to perform the identification (in decimal hours)"\n          time: Float!\n        ): Int\n\n        taxReconciliation(\n            "Reconcile taxa within a box"\n            boxId: Int!\n\n            "Database ID of the taxon being changed."\n            fromTaxonomyId: Int!\n\n            "Database ID of the new taxon being assigned."\n            toTaxonomyId: Int!\n        ): Int\n\n\n        labSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!,\n          "the database ID of the logged in user who performed the sort."\n          sorterId: Int!,\n          "Proportion of the sample, in percent, that was split and then retained for sorting."\n          labSplit: Float!,\n          "the integer number of organisms found in the sample"\n          count: Int!, \n          "Boolean whether or not alcohol was used during sorting"\n          elutriation: Boolean!,\n          "the time it took to perform the sort (in decimal hours)"\n          time: Float!\n        ): Int\n\n        labStartSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n\n        labStopSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n\n        createSampleTaxaInfo(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!,\n          taxonomyId: Int!,\n          lifeStageId: Int!,\n          bugSize: Float,\n          splitCount: Int!,\n          bigRareCount: Int,\n          comments: String,\n          noteTypeIds: [Int]\n        ): Int\n        \n        deleteOrganism(\n          organismId: Int!\n        ): Int\n\n        createSampleSubmission(\n          submitterId: Int! \n          customerId: Int!\n          data: JSONObject!\n        ): Int\n\n        setBoxInfo(\n          boxId: Int!,\n          boxStateId: Int!,\n          customerId: Int!,\n          alias: String,\n          description: String,\n          measurements: Boolean!,\n          midges: Boolean!,\n          models: [Int],\n          boxReceivedDate: String\n        ): Int\n\n\n        # Create an organization. Returns organizationId\n        createOrganization(organization: OrganizationInput!): Int\n        # Updates an organization.\n        updateOrganization(id: Int!, organization: OrganizationInput!): Int\n        # Updates an organization. Returns rows affected\n        deleteOrganization(id: Int!): Int\n        # Create a user. Returns the userId\n        createUser(user: IndividualInput!, organization: OrganizationInput!): Int\n        # Update a user. Returns the userId\n        updateUser(id: Int!, user: IndividualInput!): Int\n        # Change a user\'s roles. returns entity Id\n        updateUserRoles(userId: Int!, roleIds: [Int]!): Int\n        \n        rarefyBox(boxId: Int!): Int\n\n        rarefyProject(projectId: Int!): Int\n\n        # Returns 1 (meaning 0 or more rows affected)\n        updateSample(id: Int!, sample: SampleInput!): Int\n\n        # Returns 1 (meaning 0 or more rows affected)\n        deleteSample(sampleId: Int!): Int\n\n        setModelResult(\n          sampleId: Int!\n          modelId: Int!\n          fixedCount: Int!\n          oResult: Float\n          eResult: Float\n          modelResult: Float!\n          modelApplicability: Boolean\n          notes: String\n        ): Int\n\n        splitBox(boxId: Int!, sampleIds: [Int]!): Int\n\n        mergeBoxes(sourceBoxId: Int!, targetBoxId: Int!): Int\n\n        insertTranslation(translation: TranslationInput!): Int\n\n        updateTranslation(id: Int!, translation: TranslationInput!): Int\n\n        deleteTranslation(id: Int!): Int\n\n        updateSampleSubmission(boxId: Int!, data: JSONObject!): Int\n\n        finalizePendingBox(boxId: Int!): FinalizePendingBoxResult\n\n        createTranslationGroup(translationId: Int!, translationGroup: TranslationGroupInput!): Int\n\n        updateTranslationGroup(id: Int!, translationGroup: TranslationGroupInput!): Int\n\n        deleteTranslationGroup(id: Int!): Int\n\n    } # MUTATION_END\n\n    input QueryDistance {\n\n        "Latitude of the point, in decimal degrees."\n        latitude: Float!\n\n        "Longitude of the point in decimal degrees"\n        longitude: Float!\n\n        "Distance from the point in meters."\n        distance: Float!\n    }\n\n    input OrganizationInput {\n      organizationName: String,\n      organizationTypeId: Int,\n      address1: String,\n      address2: String,\n      city: String,\n      usStateId: Int,\n      countryId: Int,\n      zipCode: String,\n      phone: String\n    }\n\n    input TaxonomyInput {\n      scientificName: String!,\n      levelId: Int!,\n      parentId: Int!,\n      notes: String,\n      isTargetEffort: Boolean!\n      synonyms: [String]!\n      metadata: String\n    }\n\n    input ProjectInput {\n\n        "The name for the project must be unique across all projects in the system. It cannot be an empty string."\n        projectName: String!,\n\n        "Currently not used, this field is intended to distinguish private projects that can only be seen by the person who created them, from public projects that are visible to all users."\n        isPrivate: Boolean!,\n\n        "Optional descriptive information about the project purpose, background etc."\n        description: String, \n\n        "[JSON](https://namc-utah.github.io/namc-bug-db/API/json.html)|No|Optional data that can be useful for scripting and other automated processes."\n        metadata: String, \n\n        "Optional database ID of the individual who creates the project."\n        contactId: Int!\n\n        "Array of model IDs that are to be applied to the project"\n        modelIds: [Int]!\n    }\n\n    input ModelInput {\n        modelName: String!\n        abbreviation: String!\n        isActive: Boolean!\n        description: String\n        modelTypeId: Int!\n        fixedCount: Int\n        translationId: Int\n        extentDescription: String\n        platform: String\n        referenceSites: Int\n        groupCount: Int\n        minimumCount: Int\n        oeMean: Float\n        oeStdev: Float\n        taxonomicEffort: String\n        codeFunction: String\n        codeFunction2: String\n        predictorIds: [Int]!\n        metricIds: [Int]!\n    }\n\n    input PredictorInput {\n        predictorName: String!\n        abbreviation: String!\n        units: String\n        predictorTypeId: Int!\n        isTemporal: Boolean!\n        description: String\n        calculation: String\n        cellRepresents: String\n        cellSize: String\n        transformation: String\n        smallShedException: String\n        isText: String\n        isGee: String\n        source: String\n        calculationScript: String\n        notes: String\n        inputType: String\n        geometryFilePath: String\n        minValue: Float\n        maxValue: Float\n    }\n\n    input SiteInput {\n        siteName: String!\n        latitude: Float!\n        longitude: Float!\n        waterbodyName: String\n        waterbodyCode: String\n        waterbodyTypeId: Int\n        description: String\n        isReference: Boolean\n    }\n    \n    input MetricInput {\n      metricName: String!\n      abbreviation: String!\n      metricGroupId: Int!\n      displayText: String\n      rarefactionTypeId: Int!\n      isActive: Boolean!\n      calculationId: Int!\n      description: String\n      reportIds: [Int]!\n      taxonomyIds: [Int]!\n      attributeId: Int\n      attributeValues: [String]!\n    }\n\n    input IndividualInput {\n      firstName: String\n      lastName: String\n      phone: String\n      affiliationId: Int\n    }\n\n    input SampleInput {\n      area: Float\n      customerSiteCode: String\n      designTypeId: Int # nullable\n      ecosystemId: Int # nullable\n      effortTypeId: Int # nullable\n      fieldNotes: String\n      fieldSplit: Float!\n      habitatId: Int!\n      jarCount: Int!\n      labNotes: String\n      mesh: Float\n      sampleDate: String\n      sampleLongitude: Float # nullable\n      sampleLatitude: Float # nullable\n      sampleMethodId: Int!\n      siteId: Int!\n      visitId: String\n    }\n\n    input TranslationGroupInput {\n      translationScientificName: String!\n      isFinal: Boolean!\n      taxonomyIds: [Int!]! # must be at least one element\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    type Sample {  \n\n        "Database ID that uniquely identifies the sample."        \n        sampleId: Int\n\n        "Database ID that unique identifies the box."\n        boxId: Int\n\n        "The customer that submitted the sample"\n        customerName: String\n\n        "The abbreviated name of the customer that submitted the sample."\n        customerAbbreviation: String\n\n        "The name of the individual that submitted the sample."\n        submittedBy: String\n\n        "The current state of the box to which the sample belongs."\n        boxState: String\n\n        measurements: Boolean\n\n        "Database ID of the site where the sample was collected."\n        siteId: Int\n\n        "The unique name assigned to the site by NAMC."\n        siteName: String\n\n        "The abbreivation of the US state where the sample was collected."\n        usState: String\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) of the site associated with the sample."\n        siteLocation: String\n\n        "NAMC site longitude in decimal degrees."\n        siteLongitude: Float\n\n        "NAMC site latitude in decimal degrees."\n        siteLatitude: Float\n\n        "Cmbination of the site name and sample date used for repeat visits."\n        visitId: String\n\n        "The site identifier provided by the customer at submission."\n        customerSiteCode: String\n\n        "The date that the sample was collected."\n        sampleDate: String\n\n        "The time that the sample was collected."\n        sampleTime: String\n\n        "The sample type (e.g. benthic, drift, fish diet)."\n        sampleType: String\n\n        "The method used to collect the sample (e.g. Hess net, Surber net, Dissected Gut)"\n        sampleMethod: String\n\n        sampleMethodId: Int\n\n        "The habitat sampled (e.g. benthos, pelagic, pool, reachwide, stomach)"\n        habitatName: String\n\n        habitatId: Int\n\n        ecosystemId: Int\n\n        ecosystemName: String\n\n        "Customer description of the sampled location."\n        sampleLocation: String\n\n        "Longitude (in decimal degrees) of the customer sampled location."\n        sampleLongitude: Float\n\n        "Latitude (in decimal degrees) of the customer sampled location."\n        sampleLatitude: Float\n\n        waterbodyName: String\n\n        "Area sampled in meters squared."\n        area: Float\n\n        "Proportion of the sample that was retained for laboratory processing as a ratio (0-1)."\n        fieldSplit: Float\n\n        "Customer notes collected in the field."\n        fieldNotes: String\n\n        "Proporation of the sample processed in the laboratory as ratio (0-1)."\n        labSplit: Float\n\n        "Number of jars used to transport the sample."\n        jarCount: Int\n\n        "TODO"\n        qualitative: Boolean\n\n        "Laboratory notes pertaining to the sample."\n        labNotes: String\n\n        "Mesh size in microns."\n        mesh: Int\n\n        effortTypeId: Int\n        effortTypeName: String\n        designTypeId: Int\n        designTypeName: String\n\n        sorterId: Int\n        sorterName: String\n        sorterCount: Int\n        elutriation: Boolean\n        sortTime: Float\n        sortStartDate: String\n        sortEndDate: String\n\n        idErId: Int\n        idErName: String\n        idTime: Float\n        idStartDate: String\n        idEndDate: String\n\n        "Date time that the sample record was created in the database."\n        createdDate: String\n\n        "Date time of the last change to the sample record."\n        updatedDate: String\n\n        "Date time of the last change to the date sampled field. This is used to determine the status of temporal predictors for the sample."\n        sampleDateChanged: String\n\n        "For quality assurance samples, this refers to the original sample being quality controlled."\n        qaSampleId: Int\n\n        """\n        Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html).\n        Typically these values are used during scripting and automated processes.\n        They also include some legacy information about the sample from the previous NAMC database.\n        """\n        metadata: String\n    }\n\n    type Site {\n\n        "Database ID that uniquely identifies the site."\n        siteId: Int\n\n        "Unique name assigned to the site by NAMC"\n        siteName: String\n\n        "System in which the site occurs (e.g. lake, pond, reservoir, spring, wetland)."\n        system: String\n\n        "Ecosystem in which the site occurs (e.g. lotic, lentic, either)"\n        ecosystem: String\n\n        "Longitude of the site in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site in decimal degrees."\n        latitude: Float\n\n        "US state in which the site occurs."\n        usState: String\n\n        "US state ID in which the site occurs."\n        usStateId: Int\n\n        "Defines the dataset type of the waterbodyCode (e.g. NHDPlus, NHDPlusHR)"\n        waterbodyType: String\n\n        "External identifier for the waterbody on which the site occurs (e.g. NHDPlusID for NHDPlusHR or COMID for NHDPlus)"\n        waterbodyCode: String\n\n        "Name of the waterbody on which the site occurs."\n        waterbodyName: String\n\n        "Date and time that the site was added to the database."\n        createdDate: String\n\n        "Date and time that the site was last updated in the database."\n        updatedDate: String\n\n        "True if the site has a catchment polygon defined. Use the siteInfo API endpoint to retrieve the catchment polygon."\n        hasCatchment: Boolean\n\n        "Indicates if the site is considered in reference condition or not."\n        isReference: Boolean\n    }\n\n    """\n    Detailed information about a single NAMC site.\n\n    This query includes the point and catchment geometries for the site.\n    It also includes the number of samples available at a particular site.\n\n    More succinct information is available for all sites using the\n    sites API endpoint.\n    """\n    type SiteInfo {\n        \n        "Unique database generated integer that uniquely identifies each site"\n        siteId: Int\n\n        "Unique text identifier for each site"\n        siteName: String\n        \n        "The ecological system (e.g. lake, pond, reservoir) in which the site is located."\n        system: String\n\n        "The database ID of the ecological system"\n        systemId: Int\n\n        "The ecosystem in which the site is located."\n        ecosystem: String\n\n        "The database Id of the ecosystem"\n        ecosystemId: Int\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) point location of the site in [EPSG:4326](https://epsg.io/4326) spatial reference."\n        location: String\n\n        "Longtidue of the site location in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site location in decimal degrees."\n        latitude: Float\n\n        "US State in which the site is located."\n        usState: String\n\n        "US State ID in which the site is located."\n        usStateId: Int\n\n        """\n        If the site has a waterbody code, then the waterbody type identifies the system that\n        this identifier pertains to. The waterbody type might be NHDPlus 1:100,000 or \n        NHDPlusHR 1:24,000 etc.\n        """\n        waterbodyType: String\n\n        "The database ID of the waterbody Type"\n        waterbodyTypeId: Int\n\n        """\n        The identifier of the waterbody on which this site occurs. Can be null. If a \n        waterbody code exists, then the waterbodyType can be used to determine which\n        system the code belongs to, such as NHDPlus or NHDPlusHR.\n        """\n        waterbodyCode: String\n\n        "The string name of the waterbody on which the site occurs. Typicall this is the stream name."\n        waterbodyName: String\n\n        "The latest date and time that either the site location (point) or catchment (polygon) were changed."\n        geographyChanged: String\n\n        "The system generated date and time that the site record was created in the database."\n        createdDate: String\n\n        "The system generated date and time that the site record was last changed in the database."\n        updatedDate: String\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon of the upstream area that drains into this site in [EPSG:4326](https://epsg.io/4326) spatial reference."\n        catchment: String\n\n        "The number of samples that are available for this site."\n        sampleCount: Int\n\n        "True when the site is identified as being in reference condition."\n        isReference:Boolean\n\n        "Verbose description about the site"\n        description: String\n    }\n\n    """"\n    Raw summary of organisms for a single sample. The data are returned with their original\n    laboratory taxonomic identification.\n    """\n    type SampleTaxa {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelName: String\n\n        "Abundance for the specified taxa and lifestage. Raw organism count adjusted by lab and field splits."\n        splitCount: Int\n    }    \n    type SampleTaxaTranslated {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelName: String\n\n        otuName: String\n\n        "Abundance for the specified taxa and lifestage. Raw organism count adjusted by lab and field splits."\n        splitCount: Int\n    }\n    type SampleTaxaAttribute {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "Database ID that uniquely identifies the attribute definition."\n        attributeId: Int\n\n        "Attribute name, unique across all attributes in the database."\n        attributeName: String\n\n        "Attribute value, always stored as a string."\n        attributeValue: String\n    }\n\n    type SampleTaxaInfo {\n\n        "Organism ID uniquely identifying the taxon, life stage, split count and bug size"\n        organismId: Int\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "Current state of the box to which this sample is associated."\n        boxState: String\n\n       "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."      \n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."   \n        levelName: String\n\n        "Phylum of the taxa"\n        phylum: String\n\n        "Class of the taxa"\n        class: String\n\n        "Order of the taxa"\n        order: String\n\n        "Family of the taxa"\n        family: String\n\n        "Subfamily of the taxa"\n        subFamily: String\n\n        "Genus of the taxa"\n        genus: String\n\n        "Species of the taxa"\n        species: String\n        \n        "Database ID of the organism(s) life stage (e.g. lavae, pupae)."\n        lifeStageId: Int\n\n        "Life stage of the organism(s) (e.g. lavae, pupae)."\n        lifeStage: String\n\n        "Abbreviated life stage of the organism(s) (e.g. lavae, pupae)."\n        lifeStageAbbreviation: String\n\n        "Organism length measured in millimeters (if measurements were collected)."\n        bugSize: Float\n\n        "Raw organism count recorded in the laboratory."\n        splitCount: Int\n        \n        "Proporation of the sample processed in the laboratory as ratio (0-1)."\n        labSplit: Float\n\n        "Proportion of the sample that was retained for laboratory processing as a ratio (0-1)."\n        fieldSplit: Float\n\n        "The raw count corrected for lab and field split."\n        correctedCount: Float\n        \n        "The count of big rare organisms collected in the laboratory."\n        bigRareCount: Int\n\n        "Comma separated list of the notes recorded during lab processing."\n        notes: String\n\n        noteTypeIds: [Int]\n\n        "Free text comments about the organism record"\n        comments: String\n    }\n\n    type BoxInfo {\n\n        "Database ID that uniquely identifies the box."\n        boxId: Int\n\n        "Database ID that uniquely identifies the customer that submitted the box."\n        customerId: Int\n\n        customer: Organization\n\n        customerAddress1: String\n        customerAddress2: String\n        customerCity: String\n        customerZipCode: String\n        customerPhone: String\n\n        "Database ID that uniquely identifies the person that submitted the box."\n        submitterId: Int\n\n        "Name of the person that submitted the box."\n        submittedBy: String\n\n        submitterEmail: String\n        submitterPhone: String\n\n        "Database ID that identifies the current state of the box (e.g. waiting, hold, active, complete)."\n        boxStateId: Int\n\n        "Current state of the box (e.g. waiting, hold, active, complete)."\n        boxState: String\n\n        "Date that the box was received. \'YYYY-MM-DD\'"\n        boxReceivedDate: String\n\n        "Date that box processing was completed."\n        processingCompleteDate: String\n        \n        "Anticipated date that box processing will be complete."\n        projectedCompleteDate: String\n\n        "Shorthand name for referring to the box"\n        alias: String\n\n        "Calculated number of samples associated with the box."\n        sampleCount: Int\n\n        "Descriptive information about the box."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "True if bug sizes are to be recorded when processing the box samples."\n        measurements: Boolean\n\n        "True if midges are to be collected and sent out for processing at a different laboratory"\n        midges: Boolean\n\n        modelIds: [Int]\n\n        "True if this box is for quality assurance purposes."\n        sorterQa: Boolean\n\n        "True if this box is for quality assurance purposes."\n        taxaQa: Boolean\n\n        "Number of samples for which sorting is complete"\n        sortCompleteCount: Int\n\n        "Proportion of samples in this box that have been sorted"\n        sortComplete: Float\n\n        "Number of samples for which identification is complete"\n        idCompleteCount: Int\n\n        "Proportion of samples in this box for which taxonomic identification is complete"\n        idComplete: Float\n\n        "Date and time that the box was added to the system."\n        createdDate: String\n\n        "Date and time that the box information was last updated."\n        updatedDate: String\n\n        latestSubmission: SubmissionVersion\n\n        submissions: [SubmissionVersion]\n\n        submissionCount: Int\n    }\n    \n\n    type SamplePredictorValue {\n\n        "Sample for which the predictor value either exists or is required"\n        sampleId: Int\n\n        "Date that the sample was collected"\n        sampleDate: String\n\n        "Box that the sample belongs to"\n        boxId: Int\n\n        "Official NAMC site at which the sample was collected"\n        siteId: Int\n\n        "List of models that are specified at the sample\'s box, or with a project in which the sample occurs."\n        modelIds: [Int]\n        \n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Name of the predictor"\n        predictorName: String\n\n        "Predictor abbreviated name (unique across all predictors)."\n        abbreviation: String\n\n        isGee: String\n\n        geometryFilePath: String\n\n        "Name of the R script/function used to calculate predictor values."\n        calculationScript: String\n\n        """\n        True indicates sample predictors where values vary by sample date.\n        False indicates site predictors that possess a single value for the site and that do not vary by sample date.\n        """\n        isTemporal: Boolean\n\n        "Floating point predictor value returned in string format."\n        predictorValue: String\n\n        qaqcDate: String\n\n        "Date and time that the predictor value was last changed."\n        predictorValueUpdatedDate: String\n\n        """\n        Predictor value status:\n        Missing indicates that the predictor value has never been calculated.\n        Expired indicates that the predictor value requires recalculation because either the sample date has changed or the site location has changed.\n        Valid indicates that the predictor value exists and does not require recalculation.\n        """\n        status: String\n}\n\ntype PlanktonSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Diameter of the sampled area in metres."\n    diameter: Float\n\n    "TODO"\n    subSampleCount: Int\n\n    "Tow lenth in metres"\n    towLength: Float\n\n    "volume of material in metres cubed."\n    volume: Float\n\n    "Aliquot in milliliters"\n    aliquot: Float\n\n    "Size interval in millimeters"\n    sizeInterval: Float\n\n    "The two type (e.g. vertical, horizontal)"\n    towType: String\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype DriftSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Area of the net in meters squared."\n    netArea: Float\n\n    "Duration that the net was in the water, recorded in hours."\n    netDuration: Float\n\n    "Stream depth measured in meters."\n    streamDepth: Float\n\n    "Net depth measurement in meters."\n    netDepth: Float\n\n    "Net velocity in meters per second."\n    netVelocity: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype FishSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Database ID identifying the fish taxon."\n    taxonomyId: Int\n\n    "Scientific name of the fish taxon."\n    scientificName: String\n\n    "Database ID identifying the taxonomic level of the fish."\n    levelId: Int\n\n    "Name of the taxonomic level of the fish."\n    levelName: String\n\n    "Length of the fish in TODO."\n    fishLength: Float\n\n    "Mass of the fish in grams."\n    fishMass: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype MassSample {\n \n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Database ID that uniquely identifies the mass type"\n    typeId: Int\n\n    "Abbreviated name of the mass type (e.g. FPOM, CPOM, Total)"\n    typeAbbreviation: String\n\n    "Full name of the mass type collected (e.g. Fine Particulate Matter, Total)"\n    typeName: String\n\n    "Database that uniquely identifies the method used to collected the mass measurement"\n    methodId: Int\n\n    "Abbreviated name of the method used to collect the mass measurement (e.g. AFDM, Dried, Blotted)"\n    methodAbbreviation: String\n\n    "Full name of the method used to collect the mass measurement (e.g. Ash Free Dried Matter, Dried, Blotted)"\n    methodName: String\n\n    "Measurement mass in grams."\n    mass: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype ModelResult {\n\n    "Database ID that uniquely identifies the sample."   \n    sampleId: Int\n\n    "Box that the sample belongs to."\n    boxId: Int\n\n    "Database ID that uniquely identifies the site at which the sample was collected."\n    siteId: Int\n\n    visitId: String\n\n    customerSiteCode: String\n\n    "Database ID that uniquely identifies the model to which the result pertains."\n    modelId: Int\n\n    "Full name of the model to which the result pertains."\n    modelName: String\n\n    "Abbreviated model short name"\n    modelAbbr: String\n\n    "Type of model - MMI or O2E"\n    modelTypeId: Int\n\n    "Model Type Name"\n    modelTypeName: String\n    \n    "Abbreviated Model Type Name"\n    modelTypeAbbr: String\n\n    "Translation ID (OTU)"\n    translationId: Int\n\n    "Translation Name (OTU)"\n    translationName: String\n\n    "Name of the code that runs the model"\n    codeFunction: String\n\n    "Alternate name of the code that runs the model"\n    codeFunction2: String\n\n    "Fixed count used for rarefaction during model calculation."\n    fixedCount: Int\n\n    oResult: Float\n\n    eResult: Float\n\n    modelApplicability: Boolean\n\n    "The model result value."\n    modelResult: Float\n\n    "The model condition obtained by the model result. See the modelConditions API endpoint for all possible conditions for a specific model."\n    condition: String\n\n    "Miscellaneous notes provided by the analyst that performed the model calculation."\n    notes: String\n\n    "Date and time that the model result was last updated in the database."\n    updatedDate: String\n}\n\n# type FishDiet {\n#     sampleId: Int\n#     sampleDate: String\n#     siteId: Int\n#     siteName: String\n#     fishWeight: Float\n#     fishLength: Float\n#     fishTaxonomyId: Int\n#     fishScientificName: String\n#     notes: String\n#     metadata: String\n#     organicWeight: Float\n#     inorganicWeight: Float\n#     otherWeight: Float\n#     createdDate: String\n#     updatedDate: String\n#     taxonomyId: Int\n#     scientificName: String\n#     lifeStageId: Int\n#     lifeStage: String\n#     count: Float\n#     weight: Float\n# }\n\n\n    #  type Individual {\n    #     entityId: Int\n    #     firstName: String\n    #     lastName: String\n    #     initials: String\n    #     affilitationId: Int\n    #     affiliation: String\n    #     email: String\n    #     title: String\n    #     address1: String\n    #     address2: String\n    #     city: String\n    #     stateName: String\n    #     countryName: String\n    #     zipCode: String\n    #     phone: String\n    #     fax: String\n    # }\n\n    type Box {\n        boxId: Int\n        customerId: Int\n        customerName: String\n        sampleCount: Int\n        submitterId: Int\n        submittedBy: String\n        boxStateId: Int\n        boxState: String\n        alias: String\n        boxReceivedDate: String\n        processingCompleteDate: String\n        projectedCompleteDate: String\n        measurements: Boolean\n        midges: Boolean\n        sortComplete: Float\n        idComplete: Float\n        createdDate: String\n        # These come from other queries\n        submissionCount: Int\n    }\n\n    type Project {\n\n        "Database ID that uniquely identifies the project."\n        projectId: Int\n\n        "Unique name for the project."\n        projectName: String\n\n        "Not currently used. All projects are currently public and visible to all users."\n        isPrivate: Boolean\n\n        "Database ID of the person who created the project."\n        contactId: Int\n        \n        "Full name of the person who created the project."\n        contactName: String\n\n        "Miscellaneous information about the project."\n        description: String\n\n        "Number of samples currently associated with a project."\n        sampleCount: Int\n\n        modelIds: [Int]!\n\n        "Date and time that the project was created."\n        createdDate: String\n\n        "Date and time that the basic project information was last updated. This does not reflect the addition or removal of samples."\n        updatedDate: String\n    }\n\n    type Taxonomy {\n\n        "Database ID that uniquely identifies the taxon."\n        taxonomyId: Int\n\n        "Current NAMC laboratory scientic name for the taxon. Scientific names are unique across all taxa."\n        scientificName: String\n\n        "Database ID that identifies the taxonomic level of the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon."\n        levelName: String\n\n        synonyms: String\n\n        "True if the taxon is at or below the level of effort required by the lab (e.g. genus or species). Or False for taxa above that level."\n        isTargetEffort: Boolean\n        \n        "Database ID of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentTaxonomyId: Int\n\n        "Scientific name of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentScientificName: String\n\n        "Database ID of the taxonomic level of the parent in the NAMC taxonomic hierarchy."\n        parentLevelId: Int\n\n        "Taxonomic level of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentLevelName: String\n\n        "Miscellaneous notes about the taxon."\n        notes: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that this taxon was added to the database."\n        createdDate: String\n\n        "Date and time that this taxon was last updated in the database."\n        updatedDate: String\n    }\n\n\n    type Model {\n\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Full name of the model, unique across all models."\n        modelName: String\n\n        "Abbreviated name of the model, unique across all models."\n        abbreviation: String\n\n        "True indicates that the model is in active use. False indicates a deprecated model."\n        isActive: Boolean\n\n        "Miscellaneous information about the model."\n        description: String\n\n        "Number of predictors currently associated with the model. Use the predictors API endpoint for a list of the predictors associated with each model."\n        predictorCount: Int\n\n        "Identifies the type of model"\n        modelTypeId: Int\n\n        "Model type name"\n        modelTypeName: String\n\n        "Number of organizations that are rarefied and passed to the model"\n        fixedCount: Int\n\n        "Identifies the translation (OTU) used by the model"\n        translationId: Int\n\n        "Translation used to run the model"\n        translationName: String\n    }\n\n    type ModelInfo {\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Full name of the model, unique across all models."\n        modelName: String\n\n        "Abbreviated name of the model, unique across all models."\n        abbreviation: String\n\n        "Model type (e.g. OE, MMI, hybrid, measurement)."\n        modelTypeName: String\n\n        modelTypeId: Int\n\n        "Model type abbreviation"\n        modelTypeAbbreviation: String\n\n        "Database ID identifying the translation (OTU) used by the model."\n        translationId: Int\n\n        "Name of the translation (OTU) used by the model."\n        translationName: String\n\n        "Description of the geographic extent to which the model applies."\n        extentDescription: String\n\n        "Platform on which the model runs (e.g. R, MS Access)."\n        platform: String\n\n        "Number of reference sites used to build the model."\n        referenceSites: Int\n\n        "TODO"\n        groupCount: Int\n\n        "Minimum organisms required to run the model."\n        minimumCount: Int\n\n        "TODO"\n        oeMean: Float\n\n        "TODO"\n        oeStdev: Float\n\n        "TODO"\n        taxonomicEffort: String\n\n        "True indicates the model is in active use. False indicates a deprecated model."\n        isActive: Boolean\n\n        "Fixed total number of organisms used to run the model."\n        fixedCount: Int\n\n        "Units of the model result."\n        units: String\n\n        "Miscellaneous information about the model."\n        description: String\n\n        "Number of predictors currently associated with the model."\n        predictorCount: Int\n\n        metricCount:Int\n\n        "Date and time that the model was added to the database."\n        createdDate: String\n\n        "Date and time that the model was last updated in the database."\n        updatedDate: String\n\n        predictorIds: [Int]\n\n        metricIds: [Int]\n\n        codeFunction: String\n        codeFunction2: String\n    }\n\n    type ModelCondition {\n\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Database ID that uniquely identifies the condition for the specified model."\n        conditionId: Int\n\n        "Name of the condition. Must be unique across all conditions for a single model."\n        condition: String\n\n        "Display text for the model condition."\n        displayText: String\n\n        "Standardized text for the model condition"\n        standardDisplayText: String\n\n        "Miscellaneous information about the model condition."\n        description: String\n    }\n\n    type Metric {\n\n        "Database ID that uniquely identifies the metric."\n        metricId: Int\n\n        "Unique metrics name."\n        metricName: String\n\n        "Metric abbreviation"\n        abbreviation: String\n\n        "Display name for the metric used in reports. If null, then the metricName is used instead."\n        displayText: String\n\n        "Database ID of the group in which the metric appears in reports."\n        metricGroupId: Int\n\n        "Name of the group in which the metric appears in reports."\n        metricGroupName: String\n\n        calculationId: Int\n\n        calculationName: String\n\n        isActive: Boolean\n\n        "Name of the database stored procedure that calculates the metric value."\n        codeFunction: String\n\n        "Miscellaneous information about the metric."\n        description: String\n\n        "Date and time that the metric definition was added to the database."\n        createdDate: String\n\n        "Date and time that the metric definition was last updated in the database."\n        updatedDate: String\n\n        "List of reports that this metric appears in"\n        reportIds: [Int]\n\n        "Determines whether this metric uses raw bench taxa, rarefied OTU taxa or rarefied unamgibuous taxa."\n        rarefactionTypeId: Int\n\n        rarefactionTypeName: String\n\n        "List of taxa that this metric filters by."\n        taxonomyIds: [Int]\n\n        "The attribute used to filter taxa. See the attributes list of which values of this attribute are matched with taxa attributes."\n        attributeId: Int\n\n        "List of attribute values for the specified attributeId that are used to filter taxa for this metric."\n        attributeValues: [String]\n    }\n\n    """\n    The value of a non-temporal predictor for a particular site.\n    """\n    type SitePredictorValue {\n\n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Predictor name, unique across all predictors."\n        predictorName: String\n\n        "The unique shorthand abbreviation for the predictor."\n        abbreviation: String\n\n        "Miscellaneous information about the predictor."\n        description: String\n\n        "The predictor type (e.g. metrics, atmosphere, geology, anthro)."\n        predictorType: String\n\n        """\n        The predictor value for this site. The value is always a string, even\n        if it represents an integer or floating point value.\n        """\n        predictorValue: String\n\n        "Date and time that the predictor value was added to the database."\n        createdDate: String\n\n        "Date and time that the predictor value was last updated."\n        updatedDate: String\n\n        "Optional name of the R function that performs the calculation for this predictor."\n        calculationScript: String\n    }\n\n    """\n    Information about a predictor.\n\n    Each predictor can be associated with multiple models. Predictors can also\n    be temporal, in which their values are associated with a particular sample,\n    or they can be non-temporal, in which case their values are associated with\n    sites.\n    """\n    type Predictor {\n\n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Predictor name, unique across all predictors in the system."\n        predictorName: String\n\n        "Abbreviated predictor name, unique across all predictors in the system."\n        abbreviation: String\n\n        "Units in which the predictor values are stored."\n        units: String\n\n       "Predictor type (e.g. metrics, atmosphere, geology, anthro)."\n        predictorType: String\n\n        """\n        Boolean representing whether the predictor varies over time or whether\n        there is just a single value for the site. True indicates that the predictor\n        is temporal and values are stored for each sample. False indicates that there\n        is only one predictor value for each site.\n        """\n        isTemporal: Boolean\n\n        "Miscellaneous information about the predictor."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "The number of models that currently use the predictor"\n        modelCount: Int\n\n        geometryFilePath: String\n        inputType: String\n        isGee: String\n\n        predictorTypeId: Int\n        cellRepresents: String\n        cellSize: String\n        transformation: String\n        smallShedException: String\n        minValue: Float\n        maxValue: Float\n        isText: String\n        notes: String\n        calculation: String\n\n        "Date and time that the predictor was added to the database."\n        createdDate: String\n\n        "Date and time that the predictor was last updated in the database."\n        updatedDate: String\n\n        "Optional name of the R function that performs the calculation for this predictor."\n        calculationScript: String\n\n        "Source information about the predictor."\n        source: String\n    }\n\n    input TranslationInput {\n        "Translation (OTU) name, unique across all translations in the system."\n        translationName: String\n\n        "Miscellaneous information about the translation."\n        description: String\n\n        "True indicates that the translation is in active use. False indicates that the translation has been deprecated."\n        isActive: Boolean\n\n    }\n\n    type Translation {\n\n        "Database ID that uniquely identifies the translation (OTU)."\n        translationId: Int\n\n        "Translation (OTU) name, unique across all translations in the system."\n        translationName: String\n\n        "Miscellaneous information about the translation."\n        description: String\n\n        "True indicates that the translation is in active use. False indicates that the translation has been deprecated."\n        isActive: Boolean\n\n        "Current number of taxa associated with the translation. See [translation](https://namc-utah.github.io/namc-bug-db/Technical_Reference/translations.html) for more information."\n        taxaCount: Int\n\n        "Date and time that the translation was added to the database."\n        createdDate: String\n\n        "Date and time that the translation was last updated in the database."\n        updatedDate: String\n    }\n\n    type TranslationTaxa {\n\n        "Database ID of the translation (OTU) that this taxon appears in."\n        translationId: Int\n\n        "Name of the translation (OTU) that this taxon appears in."\n        translationName: String\n\n        "Database ID of the taxon that appears in the translation."\n        taxonomyId: Int\n\n        "Database ID of the taxonomic level for the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon in the NAMC taxonomic hierarchy."\n        levelName: String\n\n        "NAMC scientific name for the taxon. This is the current scientific name used by taxonomists in the NAMC laboratory."\n        originalScientificName: String\n\n        """\n        The name used for the taxon within the translation (OTU).\n        This might be the same as the NAMC scientific name, or it might be an alias, specific to the OTU.\n        """\n        translationScientificName: String\n\n        """\n        True indicates that the taxon is part of the final set of taxa used to calibrate the model.\n        False indicates that the taxon was part of the larger set initially identified during model development.\n        """\n        isFinal: Boolean\n    }\n\n    type TranslationGroup {\n      translationGroupId: Int\n      translationScientificName: String\n      isFinal: Boolean\n      taxonomyIds: [Int!]\n    }\n\n    type Attribute {\n\n        "Database ID that uniquely identifies the attribute definition."\n        attributeId: Int\n\n        "Attribute name, unique across all attributes in the database."\n        attributeName: String\n\n        "TODO (they are all Unknown in the SLQ file) Attribute type (e.g. )"\n        attributeType: String\n\n        "Display label used for the attribute in reports"\n        label: String\n\n        "Miscellaneous information about the attribute."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that the attribute was added to the database."\n        createdDate: String\n\n        "Date and time that the attribute was last updated in the database."\n        updatedDate: String\n    }\n\n    type AttributeValue {\n\n        "Database ID of the taxon to which this attribute value applies."\n        taxonomyId: Int\n\n        "Current scientific name for the taxon to which this attribute value applies."\n        scientificName: String\n\n        "Database ID of the taxonomic level for the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon to which this attribute value applies."\n        levelName: String\n\n        "Attribute name."\n        attributeName: String\n\n        "Attribute type TODO (currently all Unknown)"\n        attributeType: String\n\n        "Display label name for the attribute."\n        label: String\n\n        "Attribute value, always stored as a string."\n        attributeValue: String\n    }\n\n    type MetricResult  {\n\n        "Database ID that identifies the sample."\n        sampleId: Int\n\n        "Database ID that identifies the metric group for organizing metrics in reports."\n        metricGroupId: Int\n\n        "Metric group name used for organizing metrics in reports."\n        metricGroupName: String\n\n        "Database ID that identifies the metric."\n        metricId: Int\n\n        "Metric name."\n        metricName: String\n\n        "Shortened metric abbreviation"\n        metricAbbreviation: String\n\n        "Metric value, always represented as a string."\n        metricValue: String\n  }\n  # TODO: Eventually this should implement Entity but check for R problems firs\n  # type Organization implements Entity{\n  type Organization {\n\n        "Database ID that uniquely identifies the organization."\n        entityId: Int\n\n        "Organization name, unique across all organizations in the database."\n        organizationName: String\n\n        "Organization Type (e.g. federal, tribe, university, other, private, state, international)."\n        organizationType: String\n\n        "Organization Type Id."\n        organizationTypeId: Int\n\n        "Entity ID of the parent organization."\n        parentEntityId: Int\n\n        "True if the organization is a laboratory."\n        isLab: Boolean\n\n        "Street address line 1."\n        address1: String\n\n        "Street address line 2."\n        address2: String\n\n        "City."\n        city: String\n\n        "US State. Null for international organizations."\n        usState: String\n\n        "Country."\n        country: String\n\n        usStateId: Int\n        countryId: Int\n\n        "Postal code."\n        zipCode: String\n\n        "Telephone number with area code. Format (xxx) xxx-xxxx"\n        phone: String\n\n        "Fax number. Format (xxx) xxx-xxxx"\n        fax: String\n\n        "Organization\'s website URL. Includes the http:// or https:// prefix."\n        website: String\n\n        "Miscellaneous information about the organization."\n        notes: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that the organization was added to the database."\n        createdDate: String\n\n        "Date and time that the organization was last updated in the database."\n        updatedDate: String\n\n        userCount: Int\n    }\n\n    type ModelSample {\n      modelId: Int\n      sampleId: Int\n      siteQuality: String\n      screeningAgency: String\n      screeningMethod: String\n      roadDenScreened: String\n      roadCrossScreened: String\n      railroadsScreened: String\n      canalsScreened: String\n      damsScreened: String\n      agScreened: String\n      urbanScreened: String\n      minesScreened: String\n      oilGasScreened: String\n      wqScreened: String\n      w1HallScreened: String\n      grazingScreened: String\n      loggingScreened: String\n    }\n\n    # Pagination Types\n  \n    type PaginatedModels {\n        records: [Model]\n        nextOffset: Int\n    }\n    type PaginatedSites {\n        records: [Site]\n        nextOffset: Int\n    }\n    type PaginatedSamples {\n        records: [Sample]\n        nextOffset: Int\n    }\n\n    type PaginatedBoxes {\n        records: [Box]\n        nextOffset: Int\n    }\n    type PaginatedProjects {\n        records: [Project]\n        nextOffset: Int\n    }\n    type PaginatedTaxonomies {\n        records: [Taxonomy]\n        nextOffset: Int\n    }\n\n    type PaginatedPredictors {\n        records: [Predictor]\n        nextOffset: Int\n    }\n    type PaginatedSitePredictorValues {\n        records: [SitePredictorValue]\n        nextOffset: Int\n    }\n\n    type PaginatedSamplePredictorValue {\n        records: [SamplePredictorValue]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslations {\n        records: [Translation]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslationTaxa {\n        records: [TranslationTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslationGroup {\n        records: [TranslationGroup]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxa {\n        records: [SampleTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaTranslated {\n        records: [SampleTaxaTranslated]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaInfo {\n        records: [SampleTaxaInfo]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaAttribute {\n        records: [SampleTaxaAttribute]\n        nextOffset: Int\n    }    \n\n    type PaginatedPlankton {\n        records: [PlanktonSample]\n        nextOffset: Int\n    }\n\n    type PaginatedDrift {\n        records: [DriftSample]\n        nextOffset: Int\n    }\n\n    type PaginatedFish {\n        records: [FishSample]\n        nextOffset: Int\n    }\n\n    type PaginatedMass {\n        records: [MassSample]\n        nextOffset: Int\n    }\n\n    type PaginatedAttributes {\n        records: [Attribute]\n        nextOffset: Int\n    }\n\n    type PaginatedAttributeValues {\n        records: [AttributeValue]\n        nextOffset: Int\n    }\n\n    type PaginatedModelConditions {\n        records: [ModelCondition]\n        nextOffset: Int\n    }\n\n    type PaginatedMetrics {\n        records: [Metric]\n        nextOffset: Int\n    }\n\n    type PaginatedMetricResult {\n        records: [MetricResult]\n        nextOffset: Int\n    }\n\n    type PaginatedModelResult {\n        records: [ModelResult]\n        nextOffset: Int\n    }\n\n    # type PaginatedFishDiet {\n    #     records: [FishDiet]\n    #     nextOffset: Int\n    # }\n\n    type PaginatedOrganizations {\n        records: [Organization]\n        nextOffset: Int\n    }\n\n    type PaginatedIndividuals {\n        records: [Individual]\n        nextOffset: Int\n    }\n\n    type PaginatedBoxTaxa {\n        records: [BoxTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedMapSites {\n      records: [MapSite]\n      nextOffset: Int\n    }\n\n    type PaginatedReports {\n      records: [Report]\n      nextOffset: Int\n    }\n\n    type PaginatedReportData {\n      records: [JSONObject]\n      nextOffset: Int\n    }\n\n    type PaginatedModelSamples {\n        records: [ModelSample]\n        nextOffset: Int\n    }\n\n    type Report {\n      reportId: Int\n      reportName: String\n      description: String\n      isActive: Boolean\n    }\n\n  \n    interface Entity {\n      ',"\n    }\n\n    type Individual implements Entity{\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      affiliationId: Int\n      ",'\n      organizationName: String\n      roleIds: [Int]\n    }\n\n    type SampleSubmitter {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      "Telephone number with area code. Format (xxx) xxx-xxxx"\n      phone: String\n    }\n\n    # A user is like an individual but we\'re leaving that type alone for now\n    type Profile implements Entity {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      affiliationId: Int\n      ','\n      organizationName: String\n      roleIds: [Int]\n      permissions: JSONObject\n    }\n\n    type SortingUser {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      title: String\n      organizationName: String\n    }\n\n    type BoxTaxa {\n      order: String\n      family: String\n      taxonomyId: Int\n      scientificName: String\n      taxonomistCounts: JSONObject\n      sampleCount: Int\n      totalCount: Int\n    }\n\n    type SubmissionVersion {\n      boxId: Int\n      versionId: Int\n      submissionId: Int\n      submitterId: Int\n      submitter: SampleSubmitter\n      createdDate: String\n      updatedDate: String\n    }\n\n    type USState {\n      id: Int!\n      name: String!\n      abbreviation: String!\n    }\n\n    type MapSite {\n        \n        "Unique database generated integer that uniquely identifies each site"\n        siteId: Int\n\n        "Unique text identifier for each site"\n        siteName: String\n        \n        "Longtidue of the site location in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site location in decimal degrees."\n        latitude: Float\n\n        "US State in which the site is located."\n        usStateId: Int\n    }\n\n    type FinalizePendingBoxResult {\n      success: Boolean!\n      stats: JSONObject\n      errors: [String]\n      warnings: [String]\n    }\n\n    ',"\n"],['\n\n    scalar JSONObject\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    # enum LogLevel {\n    #   DEBUG\n    #   ERROR\n    #   INFO\n    #   WARN\n    # }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        lookups: Lookups\n\n        submissionData(submissionId: Int): JSONObject\n\n        # disabled for now.\n        # log(level: LogLevel, message: String, context: JSONObject): Boolean\n\n        "API endpoint that calls entity.fn_organization_search"\n        organizations(limit: Int = ',", offset: Int = 0): PaginatedOrganizations\n        organizationsById(limit: Int = ",", offset: Int = 0, ids: [Int]): PaginatedOrganizations\n\n        user(id: Int!): Individual\n        users(limit: Int = ",', offset: Int = 0): PaginatedIndividuals\n\n        # user(userId: Int): Individual\n\n        ####################################################################################################################################################################################\n        # Geo queries\n\n        "Detailed information about a single site. Includes the point location and upstream catchment geometries as [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html)."\n        siteInfo(siteId: Int!): SiteInfo\n\n        "Detailed information about a single model, including the number of predictors associated with the model."\n        modelInfo(modelId: Int!): ModelInfo\n\n        "List of all model conditions (e.g. good, fair, poor) for a particular model"\n        modelConditions(modelId: Int!, limit: Int = ',', offset: Int = 0): PaginatedModelConditions\n\n        ####################################################################################################################################################################################\n        # Sample queries\n\n        "Detailed information about a single box, including information about the customer and number of samples associated with the box."\n        boxInfo(boxId: Int!): BoxInfo\n\n        """\n        The samples API endpoint returns a set of samples that satisfty one of the mandatory arguments.\n\n        The samples API endpoint returns a set of samples that satisfty one of the mandatory arguments. You can request all samples associated with one or more boxes, or all samples belonging to a particular customer or project.\n\n        Note that samples associated with completed boxes should have the same sample ID in the new database as they had in the Pilot database. However, any samples associated with boxes that were incomplete at the time of the data migration are assigned new sample IDs in the new database; they will not match those in either BugLab or Pilot.\n        \n        **You must provide exactly one of the arguments**, either a list of sample IDs, box IDs, entity IDs, site IDs, a polygon or a point and distance.\n        You will get an error if you fail to provide at least one of these arguments!\n        You also can\'t provide multiple arguments (i.e. both sample IDs and box IDs).\n        And finally, you can\'t provide an empty list of IDs.\n        """\n        samples(limit: Int = ',', offset: Int = 0 , \n        \n            "List of integer sample IDs."\n            sampleIds: [Int], \n            \n            "List of integer box IDs. Returns all samples associated with the specified box(es)."\n            boxId: Int,\n            \n            "List of integer project IDs. Returns all samples associated with the specified project(s)."\n            projectId: Int,\n\n            entityId: Int, \n            taxonomyId: Int, \n            usStateId: Int,\n            siteId: Int,\n\n            "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon. Returns all sites within the polygon."\n            polygon: String\n        \n        ): PaginatedSamples\n        """\n        Summary information for all sites, including location coordinates and number of samples.\n        Use the siteInfo query to get more detailed information about a single site, including the catchment as a [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon.\n        \n        The sites returned in this query are the official NAMC sites. If you want the actual locations of sites at which\n        samples were collected then use the samples API endpoint and the customerLocation fields. \n        """\n        sites(limit: Int = ',', offset: Int = 0, \n\n            "List of integer sample IDs. Returns the list of sites for the sample(s)."\n            sampleIds: [Int],\n            \n            "List of integer Box IDs. Returns the sites at which samples within the box(es) were collected."\n            boxIds: [Int],\n            \n            "List of integer project IDs. Returns the sites at which samples within the project(s) were collected."\n            projectIds: [Int],\n            \n            "List of integer customer IDs. Returns all samples belonging to the customer(s). Note that customer organizations are hierarchical. If you provide the customer ID for the BLM you will get back all samples for the entire BLM (i.e. all states and all field offices). If you provide the customer ID for the Colorado BLM you will get back all samples belonging to field offices within the state of Colorado."\n            entityIds: [Int],\n            \n            "List of integer site IDs. Returns the specified sites."\n            siteIds: [Int], \n            \n            "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon. Returns all sites within the polygon."\n            polygon: String,\n            \n            "Point defined as latitude and longitude in decimal degrees) and distance (meters). Returns all sites within the specified distance of the point."\n            pointDistance: QueryDistance\n        \n        ): PaginatedSites\n        \n        """\n        The boxes API endpoint returns a set of boxes that satisfty one of the mandatory arguments.\n        You can request boxes by specifying a list of box IDs, or by specifying a list of customers.\n\n        Note that Box IDs are retained from the old NAMC database.\n        A box with a specific ID in either the BugLab or Pilot database should have the same ID in the new database.\n        """\n        boxes(limit: Int = ',', offset: Int = 0,\n        \n            "List of integer box IDs. Returns the specified box(es)."\n            boxIds: [Int],\n            \n            "List of integer customer IDs. Returns all boxes belonging to the customer(s). Note that customer organizations are hierarchical. If you provide the customer ID for the BLM you will get back all samples for the entire BLM (i.e. all states and all field offices). If you provide the customer ID for the Colorado BLM you will get back all samples belonging to field offices within the state of Colorado."\n            entityIds: [Int]\n\n            boxStateId: Int\n        \n        ): PaginatedBoxes\n\n        userBoxes(limit: Int = ',', offset: Int = 0): PaginatedBoxes\n\n        """\n        The projects API endpoint returns a set of all projects in the database.\n        Projects are intended to be flexible containers that make it easy to work with custom collections of samples.\n        API users can create projects, add and remove samples to a project.\n        Each sample can be associated with multiple projects. \n        """\n        projects(limit: Int = ',', offset: Int = 0): PaginatedProjects\n\n        """\n        List of all predictors in the system.\n        Includes summary information about how many models rely on each predictor.\n        """\n        predictors(limit: Int = ',', offset: Int = 0,\n        \n            "Optional integer model ID. Returns only predictors associated with this model."\n            modelId: Int\n        \n        ): PaginatedPredictors\n\n        """\n        List of all models in the system.\n        Includes summary information about how many predictors are used by the model\n        as well as the translation that is be required.\n\n        Use the modelInfo API endpoint for more detailed information about a specific model, including its model extent polygon.\n        """\n        models(limit: Int = ',', offset: Int = 0): PaginatedModels\n\n        """\n        List of predictor values at a single site.\n        Site predictors are non-temporal.\n        The value applies to all samples collected at the specific site.\n\n        See samplePredictors for temporal predictors that vary by the sample date.\n        """\n        sitePredictorValues(\n            \n            "Mandatory site ID for which predictor values are required."\n            siteId: Int!,\n            \n            limit: Int = ',', offset: Int = 0\n        \n        ): PaginatedSitePredictorValues\n\n        """\n        List of all predictor values for a single sample.\n        This includes both temporal and non-temporal predictors as well as their calculation status (current, missing, expired).\n        """\n        samplePredictorValues(limit: Int = ',', offset: Int = 0,\n            \n            "integer Sample ID for which sample predictor values are required."\n            sampleIds: [Int]\n\n            boxId: Int\n\n            projectId: Int\n\n        ): PaginatedSamplePredictorValue\n\n        """\n        Returns all model results for the specified sample(s).\n        Model results refer to the outputs of running one of the O2E, MMI or physical models (temperature, phosphoros, water quality).\n        """\n        modelResults(limit: Int = ',', offset: Int = 0,\n        \n            "List of integer sample IDs for which to return model results."\n            sampleIds: [Int]\n\n            boxId: Int\n\n            projectId: Int\n        \n        ): PaginatedModelResult\n\n        ####################################################################################################################################################################################\n        # Taxonomy queries\n\n        """\n        List of all taxa in the system.\n        Includes information about each level of the taxonomic hierarchy above each taxa.\n        """\n        taxonomy(limit: Int = ',', offset: Int = 0,\n        \n            """\n            Optional search term to filter the taxa returned.\n            SQL wildcards are permited.\n            i.e. to find taxa starting with Clor use \'Clor%\'.\n            To search for clor anywhere in the name of a taxa uses \'%clor%\'.\n            An asterix can also be used to wildcard a single character.\n\n            Search terms are case insensitive.\n            """\n            searchTerm: String\n        \n            taxonomyIds: [Int]\n\n        ): PaginatedTaxonomies\n\n        """\n        List of all taxonomic attributes (e.g. clinger, swimmer, HBI) in the system.\n\n        Use the taxaAttributes endpoint if you want the attribute values for a specific taxon.\n        """\n        attributes(limit: Int = ',', offset: Int = 0): PaginatedAttributes\n\n        """\n        List of all attribute values for a single taxon.\n\n        Use the taxonomy API endpoint to discover the taxonomy ID for a particular taxon.\n        """\n        taxaAttributes(\n            \n            """\n            Mandatory integer taxonomy ID for which attributes are required.\n            \n            Use the taxonomy API endpoint to discover the taxonomy ID for a particular taxon.\n            """\n            taxonomyId: Int, limit: Int = ',', offset: Int = 0): PaginatedAttributeValues\n  \n        """\n        List all the taxa within a specific translation (OTU)\n\n        The taxa associated with a translation are only those taxa at which organism counts are rolled.\n        In other words a translation in the database does not store every taxa included in an OTU,\n        only those taxa at which counts are roll up to.\n\n        For example, an OTU might include many species, genus and families that all roll up to a single \n        order. In the database, the translation is defined with only a single taxon, that of the order.\n        Any taxa below this order are automatically rolled up to this order during processing.\n\n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.\n        """\n        translationTaxa(limit: Int = ',', offset: Int = 0, \n        \n            """\n            Mandatory integer translation ID for which you require taxa.\n\n            Use the translations API endpoint to discover the database IDs for each translation.\n            """\n            translationId: Int!\n        \n        ): PaginatedTranslationTaxa\n\n\n        translationGroups(limit: Int = ',', offset: Int = 0, \n        \n            """\n            Mandatory integer translation ID for which you require taxa.\n\n            Use the translations API endpoint to discover the database IDs for each translation.\n            """\n            translationId: Int!\n        \n        ): PaginatedTranslationGroup\n       \n        """\n        List of all translations (OUT) in the system.\n        Translations have replaced OTUs in the new database.\n     \n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.\n        """\n        translations(limit: Int = ',', offset: Int = 0): PaginatedTranslations\n\n        ####################################################################################################################################################################################\n        # Sample side table queries\n\n        "List of all plankton samples in the system."\n        planktonSamples(limit: Int = ',', offset: Int = 0): PaginatedPlankton\n\n        "List of all drift samples in the system."\n        driftSamples(limit: Int = ',', offset: Int = 0): PaginatedDrift\n\n        "List of all fish samples in the system."\n        fishSamples(limit: Int = ',', offset: Int = 0): PaginatedFish\n\n        "List of all mass samples in the system."\n        massSamples(limit: Int = ',', offset: Int = 0): PaginatedMass\n\n        # "List all fish diet samples in the system"\n        # fishDiet(limit: Int = ',', offset: Int = 0, sampleIds: [Int]): PaginatedFishDiet\n\n        ####################################################################################################################################################################################\n        # Sample Taxa queries\n        \n        "Returns all attributes possessed by organisms identified with an array of samples, or a box, or a project."\n        sampleTaxaAttributes(limit: Int = ',', offset: Int = 0, \n          "Returns all attributes associated with organisms in the specified samples."\n          sampleIds: [Int], \n\n          "Returns all attributes associated with organism samples in the specified box."\n          boxId: Int,\n\n          "Returns all attributes associated organism samples in the specified project."\n          projectId: Int,\n\n        ): PaginatedSampleTaxaAttribute\n\n        """\n        Sample organisms summed by taxonomy, life stage and bug size. This is a more detailed query that provides\n        access to the raw organism counts.\n        \n        Raw organism counts are summed by laboratory taxon, bug size and lifestage. No conversion to abundance is applied.\n        """\n        sampleTaxa(\n            \n            "Mandatory integer sample ID"\n            sampleIds: [Int],\n\n            boxId: Int,\n\n            projectId: Int,\n            \n            limit: Int = ',', \n            \n            offset: Int = 0\n        ): PaginatedSampleTaxaInfo\n        """\n        Sample organisms converted to a translation (OTU).\n\n        This query first converts each organism to an abundance using lab and field splits and then rolls\n        up the abundance to those taxa present in the translation.\n        Any organism that does not rollup to a taxon present in the specified translation is omitted.\n\n        See the [online documentation on translations](https://namc-utah.github.io/namc-bug-db/translations.html) for more information.      \n        """\n        sampleTaxaTranslation(\n            \n            "Mandatory integer sample ID"\n            sampleIds: [Int],\n\n            boxId: Int,\n\n            projectId: Int,\n\n            "Mandatory translation (OTU) ID. Use the translations API endpoint to obtain the database IDs for each translation."\n            translationId: Int!\n            limit: Int = ',', \n            offset: Int = 0\n        ): PaginatedSampleTaxaTranslated\n\n        """\n        Sample organisms converted to the translation (OTU) and then rarefied to the specified fixed count.\n\n        organism are first grouped by laboratory taxa (ignoring bug size, life sage and big rare count) and then\n        converted to abundance. Taxa are then converted to the specified translation (OTU) rolling up to the next\n        highest taxa present in the translation. Organisms that don\'t roll up to a taxa present in the translation\n        are omitted.\n        \n        The abundances are expanded to create one record for each organism, from which random\n        selections are made until the fixed count is achieved. If the total number of organisms is less than the \n        fixed count then all records are returned. Finally the selected records are re-grouped by translation\n        taxa, summing the abundances.\n        """\n        sampleTaxaTranslationRarefied(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n            \n            "Mandatory translation (OTU) ID. Use the translations query to obtain the database IDs for each translations."\n            translationId: Int!,\n            \n            "The total count of organisms to be returned (across all taxa). The actual total might be less if the sample contains fewer organisms than the specified fixed count."\n            fixedCount:Int!\n\n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxaTranslated\n\n        """\n        Sample organisms with ambiguous organisms removed and then rarefied.\n        \n        Ambiguous organisms are those organisms in a sample that have other organisms below them in the taxonomic hierarchy.\n        """\n        sampleTaxaUnambiguousRarefied(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n\n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxa\n\n\n        sampleTaxaUnambiguous(\n            sampleIds: [Int],\n\n            "Mandatory integer sample ID"\n            boxId: Int,\n\n            projectId: Int,\n            \n            limit: Int = ',', \n            offset: Int = 0\n        \n        ):PaginatedSampleTaxa\n\n        ####################################################################################################################################################################################\n        # Metric queries\n\n        """\n        Returns a list of all metrics defined in the system. \n        """\n        metrics(limit: Int = ',', offset: Int = 0): PaginatedMetrics\n\n        """\n        Calculates active metrics for the sample using the specified translation and fixed count.\n        Note that the values returned are not stored in the database. They are calculated anew with each API\n        request. Metrics that depend on rarefaction will be different with each subsequent request.\n\n        Metrics can be calculated for a list of samples, boxes or projects. You must provide one of these\n        lists or an error is returned. You cannot provide more than one list (e.g. a list of samples and a list of projects).\n        The list provided cannot be empty.\n\n        Use the projects and translations (OTU) API endpoints to determine the database IDs for these arguments.\n        """\n        # sampleMetrics(\n            \n        #     "List of integer sample IDs"\n        #     sampleIds: [Int],\n            \n        #     "List of integer box IDs. All boxes associated with the box(es) are returned."\n        #     boxIds: [Int],\n            \n        #     "List of integer project IDs. All samples associated with the project(s) are returnded."\n        #     projectIds: [Int],\n            \n        #     "Mandatory integer translation (OTU) ID"\n        #     translationId: Int!,\n            \n        #     "Mandatory total number of organisms to be used by those metrics that use rarefaction."\n        #     fixedCount: Int!\n        # ): PaginatedMetricResult\n\n        # Query for populating the sites map UI\n        mapSites(limit: Int = ',", offset: Int = 0): PaginatedMapSites\n\n        sampleMetrics(limit: Int = ",", offset: Int = 0\n          sampleIds: [Int]\n          projectId: Int,\n          boxId: Int,\n          translationId: Int!,\n          fixedCount: Int!,\n        ): PaginatedMetricResult\n\n        reportMetrics(limit: Int = ",", offset: Int = 0\n          reportId: Int!\n          boxId: Int!\n        ): PaginatedMetricResult\n\n        boxTaxa(limit: Int = ",", offset: Int = 0,\n          boxId: Int!\n        ): PaginatedBoxTaxa\n\n        # Retrieve the currently logged in user's account information and permissions\n        myProfile: Profile\n\n        # Retrieve a list of users that can perform sort operations\n        sorters: [SortingUser]\n\n        getUSState(longitude: Float!, latitude: Float!): USState\n\n        reports(limit: Int = ",", offset: Int = 0): PaginatedReports\n        \n        reportData(limit: Int = ",", offset: Int = 0, reportId: Int): PaginatedReportData\n\n        modelSamples(limit: Int = ",', offset: Int = 0, modelId: Int):PaginatedModelSamples\n\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        \n        """\n        Store a non-temporal predictor value for a specific site. Non-temporal predictors do not vary over time. There is a\n        single value per site.\n\n        See setSamplePredictorValue if you want to store a temporal predictor value associated with a particular sample.\n        """\n        setSitePredictorValue(\n            \n            "Mandatory Integer site ID"\n            siteId: Int!,\n            \n            "Mandatory predictor ID. See predictors endpoint to identify the ID for a predictor."\n            predictorId: Int!, \n            \n            "Mandatory site predictor value. The value should be a floating point value represented as a string."\n            value:String!\n            \n        ): Int\n\n        """\n        Store a temporal predictor value for a specific sample. Temporal predictors vary over time and correspond to the sample date of a sample.\n\n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the value cannot be stored.\n        \n        See setSitePredictorValue if you want to store a temporal predictor value associated with a particular site.\n        """\n        setSamplePredictorValue(\n            \n            "Mandatory integer sample ID"\n            sampleId: Int!,\n            \n            "Mandatory predictor ID. See predictors endpoint to identify the ID for a particular predictor."\n            predictorId: Int!,\n            \n            "The predictor value should be a single floating point value represented as a string."\n            value: String!\n        \n        ): Int\n\n        """\n        Set or clear the date when a particular sample predictor value was quality controlled.\n        The data format needed is YYYY-MM-DD. Do not pass a date value to clear the QC date\n        for a particular sample predictor value.\n        """\n        setSamplePredictorValueQC(\n\n            "Sample ID"\n            sampleId: Int!,\n            \n            "Predictor ID"\n            predictorId: Int!,\n            \n            "Date that the sample predictor value was quality controlled. The format required is YYYY-MM-DD. Do not pass a value to clear the quality control date for a particular sample predictor value."\n            qcDate: String\n        ): Int\n\n\n        """\n        Set or clear the date when a particular site predictor value was quality controlled.\n        The data format needed is YYYY-MM-DD. Do not pass a date value to clear the QC date\n        for a particular site predictor value.\n        """\n        setSitePredictorValueQC(\n\n            "Site ID"\n            siteId: Int!,\n\n            "Predictor Value"\n            predictorId: Int!,\n\n            "Date that the site predictor value was quality controlled. The format required is YYYY-MM-DD. Do not pass a value to clear the quality control date for a particular site predictor value."\n            qcDate: String\n        ): Int\n\n        """\n        Store the upstream catchment polygon for a specific site.\n        The catchment polygon must be a valid, non-empty \n        [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon that partially or entirely intersects with the United States.\n     \n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the value cannot be stored.\n        """\n        setSiteCatchment(\n            \n            "ID that uniquely identifies the site"\n            siteId: Int!,\n            \n            " [GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon that partially or entirely intersects with the United States."\n            catchment: String!\n        \n        ): Int\n\n        """\n        Create a new translation (OTU). The name is mandatory and cannot be an empty string. The description is optional.\n\n        The translation name must also be unique across the entire database. Use the translations endpoint to see a list\n        of all existing translations in the database.\n\n        After creating the translation, use the setTranslationTaxa endpoint to associate taxa with this translation.\n\n        This endpoint returns the database ID assigned to the new translation.\n        """\n        createTranslation(\n            \n            "Name for the new translation. Cannot be empty and must be unique across all translations in the database."\n            translationName: String!,\n            \n            "Optional descriptive information about the translation."\n            description: String\n        \n        ): Int\n\n\n        """\n        Update information related to a specific taxon. Change its scientific name, move its level or change its parent taxon.\n\n        See the taxonomy endpoint to determine the unique taxonomy ID for a specific taxon.\n\n        See createTaxonomy endpoint for adding new taxa.\n\n        This endpoint returns the number of rows saved to the database. 1 indicates sucess, 0 indicates something went wrong and the change cannot be performed. \n        """\n        setTaxonomy(\n          id: Int!,\n          taxonomy: TaxonomyInput!\n        ): Int\n\n        """\n        The createProject API endpoint creates a new project in the database.\n        Projects are intended to be flexible containers that make it easy to work with custom collections of samples.\n        API users can add and remove samples to a project. Each sample can be associated with multiple projects. \n\n        New projects are created with no associated samples.\n        You must call the [add samples]({{ site.baseurl}}/API/Projects/addProjectSamples.html) API endpoint before the project is useful.\n       \n        This endpoint returns the database ID associated with the new project, for use in other endpoints.\n        """\n        createProject(project: ProjectInput!): Int\n\n        updateProject(id: Int!, project: ProjectInput!): Int\n\n        createSite(site: SiteInput!): Int\n\n        updateSite(id: Int!, site: SiteInput!): Int\n\n        deleteSite(id:Int!): Int\n\n        """\n        This API endpoint associates samples with a project. The project must already exist and have been created using the [createProject]({{site.baseurl}}/API/Projects/createProject.html) API end point.\n\n        Only existing samples can be associated with a project (i.e. this endpoint does not create new samples). Each sample can be associated with multiple projects.  \n\n        If the sample is already associated with the project then no action is taken.\n\n        This endpoint returns the number of rows saved to the database. 0 indicates something went wrong and the change cannot be performed.   \n        """\n        addProjectSamples(\n            \n            "Project ID of a project that already exists in the system. Use the projects query to determine the ID of an existing project."\n            projectId: Int!,\n\n            "List of sample IDs to be associated with the project."\n            sampleIds: [Int]\n        \n        ): Int\n\n        """\n        This endpoint associates all samples that are part of the specified boses to the project.\n        Any samples that are already associated with a project are unaffected.\n       \n        This endpoint returns the number of rows saved to the database. 0 indicates something went wrong and the change cannot be performed.   \n        """\n        addProjectBoxes(projectId: Int!, boxIds: [Int]): Int\n        \n        """\n        Removes the specified sample(s) from the project. The samples and all their\n        associated data remain in the database and are unaffected. The only change\n        is to disassociate the sample from the project.\n        """\n        removeProjectSamples(\n            \n            "Project ID from which the samples are to be removed."\n            projectId: Int!,\n            \n            "List of samples to be removed from the project. Any samples in the argument list that are not part of the project are ignored."\n            sampleIds:[Int]\n        \n        ): Int\n\n        """\n        Permanently deletes a project from the system. It does not alter or affect any of the \n        samples that are associated with the project.\n        """\n        deleteProject(\n            \n            "ID of the project to be deleted."\n            projectId: Int!\n            \n        ): Int\n\n        createPredictor(predictor: PredictorInput!): Int\n\n        updatePredictor(id: Int!, predictor: PredictorInput!): Int\n\n        deletePredictor(id:Int!):Int\n\n        createModel(model: ModelInput!): Int\n\n        updateModel(id: Int!, model: ModelInput!): Int\n\n        deleteModel(id:Int!): Int\n        createMetric(metric: MetricInput!): Int\n\n        updateMetric(id: Int!, metric: MetricInput!): Int\n\n        deleteMetric(id: Int!): Int\n\n\n        createTaxonomy(\n          taxonomy: TaxonomyInput!\n        ): Int\n\n        deleteTaxonomy(\n          taxonomyId: Int!\n        ): Int\n\n        taxIdentificationStart(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n        taxIdentificationStop(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!, \n          "the time it took to perform the identification (in decimal hours)"\n          time: Float!\n        ): Int\n\n        taxReconciliation(\n            "Reconcile taxa within a box"\n            boxId: Int!\n\n            "Database ID of the taxon being changed."\n            fromTaxonomyId: Int!\n\n            "Database ID of the new taxon being assigned."\n            toTaxonomyId: Int!\n        ): Int\n\n\n        labSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!,\n          "the database ID of the logged in user who performed the sort."\n          sorterId: Int!,\n          "Proportion of the sample, in percent, that was split and then retained for sorting."\n          labSplit: Float!,\n          "the integer number of organisms found in the sample"\n          count: Int!, \n          "Boolean whether or not alcohol was used during sorting"\n          elutriation: Boolean!,\n          "the time it took to perform the sort (in decimal hours)"\n          time: Float!\n        ): Int\n\n        labStartSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n\n        labStopSort(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!\n        ): Int\n\n        createSampleTaxaInfo(\n          "Database ID that uniquely identifies the sample."\n          sampleId: Int!,\n          taxonomyId: Int!,\n          lifeStageId: Int!,\n          bugSize: Float,\n          splitCount: Int!,\n          bigRareCount: Int,\n          comments: String,\n          noteTypeIds: [Int]\n        ): Int\n        \n        deleteOrganism(\n          organismId: Int!\n        ): Int\n\n        createSampleSubmission(\n          submitterId: Int! \n          customerId: Int!\n          data: JSONObject!\n        ): Int\n\n        setBoxInfo(\n          boxId: Int!,\n          boxStateId: Int!,\n          customerId: Int!,\n          alias: String,\n          description: String,\n          measurements: Boolean!,\n          midges: Boolean!,\n          models: [Int],\n          boxReceivedDate: String\n        ): Int\n\n\n        # Create an organization. Returns organizationId\n        createOrganization(organization: OrganizationInput!): Int\n        # Updates an organization.\n        updateOrganization(id: Int!, organization: OrganizationInput!): Int\n        # Updates an organization. Returns rows affected\n        deleteOrganization(id: Int!): Int\n        # Create a user. Returns the userId\n        createUser(user: IndividualInput!, organization: OrganizationInput!): Int\n        # Update a user. Returns the userId\n        updateUser(id: Int!, user: IndividualInput!): Int\n        # Change a user\'s roles. returns entity Id\n        updateUserRoles(userId: Int!, roleIds: [Int]!): Int\n        \n        rarefyBox(boxId: Int!): Int\n\n        rarefyProject(projectId: Int!): Int\n\n        # Returns 1 (meaning 0 or more rows affected)\n        updateSample(id: Int!, sample: SampleInput!): Int\n\n        # Returns 1 (meaning 0 or more rows affected)\n        deleteSample(sampleId: Int!): Int\n\n        setModelResult(\n          sampleId: Int!\n          modelId: Int!\n          fixedCount: Int!\n          oResult: Float\n          eResult: Float\n          modelResult: Float!\n          modelApplicability: Boolean\n          notes: String\n        ): Int\n\n        splitBox(boxId: Int!, sampleIds: [Int]!): Int\n\n        mergeBoxes(sourceBoxId: Int!, targetBoxId: Int!): Int\n\n        insertTranslation(translation: TranslationInput!): Int\n\n        updateTranslation(id: Int!, translation: TranslationInput!): Int\n\n        deleteTranslation(id: Int!): Int\n\n        updateSampleSubmission(boxId: Int!, data: JSONObject!): Int\n\n        finalizePendingBox(boxId: Int!): FinalizePendingBoxResult\n\n        createTranslationGroup(translationId: Int!, translationGroup: TranslationGroupInput!): Int\n\n        updateTranslationGroup(id: Int!, translationGroup: TranslationGroupInput!): Int\n\n        deleteTranslationGroup(id: Int!): Int\n\n    } # MUTATION_END\n\n    input QueryDistance {\n\n        "Latitude of the point, in decimal degrees."\n        latitude: Float!\n\n        "Longitude of the point in decimal degrees"\n        longitude: Float!\n\n        "Distance from the point in meters."\n        distance: Float!\n    }\n\n    input OrganizationInput {\n      organizationName: String,\n      organizationTypeId: Int,\n      address1: String,\n      address2: String,\n      city: String,\n      usStateId: Int,\n      countryId: Int,\n      zipCode: String,\n      phone: String\n    }\n\n    input TaxonomyInput {\n      scientificName: String!,\n      levelId: Int!,\n      parentId: Int!,\n      notes: String,\n      isTargetEffort: Boolean!\n      synonyms: [String]!\n      metadata: String\n    }\n\n    input ProjectInput {\n\n        "The name for the project must be unique across all projects in the system. It cannot be an empty string."\n        projectName: String!,\n\n        "Currently not used, this field is intended to distinguish private projects that can only be seen by the person who created them, from public projects that are visible to all users."\n        isPrivate: Boolean!,\n\n        "Optional descriptive information about the project purpose, background etc."\n        description: String, \n\n        "[JSON](https://namc-utah.github.io/namc-bug-db/API/json.html)|No|Optional data that can be useful for scripting and other automated processes."\n        metadata: String, \n\n        "Optional database ID of the individual who creates the project."\n        contactId: Int!\n\n        "Array of model IDs that are to be applied to the project"\n        modelIds: [Int]!\n    }\n\n    input ModelInput {\n        modelName: String!\n        abbreviation: String!\n        isActive: Boolean!\n        description: String\n        modelTypeId: Int!\n        fixedCount: Int\n        translationId: Int\n        extentDescription: String\n        platform: String\n        referenceSites: Int\n        groupCount: Int\n        minimumCount: Int\n        oeMean: Float\n        oeStdev: Float\n        taxonomicEffort: String\n        codeFunction: String\n        codeFunction2: String\n        predictorIds: [Int]!\n        metricIds: [Int]!\n    }\n\n    input PredictorInput {\n        predictorName: String!\n        abbreviation: String!\n        units: String\n        predictorTypeId: Int!\n        isTemporal: Boolean!\n        description: String\n        calculation: String\n        cellRepresents: String\n        cellSize: String\n        transformation: String\n        smallShedException: String\n        isText: String\n        isGee: String\n        source: String\n        calculationScript: String\n        notes: String\n        inputType: String\n        geometryFilePath: String\n        minValue: Float\n        maxValue: Float\n    }\n\n    input SiteInput {\n        siteName: String!\n        latitude: Float!\n        longitude: Float!\n        waterbodyName: String\n        waterbodyCode: String\n        waterbodyTypeId: Int\n        description: String\n        isReference: Boolean\n    }\n    \n    input MetricInput {\n      metricName: String!\n      abbreviation: String!\n      metricGroupId: Int!\n      displayText: String\n      rarefactionTypeId: Int!\n      isActive: Boolean!\n      calculationId: Int!\n      description: String\n      reportIds: [Int]!\n      taxonomyIds: [Int]!\n      attributeId: Int\n      attributeValues: [String]!\n    }\n\n    input IndividualInput {\n      firstName: String\n      lastName: String\n      phone: String\n      affiliationId: Int\n    }\n\n    input SampleInput {\n      area: Float\n      customerSiteCode: String\n      designTypeId: Int # nullable\n      ecosystemId: Int # nullable\n      effortTypeId: Int # nullable\n      fieldNotes: String\n      fieldSplit: Float!\n      habitatId: Int!\n      jarCount: Int!\n      labNotes: String\n      mesh: Float\n      sampleDate: String\n      sampleLongitude: Float # nullable\n      sampleLatitude: Float # nullable\n      sampleMethodId: Int!\n      siteId: Int!\n      visitId: String\n    }\n\n    input TranslationGroupInput {\n      translationScientificName: String!\n      isFinal: Boolean!\n      taxonomyIds: [Int!]! # must be at least one element\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    type Sample {  \n\n        "Database ID that uniquely identifies the sample."        \n        sampleId: Int\n\n        "Database ID that unique identifies the box."\n        boxId: Int\n\n        "The customer that submitted the sample"\n        customerName: String\n\n        "The abbreviated name of the customer that submitted the sample."\n        customerAbbreviation: String\n\n        "The name of the individual that submitted the sample."\n        submittedBy: String\n\n        "The current state of the box to which the sample belongs."\n        boxState: String\n\n        measurements: Boolean\n\n        "Database ID of the site where the sample was collected."\n        siteId: Int\n\n        "The unique name assigned to the site by NAMC."\n        siteName: String\n\n        "The abbreivation of the US state where the sample was collected."\n        usState: String\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) of the site associated with the sample."\n        siteLocation: String\n\n        "NAMC site longitude in decimal degrees."\n        siteLongitude: Float\n\n        "NAMC site latitude in decimal degrees."\n        siteLatitude: Float\n\n        "Cmbination of the site name and sample date used for repeat visits."\n        visitId: String\n\n        "The site identifier provided by the customer at submission."\n        customerSiteCode: String\n\n        "The date that the sample was collected."\n        sampleDate: String\n\n        "The time that the sample was collected."\n        sampleTime: String\n\n        "The sample type (e.g. benthic, drift, fish diet)."\n        sampleType: String\n\n        "The method used to collect the sample (e.g. Hess net, Surber net, Dissected Gut)"\n        sampleMethod: String\n\n        sampleMethodId: Int\n\n        "The habitat sampled (e.g. benthos, pelagic, pool, reachwide, stomach)"\n        habitatName: String\n\n        habitatId: Int\n\n        ecosystemId: Int\n\n        ecosystemName: String\n\n        "Customer description of the sampled location."\n        sampleLocation: String\n\n        "Longitude (in decimal degrees) of the customer sampled location."\n        sampleLongitude: Float\n\n        "Latitude (in decimal degrees) of the customer sampled location."\n        sampleLatitude: Float\n\n        waterbodyName: String\n\n        "Area sampled in meters squared."\n        area: Float\n\n        "Proportion of the sample that was retained for laboratory processing as a ratio (0-1)."\n        fieldSplit: Float\n\n        "Customer notes collected in the field."\n        fieldNotes: String\n\n        "Proporation of the sample processed in the laboratory as ratio (0-1)."\n        labSplit: Float\n\n        "Number of jars used to transport the sample."\n        jarCount: Int\n\n        "TODO"\n        qualitative: Boolean\n\n        "Laboratory notes pertaining to the sample."\n        labNotes: String\n\n        "Mesh size in microns."\n        mesh: Int\n\n        effortTypeId: Int\n        effortTypeName: String\n        designTypeId: Int\n        designTypeName: String\n\n        sorterId: Int\n        sorterName: String\n        sorterCount: Int\n        elutriation: Boolean\n        sortTime: Float\n        sortStartDate: String\n        sortEndDate: String\n\n        idErId: Int\n        idErName: String\n        idTime: Float\n        idStartDate: String\n        idEndDate: String\n\n        "Date time that the sample record was created in the database."\n        createdDate: String\n\n        "Date time of the last change to the sample record."\n        updatedDate: String\n\n        "Date time of the last change to the date sampled field. This is used to determine the status of temporal predictors for the sample."\n        sampleDateChanged: String\n\n        "For quality assurance samples, this refers to the original sample being quality controlled."\n        qaSampleId: Int\n\n        """\n        Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html).\n        Typically these values are used during scripting and automated processes.\n        They also include some legacy information about the sample from the previous NAMC database.\n        """\n        metadata: String\n    }\n\n    type Site {\n\n        "Database ID that uniquely identifies the site."\n        siteId: Int\n\n        "Unique name assigned to the site by NAMC"\n        siteName: String\n\n        "System in which the site occurs (e.g. lake, pond, reservoir, spring, wetland)."\n        system: String\n\n        "Ecosystem in which the site occurs (e.g. lotic, lentic, either)"\n        ecosystem: String\n\n        "Longitude of the site in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site in decimal degrees."\n        latitude: Float\n\n        "US state in which the site occurs."\n        usState: String\n\n        "US state ID in which the site occurs."\n        usStateId: Int\n\n        "Defines the dataset type of the waterbodyCode (e.g. NHDPlus, NHDPlusHR)"\n        waterbodyType: String\n\n        "External identifier for the waterbody on which the site occurs (e.g. NHDPlusID for NHDPlusHR or COMID for NHDPlus)"\n        waterbodyCode: String\n\n        "Name of the waterbody on which the site occurs."\n        waterbodyName: String\n\n        "Date and time that the site was added to the database."\n        createdDate: String\n\n        "Date and time that the site was last updated in the database."\n        updatedDate: String\n\n        "True if the site has a catchment polygon defined. Use the siteInfo API endpoint to retrieve the catchment polygon."\n        hasCatchment: Boolean\n\n        "Indicates if the site is considered in reference condition or not."\n        isReference: Boolean\n    }\n\n    """\n    Detailed information about a single NAMC site.\n\n    This query includes the point and catchment geometries for the site.\n    It also includes the number of samples available at a particular site.\n\n    More succinct information is available for all sites using the\n    sites API endpoint.\n    """\n    type SiteInfo {\n        \n        "Unique database generated integer that uniquely identifies each site"\n        siteId: Int\n\n        "Unique text identifier for each site"\n        siteName: String\n        \n        "The ecological system (e.g. lake, pond, reservoir) in which the site is located."\n        system: String\n\n        "The database ID of the ecological system"\n        systemId: Int\n\n        "The ecosystem in which the site is located."\n        ecosystem: String\n\n        "The database Id of the ecosystem"\n        ecosystemId: Int\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) point location of the site in [EPSG:4326](https://epsg.io/4326) spatial reference."\n        location: String\n\n        "Longtidue of the site location in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site location in decimal degrees."\n        latitude: Float\n\n        "US State in which the site is located."\n        usState: String\n\n        "US State ID in which the site is located."\n        usStateId: Int\n\n        """\n        If the site has a waterbody code, then the waterbody type identifies the system that\n        this identifier pertains to. The waterbody type might be NHDPlus 1:100,000 or \n        NHDPlusHR 1:24,000 etc.\n        """\n        waterbodyType: String\n\n        "The database ID of the waterbody Type"\n        waterbodyTypeId: Int\n\n        """\n        The identifier of the waterbody on which this site occurs. Can be null. If a \n        waterbody code exists, then the waterbodyType can be used to determine which\n        system the code belongs to, such as NHDPlus or NHDPlusHR.\n        """\n        waterbodyCode: String\n\n        "The string name of the waterbody on which the site occurs. Typicall this is the stream name."\n        waterbodyName: String\n\n        "The latest date and time that either the site location (point) or catchment (polygon) were changed."\n        geographyChanged: String\n\n        "The system generated date and time that the site record was created in the database."\n        createdDate: String\n\n        "The system generated date and time that the site record was last changed in the database."\n        updatedDate: String\n\n        "[GeoJSON](https://namc-utah.github.io/namc-bug-db/API/geojson.html) polygon of the upstream area that drains into this site in [EPSG:4326](https://epsg.io/4326) spatial reference."\n        catchment: String\n\n        "The number of samples that are available for this site."\n        sampleCount: Int\n\n        "True when the site is identified as being in reference condition."\n        isReference:Boolean\n\n        "Verbose description about the site"\n        description: String\n    }\n\n    """"\n    Raw summary of organisms for a single sample. The data are returned with their original\n    laboratory taxonomic identification.\n    """\n    type SampleTaxa {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelName: String\n\n        "Abundance for the specified taxa and lifestage. Raw organism count adjusted by lab and field splits."\n        splitCount: Int\n    }    \n    type SampleTaxaTranslated {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelName: String\n\n        otuName: String\n\n        "Abundance for the specified taxa and lifestage. Raw organism count adjusted by lab and field splits."\n        splitCount: Int\n    }\n    type SampleTaxaAttribute {\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."\n        scientificName: String\n\n        "Database ID that uniquely identifies the attribute definition."\n        attributeId: Int\n\n        "Attribute name, unique across all attributes in the database."\n        attributeName: String\n\n        "Attribute value, always stored as a string."\n        attributeValue: String\n    }\n\n    type SampleTaxaInfo {\n\n        "Organism ID uniquely identifying the taxon, life stage, split count and bug size"\n        organismId: Int\n\n        "Database ID of the sample."\n        sampleId: Int\n\n        "Current state of the box to which this sample is associated."\n        boxState: String\n\n       "The taxon identified within the laboratory."\n        taxonomyId: Int\n\n        "The name of the taxa identified with the laboratory."      \n        scientificName: String\n\n        "The taxonomic level of the taxa identified within the laboratory."\n        levelId: Int\n\n        "The taxonomic level of the taxa identified within the laboratory."   \n        levelName: String\n\n        "Phylum of the taxa"\n        phylum: String\n\n        "Class of the taxa"\n        class: String\n\n        "Order of the taxa"\n        order: String\n\n        "Family of the taxa"\n        family: String\n\n        "Subfamily of the taxa"\n        subFamily: String\n\n        "Genus of the taxa"\n        genus: String\n\n        "Species of the taxa"\n        species: String\n        \n        "Database ID of the organism(s) life stage (e.g. lavae, pupae)."\n        lifeStageId: Int\n\n        "Life stage of the organism(s) (e.g. lavae, pupae)."\n        lifeStage: String\n\n        "Abbreviated life stage of the organism(s) (e.g. lavae, pupae)."\n        lifeStageAbbreviation: String\n\n        "Organism length measured in millimeters (if measurements were collected)."\n        bugSize: Float\n\n        "Raw organism count recorded in the laboratory."\n        splitCount: Int\n        \n        "Proporation of the sample processed in the laboratory as ratio (0-1)."\n        labSplit: Float\n\n        "Proportion of the sample that was retained for laboratory processing as a ratio (0-1)."\n        fieldSplit: Float\n\n        "The raw count corrected for lab and field split."\n        correctedCount: Float\n        \n        "The count of big rare organisms collected in the laboratory."\n        bigRareCount: Int\n\n        "Comma separated list of the notes recorded during lab processing."\n        notes: String\n\n        noteTypeIds: [Int]\n\n        "Free text comments about the organism record"\n        comments: String\n    }\n\n    type BoxInfo {\n\n        "Database ID that uniquely identifies the box."\n        boxId: Int\n\n        "Database ID that uniquely identifies the customer that submitted the box."\n        customerId: Int\n\n        customer: Organization\n\n        customerAddress1: String\n        customerAddress2: String\n        customerCity: String\n        customerZipCode: String\n        customerPhone: String\n\n        "Database ID that uniquely identifies the person that submitted the box."\n        submitterId: Int\n\n        "Name of the person that submitted the box."\n        submittedBy: String\n\n        submitterEmail: String\n        submitterPhone: String\n\n        "Database ID that identifies the current state of the box (e.g. waiting, hold, active, complete)."\n        boxStateId: Int\n\n        "Current state of the box (e.g. waiting, hold, active, complete)."\n        boxState: String\n\n        "Date that the box was received. \'YYYY-MM-DD\'"\n        boxReceivedDate: String\n\n        "Date that box processing was completed."\n        processingCompleteDate: String\n        \n        "Anticipated date that box processing will be complete."\n        projectedCompleteDate: String\n\n        "Shorthand name for referring to the box"\n        alias: String\n\n        "Calculated number of samples associated with the box."\n        sampleCount: Int\n\n        "Descriptive information about the box."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "True if bug sizes are to be recorded when processing the box samples."\n        measurements: Boolean\n\n        "True if midges are to be collected and sent out for processing at a different laboratory"\n        midges: Boolean\n\n        modelIds: [Int]\n\n        "True if this box is for quality assurance purposes."\n        sorterQa: Boolean\n\n        "True if this box is for quality assurance purposes."\n        taxaQa: Boolean\n\n        "Number of samples for which sorting is complete"\n        sortCompleteCount: Int\n\n        "Proportion of samples in this box that have been sorted"\n        sortComplete: Float\n\n        "Number of samples for which identification is complete"\n        idCompleteCount: Int\n\n        "Proportion of samples in this box for which taxonomic identification is complete"\n        idComplete: Float\n\n        "Date and time that the box was added to the system."\n        createdDate: String\n\n        "Date and time that the box information was last updated."\n        updatedDate: String\n\n        latestSubmission: SubmissionVersion\n\n        submissions: [SubmissionVersion]\n\n        submissionCount: Int\n    }\n    \n\n    type SamplePredictorValue {\n\n        "Sample for which the predictor value either exists or is required"\n        sampleId: Int\n\n        "Date that the sample was collected"\n        sampleDate: String\n\n        "Box that the sample belongs to"\n        boxId: Int\n\n        "Official NAMC site at which the sample was collected"\n        siteId: Int\n\n        "List of models that are specified at the sample\'s box, or with a project in which the sample occurs."\n        modelIds: [Int]\n        \n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Name of the predictor"\n        predictorName: String\n\n        "Predictor abbreviated name (unique across all predictors)."\n        abbreviation: String\n\n        isGee: String\n\n        geometryFilePath: String\n\n        "Name of the R script/function used to calculate predictor values."\n        calculationScript: String\n\n        """\n        True indicates sample predictors where values vary by sample date.\n        False indicates site predictors that possess a single value for the site and that do not vary by sample date.\n        """\n        isTemporal: Boolean\n\n        "Floating point predictor value returned in string format."\n        predictorValue: String\n\n        qaqcDate: String\n\n        "Date and time that the predictor value was last changed."\n        predictorValueUpdatedDate: String\n\n        """\n        Predictor value status:\n        Missing indicates that the predictor value has never been calculated.\n        Expired indicates that the predictor value requires recalculation because either the sample date has changed or the site location has changed.\n        Valid indicates that the predictor value exists and does not require recalculation.\n        """\n        status: String\n}\n\ntype PlanktonSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Diameter of the sampled area in metres."\n    diameter: Float\n\n    "TODO"\n    subSampleCount: Int\n\n    "Tow lenth in metres"\n    towLength: Float\n\n    "volume of material in metres cubed."\n    volume: Float\n\n    "Aliquot in milliliters"\n    aliquot: Float\n\n    "Size interval in millimeters"\n    sizeInterval: Float\n\n    "The two type (e.g. vertical, horizontal)"\n    towType: String\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype DriftSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Area of the net in meters squared."\n    netArea: Float\n\n    "Duration that the net was in the water, recorded in hours."\n    netDuration: Float\n\n    "Stream depth measured in meters."\n    streamDepth: Float\n\n    "Net depth measurement in meters."\n    netDepth: Float\n\n    "Net velocity in meters per second."\n    netVelocity: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype FishSample {\n\n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Database ID identifying the fish taxon."\n    taxonomyId: Int\n\n    "Scientific name of the fish taxon."\n    scientificName: String\n\n    "Database ID identifying the taxonomic level of the fish."\n    levelId: Int\n\n    "Name of the taxonomic level of the fish."\n    levelName: String\n\n    "Length of the fish in TODO."\n    fishLength: Float\n\n    "Mass of the fish in grams."\n    fishMass: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype MassSample {\n \n    "Database ID that uniquely identifies the sample."\n    sampleId: Int\n\n    "Database ID that uniquely identifies the mass type"\n    typeId: Int\n\n    "Abbreviated name of the mass type (e.g. FPOM, CPOM, Total)"\n    typeAbbreviation: String\n\n    "Full name of the mass type collected (e.g. Fine Particulate Matter, Total)"\n    typeName: String\n\n    "Database that uniquely identifies the method used to collected the mass measurement"\n    methodId: Int\n\n    "Abbreviated name of the method used to collect the mass measurement (e.g. AFDM, Dried, Blotted)"\n    methodAbbreviation: String\n\n    "Full name of the method used to collect the mass measurement (e.g. Ash Free Dried Matter, Dried, Blotted)"\n    methodName: String\n\n    "Measurement mass in grams."\n    mass: Float\n\n    "Date and time that the plankton sample was last updated."\n    updatedDate: String\n}\n\ntype ModelResult {\n\n    "Database ID that uniquely identifies the sample."   \n    sampleId: Int\n\n    "Box that the sample belongs to."\n    boxId: Int\n\n    "Database ID that uniquely identifies the site at which the sample was collected."\n    siteId: Int\n\n    visitId: String\n\n    customerSiteCode: String\n\n    "Database ID that uniquely identifies the model to which the result pertains."\n    modelId: Int\n\n    "Full name of the model to which the result pertains."\n    modelName: String\n\n    "Abbreviated model short name"\n    modelAbbr: String\n\n    "Type of model - MMI or O2E"\n    modelTypeId: Int\n\n    "Model Type Name"\n    modelTypeName: String\n    \n    "Abbreviated Model Type Name"\n    modelTypeAbbr: String\n\n    "Translation ID (OTU)"\n    translationId: Int\n\n    "Translation Name (OTU)"\n    translationName: String\n\n    "Name of the code that runs the model"\n    codeFunction: String\n\n    "Alternate name of the code that runs the model"\n    codeFunction2: String\n\n    "Fixed count used for rarefaction during model calculation."\n    fixedCount: Int\n\n    oResult: Float\n\n    eResult: Float\n\n    modelApplicability: Boolean\n\n    "The model result value."\n    modelResult: Float\n\n    "The model condition obtained by the model result. See the modelConditions API endpoint for all possible conditions for a specific model."\n    condition: String\n\n    "Miscellaneous notes provided by the analyst that performed the model calculation."\n    notes: String\n\n    "Date and time that the model result was last updated in the database."\n    updatedDate: String\n}\n\n# type FishDiet {\n#     sampleId: Int\n#     sampleDate: String\n#     siteId: Int\n#     siteName: String\n#     fishWeight: Float\n#     fishLength: Float\n#     fishTaxonomyId: Int\n#     fishScientificName: String\n#     notes: String\n#     metadata: String\n#     organicWeight: Float\n#     inorganicWeight: Float\n#     otherWeight: Float\n#     createdDate: String\n#     updatedDate: String\n#     taxonomyId: Int\n#     scientificName: String\n#     lifeStageId: Int\n#     lifeStage: String\n#     count: Float\n#     weight: Float\n# }\n\n\n    #  type Individual {\n    #     entityId: Int\n    #     firstName: String\n    #     lastName: String\n    #     initials: String\n    #     affilitationId: Int\n    #     affiliation: String\n    #     email: String\n    #     title: String\n    #     address1: String\n    #     address2: String\n    #     city: String\n    #     stateName: String\n    #     countryName: String\n    #     zipCode: String\n    #     phone: String\n    #     fax: String\n    # }\n\n    type Box {\n        boxId: Int\n        customerId: Int\n        customerName: String\n        sampleCount: Int\n        submitterId: Int\n        submittedBy: String\n        boxStateId: Int\n        boxState: String\n        alias: String\n        boxReceivedDate: String\n        processingCompleteDate: String\n        projectedCompleteDate: String\n        measurements: Boolean\n        midges: Boolean\n        sortComplete: Float\n        idComplete: Float\n        createdDate: String\n        # These come from other queries\n        submissionCount: Int\n    }\n\n    type Project {\n\n        "Database ID that uniquely identifies the project."\n        projectId: Int\n\n        "Unique name for the project."\n        projectName: String\n\n        "Not currently used. All projects are currently public and visible to all users."\n        isPrivate: Boolean\n\n        "Database ID of the person who created the project."\n        contactId: Int\n        \n        "Full name of the person who created the project."\n        contactName: String\n\n        "Miscellaneous information about the project."\n        description: String\n\n        "Number of samples currently associated with a project."\n        sampleCount: Int\n\n        modelIds: [Int]!\n\n        "Date and time that the project was created."\n        createdDate: String\n\n        "Date and time that the basic project information was last updated. This does not reflect the addition or removal of samples."\n        updatedDate: String\n    }\n\n    type Taxonomy {\n\n        "Database ID that uniquely identifies the taxon."\n        taxonomyId: Int\n\n        "Current NAMC laboratory scientic name for the taxon. Scientific names are unique across all taxa."\n        scientificName: String\n\n        "Database ID that identifies the taxonomic level of the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon."\n        levelName: String\n\n        synonyms: String\n\n        "True if the taxon is at or below the level of effort required by the lab (e.g. genus or species). Or False for taxa above that level."\n        isTargetEffort: Boolean\n        \n        "Database ID of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentTaxonomyId: Int\n\n        "Scientific name of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentScientificName: String\n\n        "Database ID of the taxonomic level of the parent in the NAMC taxonomic hierarchy."\n        parentLevelId: Int\n\n        "Taxonomic level of the parent of this taxon in the NAMC taxonomic hierarchy."\n        parentLevelName: String\n\n        "Miscellaneous notes about the taxon."\n        notes: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that this taxon was added to the database."\n        createdDate: String\n\n        "Date and time that this taxon was last updated in the database."\n        updatedDate: String\n    }\n\n\n    type Model {\n\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Full name of the model, unique across all models."\n        modelName: String\n\n        "Abbreviated name of the model, unique across all models."\n        abbreviation: String\n\n        "True indicates that the model is in active use. False indicates a deprecated model."\n        isActive: Boolean\n\n        "Miscellaneous information about the model."\n        description: String\n\n        "Number of predictors currently associated with the model. Use the predictors API endpoint for a list of the predictors associated with each model."\n        predictorCount: Int\n\n        "Identifies the type of model"\n        modelTypeId: Int\n\n        "Model type name"\n        modelTypeName: String\n\n        "Number of organizations that are rarefied and passed to the model"\n        fixedCount: Int\n\n        "Identifies the translation (OTU) used by the model"\n        translationId: Int\n\n        "Translation used to run the model"\n        translationName: String\n    }\n\n    type ModelInfo {\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Full name of the model, unique across all models."\n        modelName: String\n\n        "Abbreviated name of the model, unique across all models."\n        abbreviation: String\n\n        "Model type (e.g. OE, MMI, hybrid, measurement)."\n        modelTypeName: String\n\n        modelTypeId: Int\n\n        "Model type abbreviation"\n        modelTypeAbbreviation: String\n\n        "Database ID identifying the translation (OTU) used by the model."\n        translationId: Int\n\n        "Name of the translation (OTU) used by the model."\n        translationName: String\n\n        "Description of the geographic extent to which the model applies."\n        extentDescription: String\n\n        "Platform on which the model runs (e.g. R, MS Access)."\n        platform: String\n\n        "Number of reference sites used to build the model."\n        referenceSites: Int\n\n        "TODO"\n        groupCount: Int\n\n        "Minimum organisms required to run the model."\n        minimumCount: Int\n\n        "TODO"\n        oeMean: Float\n\n        "TODO"\n        oeStdev: Float\n\n        "TODO"\n        taxonomicEffort: String\n\n        "True indicates the model is in active use. False indicates a deprecated model."\n        isActive: Boolean\n\n        "Fixed total number of organisms used to run the model."\n        fixedCount: Int\n\n        "Units of the model result."\n        units: String\n\n        "Miscellaneous information about the model."\n        description: String\n\n        "Number of predictors currently associated with the model."\n        predictorCount: Int\n\n        metricCount:Int\n\n        "Date and time that the model was added to the database."\n        createdDate: String\n\n        "Date and time that the model was last updated in the database."\n        updatedDate: String\n\n        predictorIds: [Int]\n\n        metricIds: [Int]\n\n        codeFunction: String\n        codeFunction2: String\n    }\n\n    type ModelCondition {\n\n        "Database ID that uniquely identifies the model."\n        modelId: Int\n\n        "Database ID that uniquely identifies the condition for the specified model."\n        conditionId: Int\n\n        "Name of the condition. Must be unique across all conditions for a single model."\n        condition: String\n\n        "Display text for the model condition."\n        displayText: String\n\n        "Standardized text for the model condition"\n        standardDisplayText: String\n\n        "Miscellaneous information about the model condition."\n        description: String\n    }\n\n    type Metric {\n\n        "Database ID that uniquely identifies the metric."\n        metricId: Int\n\n        "Unique metrics name."\n        metricName: String\n\n        "Metric abbreviation"\n        abbreviation: String\n\n        "Display name for the metric used in reports. If null, then the metricName is used instead."\n        displayText: String\n\n        "Database ID of the group in which the metric appears in reports."\n        metricGroupId: Int\n\n        "Name of the group in which the metric appears in reports."\n        metricGroupName: String\n\n        calculationId: Int\n\n        calculationName: String\n\n        isActive: Boolean\n\n        "Name of the database stored procedure that calculates the metric value."\n        codeFunction: String\n\n        "Miscellaneous information about the metric."\n        description: String\n\n        "Date and time that the metric definition was added to the database."\n        createdDate: String\n\n        "Date and time that the metric definition was last updated in the database."\n        updatedDate: String\n\n        "List of reports that this metric appears in"\n        reportIds: [Int]\n\n        "Determines whether this metric uses raw bench taxa, rarefied OTU taxa or rarefied unamgibuous taxa."\n        rarefactionTypeId: Int\n\n        rarefactionTypeName: String\n\n        "List of taxa that this metric filters by."\n        taxonomyIds: [Int]\n\n        "The attribute used to filter taxa. See the attributes list of which values of this attribute are matched with taxa attributes."\n        attributeId: Int\n\n        "List of attribute values for the specified attributeId that are used to filter taxa for this metric."\n        attributeValues: [String]\n    }\n\n    """\n    The value of a non-temporal predictor for a particular site.\n    """\n    type SitePredictorValue {\n\n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Predictor name, unique across all predictors."\n        predictorName: String\n\n        "The unique shorthand abbreviation for the predictor."\n        abbreviation: String\n\n        "Miscellaneous information about the predictor."\n        description: String\n\n        "The predictor type (e.g. metrics, atmosphere, geology, anthro)."\n        predictorType: String\n\n        """\n        The predictor value for this site. The value is always a string, even\n        if it represents an integer or floating point value.\n        """\n        predictorValue: String\n\n        "Date and time that the predictor value was added to the database."\n        createdDate: String\n\n        "Date and time that the predictor value was last updated."\n        updatedDate: String\n\n        "Optional name of the R function that performs the calculation for this predictor."\n        calculationScript: String\n    }\n\n    """\n    Information about a predictor.\n\n    Each predictor can be associated with multiple models. Predictors can also\n    be temporal, in which their values are associated with a particular sample,\n    or they can be non-temporal, in which case their values are associated with\n    sites.\n    """\n    type Predictor {\n\n        "Database ID that uniquely identifies the predictor."\n        predictorId: Int\n\n        "Predictor name, unique across all predictors in the system."\n        predictorName: String\n\n        "Abbreviated predictor name, unique across all predictors in the system."\n        abbreviation: String\n\n        "Units in which the predictor values are stored."\n        units: String\n\n       "Predictor type (e.g. metrics, atmosphere, geology, anthro)."\n        predictorType: String\n\n        """\n        Boolean representing whether the predictor varies over time or whether\n        there is just a single value for the site. True indicates that the predictor\n        is temporal and values are stored for each sample. False indicates that there\n        is only one predictor value for each site.\n        """\n        isTemporal: Boolean\n\n        "Miscellaneous information about the predictor."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "The number of models that currently use the predictor"\n        modelCount: Int\n\n        geometryFilePath: String\n        inputType: String\n        isGee: String\n\n        predictorTypeId: Int\n        cellRepresents: String\n        cellSize: String\n        transformation: String\n        smallShedException: String\n        minValue: Float\n        maxValue: Float\n        isText: String\n        notes: String\n        calculation: String\n\n        "Date and time that the predictor was added to the database."\n        createdDate: String\n\n        "Date and time that the predictor was last updated in the database."\n        updatedDate: String\n\n        "Optional name of the R function that performs the calculation for this predictor."\n        calculationScript: String\n\n        "Source information about the predictor."\n        source: String\n    }\n\n    input TranslationInput {\n        "Translation (OTU) name, unique across all translations in the system."\n        translationName: String\n\n        "Miscellaneous information about the translation."\n        description: String\n\n        "True indicates that the translation is in active use. False indicates that the translation has been deprecated."\n        isActive: Boolean\n\n    }\n\n    type Translation {\n\n        "Database ID that uniquely identifies the translation (OTU)."\n        translationId: Int\n\n        "Translation (OTU) name, unique across all translations in the system."\n        translationName: String\n\n        "Miscellaneous information about the translation."\n        description: String\n\n        "True indicates that the translation is in active use. False indicates that the translation has been deprecated."\n        isActive: Boolean\n\n        "Current number of taxa associated with the translation. See [translation](https://namc-utah.github.io/namc-bug-db/Technical_Reference/translations.html) for more information."\n        taxaCount: Int\n\n        "Date and time that the translation was added to the database."\n        createdDate: String\n\n        "Date and time that the translation was last updated in the database."\n        updatedDate: String\n    }\n\n    type TranslationTaxa {\n\n        "Database ID of the translation (OTU) that this taxon appears in."\n        translationId: Int\n\n        "Name of the translation (OTU) that this taxon appears in."\n        translationName: String\n\n        "Database ID of the taxon that appears in the translation."\n        taxonomyId: Int\n\n        "Database ID of the taxonomic level for the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon in the NAMC taxonomic hierarchy."\n        levelName: String\n\n        "NAMC scientific name for the taxon. This is the current scientific name used by taxonomists in the NAMC laboratory."\n        originalScientificName: String\n\n        """\n        The name used for the taxon within the translation (OTU).\n        This might be the same as the NAMC scientific name, or it might be an alias, specific to the OTU.\n        """\n        translationScientificName: String\n\n        """\n        True indicates that the taxon is part of the final set of taxa used to calibrate the model.\n        False indicates that the taxon was part of the larger set initially identified during model development.\n        """\n        isFinal: Boolean\n    }\n\n    type TranslationGroup {\n      translationGroupId: Int\n      translationScientificName: String\n      isFinal: Boolean\n      taxonomyIds: [Int!]\n    }\n\n    type Attribute {\n\n        "Database ID that uniquely identifies the attribute definition."\n        attributeId: Int\n\n        "Attribute name, unique across all attributes in the database."\n        attributeName: String\n\n        "TODO (they are all Unknown in the SLQ file) Attribute type (e.g. )"\n        attributeType: String\n\n        "Display label used for the attribute in reports"\n        label: String\n\n        "Miscellaneous information about the attribute."\n        description: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that the attribute was added to the database."\n        createdDate: String\n\n        "Date and time that the attribute was last updated in the database."\n        updatedDate: String\n    }\n\n    type AttributeValue {\n\n        "Database ID of the taxon to which this attribute value applies."\n        taxonomyId: Int\n\n        "Current scientific name for the taxon to which this attribute value applies."\n        scientificName: String\n\n        "Database ID of the taxonomic level for the taxon."\n        levelId: Int\n\n        "Taxonomic level of the taxon to which this attribute value applies."\n        levelName: String\n\n        "Attribute name."\n        attributeName: String\n\n        "Attribute type TODO (currently all Unknown)"\n        attributeType: String\n\n        "Display label name for the attribute."\n        label: String\n\n        "Attribute value, always stored as a string."\n        attributeValue: String\n    }\n\n    type MetricResult  {\n\n        "Database ID that identifies the sample."\n        sampleId: Int\n\n        "Database ID that identifies the metric group for organizing metrics in reports."\n        metricGroupId: Int\n\n        "Metric group name used for organizing metrics in reports."\n        metricGroupName: String\n\n        "Database ID that identifies the metric."\n        metricId: Int\n\n        "Metric name."\n        metricName: String\n\n        "Shortened metric abbreviation"\n        metricAbbreviation: String\n\n        "Metric value, always represented as a string."\n        metricValue: String\n  }\n  # TODO: Eventually this should implement Entity but check for R problems firs\n  # type Organization implements Entity{\n  type Organization {\n\n        "Database ID that uniquely identifies the organization."\n        entityId: Int\n\n        "Organization name, unique across all organizations in the database."\n        organizationName: String\n\n        "Organization Type (e.g. federal, tribe, university, other, private, state, international)."\n        organizationType: String\n\n        "Organization Type Id."\n        organizationTypeId: Int\n\n        "Entity ID of the parent organization."\n        parentEntityId: Int\n\n        "True if the organization is a laboratory."\n        isLab: Boolean\n\n        "Street address line 1."\n        address1: String\n\n        "Street address line 2."\n        address2: String\n\n        "City."\n        city: String\n\n        "US State. Null for international organizations."\n        usState: String\n\n        "Country."\n        country: String\n\n        usStateId: Int\n        countryId: Int\n\n        "Postal code."\n        zipCode: String\n\n        "Telephone number with area code. Format (xxx) xxx-xxxx"\n        phone: String\n\n        "Fax number. Format (xxx) xxx-xxxx"\n        fax: String\n\n        "Organization\'s website URL. Includes the http:// or https:// prefix."\n        website: String\n\n        "Miscellaneous information about the organization."\n        notes: String\n\n        "Miscellaneous information about stored as [JSON](https://namc-utah.github.io/namc-bug-db/API/metadata.html). Typically used during scripting and automated processes."\n        metadata: String\n\n        "Date and time that the organization was added to the database."\n        createdDate: String\n\n        "Date and time that the organization was last updated in the database."\n        updatedDate: String\n\n        userCount: Int\n    }\n\n    type ModelSample {\n      modelId: Int\n      sampleId: Int\n      siteQuality: String\n      screeningAgency: String\n      screeningMethod: String\n      roadDenScreened: String\n      roadCrossScreened: String\n      railroadsScreened: String\n      canalsScreened: String\n      damsScreened: String\n      agScreened: String\n      urbanScreened: String\n      minesScreened: String\n      oilGasScreened: String\n      wqScreened: String\n      w1HallScreened: String\n      grazingScreened: String\n      loggingScreened: String\n    }\n\n    # Pagination Types\n  \n    type PaginatedModels {\n        records: [Model]\n        nextOffset: Int\n    }\n    type PaginatedSites {\n        records: [Site]\n        nextOffset: Int\n    }\n    type PaginatedSamples {\n        records: [Sample]\n        nextOffset: Int\n    }\n\n    type PaginatedBoxes {\n        records: [Box]\n        nextOffset: Int\n    }\n    type PaginatedProjects {\n        records: [Project]\n        nextOffset: Int\n    }\n    type PaginatedTaxonomies {\n        records: [Taxonomy]\n        nextOffset: Int\n    }\n\n    type PaginatedPredictors {\n        records: [Predictor]\n        nextOffset: Int\n    }\n    type PaginatedSitePredictorValues {\n        records: [SitePredictorValue]\n        nextOffset: Int\n    }\n\n    type PaginatedSamplePredictorValue {\n        records: [SamplePredictorValue]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslations {\n        records: [Translation]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslationTaxa {\n        records: [TranslationTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedTranslationGroup {\n        records: [TranslationGroup]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxa {\n        records: [SampleTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaTranslated {\n        records: [SampleTaxaTranslated]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaInfo {\n        records: [SampleTaxaInfo]\n        nextOffset: Int\n    }\n\n    type PaginatedSampleTaxaAttribute {\n        records: [SampleTaxaAttribute]\n        nextOffset: Int\n    }    \n\n    type PaginatedPlankton {\n        records: [PlanktonSample]\n        nextOffset: Int\n    }\n\n    type PaginatedDrift {\n        records: [DriftSample]\n        nextOffset: Int\n    }\n\n    type PaginatedFish {\n        records: [FishSample]\n        nextOffset: Int\n    }\n\n    type PaginatedMass {\n        records: [MassSample]\n        nextOffset: Int\n    }\n\n    type PaginatedAttributes {\n        records: [Attribute]\n        nextOffset: Int\n    }\n\n    type PaginatedAttributeValues {\n        records: [AttributeValue]\n        nextOffset: Int\n    }\n\n    type PaginatedModelConditions {\n        records: [ModelCondition]\n        nextOffset: Int\n    }\n\n    type PaginatedMetrics {\n        records: [Metric]\n        nextOffset: Int\n    }\n\n    type PaginatedMetricResult {\n        records: [MetricResult]\n        nextOffset: Int\n    }\n\n    type PaginatedModelResult {\n        records: [ModelResult]\n        nextOffset: Int\n    }\n\n    # type PaginatedFishDiet {\n    #     records: [FishDiet]\n    #     nextOffset: Int\n    # }\n\n    type PaginatedOrganizations {\n        records: [Organization]\n        nextOffset: Int\n    }\n\n    type PaginatedIndividuals {\n        records: [Individual]\n        nextOffset: Int\n    }\n\n    type PaginatedBoxTaxa {\n        records: [BoxTaxa]\n        nextOffset: Int\n    }\n\n    type PaginatedMapSites {\n      records: [MapSite]\n      nextOffset: Int\n    }\n\n    type PaginatedReports {\n      records: [Report]\n      nextOffset: Int\n    }\n\n    type PaginatedReportData {\n      records: [JSONObject]\n      nextOffset: Int\n    }\n\n    type PaginatedModelSamples {\n        records: [ModelSample]\n        nextOffset: Int\n    }\n\n    type Report {\n      reportId: Int\n      reportName: String\n      description: String\n      isActive: Boolean\n    }\n\n  \n    interface Entity {\n      ',"\n    }\n\n    type Individual implements Entity{\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      affiliationId: Int\n      ",'\n      organizationName: String\n      roleIds: [Int]\n    }\n\n    type SampleSubmitter {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      "Telephone number with area code. Format (xxx) xxx-xxxx"\n      phone: String\n    }\n\n    # A user is like an individual but we\'re leaving that type alone for now\n    type Profile implements Entity {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      initials: String\n      email: String\n      title: String\n      affiliationId: Int\n      ','\n      organizationName: String\n      roleIds: [Int]\n      permissions: JSONObject\n    }\n\n    type SortingUser {\n      id: Int!\n      firstName: String!\n      lastName: String!\n      title: String\n      organizationName: String\n    }\n\n    type BoxTaxa {\n      order: String\n      family: String\n      taxonomyId: Int\n      scientificName: String\n      taxonomistCounts: JSONObject\n      sampleCount: Int\n      totalCount: Int\n    }\n\n    type SubmissionVersion {\n      boxId: Int\n      versionId: Int\n      submissionId: Int\n      submitterId: Int\n      submitter: SampleSubmitter\n      createdDate: String\n      updatedDate: String\n    }\n\n    type USState {\n      id: Int!\n      name: String!\n      abbreviation: String!\n    }\n\n    type MapSite {\n        \n        "Unique database generated integer that uniquely identifies each site"\n        siteId: Int\n\n        "Unique text identifier for each site"\n        siteName: String\n        \n        "Longtidue of the site location in decimal degrees."\n        longitude: Float\n\n        "Latitude of the site location in decimal degrees."\n        latitude: Float\n\n        "US State in which the site is located."\n        usStateId: Int\n    }\n\n    type FinalizePendingBoxResult {\n      success: Boolean!\n      stats: JSONObject\n      errors: [String]\n      warnings: [String]\n    }\n\n    ',"\n"])),t.queryLimits.organizations,t.queryLimits.organizations,t.queryLimits.organizations,t.queryLimits.metrics,t.queryLimits.samples,t.queryLimits.sites,t.queryLimits.boxes,t.queryLimits.boxes,t.queryLimits.projects,t.queryLimits.predictors,t.queryLimits.models,t.queryLimits.sitePredictorValues,t.queryLimits.modelResults,t.queryLimits.modelResults,t.queryLimits.taxonomy,t.queryLimits.taxonomy,t.queryLimits.taxonomy,t.queryLimits.taxonomy,t.queryLimits.taxonomy,t.queryLimits.translations,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.samples,t.queryLimits.metrics,t.queryLimits.mapSites,t.queryLimits.metrics,t.queryLimits.metrics,t.queryLimits.boxes,t.queryLimits.boxes,t.queryLimits.boxes,t.queryLimits.samples,l,l,l,o.default);t.default=c},349:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pubQueryLimits=void 0;var i=r(n(14)),o=r(n(240));t.pubQueryLimits={sites:1e4,taxonomies:1e5,organisms:1e5,samples:1e5,projects:1e5};var s,l=(0,i.default)(s||(s=a(["\n  scalar JSONObject\n\n  schema {\n    query: Query\n  }\n\n  type Query {\n    taxonomies(limit: Int = ",", offset: Int = 0): PubPaginatedTaxonomies\n    projects(limit: Int = ",", offset: Int = 0): PubPaginatedProjects\n    sites(limit: Int = ",", offset: Int = 0): PubPaginatedSites\n    taxaSites(taxonomyId: Int!): [Int]\n    csvDownload(limit: Int!, offset: Int!, filters: CSVFiltersInput!): PubPaginatedCSVRows\n    lookups: Lookups\n  }\n\n  input CSVFiltersInput {\n    projectId: Int\n    usStateId: Int\n    typeId: Int\n    methodId: Int\n    taxonomyId: Int\n    siteId: Int\n    fromYear: Int # inclusive; I will always supply so can be mandatory if makes your life easier\n    toYear: Int # inclusive; I will always supply so can be mandatory if makes your life easier\n  }\n\n  type PubPaginatedCSVRows {\n    records: [JSONObject]\n    nextOffset: Int\n  }\n\n  type PubSite {\n    siteId: Int\n    siteName: String\n    longitude: Float\n    latitude: Float\n    usStateId: Int\n    methodIds: [Int]\n    typeIds: [Int]\n    projectIds: [Int]\n    years: [Int]\n  }\n\n  type PubPaginatedSites {\n    records: [PubSite]\n    nextOffset: Int\n  }\n\n  type PubProject {\n    projectId: Int\n    projectName: String\n    sampleIds: [Int]\n  }\n\n  type PubPaginatedProjects {\n      records: [PubProject]\n      nextOffset: Int\n  }\n\n  type PubTaxonomy {\n    taxonomyId: Int\n    scientificName: String\n    levelId: Int\n    synonyms: String\n    parentTaxonomyId: Int\n  }\n\n  type PubPaginatedTaxonomies {\n      records: [PubTaxonomy]\n      nextOffset: Int\n  }  \n\n  ","\n"],["\n  scalar JSONObject\n\n  schema {\n    query: Query\n  }\n\n  type Query {\n    taxonomies(limit: Int = ",", offset: Int = 0): PubPaginatedTaxonomies\n    projects(limit: Int = ",", offset: Int = 0): PubPaginatedProjects\n    sites(limit: Int = ",", offset: Int = 0): PubPaginatedSites\n    taxaSites(taxonomyId: Int!): [Int]\n    csvDownload(limit: Int!, offset: Int!, filters: CSVFiltersInput!): PubPaginatedCSVRows\n    lookups: Lookups\n  }\n\n  input CSVFiltersInput {\n    projectId: Int\n    usStateId: Int\n    typeId: Int\n    methodId: Int\n    taxonomyId: Int\n    siteId: Int\n    fromYear: Int # inclusive; I will always supply so can be mandatory if makes your life easier\n    toYear: Int # inclusive; I will always supply so can be mandatory if makes your life easier\n  }\n\n  type PubPaginatedCSVRows {\n    records: [JSONObject]\n    nextOffset: Int\n  }\n\n  type PubSite {\n    siteId: Int\n    siteName: String\n    longitude: Float\n    latitude: Float\n    usStateId: Int\n    methodIds: [Int]\n    typeIds: [Int]\n    projectIds: [Int]\n    years: [Int]\n  }\n\n  type PubPaginatedSites {\n    records: [PubSite]\n    nextOffset: Int\n  }\n\n  type PubProject {\n    projectId: Int\n    projectName: String\n    sampleIds: [Int]\n  }\n\n  type PubPaginatedProjects {\n      records: [PubProject]\n      nextOffset: Int\n  }\n\n  type PubTaxonomy {\n    taxonomyId: Int\n    scientificName: String\n    levelId: Int\n    synonyms: String\n    parentTaxonomyId: Int\n  }\n\n  type PubPaginatedTaxonomies {\n      records: [PubTaxonomy]\n      nextOffset: Int\n  }  \n\n  ","\n"])),t.pubQueryLimits.taxonomies,t.pubQueryLimits.projects,t.pubQueryLimits.sites,o.default);t.default=l},350:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=t.authCheck=t.apiCall=void 0;var i,o,s=r(n(217)),l=n(275),c=r(n(14)),u=r(n(30));t.apiCall=function(e,t,n,a,r){var i=Date.now();return(0,s.default)({url:e,method:"post",timeout:r,headers:{Authorization:t?"Bearer ".concat(t):"Bearer NONE"},data:{query:(0,l.print)(n),variables:a}}).then((function(e){var t=e.data,r=(Date.now()-i)/1e3;return r>10&&u.default.warn("Query took ".concat(r.toFixed(1)," seconds. ").concat((0,l.print)(n).replace(/\n/g,"").slice(0,50)," ").concat(JSON.stringify(a))),t})).catch((function(r){throw r.response&&404===r.response.status?new Error("API Url not found: ".concat(e)):r.code&&"ECONNREFUSED"===r.code?new Error("Connection refused. Could not contact: '".concat(e,"'")):(u.default.error("apiCall Error",{url:e,jwt:t,query:(0,l.print)(n),variables:a,err:r}),r)}))},t.authCheck=function(e,n,r){return(0,t.apiCall)(e,n,(0,c.default)(i||(i=a(["\n      query AuthCall {\n        auth {\n          loggedIn\n          userPool\n          clientId\n          region\n          domain\n        }\n      }\n    "],["\n      query AuthCall {\n        auth {\n          loggedIn\n          userPool\n          clientId\n          region\n          domain\n        }\n      }\n    "]))),{},r)},t.metrics=function(e,n,r,i,s){return(0,t.apiCall)(e,n,(0,c.default)(o||(o=a(["\n      query getMetrics($limit: Int, $offset: Int) {\n        metrics(limit: $limit, offset: $offset) {\n          records {\n            metricId\n            metricName\n            displayText\n            metricGroupId\n            metricGroupName\n            codeFunction\n            isStandardized\n            perturbDirection\n            description\n            createdDate\n            updatedDate\n            updatedDate\n          }\n        }\n      }\n    "],["\n      query getMetrics($limit: Int, $offset: Int) {\n        metrics(limit: $limit, offset: $offset) {\n          records {\n            metricId\n            metricName\n            displayText\n            metricGroupId\n            metricGroupName\n            codeFunction\n            isStandardized\n            perturbDirection\n            description\n            createdDate\n            updatedDate\n            updatedDate\n          }\n        }\n      }\n    "]))),{limit:r,offset:i},s)}},368:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.snake2camel=t.camel2snake=void 0;var r=n(457);t.camel2snake=function(e){return Object.keys(e).reduce((function(t,n){var i;return a(a({},t),((i={})[(0,r.snakeCase)(n)]=e[n],i))}),{})};t.snake2camel=function(e){return Object.keys(e).reduce((function(t,n){var i;return a(a({},t),((i={})[(0,r.camelCase)(n)]=e[n],i))}),{})}},396:function(e,t){},449:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},456:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SampleIndexRenderer",(function(){return sg})),n.d(a,"ActionsRenderer",(function(){return lg}));var r={};n.r(r),n.d(r,"NumberEditor",(function(){return wy})),n.d(r,"LifeStageEditor",(function(){return Iy})),n.d(r,"LifeStageRenderer",(function(){return Sy})),n.d(r,"NumberRenderer",(function(){return ky})),n.d(r,"TaxonRenderer",(function(){return Cy})),n.d(r,"NotesAndCommentsRenderer",(function(){return Dy})),n.d(r,"NotesAndCommentsEditor",(function(){return zy})),n.d(r,"ActionsRenderer",(function(){return Ty})),n.d(r,"PersistenceRenderer",(function(){return Ny}));var i={};n.r(i),n.d(i,"TaxonNameRenderer",(function(){return _y}));var o={};n.r(o),n.d(o,"TaxaRenderer",(function(){return Wy})),n.d(o,"ActionsRenderer",(function(){return Vy}));var s=n(1),l=n.n(s),c=n(65),u=n.n(c),d=n(10),p="https://6dsntufqt9.execute-api.us-west-2.amazonaws.com/production/api".includes("/staging/api"),m="undefined"!==typeof location&&"localhost"===location.hostname,b="1.0.14",f=n(40),h=n.n(f),g=n(112),y=n.n(g),v=n(176),x=n.n(v);h.a.extend(y.a),h.a.extend(x.a);var O,j=function(e){return e.toLocaleString()},w=function(e){return e?e.match(/T00:00:00(\+00:00|Z)/)?e.substring(0,"YYYY-MM-DD".length):h()(e).tz("US/Mountain").format("YYYY-MM-DD"):null},I={is:"are",box:"boxes",taxon:"taxa",child:"children",taxa:!1,"individuals counted":!1},S=function(e,t){if("number"===typeof e&&1===e)return t;var n=I[t];return!1===n?t:null!==n&&void 0!==n?n:"".concat(t,"s")},k=n(58),C=function(e,t){var n=Object(s.useState)(e),a=n[0],r=n[1],i=Object(s.useRef)({isFirstRender:!0}).current,o=Object(s.useCallback)((function(e){return r((function(t){return Object(k.a)(t,e)}))}),[r]);return Object(s.useEffect)((function(){i.isFirstRender?i.isFirstRender=!1:r(e)}),t),[a,r,o]},D=n(74),z=n.n(D),T=n(139),N=n.n(T),A=n(24),P=n.n(A),M=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},L=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},R=function(e,t){return M(void 0,void 0,void 0,(function(){var n,a;return L(this,(function(r){switch(r.label){case 0:return[4,e.xlsx.writeBuffer()];case 1:return n=r.sent(),a=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),N()(a,t),[2]}}))}))},_=function(e,t){return M(void 0,void 0,void 0,(function(){var n,a;return L(this,(function(r){switch(r.label){case 0:return[4,e.csv.writeBuffer()];case 1:return n=r.sent(),a=new Blob([n],{type:"text/csv"}),N()(a,t),[2]}}))}))},F=function(e){var t=new z.a.Workbook;return E(t,e),t},E=function(e,t){var n=t.wsName,a=t.columns,r=t.rows,i=e.addWorksheet(n);i.columns=a,i.addRows(r),i.columns.forEach((function(e){var t=e.values;if(t){var n=t.slice(1).map((function(e){return(e||"").toString().length})),a=Math.max.apply(Math,n.filter((function(e){return"number"===typeof e})));e.width=a+2}})),i.views=[{state:"frozen",xSplit:void 0,ySplit:1,activeCell:"A1"}]},q=function(e,t){var n=Object(s.useRef)(),a=Object(s.useState)(e),r=a[0],i=a[1],o=Object(s.useCallback)((function(e){n.current&&clearTimeout(n.current),i(e)}),[]);return Object(s.useEffect)((function(){n.current&&clearTimeout(n.current),n.current=setTimeout((function(){i(e)}),t)}),[e]),[r,o]},B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},B.apply(this,arguments)},U=function(e){var t=B({},e);return Object.entries(t).forEach((function(e){var n=e[0],a=e[1];"string"===typeof a&&(t[n]=a.trim())})),t},G=(function(){var e=1e5}(),function(e){var t,n;try{t=JSON.parse(e)}catch(r){throw new Error("not valid JSON")}if(Array.isArray(t))n=t;else switch(Object(A.get)(t,"type")){case"FeatureCollection":var a=Object(A.get)(t,"features");if(!Array.isArray(a)||1!==a.length)throw new Error("FeatureCollection must have exactly one Feature");if("Polygon"!==Object(A.get)(a[0],"geometry.type"))throw new Error("Feature must be a Polygon");n=Object(A.get)(a[0],"geometry.coordinates");break;case"Feature":if("Polygon"!==Object(A.get)(t,"geometry.type"))throw new Error("Feature must be a Polygon");n=Object(A.get)(t,"geometry.coordinates");break;case"Polygon":n=Object(A.get)(t,"coordinates");break;case void 0:throw new Error("not valid GeoJSON, missing type");default:throw new Error("not valid GeoJSON, invalid type")}if(!n||!function(e){if(!Array.isArray(e)||0===e.length)throw new Error("Polygon is not an array of rings");return e.forEach((function(e){if(!Array.isArray(e)||e.length<4)throw new Error("Polygon ring does not contain not enough points");e.forEach((function(e){if(!Array.isArray(e)||2!==e.length)throw new Error("Polygon has invalid coordinates");if("number"!==typeof e[0])throw new Error("Polygon has invalid coordinates");if("number"!==typeof e[1])throw new Error("Polygon has invalid coordinates")}));var t=e.length-1;if(e[0][0]!==e[t][0]||e[0][1]!==e[t][1])throw new Error("Polygon is not a closed ring")})),!0}(n))throw new Error("could not parse coordinates");return n}),W=n(85),V=function(e,t){return W.distance(W.point([e.longitude,e.latitude]),W.point([t.longitude,t.latitude]))},H=function(e,t,n){var a=n?e.filter((function(e){return Math.abs(e.latitude-t.latitude)<n&&Math.abs(e.longitude-t.longitude)<n})):e;return Object(A.sortBy)(a.map((function(e){return{site:e,distance:V(e,t)}})),(function(e){return e.distance}))},J=n(7),Y=n(30),Q=n.n(Y),$=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Z=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},K=function(){var e=1;return function(){return String(e++)}}(),X=function(e){var t=this;this.responseDelay=0,this.responders=new Map,this.setResponders=function(e){t.responders.clear(),t.addResponders(e)},this.addResponders=function(e){e.forEach((function(e){var n=e[0],a=e[1];t.responders.set(n,a)}))},this.setResponseDelay=function(e){t.responseDelay=e},this.wait=function(){return $(t,void 0,void 0,(function(){var e=this;return Z(this,(function(t){return[2,new Promise((function(t){window.setTimeout(t,e.responseDelay)}))]}))}))},this.signOut=function(){Q.a.debug("MockApi signOut")},this.query=function(e,n){return $(t,void 0,void 0,(function(){var t,a,r,i;return Z(this,(function(o){switch(o.label){case 0:return t=K(),Q.a.debug("%cMockApi query #".concat(t),"color: black; background: lightgreen",null===(i=e.loc)||void 0===i?void 0:i.source.body,n),a=this.responders.get(e),[4,this.wait()];case 1:return o.sent(),a?(r=a(n),Q.a.debug("%cMockApi responded to query #".concat(t),"color: black; background: #0cb700",r),[2,r]):[2,new Promise((function(){Q.a.debug("%cMockApi not responding to query #".concat(t),"color: black; background: lightgray")}))]}}))}))},this.queryAllPages=function(e,n,a){return a.dataProperty,$(t,void 0,void 0,(function(){var t,a,r,i;return Z(this,(function(o){switch(o.label){case 0:return t=K(),Q.a.debug("%cMockApi queryAllPages #".concat(t),"color: black; background: lightgreen",null===(i=e.loc)||void 0===i?void 0:i.source.body,n),a=this.responders.get(e),[4,this.wait()];case 1:return o.sent(),a?(r=a(n),Q.a.debug("%cMockApi responded to queryAllPages #".concat(t),"color: black; background: #0cb700",r),[2,r]):[2,new Promise((function(){Q.a.debug("%cMockApi not responding to queryAllPages #".concat(t),"color: black; background: lightgray")}))]}}))}))},this.mutation=function(e,n){return $(t,void 0,void 0,(function(){var t,a,r,i;return Z(this,(function(o){switch(o.label){case 0:return t=K(),Q.a.debug("%cMockApi mutation #".concat(t),"color: black; background: #ffd17a",null===(i=e.loc)||void 0===i?void 0:i.source.body,n),a=this.responders.get(e),[4,this.wait()];case 1:return o.sent(),a?(r=a(n),Q.a.debug("%cMockApi responded to mutation #".concat(t),"color: black; background: orange",r),[2,r]):[2,new Promise((function(){Q.a.debug("%cMockApi not responding to mutation #".concat(t),"color: black; background: lightgray")}))]}}))}))},this.log=function(e,n,a){return $(t,void 0,void 0,(function(){return Z(this,(function(t){return Q.a.debug("%cMockApi log ".concat(e),"color: black; background: #ff70ee",n,a),[2]}))}))},e&&this.setResponders(e)},ee=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),te=function(e){function t(t){var n=e.call(this)||this;return n.message=t,n}return ee(t,e),t.prototype.toString=function(){return this.message},t}(Error),ne=Object(J.b)({key:"apiState",default:new X,dangerouslyAllowMutability:!0}),ae=(Object(J.b)({key:"pubApiState",default:new X,dangerouslyAllowMutability:!0}),function(){return Object(J.i)(ne)}),re=n(21),ie=function(){return ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ie.apply(this,arguments)},oe=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},se=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},le=function(){var e=1;return function(){return String(e++)}}(),ce=function(e,t,n){var a=this;this.send=function(e,t){return oe(a,void 0,void 0,(function(){var n,a,r,i,o,s,l,c,u;return se(this,(function(d){switch(d.label){case 0:return this.auth?[4,null===(l=this.auth)||void 0===l?void 0:l.getCurrentToken()]:[3,2];case 1:return a=d.sent(),[3,3];case 2:a=null,d.label=3;case 3:return n=a,[4,re.api.apiCall(this.url,n,e,t,3e4)];case 4:if(r=d.sent(),i=r.data,(o=r.errors)||!i)throw s=null!==(c=null===o||void 0===o?void 0:o.map((function(e){return e.message})).join(";"))&&void 0!==c?c:"unknown error or missing data",Q.a.error(s,o),o&&"Authentication Error"===(null===(u=o[0])||void 0===u?void 0:u.message)&&this.signOut(),new te(s);return[2,i]}}))}))},this.queryAllPages=function(e,t,n){var r=n.dataProperty,i=n.onRecords,o=n.firstOffset,s=void 0===o?0:o,l=n.lastOffset,c=void 0===l?1/0:l;return oe(a,void 0,void 0,(function(){var n,a,o,l,u,d,p;return se(this,(function(m){switch(m.label){case 0:n=s,a=[],m.label=1;case 1:return null===n?[3,3]:[4,this.query(e,ie(ie({},t),{offset:n}))];case 2:if(o=m.sent(),l=o[r],u=l.records,void 0===(d=l.nextOffset))throw new te("queryAllPages was called without the query returning nextOffset.");return a.push.apply(a,u),n=d,i&&i(u.length),!n||n>=c?[2,ie(ie({},o),(p={},p[r]={records:a},p))]:[3,1];case 3:throw new Error("queryAllPages finished without returning data")}}))}))},this.query=function(e,t){return oe(a,void 0,void 0,(function(){var n,a,r,i;return se(this,(function(o){switch(o.label){case 0:n=le(),Q.a.debug("%cGraphApi query #".concat(n),"color: black; background: lightgreen",null===(i=e.loc)||void 0===i?void 0:i.source.body,t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.send(e,t)];case 2:return a=o.sent(),Q.a.debug("%cGraphApi response #".concat(n),"color: black; background: #0cb700",a),[2,a];case 3:throw r=o.sent(),Q.a.debug("%cGraphApi response #".concat(n,"%c %cERROR"),"color: black; background: lightgreen","background: transparent","color: white; background: red"),r;case 4:return[2]}}))}))},this.mutation=function(e,t){return oe(a,void 0,void 0,(function(){var n,a,r,i;return se(this,(function(o){switch(o.label){case 0:n=le(),Q.a.debug("%cGraphApi mutation #".concat(n),"color: black; background: #ffd17a",null===(i=e.loc)||void 0===i?void 0:i.source.body,t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.send(e,t)];case 2:return a=o.sent(),Q.a.debug("%cGraphApi response #".concat(n),"color: black; background: orange",a),[2,a];case 3:throw r=o.sent(),Q.a.debug("%cGraphApi response #".concat(n,"%c %cERROR"),"color: black; background: orange","background: transparent","color: white; background: red"),r;case 4:return[2]}}))}))},this.log=function(e,t,n){return oe(a,void 0,void 0,(function(){return se(this,(function(e){return[2]}))}))},this.url=e,this.auth=t,this.signOut=n},ue=n(5),de=function(){return de=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},de.apply(this,arguments)},pe=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},me=function(e,t){var n=de({},e);return Object.entries(n).forEach((function(e){var a=e[0];null===e[1]&&"undefined"!==typeof t[a]&&(n[a]=t[a])})),n},be=n(41),fe=n(0),he=n(539),ge=n(532),ye=n(542),ve=n(551),xe=n(552),Oe=function(){return Oe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Oe.apply(this,arguments)},je=function(e){var t=e.className,n=e.gridArea,a=e.label,r=e.minWidth,i=void 0===r?195:r,o=e.value,s="boolean"===typeof o?o?"Yes":"No":o||0===o?o:"\u2014";return Object(fe.c)(ve.a,Oe({className:t,css:{gridArea:n}},{children:[Object(fe.b)(xe.a,Oe({shrink:!0},{children:a})),Object(fe.b)("div",Oe({css:{minWidth:i,padding:"8.5px 14px",lineHeight:"1.4375em",letterSpacing:"0.00938em"}},{children:s}))]}))},we=function(){return we=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},we.apply(this,arguments)},Ie=function(e){var t=e.label,n=e.value,a=e.onDelete;return Object(fe.b)(ye.a,{label:t,onDelete:a,css:{margin:"2px"}},n)},Se=function(e){var t=e.className,n=e.disabled,a=e.error,r=e.gridArea,i=e.label,o=e.onChange,s=e.readOnly,l=e.value,c=e.options,u=c.filter((function(e){return l.includes(e.value)}));return s?Object(fe.b)(je,{label:i,gridArea:r,className:t,value:u.length>0?u.map((function(e){var t=e.value,n=e.label;return Object(fe.b)(Ie,{value:t,label:n},t)})):null}):Object(fe.b)(ge.a,{multiple:!0,className:t,disablePortal:!0,options:c,disabled:n,getOptionLabel:function(e){return e.label},getOptionDisabled:function(e){return!!e.disabled},renderInput:function(e){return Object(fe.b)(he.a,we({},e,{label:i,error:a,InputLabelProps:{shrink:u.length>0}}))},renderTags:function(e,t){return e.map((function(e,n){var a=e.value,r=e.label;return Object(be.b)(Ie,we({value:a,label:r},t({index:n}),{key:a}))}))},onChange:function(e,t){o(t.map((function(e){return e.value})))},size:"small",value:u,css:{gridArea:r},disableClearable:!0})},ke=n(554),Ce=n(555),De=n(556),ze=n(182),Te=n.n(ze),Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ne.apply(this,arguments)},Ae=function(e){var t=e.value,n=e.onChange,a=e.locked,r=e.summary,i=e.actions,o=e.children;return Object(fe.c)(ke.a,Ne({expanded:t,onChange:function(e,t){a||n(t)},css:{marginBottom:"1em"}},{children:[Object(fe.b)(Ce.a,Ne({expandIcon:Object(fe.b)(Te.a,{color:a?"disabled":void 0}),style:{cursor:a?"default":void 0}},{children:Object(fe.c)("div",Ne({css:{display:"flex",alignItems:"center",width:"100%"}},{children:[Object(fe.b)("div",{children:r}),i&&Object(fe.b)("div",Ne({css:{margin:"0 0.5em 0 auto"},onClick:function(e){e.stopPropagation()}},{children:i}))]}))})),Object(fe.b)(De.a,{children:o})]}))},Pe=n(543),Me=function(){return Me=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Me.apply(this,arguments)},Le=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Re=function(e){var t=e.className,n=e.disabled,a=e.error,r=e.gridArea,i=e.label,o=e.onChange,s=e.value,l=e.isClearable,c=e.options,u=c.find((function(e){return e.value===s}))||null;return Object(fe.b)(ge.a,{className:t,options:c,disabled:n,getOptionLabel:function(e){return e.label},getOptionDisabled:function(e){return!!e.disabled},renderInput:function(e){return Object(fe.b)(he.a,Me({},e,{label:i,error:a}))},onChange:function(e,t){o(t&&t.value)},size:"small",value:u,css:{gridArea:r},disableClearable:!l})},_e=function(e){var t=e.optionsSelector,n=(e.valueLabel,Le(e,["optionsSelector","valueLabel"])),a=Object(J.i)(t);return Object(fe.b)(Re,Me({options:a},n))},Fe="AutocompleteField requires either `options`, or `optionsSelector` with `valueLabel`.",Ee=function(e){var t,n,a=e.options,r=e.optionsSelector,i=e.readOnly,o=e.valueLabel,l=Le(e,["options","optionsSelector","readOnly","valueLabel"]),c=!!a,u=r&&"undefined"!==typeof o;if(c&&u)throw new Error(Fe);if(i){if(c){var d=null!==(n=null===(t=a.find((function(e){return e.value===l.value})))||void 0===t?void 0:t.label)&&void 0!==n?n:"";return Object(fe.b)(je,Me({},l,{value:d}))}if(u)return Object(fe.b)(je,Me({},l,{value:o}))}else{if(c)return Object(fe.b)(Re,Me({options:a},l));if(u)return Object(fe.b)(s.Suspense,Me({fallback:Object(fe.b)(je,Me({},l,{value:Object(fe.b)(Pe.a,{})}))},{children:Object(fe.b)(_e,Me({optionsSelector:r,valueLabel:o},l))}))}throw new Error(Fe)},qe=n(84),Be=n(106),Ue=n.n(Be),Ge=n(553),We=n(115),Ve=n.n(We),He=function(){return He=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},He.apply(this,arguments)},Je=function(){var e=Object(qe.b)(),t=e.enqueueSnackbar,n=e.closeSnackbar,a=ae();return Object(s.useMemo)((function(){var e=function(e){return Object(fe.b)(Ge.a,He({size:"small","aria-label":"close",color:"inherit",onClick:function(){return n(e)}},{children:Object(fe.b)(Ve.a,{fontSize:"small"})}))};return{info:function(n,a){void 0===a&&(a=0);var r=window.setTimeout((function(){t(n,{autoHideDuration:4e3,action:e})}),a);return function(){clearTimeout(r)}},error:function(n){t(n,{persist:!0,variant:"error",action:e}),a.log("WARN",'notification/error: "'.concat(n,'"'),{})}}}),[t,n,a])},Ye=n(544),Qe=function(){return Qe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Qe.apply(this,arguments)},$e=function(e,t,n){return t?n?Object(ue.jsx)(Ye.a,Qe({title:t},{children:Object(ue.jsx)("span",{children:e})})):Object(ue.jsx)(Ye.a,Qe({title:t},{children:e})):e},Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ze.apply(this,arguments)},Ke=function(e){var t=e.className,n=e.label,a=e.tooltip,r=e.badgeColor,i=e.textColor;return $e(Object(fe.b)("span",Ze({className:t,css:{background:r,color:i,height:"1.2em",padding:"0.1em 0.2em"}},{children:Object(fe.b)("span",Ze({css:{width:"1em",display:"inline-block",textAlign:"center"}},{children:n}))})),a)},Xe=function(){return Object(fe.b)(Ke,{badgeColor:"#bbb",tooltip:"Taxon is at for below the SAFIT II required target effort",css:{marginLeft:"0.5em",fontWeight:"normal"},label:"S"})},et=function(e){var t=e.className,n=e.label,a=e.chipColor,r=e.textColor,i=e.onDelete;return Object(fe.b)(ye.a,{className:t,sx:{backgroundColor:a,color:r},label:n,variant:a?"filled":"outlined",onDelete:i})},tt=n(545),nt=n(557),at=n(559),rt=n(558),it=n(524),ot=function(){return ot=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ot.apply(this,arguments)},st=function(e){var t=e.children,n=e.cancelLabel,a=void 0===n?"Cancel":n,r=e.confirmLabel,i=void 0===r?"Yes":r,o=e.isOpen,s=e.onClose,l=e.onConfirm,c=e.title;return Object(fe.c)(nt.a,ot({open:o,onClose:s},{children:[Object(fe.b)(it.a,{children:c}),Object(fe.b)(rt.a,{children:t}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,ot({onClick:s},{children:a})),Object(fe.b)(tt.a,ot({onClick:function(){l(),s()}},{children:i}))]})]}))},lt=function(){return lt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},lt.apply(this,arguments)},ct=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},ut=function(e){var t=e.className,n=e.disabled,a=e.error,r=e.gridArea,i=e.label,o=e.onChange,s=e.readOnly,l=e.value,c=e.inputRef,u=e.max,d=e.min,p=ct(e,["className","disabled","error","gridArea","label","onChange","readOnly","value","inputRef","max","min"]);if(s)return Object(fe.b)(je,{className:t,gridArea:r,label:i,value:l});return Object(fe.b)(he.a,lt({size:"small",className:t,disabled:n,error:a,inputRef:c,label:i,onChange:function(e){var t=e.target.value;void 0!==d&&t<d||void 0!==u&&t>u||o(t||null)},value:null!==l&&void 0!==l?l:"",type:"date",InputLabelProps:{shrink:!0},InputProps:{sx:{color:l?void 0:"#868686"}},css:{gridArea:r}},p))},dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),pt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1,message:""},n}return dt(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,message:e.toString()}},t.prototype.render=function(){return this.state.hasError?Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h1",{children:"An error has occurred."}),Object(ue.jsx)("div",{children:this.state.message})]}):this.props.children},t}(l.a.Component),mt=n(560),bt=n(536),ft=function(e){var t=e.className,n=e.disabled,a=e.gridArea,r=e.onChange,i=e.readOnly,o=e.value,s=e.label,l=e.valueLabels,c=void 0===l?["No","Yes"]:l;if(i)return Object(fe.b)(je,{className:t,gridArea:a,label:s,value:o?c[1]:c[0]});return Object(fe.b)(mt.a,{className:t,disabled:n,label:s,control:Object(fe.b)(bt.a,{onChange:function(e){var t=e.target.checked;r(t)},checked:o}),css:{gridArea:a}})},ht=function(){return ht=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ht.apply(this,arguments)},gt=function(e){var t=e.value,n=e.gridArea,a=e.onChange,r=e.label,i=e.options,o=e.disabled;return Object(fe.b)(ge.a,{options:i,getOptionLabel:function(e){return e.optionLabel},getOptionDisabled:function(e){return!!e.disabled},renderInput:function(e){return Object(fe.b)(he.a,ht({},e,{label:r}))},onChange:function(e,t){a(t)},size:"small",value:t&&i.find((function(e){return e.id===t.id})),css:{gridArea:n},disabled:o})},yt=function(){return yt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},yt.apply(this,arguments)},vt=function(){return Object(fe.b)(et,{label:"No filters"})};!function(e){e.default="lightblue",e.warn="#ffcc00",e.error="#ff4400"}(O||(O={}));var xt=function(e){var t=e.className,n=e.filters,a=e.joinLabel,r=e.noneNode,i=void 0===r?Object(fe.b)(vt,{}):r;return Object(fe.b)("div",yt({className:t,css:{flex:1,display:"flex",flexWrap:"wrap",gap:"0.5em",alignItems:"center",fontSize:"0.8125rem"}},{children:n.length>0?n.map((function(e,t){var n=e.id,r=e.label,i=e.textColor,o=e.chipColor,s=void 0===o?O.default:o,c=e.onDelete;return Object(fe.c)(l.a.Fragment,{children:[a&&!!t&&Object(fe.c)("span",yt({css:{fontStyle:"italic",opacity:.6}},{children:[" ",a," "]})),Object(fe.b)(et,{label:r,textColor:i,chipColor:O[s]||s,onDelete:c})]},n)})):i}))},Ot=n(561),jt=function(){return jt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},jt.apply(this,arguments)},wt=function(e){var t=e.children;return Object(fe.c)("div",jt({css:{height:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"fixed",zIndex:1e3,backgroundColor:"ffffff88"}},{children:[Object(fe.b)(Ot.a,{}),t]}))},It=function(){return It=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},It.apply(this,arguments)},St=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},kt=function(e){var t=e.className,n=e.disabled,a=e.error,r=e.gridArea,i=e.label,o=e.onChange,s=e.readOnly,l=e.value,c=e.inputRef,u=e.max,d=e.min,p=e.precision,m=e.step,b=e.inputProps,f=void 0===b?{}:b,h=St(e,["className","disabled","error","gridArea","label","onChange","readOnly","value","inputRef","max","min","precision","step","inputProps"]);if(s)return Object(fe.b)(je,{className:t,gridArea:r,label:i,value:l});var g=It(It({},f),{step:m});return Object(fe.b)(he.a,It({size:"small",className:t,disabled:n||s,error:a,inputRef:c,label:i,onChange:function(e){var t=e.target.value;if(t.trim()){var n=Number(t);void 0!==p&&Number(n.toFixed(p))!==n||void 0!==d&&n<d||void 0!==u&&n>u||o(n)}else o(null)},value:null!==l&&void 0!==l?l:"",type:"number",css:{gridArea:r},inputProps:g},h))},Ct=n(562),Dt=function(){return Dt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Dt.apply(this,arguments)},zt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Tt=function(e){var t=e.delayMs,n=void 0===t?0:t,a=zt(e,["delayMs"]),r=Object(s.useRef)(void 0),i=Object(s.useState)(!1),o=i[0],l=i[1];return Object(s.useEffect)((function(){return r.current=window.setTimeout((function(){l(!0)}),n),function(){window.clearTimeout(r.current)}}),[]),o?Object(fe.b)(Ct.a,Dt({},a)):null},Nt=function(){return Nt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Nt.apply(this,arguments)},At=function(e){var t=e.doneCount,n=e.gridArea,a=e.label,r=e.totalCount,i=e.value,o="".concat(Math.floor(100*i),"%"),s=Object(fe.c)("div",Nt({css:{height:"1em",width:"100%",position:"relative"}},{children:[Object(fe.b)("div",{css:{position:"absolute",background:"lightgrey",width:"100%",height:"110%",top:"16%"}}),Object(fe.b)("div",{css:{position:"absolute",background:"#42d64c",width:o,height:"110%",top:"16%"}}),Object(fe.c)("div",Nt({css:{position:"absolute",width:"100%",textAlign:"center"}},{children:[t," of ",r," (",o,")"]}))]}));return Object(fe.b)(je,{label:a,value:s,gridArea:n,minWidth:120})},Pt=n(308),Mt=n(540),Lt=n(185),Rt=n.n(Lt),_t=n(525),Ft=function(){return Ft=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ft.apply(this,arguments)},Et="DIVIDER",qt=function(e){var t=e.label,n=e.disabled,a=e.icon,r=void 0===a?Object(fe.b)(Rt.a,{}):a,i=e.items,o=e.variant,s=void 0===o?"outlined":o,c=l.a.useState(null),u=c[0],d=c[1],p=!!u,m=function(){d(null)};return Object(fe.c)("div",{children:[Object(fe.b)(tt.a,Ft({onClick:function(e){d(e.currentTarget)},variant:s,disabled:n,startIcon:r},{children:t})),Object(fe.b)(Pt.a,Ft({anchorEl:u,open:p,onClose:m},{children:i.map((function(e,t){return e===Et?Object(fe.b)(_t.a,{},"divider-".concat(t)):Object(fe.b)(Mt.a,Ft({disabled:e.disabled,onClick:function(){e.onClick(),m()}},{children:e.label}),e.key)}))}))]})},Bt=n(535),Ut=function(){return Ut=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ut.apply(this,arguments)},Gt=function(e){var t,n,a=e.className,r=e.disabled,i=e.error,o=e.gridArea,s=e.label,l=e.onChange,c=e.readOnly,u=e.value,d=e.options;if(c){var p=null!==(n=null===(t=d.find((function(e){return e.value===u})))||void 0===t?void 0:t.label)&&void 0!==n?n:"";return Object(fe.b)(je,{className:a,gridArea:o,label:s,value:p})}return Object(fe.c)(ve.a,Ut({sx:{minWidth:"10em"},className:a,disabled:r||c,css:{".MuiInputBase-root":{color:"unset"},gridArea:o}},{children:[s&&Object(fe.b)(xe.a,Ut({error:i},{children:s})),Object(fe.b)(Bt.a,Ut({error:i,label:s,onChange:function(e){var t=e.target.value;l(t)},value:u,size:"small"},{children:d.map((function(e){return Object(fe.b)(Mt.a,Ut({value:e.value,disabled:e.disabled},{children:e.label||Object(fe.b)("span",Ut({css:{fontStyle:"italic"}},{children:"(clear)"}))}),e.value)}))}))]}))},Wt=function(){return Wt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Wt.apply(this,arguments)},Vt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Ht=function(e){var t=e.className,n=e.disabled,a=e.error,r=e.gridArea,i=e.label,o=e.onChange,s=e.readOnly,l=e.value,c=e.inputRef,u=e.maxLength,d=e.inputProps,p=void 0===d?{}:d,m=Vt(e,["className","disabled","error","gridArea","label","onChange","readOnly","value","inputRef","maxLength","inputProps"]);if(s)return Object(fe.b)(je,{className:t,gridArea:r,label:i,value:l});var b=Wt(Wt({},p),{maxLength:u});return Object(fe.b)(he.a,Wt({className:t,disabled:n,error:a,label:i,onChange:function(e){var t=e.target.value;o(t)},value:l,size:"small",inputRef:c,css:{gridArea:r},inputProps:b},m))},Jt=n(119),Yt=function(){return Yt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Yt.apply(this,arguments)},Qt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},$t=function(e){var t=e.hotkeys,n=void 0===t?"cmd+f, ctrl+f":t,a=e.inputRef,r=e.onChange,i=e.value,o=Qt(e,["hotkeys","inputRef","onChange","value"]),l=Object(s.useRef)(null),c=a||l;return Object(Jt.a)(n||"",(function(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=c.current)||void 0===t||t.focus()})),Object(fe.b)(Ht,Yt({css:{width:"30em"},value:i,onChange:r,inputRef:c},o))},Zt=function(e){var t=e[0],n=e[1],a=q(t,500),r=a[0],i=a[1],o=r.trim(),l=Object(s.useCallback)((function(){n(""),i("")}),[]);return[t,n,o,l]},Kt=n(49),Xt=n(187),en=n.n(Xt),tn=(n(258),n(96)),nn=n.n(tn),an=function(){return an=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},an.apply(this,arguments)},rn={longitude:-97.6701409,latitude:38.7250438,zoom:3},on=22,sn="namc-sites",ln=function(e){var t=e.initialViewport,n=e.onSiteClick,a=e.sites,r=e.showSingleSiteHoverDetail,i=Object(s.useState)(an(an({},rn),t)),o=i[0],l=i[1],c=Object(s.useState)(null),u=c[0],d=c[1],p=Object(s.useState)(null),m=p[0],b=p[1],f=Object(s.useMemo)((function(){return{type:"FeatureCollection",features:a.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:e}}))}}),[a]),h=function(e,t){void 0===t&&(t={});var n=o.width,a=o.height;if(n&&a){var r=function(e,t){var n=t.height,a=t.width,r=t.padding,i=void 0===r?50:r,o=t.maxZoom,s=void 0===o?on:o;if(0!==e.length){var l=new Kt.f({width:a,height:n}),c=e.map((function(e){return[e.longitude,e.latitude]})),u=new tn.LngLatBounds([c[0],c[0]]);c.forEach((function(e){return u.extend(e)}));var d=u.getSouthWest(),p=u.getNorthEast(),m=l.fitBounds([[d.lng,d.lat],[p.lng,p.lat]],{padding:i,maxZoom:s});return{longitude:m.longitude,latitude:m.latitude,zoom:m.zoom}}}(e,an({height:a,width:n},t)),i={transitionInterpolator:new Kt.a,transitionDuration:1e3};l((function(e){return an(an(an({},e),i),r)}))}else Q.a.debug("fitSites skipped: no viewport yet")},g=function(e,t){void 0===t&&(t={});var n=e.latitude,a=e.longitude,r=t.zoom,i=void 0===r?9:r;t.suppressZoomOut&&(null===o||void 0===o?void 0:o.zoom)&&o.zoom>i&&(i=o.zoom),l(an(an({},o),{longitude:a,latitude:n,zoom:i,transitionDuration:750}))},y=!(!o.width||!o.height);return{viewport:o,setViewport:l,fitSites:h,centerSite:g,sitesData:f,handleClick:function(e){d(null),b(null);var t=e.features&&e.features.filter((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.source)===sn})).map((function(e){return e.properties}));if(null===t||void 0===t?void 0:t.length)if(1===t.length)n&&n(t[0]);else if(o.zoom===on)b(t.map((function(e){return Object(fe.b)("div",an({css:{display:"flex",justifyContent:"center",marginTop:"0.1em"}},{children:Object(fe.b)("span",an({css:{whiteSpace:"nowrap",background:"#cccccc",padding:"0.1em",cursor:"pointer"},onClick:function(){d(null),b(null),n&&n(e)}},{children:e.name}))}),e.id)})));else{if(!o.width||!o.height)throw new Error("No viewport.");h(t,{padding:Math.min(o.width,o.height)/4})}},handleHover:function(e){var t=e.srcEvent,n=e.features,a=void 0===n?[]:n,i=t.offsetX,o=t.offsetY,s=a?a.map((function(e){return e.properties})):[];if(0!==s.length){var l=function(){if(1===s.length&&r){var e=s[0],t=e.name,n=e.latitude,a=e.longitude;return Object(fe.c)("div",an({css:{border:"1px solid grey",background:"#ffffffaa",borderRadius:3,padding:"3px"}},{children:[Object(fe.b)("div",an({css:{fontWeight:"bold",fontSize:"120%",textAlign:"center"}},{children:t})),Object(fe.c)("div",an({css:{marginTop:"0.5em",display:"grid",gridTemplateColumns:"repeat(2, auto)",columnGap:"0.5em"}},{children:[Object(fe.b)("div",{children:"Latitude"}),Object(fe.b)("div",{children:n}),Object(fe.b)("div",{children:"Longitude"}),Object(fe.b)("div",{children:a})]}))]}))}return s.length<6?Object(fe.b)("div",{children:s.map((function(e){var t=e.id,n=e.name;return Object(fe.b)("div",an({css:{display:"flex",justifyContent:"center",marginTop:"0.1em"}},{children:Object(fe.b)("span",an({css:{whiteSpace:"nowrap",background:"#ffffffaa",padding:"0.1em"}},{children:n}))}),t)}))}):Object(fe.c)("div",{children:[s.length," sites"]})}();d({node:l,x:i,y:o})}else d(null)},smartFitAll:function(){0!==a.length&&(1!==a.length?h(a):g(a[0]))},hoverInfo:u,siteChoicesNode:m,cancelSiteChoices:function(){return b(null)},isViewportReady:y}},cn=n(279),un=n(280),dn=n(281),pn=n(221),mn=function(){return mn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},mn.apply(this,arguments)},bn=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},fn={basic:function(e){return gn(cn,e)},sat:function(e){return gn(un,e)},topo:function(e){return gn(dn,e)}},hn={basic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4BAMAAADLSivhAAAAJ1BMVEXs4cvv5dLw59Xx6Nfz69z17uL28eX48uf38un59Ov69vD7+fX////S7BO1AAAEmUlEQVRYhe1YzW8bRRSf2Q8ngYtp3bQGDkYUKveUSGmFRQ9u0zbawiFRTdEKDk6bAKv20BaC5BtBoiWIQ9J41x6JA9x7ABVO5IBUQArZP4qZNx87+5ndBAmB/DusZ968N+9j3nuza4QAU336mA7D8As2m15GAnjQlcNZH+HHdST4wvCvoVyxdhknJf0Gsx1Jn/lSjkxCt2kzHdYeyLqP5BIK2ONpGP4O+tSmqC4H7irbwaeL34HibnOgmJwWfVyiG8LsI5TEOb6f00UfguwmsklLLjaZmy9SKqhy5hKy1ohzWsPzIPsztYCocNjMTZuS+xCc3bgs9mQIPwDZP8GRvlr22ZPSf+TMcdUduZnJgwWr7W217jJ774Xhc5jVhrqsHci4fQuKuRm1J4qhzTx4NQz3xV7dSNZQh/0OyP4g4xDtzoyYoUtiGqnGzkMxaoIsnCY6eZ0QxWIyblPZhNwrwlTT9QWLBbL7lI4XXBLcVDmA0MfssSciSTkJWWfyja2hYMJPmexBFxnXBmTjsh4U1GEhfFemN0InrnlkvHaR3JQMPDv6dNtxr4XigNpgabKvSFR+pDS8DbLP6DHq9kqPWORrjOF7jar4YCX8g2bfbkqUgsUFQw5kLIpSqqM3/bReZLhOXTgd/pRalaWErHEy7SkaAx9q4wZENLU57Bnu0HxZ0ck8ed4gd6A2bB/YnidkX5al5Hwao7O0xUtkBVoA9roGOBe3zZaldM6P0VFnSN0NQL8L1fNKlIICvJQO5pA9SjiM3Z7n8zNvXwUz9nhoItwTpWQOllECFlkToxqBxRdAz23FoErJfZiUpXmkzBM1xo/lFxHyaVlKbw3TshqcVY09PPgVIEvpVJBM6DjMEdfG+4UGWkom6RbK0tBvwg++mxDu07jePkQWGVvCtBsx2WdwoofitCyZWU2WltJhDnODPekZLyMopRY9ziyHbyUJUeMzviFfP1p/r3e1Sx1ezdJUS1HcDB1OCYe5aj9Fmg0y6j8bzkqCkO1wNmiuxxRhL7lbERpeoFUeLu2w4F+KmnXDy2p4CTzRJ7ZPeIkbS+SzEtnh6fs3l02Xdnt8gQSXcyU0nHmgTdhdfXEbzUTWF8MItDEcdR1ZJSzm6ET9yd4p4MuEFZ1Iu3xSSDhKxKssi2z1xlMtK4RCEZ/a/SMIn+YNjL8iVAUWp/V5eRHtBuGnZWXe/NnQomNCcsz081jTcLU0gtNySucVfQnS0omdFk63oXzoSY3cOdSplJsdLRmndkp19wi2Fl08rtDsAFofwF7VgmpGZ1Ox2SF5vAynSnX3k1d0LvktU6a7s3dhQjZ685IgOkfOdZaQHK/Nn1h4n5DR+iIYgB9zA4odxgufiPd3NnmdWQDDNquIQocxU7axGON4aQF+WP8qcvjsLUK+Wszb221hr8BhEvRey1+d2ix0eL5gjVbHuMR1locq93cS1e7vBKqndITZf8fhUe8YDl8nFfp0CvjoDk8wwQQT/AM4VhMq9/GTg6XEp2M1nB0ER7/l6Kfj9uFM+Zh07gkm+H/gOC0Mlf0LJxONLb/Sd2schnusFvYfxN9OtcK2vfmpIAAAAABJRU5ErkJggg==",sat:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAB4AHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDk7LUtXvbt/DXhrSrZdWtGDjUzd7UkiT7u3H3gePqKnOial4dvptU1zVLHUNQ1IM9ybdI8KAPmGBnOMg8+lcvNokV1q0kXiPWSsltF5KRxoWOIxwhKDBwOPfpXZeHNP0C0063hs9BvopjJl7mWMKqxEFWjO4ggnIYYHpXnq6loKLlOm3KJy2v+H76Hw1L4pnvLKxW3dXjy/wC8uHBwOM+/QDGO9epeZb+KvhwLizO9xEJ4eORgElfyLD8KxJbbw/b2T6hryfbbjTlkj8lmMhGPusF5C8fLnFVfhlrslhqy2DRRRadeQG6tSrZWEM3Kk9gDyP8Aep02+ZxkOUIxSklo1+JVsLHRZdItbrXLzUtQeKQRRWQlYqjH+MKoyMAZyePrVQafpD6gYtWSZ4IgFvIYJCJWiPKSKCBwAeeASOOK6HV4NV8P69dR6YIoLC/XKS3CEwruzzgfxLzj1B9647W9AuNIukFvdyajew5uZbm1BLqCMjzCxxg5wB6DkdK02MGrFq+06TxV4qtdN8M2KLpdoA6XEsG2PyRwqhOMtkHk9e/aq+iw6oJj4f057sWsEztJCjlwcnBbJGFIA7bjycd6pab4ghtma6EVxZSKxDzW/KK2GP8AwAkKeh+ldRZeNNR0PQkj0jUozuAQMbAGSEY+XD88ZI7jqKE2noZ3u0zS0kQaClvc+IbG2it54pBDlUkdR7AEcMMjJztJrFv9b1fUrGGzv7sW2j2zsbaNABLg/KMsB0GcZ4/HOazraZ547m/nRzb2y7p3utpLtkEKig4DZPQnPHSujsfCNjdPbahrD36Wd25UyMVJjz82CRyE6fdPpnihNJ67mqi5aIyNE0a917SL+xtoY9+4CyW3cqse1/mMj/xHGDn8jXX+Gbq6n1GTRLQzWWsQM0lvfFQ8UGeDH6spz0P3c/la0ttR1KGXQbK3khtYJ98N+CY+M8EleXYjgj8a6OxtdL8N6dNK8ijapE9zK3c9iRn/AL5XJNS/eepUY6WRzel+D7qG8SXxNfedOsmfJQFgG9Se/wCH5it/Vtes9Nie009Ea6A2+VGeh/2iOn+6Oa5fxH4ku7u2U2U09hbDCNIFBu5lz0UcCNDzzndXIz6rp2ma+bPTrJvtl2yRqWc5ccAHpjoT0pSTWwS0Vo7mnod5qms6b4gtryczy2ziaJ5IhCjEMWKYPUAgc+hNFM1m9kTUhY+RMlhPbtsulkX91KFG4KM8qScHIB5opWvuyEpJJPc2NZh0zSNItf7OjsU1CzuIhIly4WW3hGNxzj58jp9av63q661d3Nvp9iNad1WSBI8pGCrHY2Acg/X8jXD+K9I8L6ToNxrl5ql4Lu8ums9jElUwSP3ig8cJ19x1qv8A8JFDpd5ZW3hextFSCfab+GVyJyyc/KcbQM/Tms7Wd7WZ0vEysoylo+iNiW81bTPP07XL+387USyKqlTGnzY2ZAHKngg1zmuaJcQ65LPpzXE+s2mJ7pkT9xapwFLAcN3IHuSaX+z9FvpE8NaRHqjahqKSTuFkRtsgfI3lj8oHJwOoHHWu2stdtNKvLrSob4R6mPLsDdXEO1d5G5lcDll64btV3bW+pCS6/Dci+H/jKHxMlzoGvWbNKkeZJDykhHBK+gHBHpmp9Z0e7srDU4tFn+2QXSgSmNQ0iL9BznH8XPSsKDwvqt9Jb6XpVzPHqKu15v8ALET2qjPVx94HPTnNS6J4inge+stQkjnureRozPC4SU+vyg84bjg9q0jUUnZ7mfJKyv8AeVby08PX82kabFPqGk2sO/7af75IVVJxkMMA9QD8x9asaP4c8Pahd6rfz6g0UELMtvbjK4Cj5SvGcnHrXUaVrGlaherpd/YgzLHuZrxArHnu74OfQDPSrs+laaZd8Fto8fzH5pJgcjBGPv49PyqmhJdSjoY8LaVa2sNvDe3813iR0mjaYszAk5U98+vAOauPYWs93G+qCWNtxCWVvJvbn++R06YwPUZxR/b2g6BYN5+tafgZ3JbIrsR2BWMnd+OK5y98Wx29vI1tb3GlW7KQGZC9/OMEnYi8Jx3P50lGxV+51ura8tg0dhDbebeqny6fbOFEQwTulbogwOR1/nXEaxqGoatfSIHkluFRZLdkGIETPz+Wv93nliCTgYqOz0e+8RXn9m2LR29jPEGaJ8s8hGSS7MR5jkf8BBx16V0mpLpnhtIhayXcWrocSvFPvC+uW5zldoKdvbis5SS3HdJXexWXQ7mfT5479vOnvLdRIgbYsQ+9kcckH+tcL4uvtCi8c6feaa8jpZRotwyA7RKnJjU9MD6CvTPD7w31rb+ITcSSKR9njh2fM0jyAEk5yRzxXm/xe8IS+HvFJ0XR4bk2KbTLcOu0GSTryOnUD3rOm23qXUilTTR1y+JtH1Hxbp8z3Ok6VpVuJIPOkjMkHn7VyH+YZJzwSetFczoWq6edO020u4LezfTbxJQ7RbYp1x8pJHRhxlsHO72orXlM1OL1bOK17wu9p4gl0hbgefLc7XuEcyKTk7gxGc9jnHGa7Hw7F4d07wvd6FeWVpqF1pswLXFtw0obf8jOR1LYGPYeta2uaTpmq6Ktr4cUxxi7BSVlJupAwwqAA5UZ6Hr1/GK+0jQ4fh62iwWt4mtSQCMwQFz553giZsHGRg8ngc/hEZXXvEyg6U3yu6IbDSrfxDK19ocE9vbsuMSKoCSqdxQ7DuU47/h0rp/Etto92iXMOqXCatc4hMc5EYWUjaXbHUKCQOck4Oa4vwd4a1GDWp7Gz1NkuZY1ivGgb5mGM5wf416E9COma1fEkeoeKzY2egWsN0mm2e03sKBTLGGPyMOPm47+9TOMbpmsJSUW4xu2dI91qHhS8tbTVbFpbS2Efl3BLEPLnacOo4U7hwcj9KwtW0zw1HcR2NvZ21lcgxCea7JWQO2XG2QfLz0GaXw1/ZN5oxvtLn1W4ltI8tbTyExSsowEIP3W3A9MjjNH2jQtf08y6zbXSma7Q6jIshKwqAdiqvc4XrwOfetG1bVChfmSbsS6npkNtrEWlvbxaxDHaRsrXNwp2b2fgY43ccY645NPh8G+HLXTJ4dVljs2CF1uJbjJjOCciNMlhkAEcY9aYNPSabULzw4BcaczRq11PGQ6hVxkBcBT2wQd316z6fpum6dcSR6nq5juLpGdykmAUBA5RDwMEcN7+tEeW25Eqac3dLX7jkbHTtPsriWDRS99M7o4upUUouCCcLyBjjk5PPQV1Ok6Jdpp1x4i1e3ubkOrNcRRvtlDAHnaT8xGDkucEEcdKgsfEMGhlotJWG9kjuGMN1NOqgqWyI8cjowHTI49K09G8R614i1JLm701reDBl4VhEZA4OcZy2RgdAMiiTNKUVsLe6rc2oj0yPS7mRNSjAsbeaNUlKBgW3OM7RnkY/Cl0jTpBc21ld+HvLilXF1dSy5QZ6gA8kEeuOa6W81mTXhb3UFuhDooimZCHiPIIXuK43xR4ltrXT4r/UdRMRil2oRz9oIyCAgJJAx047dKx5Wzf6vCMuaR6Pawafo4tvsaxCK3TftaLEfGCDn1GM1w/iTWbbxZqGuC5uALuC4jEjRMTGCpGzk9AdvpwTXB6743v/FunHS7DRZYtPa4WW6ZpNjuB8xJOTgcAY9vetzw7D/ZOlzRTRxQWVyhJkXDlScYBzg5PHX1q4wcRzqRm/dWhFd23g2IWujvd6vprSagJtQjnXaQgDfMpU5PBAHrgUVleJftGrLPq1hr9pFbRkxCC6QI0ahei7gSSe/bmitbM45Jt3sdz4W1HR9W1z+1baweZlZg5tg6iC4HIcJnlSB1Pcmq3jHUNTs76bVbi8gi1KRBDBBHHhplOQEA7IBnO4dcV0OifDrT/DXgi48XW+viBrlGZ7EzDMiMuAikc7++B69ayb/QNM1zTIbq21Rpp5SpE11yqx5IZOTncPz6fSs6iUbstKVSCgt9Sh4Q0qbxJeXF2txHZ+I7aIFYrdcxugHyszfXjtgjjGa2NHvL+ynvdNt0t2sVQi4VUAeKUtkvk+hJyv5VBZaLYaNCb+zaW0aAMX+z5jfBONzHPCnjrzUN2unag0FrKsq2FxGqPdCFxFY3BJYMSDl8jgk9z3pJb82w17itB69X3Ov8H+FbFLcxC5aGSN/NmVU2+ZuHQg8gEd/euW+I/g1Y7+SbwnbRWVyIzJcQsuIZxkdjxkgcHtk1u+D47hZXKxh7y3l8s3iq4huIs9cHA6Z6+1avjR5pdPea7mmSzij3Ao20ytjIUHsOPoc0KbZs6MOX3Twa8vLrQJrO7tF09RcKXjDqHaA/xKQRk9epB9qt6PYNrF+0d1dxxLJMHXySxeWNuSgUeh55qv4Mv9Am1e9m8Qn5wd8M0zYVB3U9/TGKy/EHxR0u1vLqHw/p0sasGEdxnbISRwc9R9K0jFyOOEYv3mdgZ/CGhajZw3OmyHybkKbi5uNmxn+6SvQg5PsKXxB8X9IttZextp4JLWFGSQQhiWfsqkcYxnn3rwmea98Taqlxrd6+91wZJDxtXjGT36V12lfC1pJkl1HUbS0hkyADMM/KOvGfY1r7KPU2VVrSJs6j45bV9abVNImurN7eyMf2WWT92ME4Zcnk4IOTzxWHo95Hr2vJpkcwjt4V/wBFSWQkcZ4DMcDPNdFa+CfCNqvmXniS4vY9obyrWEEsMkdcnPpnFS6PeeDdJhe70jwfPdx258om7udzsScA4HHPHHv3p8iWxDk3K8mQ+D5oNQXy3tLq+lin+VLWFpAjJx98cd/XBFQ+O7HU7a6sZFtL1Wv2dpI5JgAnChdwU5HQda6m08a6k2rTaHpWh2VnC0xVlSIkFePmKjGOOcke9aXg3VpdeijgvLH9/dIY2MTZhYFtoHJ6HjBqbtdi1KMvdjuedwfDvx94iu2hi8P3M0kMKl3iV8KqjjK4ySQe3XOaK+iI9Uu/hvafZZ7ieCC4nSZnaSObO3CgDO1sfdGCT0GKKV2PlS3Zjto0ejwQ3JeS/li+eG3vMqsIb7yDcMIFzkEfMcYqk32iKS4tbexMQuZfOW7kULGrsOBGTnbg55PJI71Fp/hO/wBX8IyWz6nPdy6e7Zc3DM0zK2cs2TxtIx611el6fbxaNdWWoR3txZTRb8zrvVZOxwTyMnJ9/WueUrfDudEbTS59EuhX8M2sWl6Ze2+vSW0+qW0YlghmXH2lWHDYzkkkcnGeK5268bve3tzoqWaiC4O4xxoFCY5Oc/d6devU9xTvCXhW4XXpribVN8duxRN5IZUcDCnuRgfmDXWaf4YtTK2qX8aJtO5E3E7yF2gt6nH+NJNmVp1elkivptvbwwQXLX5W/lhDyW4nztAz8xHHXoOleN/E34x27max062lvfKZoopGJWHGMZx1bkZ9OK9A+IfiXRdHjaTVoPPjkQxFYApkc4ICjnqM5xXlXhC3sr2zuRPYM0QAEMdxBtccd8fX9K2hFbtFTm7qETy61TWtbv42NqZvtEm0ELhR/QCtPW/C1zb6za6NZFtQnuyAjEY3P3APoPX3/GveNN0+xi0OG3S3hiAjO5UwOQR1x16j86f4f8DNqviq01PzntLSzlWPMYG5gwJdsN2GQOPXtitXVSMnQ6I8SHhfUPNuNIaa32W1ybcyrMpDux4CknpkYx64z2rsNO0HWNS0Kxd7m3jjaZXBH39xUqclc46kkkdhgGvaLjwBpkvxBv5F0/U9TjaKEx3IjIPmKuMPghf4VJ/DvS6Loem+EfD93aa59n0u5t52c/ZUSQlHb5C+VJBwcdalVlbUzlQak0tUcpYfDC28P3gkuJop9QmVkQtG/kK2zCKjYGTwckg8D15HbeAPhrYeJJdT0y50y3+x6c8kstyhEZnldVaMCMDAC7eo9SBV7xLrT6ppU1ro9nFdT6a6u5lkEG1x3JOSMgmsbwx4piVbu2XwzeQyyFnm/elo3dAcgnjJOc9O561j7Rqd+h0ezpqnbl97uaun+EriPwrYalb2mjSahq02DlHQW8JQDaxO5nICkdhk1N4E8G/2dqP2gyR+Qt1st4Y4SscQjLElWPXJB/OvMT4i1W0WO4u/Gt5YXs4JSG0jzDCp6Kdv3fTA6YrMtfix43sY4549XiJDGMTG1Q+Yckljle/0pNczuVHERpK1tj2vxfp1rqHiK4nvYTcw2EQjWNhmNMozySHHfayge5FFcb8O/EHivxVqs1lq01qkMoE11IEC+eAF2gY6Z4B6cUVamo6Mcb1FzIfDpOq3V9qT6PqNvb2kcBuJYiPs+CI/u7eeB05x29RWfH4g1vQtBS4ktL26sbhlDs0qMsbMM/IG+Y59O1b994y8QRpc2nhy2tp55lWGKdUSYMxHzPKSMqRjHbpXNeOtMHiuKzsjcu+nW7kTTou2FpwhAAyAexGfesZpQauYqnvKL1Op06RI4JZWLGfALbx3bkL6A/4Va1PVLey06K91C4KWkC7pmkOQFz1P41ztlLPp3hxYtW8ua7T7qK5Pm7VA4/MVwni+LUfH/i2fTbZmtfD1oAkkmPmmPU4z0BP8qqKTep1Snypd2YbJpnifxXf6rdzecbidjBB5gAhQnK4A5BwAa7JNJsIbeKfFwryDqxOemOc8ml0jwbouk3H2m1hAdMfMRk8V0GqrFLZrEvlxzOQFZzgY7kVpKXYmnTsncqeCba0m1N7W6kQQMMq7HawPfnsDx+Veu20/hTR7OO4a4s+Bw4AJz+Ga8fuLK0s9OLP5s8i8MwJVR+Heqqx6le2ClnMenRt80m0rGuf5txUP3jZKyPX/ABD8SLOy2pZ28k+5AwK4VXyOoP19q8q1PWJ9X1SW7v4If3h5XG7jJ4yc+tU7m4SS7gaNXSBIhEuWyRjufqTn8aht1D3qRru3M2SR3pKBLZ2uga1dwzXAZAYpAGbdEuZs8fe6k4HeoU1PybciONGufMlzKOAAxOQO/c1UUraWw8yYsyruyTg8+wrn9X1JLNZI3keeRo2kjEjAY9s9qfKKTUVqLqdjDPrqao1pCuRseGNAsI6ksV/iJNY1voGmTarcPPCQqyF403HZggcnjHft2qHTPELajaSQyAiXO3CZOOf8ATmrsM12ZAx3gqxGQ/Bq4o50oT1R1vhjVrbQb0yTW0AjkUJ5qgZiH+FFcleySyWgjXA2/eb1znrRSdNNnQtDo/8AhGtV0zw5Z6nfx/ZFa8W38sS5xG+/5tyDIILA89K5LxVplz4csNU0/UNdvXvXeP7GbY4EkkmPnJ5JOMgkY6d6jmsPE2lw21xf+ItQe2Z4p5PMklbDEfKMYO4gckDoB61tS+H73Wp9OurDU7adZXWQSfZXUSMjZ3ksd2c+vHHelqlfoefUUk+XlszrdBt7keGrJLtY3uIoBv3nAJx1J6jOBk1w/gPW7fUfEusxRxRRW3HkLHkfKCcE574rtfG2qnQ7KVGnikVrdjLFsO5sgDg9PXiuJ8CabpqzXUlmYreZ5t0jO/Qc4C+oxULU6nK1SMEdLe3KWVtLKzlUwW3ckgDnpitjwLHDqbySai8boyBYUdgC3c+/cVz+osHsrpw6tKgwhOcc9x61zenXN5ZXCywyHerZBIJ5q90b7M9ws9Psnhna6tbExRt5cWw7sqOua5XxLOHt1t7WREt0kwuTnJ2jLFeg6dBwPzqhZazqc2jxxXt0d8gLsUAB254z/n0qpe2txdWziNDmIibcM5K4wSfbpWdtTR7GTdW80CxtMikk9AadDElrKWO3LjjHbnk065UsobLORgZP+fpVMOCLuWaMiOIHawbg8dfatktDCTE1HWpbPeoeSXzcgHOQnpj0561w2v6hMU8qR5Hzk5PUA+5qK71Pb5kcJUq7cg9cegrN1G4eUAupLAYBLcU0eZUxHMW9J1mWCYxCOGVXZQRLjjB4we31rullHlh1bcQoy6nKN7g9/rXmAiXHyYfJAx1rvtJtZo9Nsx5pQDIMRXOQf8DTKwlR3aLkDM4MciMAH3cnk4+naipYQsTbG3EjIDg5IooPRTOs0XdaaPj7NepbxoZ1ZG8+KIldjFkwWUAsPpituwmniilvdUUfuAqo9on7vBzjGfwP40UVjKV7IzVJKbfY5Pxj4ov3trnRLPSlvY7pDHFM8mCGPJBGOw6HvXC+DfDEmo+KNVGqTStJpl1sjii6ZUkHHtkDmiinsjJLnrrmPdB4eifw8sBsz5jYLKjZK8dK43UdLFpcLDCsiupwQ8eP1oorNSZ6nKmSvFPBfSiQhkKjYGX5VG0bQQOSOP1rTguPtFukQlMcUkbRSMeisR0+mQKKKaZmc3rcEpEyROSI8DYc4PH3selctrHiCSa0OmR5SNNq+ZEo2sR1H5iiitYnHi5OEVbqchJYXmC6W0oiB+ZwM9eRk086PdxxkyR5bBZAXUjaBkjIPWiiqPOjSi9WUoftEToyMyHHTkH2zXV+H5LqOwJmnGzduZSfmVT07dzn9KKKC8NFKZtRXMaowMEkx2kxgEDHfn0/+tRRRTPQ3P/Z",topo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAABfVBMVEWroI+sopK1qZetraa0rqKvsKm2saa7s6S0tK25tarDtKK2t7C2ua6+u6a3uLG9uK3FuaXDt6rIuqfEu6y7vLXKvqvDvrO+v7m/wLjIvrPMwK3Av7zHwbPBwrrGwbrCw73DxL3MxLTFxr7LxrrRxbXGyb3GxsHHyMDRx7nJx8TNyr3JysLKzcHMy8HKysXRy73LzMTNysTNzcLN077NzsbSzcPOzcnP0MjYzcLSzsrU0cXR0srV0srS083T1Mva08XT1MzV1crV0s7V1s7a1cvW1dHX2M/X2NDa2s7Z19PZ2tLa2dXe2dHb3NPb3NTe3dHX2tzc2tfd3tbe3Nnf4Nfh4dfh3tvZ3Ojh4tri4d7j5Nvk49vg4OPj5Nzk5Nvk4t/e4Onl4+Dl5t7i4ubk4+Xm5eLl5ebj5ezp5+Tr6ebn6O7t6+nt7fHw7+3y8O7z8vH08/Hy8vX19PPz9Pf29vX19vj49/b3+Pj4+Pf6+vn6+/z8+/v7/Pz8/Pv////a3dxlAAAU00lEQVRogZ2ai1sa19aHJ+kltp7PtidaLYlVxEQDiWMNOAmjiAIDjoIVQdQGo6bEIVPQWGqllvnbz1prX+YCuTzfep7WiDgvv7XXbe+t0vRa79YGa76t/eFwe1ezxM+6zT5r9ZzLvhftrnONX3q9pgUGT6u96zo+e39SU3y/c+m0m4g+qfX4W65rb/jPOo7dx3B67b7X2o5zAV8sq+V0EXxSq733Ubt/1Gq1N36w7YAsAL9133tSE+oGiGv2f5Zrp0svArLtXFu/g9x/fFwbXvnLavrBzSunRV9rJ+J9f9Te8p91b/vBQQPfX7F/odjLf85rJ3/6sDdvariOrQDYtml5ms03tY5wTO2E//DC6fdrwK6cXqvpghHS83HBy78aBw58uiBYrGTtnXjvufC1ffsJMo8qwX17Ujv3e/mv89qvZqFQ6MCKBlxtt5wOl/y3iEAZXvDgi49weVRxtRbzqcd6KBewhee24wTBzeYNk+xmVE/6Gpb5I+QOjyoGhqA69+fQnye1X/PEfd68dVp94BaPjpPav3JdLPnT7qDQpl/zRZX1KphDt+9qta319efPC9Umpm2vD9zs9pp+yX95JINDrgZgbX9UYQ7d+rjva7Vc6nm0YDXtdoc80Q9uc1HejPKQr51OO5C9rWtHRJXFgiqQQ93zWu1p0mjYlzf0LT6hHywkv3GdBZ/3rfwx5lmv27lo2VwsJEzHI3dgDr1qtjr44g38HnvnALDI19q5M5Bst6+uyZGAb4Pbup4kI7l/+bDXINfGVb6yDw6qMlwGgEU7eFNzn/CnlyzwN6Chd+X1++AcetN1rhrl9XK5Ui18FHzJJFtuEcEIC5IZvsnDmAxz6G8ftwMO+MPpWUtmEbBVAFvWh8FNh0k+qXlC82Yw2csdmEOQzVdl0zRL5QOwj4HbkDGsVbz1ua17IkvYQOzAHDq5cHrNDHBB8EfBLEZFqzjxkXvnfWQX2wCfBtruOX2STqFUNPPkaYitogvueJ6DCdnFoihaxbmf/C5AdrkYVP/6uJhDUFbOCmXgArhUASMwIytOlyeWfXkrE9KmVtG6hdb0zvu0d95S4nJ/H5hDUJGvrIZRNBm4jOSyJcgK9JRLLvbW7QDXDnWbNuTUec+v4+RtANt4FcwhfNubK+e21Th9XUJuHoML0qlSrQuygs3u5hLqwHXLIwbmnEvWbd7UTrwh8x4CFdhov3ODyL3xYTGH7B7KPX39+lCAKwiu/MY/LQXXJYi9DNTfriy/QPb1t3/fgxt95g8qiITam45zazcaAD48PEyZlE1VdHXlwAtutlrNoLUcOWGBpGu/J2//9Jp/ysAcwqm3IbiH++uUTYPAg+zCkXM0DMYd5/OsC3Lf4kjQOAUj7uF+CUOrysBVERkfBENs3dou+f2noUzuK5B70SAurjCCD5+74MqnweBt2dyB/MftJ7F/n3vlumCTkgnB5UrhM8CwCXFkn4UYevfnx7lYMlqQgqfSmKsxtlj9KH8m2DfQQpGARvPPB7GQQyj3pvn69alPcMlkUU2CPxPsHStZXYTdx0As5hCXK8CvGfdwnYPLlMhmg7Dd7ifAMNxdSjDVRugF//ZxMahA7rXFgK9dP0MWY/kolslAcYOTPwzmNfUay7YojmCvUDazc7QTsBqT2yLia2YYVWB6Ho17GkQX8Rn4qA+CZRvpOB0PF578qtZnr8AzJPdUkhk4nzcMIy9jq8zAaJ8GQ0W9sRkXn8qf3vAZ9JOWG8ucC2ATuUaexRbz9sHng60L6tIk13XmaUOSQG7H/U6AQa9pGJkMgfka4zJ/Lpi+XkCbuGlbTDFfRIEBub2Wm0Mii1CvlkGuH1w2Pg8s0o6NCbwE46MZ3WpBR7xqsG89ywvYPcSS4DyVrlJJkOnjBcBuwQiALavj4Dx2ZbOlxueTI7ptC0Eiaw+52r2Mlkmn0xJcBjAakfPwXQB863h39B5r2BjcLehSvcsmoBs0Fl63Gix6fVDCpsAITOlErpbkcj/Y7vXsgWAQ3MTAtmBGwiWiPQTvtz7bA8vEUykBRm/nafABcLFYEhZc45ZowwGujZMMM/p6YYvF9hL39nZ3dxGr6zpyGdng9QO4jIxf+4KrDXV+APjGsRqBBOYBjEj8b5dZZgmk6iQ3TapBMG1fII9LHAyTttkf1RfsFIRiS3Jb0NxZFfaBT5liLhUst5TyG2EPyAgtTCr2rab/uIFqeo8NUAGwqMgCvMRUCkujlysHR0fHx/WjoyPG5jYADH2hHQC3nHYQLBsQAyM2raVdsA7YjFmuHtXr9bOzev0YDNkHVTYEKcHoRQ93nZYffNvlM6OvQInIYp7OUMEQYAirvFk+ODoGKlj9GNB1/HJE0g8OJJj3yaZFSeU9MMVDyZYcVnm1cBOJYdNLCbSlJVWNRlW0JPj4+OxMcusknYmv148Uy5KLxvUiGaZqSzYJqycEHwZLBVvczcTDSJhwURU+QDK5ni3sVBiHsbxG4utKx9PdJBiSquv6/sLhuwKWsL7U3d1ciT78v0hU0/nKsuyRPu7ncraCQ3A/GJLqWoacc03RdBgE720mo/cfPowuxjWNwBBOsLCwA/difeBj+VXpkJwAtokHsVcM3Lj0C2bgvWwiCswlLb4IplEMU2msYvYQtuoF47qy/3FTrNueJdbXC4aR54K4TYdWA7l7DFyIJsJhNZHUNYaNa3qG5hukihg621mrBiR7sAi20ZNBKtqN07Iwoh0aPg5ZMd6KRsLzamIlk0lp2mIMbFFLZagoAvRYUM+Os9njoK894GpFwYHpsjGAa0E621BMbppUKliRWAkjFOuEDti5uVgsrmOZoOrkWdbq2k7/IjNwtVw+PoONOajpkLQAGF/oQctt8wmKp42GtQliCZwcm5uZW9TSnjIhzeNmL5gzyRQsgiAtCKZPAgNGkw2qgN3a3VAjugYNj6ggdy4WH4g93s4e+V9B35brZ16AguXXpqwNcttMLjW+3a2tzUQiqmtki8SNxVNmBaPJDznYXtv2vQCl+azRDJpCna6Fc42P2qDVRS61gK2tDTW6xLlxBENQGeV+bDWb3an7mJZtt9qXreBFkcJ6+5XTlmTiolzqAwy79VJdQh9r8XicciiuDZB7vLOWrUrmGTLFSa9Dh72Xbdl9FF48xDKzhsF3JCyowMs5NRHnWqlMaRqEMrSYev21Ryz4+MBlti87XTqp6l5ftVvyO+TD97bCi1azdytrM9uRSLmbmy8jL0EpFQsqF5C4gIX2VncV74CPObN1wSG3N4ig60pm+GlumAcUUSxbfG/WwNX1yN3M5RLRlUdUK3BlwccZs0gl6vBQgH8DHxeA2WSH2OIIX1pgfe3WxZUiy+UlLrNYXQ/3ZSSx8YiyZ2ZmDkIKCkYVnQzgg0MGrqrbv9nusf1l2/ZZX0SLNeYevsFlFqtL0by7uZlLRF5uzECtmJ6cmp7GipEpYvsh7gErzDtrv9k2X0x7gH0KDIUKuiFMVw0qkcTdiP6ysfwoBtiJiYnJyem5OHGFUUHaWduBp7dbg5gfoPrBsMw96MI0yLGigVGVw9oI3HEAT88sYhL5wYz7IfsQ1wdmcnnrRW5CzeW0OPh5CsFTMzEtUwI3+8Dba0dn/w9u050y6S7U4lxsRRvqy81NjQmeRDeT3KOjuhcMZbk8gPdJrgtGuZbkQk9YSeQ2N59SE5qegsCaW0yXRDRLcCF7VBmo8xNYCSa5bFBnxTmXSELlwPSFLJqmeM6UeTRJyUeFLHSmoGt9k7Fr4hsBZnfqbHXdjr+ibkAKP4ph8nJuGnZ8mLge8Ha2flz+kDZLbjg82x73cyjOLd7ToVy+FcKRNZGADNYeYfZOTqNBXJl4TsUkc19XXlTrx40BYDoh8p4Q8E0ANkIJxkMMWF13joSoml8B7uLcDCTv+MQkE5zCrV75wKt4bRvqSF8QWY1TvnkVO1e0vT3cm5YqkqxsZ/eb/CiJvX0rmdiAAg3cKZ68YDEtXzI3TS6ZcSGwjop+oRZPCQxOsE1mq7r29OkSbqeM/Po6Y0Me72ezh+KUCH5nU02C3I1Flr0TWCjR03qxmM/lSzStM+7Oi8rR0VnQvbx9wyPAgAjr9RSbeJy6Ke4zTMOo1BF8+nr7xTY/tdnfY1HFugJLI1zmmbhRNnMZOpPExYUwA0fDvwJUWCeUmcvpWvzRo6ccKDvqIqDTBl5QmFWF+kF2LbtNllzZwo7EuiDFFi7z1JwO780jmN1bgWWzBwdF4eAG2zyC2AwTGQ/Youjlmp6mzVVFYdFH1Gx2JYurA+mLxkr06OjoxIxWrFRK4GoEM/L2i0q1emCJ+IWgLOYzS0tLmhZkat6X0N20cy4rp+7RGN/rpmLs48VmJsdHR0ZGRme0PJ7ZmHgYysHlQhJP25mDi6YBSjI45Ae5Wr/B/IJkRZ498m32blrj3LnJ0ZHh4eHRqXgez15LWyY/IcODjEKyXGgcVErrOj6IbS3EVirIhVGc3qDTTK6z0wLFu7lHyWma1ok7PjI0NDx67/v5tW0E06mcPJBMlpMmXtCy4wea8sVQhv949uxZdC4iLQwWmY9EE/jWVdzOKp6DQOLqGg+sqYmR4aEh4CbU2VA44R6CcnCxCFiDDj10qRbsWeTnnx6SITEaffZsaSmOmQSWiEYSemoVz90U9ywQ/1tKCS6sL3CH7/1goM7ZlbKPWy6oeYbVuQdJcSz6M/DmFt04Fk6goMoYxooaVjV0trLnPYeMsz0gdIbJCYir4W/u3jeIE8qysJLgUjKJXHbIw9jPIg9/fBh5xpE0k+J2EmyB8oiRjZQajqYQvOein2Zw3sA+iPE8PPz13R9SuLplM4SBVa645JKpriM4Q5GV1qKRh+HIMymRplIyHIkZF8FIzmTUaMoPxsiiisW4X979btGsYlRlQyU/uFQqrs+raiK5Djv0hBqO4KFEvJ/L1VIo8xNVRCfmU8q+19W7qUfY+JE7NPTlnW9mdArncnKWJ1JFcCGgjfVkQp0HU5OpNDuWEFWKgblWRs3w83o6vzYSkQB4cwMLJazv0Fd37nw9HjMZSlU9Z9yMS1f/eMmyTglFYFEe+epyLC1uxgcGsgDz0+bNjZdzE5PEVb4YmtTLTOL8Cx+3SKmUZ2DJ5Q1BBJbk6i6X3RSQ0RrLM27oSy+XF4ZGhr5Q7nzx1Wgswx0cznqzCcGol1E9XNGJYliCkMy2lqDYo9kDlrPCVg7BT/4zMnQHuMNzaajOW0gMFTzYkvQyi2gqlrxUsjLC9IrqyQp0OqBa8Rw3b0nwl3e+GhqZpHtBvCUzQp7VLRUZlrRSAdHcwOJcUTT4CQK53EtG8Kk46aaGCFPD8pOR0btfDo9MasjN4Y1kMsyXmB/rA5c9gcvlJwWeuimWV3ebUtrvbsW9wmHblo3lhdFv7o6MjMcyeXpX3iyq8+IyQSwvJ/OeI58e91P5kbnOzs3TvHwwbyt4g3bTavAetbe1sfx44u7Xo6PTGnSeVWokZiJMt+0UzW4ecW/zHsHPvmJswnHBPIXT4g6K/RqAG43mBbLZZnx/K7f8+Lu7I6PjM7qZWaUWljfXx+h+kFFN0+SBKdG6yxVZRPnLqeIzilSiD83OQGxg02SN4Jl790ZHx+cYWF9FX4cSeUY2vWAeY0Ix48Zcri9vieYFi/0FOyndgzX+8S7MWTDveMDz816wD8u5GNBMrybTx6CkcH9FfghE4wHbqbhXOdyH0rV87x5OeDNCMSRzMRkymavZQwxuzM9yCpBupippMKqIC4+biKzQrob/1QbEVm712d0JUpwqGatEBnB+bN30PABdKGqW7s2iOAUV3nNBTMLonlx3b/X8K2Qo++4lLDaJ3Or9e5OjuMaZMkY1+bpYDCeK8rdFSvBs6ssi1njXE/Oh/46NhRMFNw1NF5wRMxebbiGNf/n2u3EGroCv0SiTZyVYYiVYzJYillN6IgLQsLqez6ihsfkVXwVgZB8Y6kdu46f7NMSPx2DTkkmvrlI+mStjpqhahpcswbI+6ik98v1/w9Ekv7I2V+ZDITUrNHPZ/eDlb39GT3MwkglcDCXdcukhu/1QcLXw92NRnr48vMzk7Nhswp8UENVe8CYInoHYggISyyM4s0pFExJKZa6WeciiOu2WS4lV6YKP5Q7TWCwaangsEQCL+zoEo+Ap9PToxGK+lOeyEIx9wh+ZJD0ARmw6LcujKbgY2snQvPEh8BYIfjJO4AfxfFGCIbqMsYIQ7CHDIgewvCpLPwsw+KswG0rKyOZgIjPBj0dpiWHDlOexReBSOCnA4nl5MdBL7JKv1/v00kKpY6r0mSL/JmgfyuVPPzye+g+Bp6Ebp3WqXHSDVlLnS0XTZ15wnKn1dlwflOdTcmzW8IPR07u56Lc/Tj0YGgHuJGxN8yQFCgidBBRCSZEPpmiOojHFHwaw2Mx81CKvnEY4lOTgrCxbW8CdfjA+hNypubiRx8jhjRHmj2SowIumqJ08tuIPv4UE8lCNPnBRgE0T3M3A6uzaHvO0+n3kyRSCgTsTi6jzsNdb0nnpgtFnfr7kzgIkGM8dAHs/mnLnGu5KH5j9DvvP5O5WGjsvZl9sQ4NQQ4nlxw8ePBhB7lwkapopbSmyymoXoguh2WTJ5WIyETbiHeQMGXsBsHjNJHebptK2Gvtrs7APmt3YQDDonZ6Ziz3UiyUjvRpJrLKJHG9LCyoUvwKv9lg+NIZNpdL93GLA1Z7Pg+42FfqDndPt7Asct548nn4wCdhYJJKG3E2vamGWLTodmRRh+hoLhZnBNv97wHpHZm/yBoOLZzB7PRmaVWz2N0s4BOQA/HgUbzwWf4oDGAeBSBRGiwXc8uE5EfxaMpFQVdirzYbDP0Ux+OTyGu6E0Qd2exP7gTGLf5xgdxwHxh4ALzx58nhuIa5FonoGwLq2/Mt93IA9xvtajdoFW14x9LDByhtVHrD3b4o8swDzBz+vbjUaHLwwA60mrGP3h236wsLPP+LJMbv5oSjjo0+G7V8y/XJdsEduQDSA6W8V0Qi8sLA8E9ejiYxhIhjPJb77kU6s6eoHyWJ28eZtJpP3mZ9bcmPM7TKKPMMG8EsEL2qpSAqrJLh6EY8HgDztJcteLl3sl+vT6/m7Ij/4f8/ItcstlRlkAAAAAElFTkSuQmCC"};function gn(e,t){var n;if(!e.sources)return{sources:{},layers:[],version:8};var a=e.sources||{},r=e.layers||[],i=e.glyphs,o=e.sprite,s={},l=Object.keys(e.sources).reduce((function(e,t){var n,r="".concat("BGS_","_").concat(t),i=a[t];return s[t]=r,mn(mn({},e),((n={})[r]=i,n))}),((n={})["namc-sites"]={type:"geojson",data:t},n));return{sources:l,layers:bn(bn([],r.map((function(e){var t=mn(mn({},e),{id:"".concat("BGL_","_").concat(e.id)});return"background"!==t.type&&"circle"!==t.type&&"custom"!==t.type&&t.source&&"string"===typeof t.type&&(t.source=s[t.source.toString()]),t})),!0),[mn(mn({},pn),{id:sn,source:sn})],!1),glyphs:i,sprite:o,version:8}}var yn=n(546),vn=n(563),xn=n(186),On=n.n(xn),jn=function(){return jn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},jn.apply(this,arguments)},wn=Object.keys(hn),In={basic:"Basic",sat:"Satellite",topo:"Topographic"},Sn=function(e){var t=e.value,n=e.styleKey,a=e.onChange;return Object(fe.b)("img",{src:hn[n],css:{cursor:"pointer",height:40,width:40,border:t===n?"2px solid blue":"2px solid white",borderRadius:10,margin:2},onClick:function(e){e.stopPropagation(),t!==n&&a(n)}})},kn=function(e){var t=e.value,n=e.onChange,a=Object(s.useState)(!1),r=a[0],i=a[1];return Object(fe.b)("div",{children:Object(fe.b)(yn.a,jn({ariaLabel:"Style",hidden:!1,FabProps:{size:"small"},icon:Object(fe.b)(On.a,{}),direction:"right",open:r,onOpen:function(){return i(!0)},onClose:function(){return i(!1)},css:{minHeight:"56px"}},{children:r&&wn.map((function(e){return Object(fe.b)(vn.a,{tooltipTitle:In[e],icon:Object(fe.b)(Sn,{styleKey:e,value:t,onChange:n})},e)}))}))})},Cn=function(){return Cn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Cn.apply(this,arguments)},Dn=Object(J.b)({key:"SitesMap/mapStyleKeyAtom",default:"basic"}),zn=function(e){var t=e.controller,n=e.children,a=e.minimal,r=e.mapboxToken,i=t.viewport,o=t.setViewport,l=t.sitesData,c=t.handleClick,u=t.handleHover,d=t.hoverInfo,p=t.siteChoicesNode,m=t.cancelSiteChoices,b=t.smartFitAll,f=Object(J.h)(Dn),h=f[0],g=f[1],y=Object(s.useMemo)((function(){return fn[h](l)}),[l,h]);return r?Object(fe.c)(fe.a,{children:[Object(fe.c)("div",Cn({css:{height:"100%",width:"100%",position:"relative"}},{children:[Object(fe.c)(Kt.g,Cn({onViewportChange:o,mapboxApiAccessToken:r,onHover:u,interactiveLayerIds:[sn],onClick:c,maxZoom:on,mapStyle:y},i,{width:"100%",height:"100%"},{children:[Object(fe.b)(Kt.d,{style:{right:10,top:10},showCompass:!1}),n,d&&Object(fe.b)("div",Cn({css:{position:"absolute",left:d.x,top:d.y-10,pointerEvents:"none",transform:"translate(-50%,-100%)"}},{children:Object(fe.b)("div",{children:d.node})}))]})),Object(fe.b)("div",Cn({css:{position:"absolute",top:80,right:10}},{children:Object(fe.b)("div",Cn({className:"mapboxgl-ctrl mapboxgl-ctrl-group"},{children:Object(fe.b)("button",Cn({className:"mapboxgl-ctrl-icon",type:"button",title:"Zoom to Fit",onClick:function(){return b()}},{children:Object(fe.b)(en.a,{sx:{height:18,width:18,paddingTop:"4px"}})}))}))})),!a&&Object(fe.b)("div",Cn({css:{position:"absolute",bottom:30,left:8}},{children:Object(fe.b)(kn,{value:h,onChange:g})}))]})),Object(fe.c)(nt.a,Cn({open:!!p,onClose:m},{children:[Object(fe.b)(it.a,{children:"Select Site"}),Object(fe.b)(rt.a,{children:p}),Object(fe.b)(at.a,{children:Object(fe.b)(tt.a,Cn({onClick:m},{children:"Cancel"}))})]}))]}):Object(fe.c)("div",{children:["No Mapbox token found. Add ",Object(fe.b)("code",{children:"REACT_APP_MAPBOX_TOKEN"})," to relevant ",Object(fe.b)("code",{children:".env"})," file."]})},Tn=function(){return Tn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Tn.apply(this,arguments)},Nn=function(e){var t=e.children,n=e.className,a=e.isOpen,r=e.transitionMs;return Object(fe.b)("div",Tn({className:n,css:{width:a?"400px":0,maxWidth:"50%",transition:"width ".concat(r,"ms"),position:"relative",overflow:"hidden",border:"1px solid lightgrey",boxSizing:"border-box"}},{children:t}))},An=function(){return An=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},An.apply(this,arguments)},Pn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Mn="#aa00aa",Ln=function(e){var t=e.color,n=void 0===t?Mn:t,a=e.largeDot;return Object(fe.c)("svg",An({version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"50 0 195 295",xmlSpace:"preserve"},{children:[Object(fe.b)("path",{style:{fill:n},d:"M146.667,0C94.903,0,52.946,41.957,52.946,93.721c0,22.322,7.849,42.789,20.891,58.878\nc4.204,5.178,11.237,13.331,14.903,18.906c21.109,32.069,48.19,78.643,56.082,116.864c1.354,6.527,2.986,6.641,4.743,0.212\nc5.629-20.609,20.228-65.639,50.377-112.757c3.595-5.619,10.884-13.483,15.409-18.379c6.554-7.098,12.009-15.224,16.154-24.084\nc5.651-12.086,8.882-25.466,8.882-39.629C240.387,41.962,198.43,0,146.667,0z M146.667,144.358\nc-28.892,0-52.313-23.421-52.313-52.313c0-28.887,23.421-52.307,52.313-52.307s52.313,23.421,52.313,52.307\nC198.98,120.938,175.559,144.358,146.667,144.358z"}),Object(fe.b)("circle",{style:{fill:n},cx:"146.667",cy:"90.196",r:a?"60":"18"})]}))},Rn=function(e){var t=e.onDragEnd,n=e.site,a=Pn(e,["onDragEnd","site"]),r=C(n,[n]),i=r[0],o=(r[1],r[2]);return Object(fe.b)(Kt.c,An({latitude:i.latitude,longitude:i.longitude,draggable:!!t,css:t?void 0:{pointerEvents:"none"},onDrag:function(e){o((function(t){t.longitude=e.lngLat[0],t.latitude=e.lngLat[1]}))},onDragEnd:function(e){t&&t({longitude:e.lngLat[0],latitude:e.lngLat[1]})}},{children:Object(fe.b)("div",An({css:{height:40,width:40/(216/145),transform:"translate(-50%,-100%)"}},{children:Object(fe.b)(Ln,An({},a))}))}))},_n=n(189),Fn=n.n(_n),En=n(537),qn=n(188),Bn=n.n(qn),Un=n(87),Gn=n.n(Un),Wn=function(){return Wn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Wn.apply(this,arguments)},Vn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Hn=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Jn=function(e){var t=e.text,n=e.highlightText;return Object(fe.b)(fe.a,{children:Bn()(t,Gn()(t,n)).map((function(e,t){return Object(fe.b)("span",Wn({css:{fontWeight:e.highlight?"700":void 0}},{children:e.text}),t)}))})},Yn=function(e){var t=e.group,n=e.children,a=e.labels,r="in"===t?"green":"blue";return Object(fe.c)("div",{children:[Object(fe.b)("div",Wn({css:{borderBottom:"3px solid ".concat(r),color:r,height:"2em",display:"flex",alignItems:"center",paddingLeft:"1em"}},{children:"in"===t?a[0]:a[1]})),n]})},Qn=function(e){var t=e.taxon,n=e.inputValue,a=e.actions,r=Vn(e,["taxon","inputValue","actions"]),i=t.name,o=t.levelName,s=t.synonyms,c=[];s.length<=10?c.push(Object(fe.b)(Jn,{text:s.join(", "),highlightText:n},"only")):Gn()(s.join(" "),n).length>0?(s.forEach((function(e){0!==Gn()(e,n).length&&(c.length>0&&c.push(Object(fe.b)("span",{children:", "},"".concat(e," separator"))),c.push(Object(fe.b)(Jn,{text:e,highlightText:n},e)))})),c.push(Object(fe.c)("span",Wn({css:{opacity:.75}},{children:[" ","(",s.length-c.length," unmatched not shown)"]}),"remainder"))):c.push(Object(fe.c)(l.a.Fragment,{children:[s.slice(0,10).join(", "),Object(fe.c)("span",Wn({css:{opacity:.75}},{children:[" (",s.length-10," more not shown)"]}))]},"more"));return Object(fe.c)(En.a,Wn({},r,{css:{borderBottom:"1px solid lightgrey",display:"flex"}},{children:[Object(fe.c)("span",Wn({css:{maxWidth:"15em",flex:1}},{children:[Object(fe.b)(Jn,{text:i,highlightText:n}),t.isTargetEffort&&Object(fe.b)(Xe,{})]})),Object(fe.b)("span",Wn({css:{maxWidth:"6em",flex:1}},{children:o})),Object(fe.b)("span",Wn({css:{fontStyle:"italic",flex:1}},{children:c})),a]}))},$n=function(e,t){var n=t.inputValue,a=[],r=[];try{e.forEach((function(e){(Gn()(e.name,n).length>0?a:r).push(e)}));var i=r.filter((function(e){var t=e.synonyms;return Gn()(t.join(" "),n).length>0}),n);return Hn(Hn([],a,!0),i,!0).slice(0,100)}catch(o){return[]}},Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Zn.apply(this,arguments)},Kn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Xn=function(e){var t=e.isDefault,n=e.children,a=e.onClick,r=e.className,i=e.disabled,o=Kn(e,["isDefault","children","onClick","className","disabled"]);return Object(fe.c)("div",Zn({css:{position:"relative"},className:r},{children:[i&&Object(fe.b)("div",{css:{width:"100%",height:"100%",position:"absolute",cursor:"default"},onClick:function(e){e.stopPropagation()}}),Object(fe.c)(tt.a,Zn({variant:"outlined",size:"small",onClick:a,disabled:i,"data-skip-choose":!0},o,{children:[n,t&&Object(fe.b)(Fn.a,{sx:{marginLeft:"0.25em",fontSize:"100%"}})]}))]}))},ea=function(e){var t=e.disabled,n=e.options,a=e.inputRef,r=e.label,i=void 0===r?"Taxonomy":r,o=e.ungrouped,l=Object(s.useState)(""),c=l[0],u=l[1],d=c.length>=3;return Object(fe.b)(ge.a,{options:d?n:[],onChange:function(e,t){var n;t&&!(null===(n=e.target.attributes)||void 0===n?void 0:n["data-skip-choose"])&&t.onChoose(),window.setTimeout((function(){u("")}),0)},renderInput:function(e){return Object(fe.b)(he.a,Zn({},e,{inputRef:a,label:i,disabled:t}))},onKeyDown:function(e){"Escape"===e.key&&(null===a||void 0===a?void 0:a.current)&&a.current.blur()},renderOption:function(e,t,n){var a=n.inputValue;return Object(be.b)(Qn,Zn({},e,{key:t.id,taxon:t,inputValue:a,actions:t.actions}))},inputValue:c,onInputChange:function(e,t){"/"!==t&&u(t)},clearOnEscape:!0,autoHighlight:!0,noOptionsText:d?"No taxa found":"...",groupBy:o?void 0:function(e){return e.status},value:null,renderGroup:o?void 0:function(e){var t=e.group,n=Kn(e,["group"]);return Object(fe.b)(Yn,Zn({group:t,labels:["Already In Sample","Not In Sample"]},n))},getOptionLabel:function(e){var t=e.id;return String(t)},filterOptions:$n,size:"small"})},ta=function(){return ta=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ta.apply(this,arguments)},na=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},aa=function(e){var t=e.className,n=e.disableClearable,a=e.disabled,r=e.disablePortal,i=e.error,o=e.gridArea,l=e.label,c=e.onChange,u=e.options,d=e.ungrouped,p=e.value,m=Object(s.useState)(""),b=m[0],f=m[1],h=b.length>=3,g=u.find((function(e){return e.id===p}))||null;return Object(fe.b)(ge.a,{className:t,css:{gridArea:o},disablePortal:r,options:h||g?u:[],onChange:function(e,t){c(t?t.id:null)},renderInput:function(e){return Object(fe.b)(he.a,ta({},e,{error:i,label:l}))},renderOption:function(e,t,n){var a=n.inputValue;return Object(be.b)(Qn,ta({},e,{key:t.id,taxon:t,inputValue:a}))},inputValue:b,onInputChange:function(e,t){f(t)},noOptionsText:h?g?"Change value to continue taxon search":"No taxa found":"...",groupBy:d?void 0:function(e){return e.status||"default"},value:g,isOptionEqualToValue:function(e,t){return e.id===t.id},renderGroup:d?void 0:function(e){var t=e.group,n=na(e,["group"]);return Object(fe.b)(Yn,ta({group:t,labels:["Currently In Box","Not In Box"]},n))},getOptionLabel:function(e){var t=e.name;return String(t)},filterOptions:$n,disabled:a,size:"small",disableClearable:n})},ra=function(){return ra=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ra.apply(this,arguments)},ia=function(e){var t=e.children,n=e.className;return Object(fe.b)("div",ra({className:n,css:{fontWeight:"700",fontSize:"125%"}},{children:t}))};ia.Subtitle=function(e){var t=e.children;return Object(fe.b)("span",ra({css:{fontWeight:"300"}},{children:t}))};var oa=function(){return oa=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},oa.apply(this,arguments)},sa=function(e,t){var n=function(n){return Object(ue.jsx)(s.Suspense,oa({fallback:Object(ue.jsx)(t,oa({},n))},{children:Object(ue.jsx)(e,oa({},n))}))};return n.displayName=e.displayName,n},la=n(530),ca=n(146),ua=n(526),da=function(){return da=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},da.apply(this,arguments)},pa=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},ma=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ba=n(6),fa=n(172),ha=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://6dsntufqt9.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_PUBLIC_GRAPHQL:"https://zqc171btcj.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_VERSION:"1.0.14",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoibm9ydGhhcnJvd3Jlc2VhcmNoIiwiYSI6ImNrbDhjN25hcTIxZnYyb2xjOXZzaGxoMDcifQ.JlXGE_yO53x3iVlUb4MCLg"}).REACT_APP_DOMAIN;Q.a.debug("config: ",{domain:ha});var ga={graphql:"".concat("https://6dsntufqt9.execute-api.us-west-2.amazonaws.com/production/api"),public_graphql:"".concat("https://zqc171btcj.execute-api.us-west-2.amazonaws.com/prod/api")},ya="pk.eyJ1Ijoibm9ydGhhcnJvd3Jlc2VhcmNoIiwiYSI6ImNrbDhjN25hcTIxZnYyb2xjOXZzaGxoMDcifQ.JlXGE_yO53x3iVlUb4MCLg",va=2e4,xa=new URL("".endsWith("/")?"":"/",window.location.origin);Q.a.debug("RedirectUrl",{redirectUrl:xa,publicUrl:""});var Oa,ja,wa,Ia,Sa,ka,Ca,Da,za,Ta,Na,Aa,Pa,Ma,La,Ra,_a,Fa,Ea,qa,Ba,Ua,Ga,Wa,Va,Ha,Ja,Ya,Qa,$a,Za,Ka,Xa,er,tr,nr,ar,rr,ir,or,sr,lr,cr,ur,dr,pr,mr,br,fr,hr,gr,yr,vr,xr,Or,jr,wr,Ir,Sr,kr,Cr,Dr,zr,Tr,Nr,Ar,Pr,Mr,Lr,Rr,_r,Fr,Er,qr,Br,Ur,Gr,Wr,Vr,Hr,Jr,Yr,Qr,$r,Zr,Kr,Xr,ei,ti,ni,ai,ri,ii,oi,si,li=n(52),ci=n(27),ui=n(8),di=n(3),pi=n.n(di),mi=n(13),bi=n(14),fi=Object(bi.default)(Oa||(Oa=Object(mi.a)(["\n  mutation ($projectId: Int!, $sampleIds: [Int]) {\n    addProjectSamples(projectId: $projectId, sampleIds: $sampleIds)\n  }\n"]))),hi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(fi,Object(ba.a)({},a));case 2:if(n.sent.addProjectSamples){n.next=5;break}throw new te("project samples did not update");case 5:return t("projectSamples"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},gi=n(23),yi=["name","groupId"],vi=Object(bi.default)(ja||(ja=Object(mi.a)(["\n  mutation ($metric: MetricInput!) {\n    createMetric(metric: $metric)\n  }\n"]))),xi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=a.groupId,o=Object(gi.a)(a,yi),n.next=3,e.mutation(vi,{metric:Object(ba.a)({metricName:r,metricGroupId:i},o)});case 3:if(s=n.sent,l=s.createMetric){n.next=7;break}throw new te("metric did not create");case 7:return t("metrics"),n.abrupt("return",l);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Oi=["name","typeId","taxonomicEffort"],ji=Object(bi.default)(wa||(wa=Object(mi.a)(["\n  mutation ($model: ModelInput!) {\n    createModel(model: $model)\n  }\n"]))),wi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l,c;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=a.typeId,o=a.taxonomicEffort,s=Object(gi.a)(a,Oi),n.next=3,e.mutation(ji,{model:Object(ba.a)({modelName:r,modelTypeId:i,taxonomicEffort:o||null},s)});case 3:if(l=n.sent,c=l.createModel){n.next=7;break}throw new te("model did not create");case 7:return t("models"),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ii=["name","typeId"],Si=Object(bi.default)(Ia||(Ia=Object(mi.a)(["\n  mutation ($organization: OrganizationInput!) {\n    createOrganization(organization: $organization)\n  }\n"]))),ki=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=a.typeId,o=Object(gi.a)(a,Ii),n.next=3,e.mutation(Si,{organization:Object(ba.a)({organizationName:r,organizationTypeId:i},o)});case 3:if(s=n.sent,l=s.createOrganization){n.next=7;break}throw new te("organization did not create");case 7:return t("organizations"),n.abrupt("return",l);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ci=["name","typeId"],Di=Object(bi.default)(Sa||(Sa=Object(mi.a)(["\n  mutation ($organization: OrganizationInput!, $user: IndividualInput!) {\n    createUser(organization: $organization, user: $user)\n  }\n"]))),zi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l,c,u;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.organization,i=a.user,o=r.name,s=r.typeId,l=Object(gi.a)(r,Ci),n.next=4,e.mutation(Di,{organization:Object(ba.a)({organizationName:o,organizationTypeId:s},l),user:i});case 4:if(c=n.sent,u=c.createUser){n.next=8;break}throw new te("user/organization did not create");case 8:return t("organizations"),t("users"),t("myUser"),n.abrupt("return",u);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ti=["name","typeId"],Ni=Object(bi.default)(ka||(ka=Object(mi.a)(["\n  mutation ($predictor: PredictorInput!) {\n    createPredictor(predictor: $predictor)\n  }\n"]))),Ai=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=a.typeId,o=Object(gi.a)(a,Ti),n.next=3,e.mutation(Ni,{predictor:Object(ba.a)({predictorName:r,predictorTypeId:i},o)});case 3:if(s=n.sent,l=s.createPredictor){n.next=7;break}throw new te("predictor did not create");case 7:return t("predictors"),n.abrupt("return",l);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Pi=["name"],Mi=Object(bi.default)(Ca||(Ca=Object(mi.a)(["\n  mutation ($project: ProjectInput!) {\n    createProject(project: $project)\n  }\n"]))),Li=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=Object(gi.a)(a,Pi),n.next=3,e.mutation(Mi,{project:Object(ba.a)({projectName:r},i)});case 3:if(o=n.sent,s=o.createProject){n.next=7;break}throw new te("project did not create");case 7:return t("projects"),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ri=Object(bi.default)(Da||(Da=Object(mi.a)(["\n  mutation ($submitterId: Int!, $customerId: Int!, $data: JSONObject!) {\n    createSampleSubmission(submitterId: $submitterId, customerId: $customerId, data: $data)\n  }\n"]))),_i=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Ri,Object(ba.a)(Object(ba.a)({},a),{},{data:JSON.stringify(a.data)}));case 2:if(r=n.sent,i=r.createSampleSubmission){n.next=6;break}throw new te("submission did not create");case 6:return t("boxes"),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Fi=["name"],Ei=Object(bi.default)(za||(za=Object(mi.a)(["\n  mutation ($site: SiteInput!) {\n    createSite(site: $site)\n  }\n"]))),qi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=Object(gi.a)(a,Fi),n.next=3,e.mutation(Ei,{site:Object(ba.a)({siteName:r},i)});case 3:if(o=n.sent,s=o.createSite){n.next=7;break}throw new te("site did not create");case 7:return t("sites"),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Bi=["name"],Ui=Object(bi.default)(Ta||(Ta=Object(mi.a)(["\n  mutation ($taxon: TaxonomyInput!) {\n    createTaxonomy(taxonomy: $taxon)\n  }\n"]))),Gi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=Object(gi.a)(a,Bi),n.next=3,e.mutation(Ui,{taxon:Object(ba.a)({scientificName:r},i)});case 3:if(o=n.sent,s=o.createTaxonomy){n.next=7;break}throw new te("taxon did not create");case 7:return t("taxa"),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Wi=["name"],Vi=Object(bi.default)(Na||(Na=Object(mi.a)(["\n  mutation ($translation: TranslationInput!) {\n    insertTranslation(translation: $translation)\n  }\n"]))),Hi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,i=Object(gi.a)(a,Wi),n.next=3,e.mutation(Vi,{translation:Object(ba.a)({translationName:r},i)});case 3:if(o=n.sent,s=o.insertTranslation){n.next=7;break}throw new te("translation did not create");case 7:return t("translations"),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ji=["translationId"],Yi=Object(bi.default)(Aa||(Aa=Object(mi.a)(["\n  mutation ($translationId: Int!, $translationGroup: TranslationGroupInput!) {\n    createTranslationGroup(translationId: $translationId, translationGroup: $translationGroup)\n  }\n"]))),Qi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.translationId,i=Object(gi.a)(a,Ji),n.next=3,e.mutation(Yi,{translationId:r,translationGroup:i});case 3:if(o=n.sent,s=o.createTranslationGroup){n.next=7;break}throw new te("translation group did not create");case 7:return t("translations"),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},$i=Object(bi.default)(Pa||(Pa=Object(mi.a)(["\n  mutation ($metricId: Int!) {\n    deleteMetric(id: $metricId)\n  }\n"]))),Zi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation($i,{metricId:a.id});case 2:if(n.sent.deleteMetric){n.next=5;break}throw new te("metric did not delete");case 5:return t("metrics"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ki=Object(bi.default)(Ma||(Ma=Object(mi.a)(["\n  mutation ($modelId: Int!) {\n    deleteModel(id: $modelId)\n  }\n"]))),Xi=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Ki,{modelId:a.id});case 2:if(n.sent.deleteModel){n.next=5;break}throw new te("model did not delete");case 5:return t("models"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},eo=Object(bi.default)(La||(La=Object(mi.a)(["\n  mutation ($organismId: Int!) {\n    deleteOrganism(organismId: $organismId)\n  }\n"]))),to=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(eo,{organismId:a.id});case 2:if(n.sent.deleteOrganism){n.next=5;break}throw new te("organism record did not delete");case 5:return t("samples"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},no=Object(bi.default)(Ra||(Ra=Object(mi.a)(["\n  mutation ($organizationId: Int!) {\n    deleteOrganization(id: $organizationId)\n  }\n"]))),ao=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(no,{organizationId:a.id});case 2:if(n.sent.deleteOrganization){n.next=5;break}throw new te("organization did not delete");case 5:return t("organizations"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ro=Object(bi.default)(_a||(_a=Object(mi.a)(["\n  mutation ($predictorId: Int!) {\n    deletePredictor(id: $predictorId)\n  }\n"]))),io=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(ro,{predictorId:a.id});case 2:if(n.sent.deletePredictor){n.next=5;break}throw new te("predictor did not delete");case 5:return t("predictors"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},oo=Object(bi.default)(Fa||(Fa=Object(mi.a)(["\n  mutation ($projectId: Int!) {\n    deleteProject(projectId: $projectId)\n  }\n"]))),so=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(oo,{projectId:a.id});case 2:if(n.sent.deleteProject){n.next=5;break}throw new te("project did not delete");case 5:return t("projects"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},lo=Object(bi.default)(Ea||(Ea=Object(mi.a)(["\n  mutation ($sampleId: Int!) {\n    deleteSample(sampleId: $sampleId)\n  }\n"]))),co=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(lo,{sampleId:a.id});case 2:if(n.sent.deleteSample){n.next=5;break}throw new te("sample did not delete");case 5:return t("samples"),t("boxSamples"),t("projectSamples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},uo=Object(bi.default)(qa||(qa=Object(mi.a)(["\n  mutation ($siteId: Int!) {\n    deleteSite(id: $siteId)\n  }\n"]))),po=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(uo,{siteId:a.id});case 2:if(n.sent.deleteSite){n.next=5;break}throw new te("site did not delete");case 5:return t("sites"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},mo=Object(bi.default)(Ba||(Ba=Object(mi.a)(["\n  mutation ($translationId: Int!) {\n    deleteTranslation(id: $translationId)\n  }\n"]))),bo=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(mo,{translationId:a.id});case 2:if(n.sent.deleteTranslation){n.next=5;break}throw new te("translation did not delete");case 5:return t("translations"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fo=Object(bi.default)(Ua||(Ua=Object(mi.a)(["\n  mutation ($id: Int!) {\n    deleteTranslationGroup(id: $id)\n  }\n"]))),ho=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(fo,{id:a.id});case 2:if(n.sent.deleteTranslationGroup){n.next=5;break}throw new te("translation group did not delete");case 5:return t("translations"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},go=["boxId","boxReceivedDate","submittedBy","idComplete"],yo=Object(bi.default)(Ga||(Ga=Object(mi.a)(["\n  query ($offset: Int) {\n    boxes(limit: 1000, offset: $offset) {\n      records {\n        boxId\n        customerName\n        customerId\n        createdDate\n        boxReceivedDate\n        submittedBy\n        boxState\n        sampleCount\n        midges\n        measurements\n        sortComplete\n        idComplete\n        alias\n      }\n      nextOffset\n    }\n  }\n"]))),vo=function(e){var t=e.boxId,n=e.boxReceivedDate,a=e.submittedBy,r=e.idComplete,i=Object(gi.a)(e,go);return Object(ba.a)({id:t,receivedDate:n,submittedByName:a,identificationComplete:r},i)},xo=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(yo,{},{dataProperty:"boxes"});case 2:return a=t.sent,r=(null!==(n=a.boxes.records)&&void 0!==n?n:[]).map(vo),t.abrupt("return",Object(A.sortBy)(r,(function(e){return e.receivedDate})).reverse());case 5:case"end":return t.stop()}}),t)})))},Oo=Object(bi.default)(Wa||(Wa=Object(mi.a)(["\n  query ($offset: Int, $boxStateId: Int) {\n    boxes(limit: 1000, offset: $offset, boxStateId: $boxStateId) {\n      records {\n        boxId\n        customerName\n        customerId\n        createdDate\n        boxReceivedDate\n        submittedBy\n        boxState\n        sampleCount\n        midges\n        measurements\n        sortComplete\n        idComplete\n        alias\n      }\n      nextOffset\n    }\n  }\n"]))),jo=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Oo,{boxStateId:$c.active},{dataProperty:"boxes"});case 2:return a=t.sent,r=(null!==(n=a.boxes.records)&&void 0!==n?n:[]).map(vo),t.abrupt("return",Object(A.sortBy)(r,(function(e){return e.receivedDate})).reverse());case 5:case"end":return t.stop()}}),t)})))},wo=["attributeId","attributeName"],Io=Object(bi.default)(Va||(Va=Object(mi.a)(["\n  query ($offset: Int) {\n    attributes(limit: 1000, offset: $offset) {\n      records {\n        attributeId\n        attributeName\n      }\n      nextOffset\n    }\n  }\n"]))),So=function(e){var t=e.attributeId,n=e.attributeName,a=Object(gi.a)(e,wo);return Object(ba.a)({id:t,name:n},a)},ko=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Io,{},{dataProperty:"attributes"});case 2:return n=t.sent,t.abrupt("return",n.attributes.records.map(So));case 4:case"end":return t.stop()}}),t)})))},Co=["customer","submissions"],Do=Object(bi.default)(Ha||(Ha=Object(mi.a)(["\n  query ($boxId: Int!) {\n    boxInfo(boxId: $boxId) {\n      boxId\n      boxState\n      boxStateId\n      customerId\n      customer {\n        organizationName\n      }\n      submittedBy\n      createdDate\n      boxReceivedDate\n      processingCompleteDate\n      measurements\n      midges\n      taxaQa\n      sorterQa\n      description\n      sampleCount\n      sortComplete\n      idComplete\n      alias\n      modelIds\n      submissionCount\n    }\n  }\n"]))),zo=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.query(Do,{boxId:n});case 3:if((a=t.sent).boxInfo){t.next=6;break}return t.abrupt("return",null);case 6:return r=a.boxInfo,i=r.customer.organizationName,r.submissions,o=Object(gi.a)(r,Co),t.abrupt("return",me(vo(Object(ba.a)(Object(ba.a)({},o),{},{customerName:i})),{description:"",modelIds:[]}));case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof te&&"Record not found"===t.t0.message)){t.next=14;break}return t.abrupt("return",null);case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},To=["sampleId","sampleType","sampleMethod","idErName","idStartDate","idEndDate"],No=Object(bi.default)(Ja||(Ja=Object(mi.a)(["\n  query ($boxId: Int!, $offset: Int) {\n    samples(limit: 1000, offset: $offset, boxId: $boxId) {\n      records {\n        sampleId\n        sampleDate\n        usState\n        sampleType\n        sampleMethod\n        sorterName\n        sortStartDate\n        sortEndDate\n        idErName\n        idStartDate\n        idEndDate\n        customerSiteCode\n        visitId\n        siteName\n        siteId\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),Ao=function(e){var t=e.sampleId,n=e.sampleType,a=e.sampleMethod,r=e.idErName,i=e.idStartDate,o=e.idEndDate,s=Object(gi.a)(e,To);return Object(ba.a)(Object(ba.a)({},s),{},{id:t,type:n,method:a,identifierName:r,identificationStartDate:i,identificationEndDate:o})},Po=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(No,{boxId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(Ao));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Mo=["taxonomyId","scientificName","taxonomistCounts"],Lo=Object(bi.default)(Ya||(Ya=Object(mi.a)(["\n  query ($offset: Int, $boxId: Int!) {\n    boxTaxa(boxId: $boxId, limit: 1000, offset: $offset) {\n      records {\n        order\n        family\n        taxonomyId\n        scientificName\n        taxonomistCounts\n        sampleCount\n        totalCount\n      }\n      nextOffset\n    }\n  }\n"]))),Ro=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Lo,{boxId:n},{dataProperty:"boxTaxa"});case 2:return a=t.sent,t.abrupt("return",a.boxTaxa.records.map((function(e){var t=e.taxonomyId,n=e.scientificName,a=e.taxonomistCounts,r=Object(gi.a)(e,Mo);return Object(ba.a)(Object(ba.a)({},r),{},{id:t,name:n,taxonomistCounts:a||{}})})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_o=n(217),Fo=n.n(_o),Eo=Object(bi.default)(Qa||(Qa=Object(mi.a)(["\n  query ($boxId: Int!) {\n    boxInfo(boxId: $boxId) {\n      submittedBy\n      submitterEmail\n      customer {\n        organizationName\n        address1\n        address2\n        city\n        usState\n        zipCode\n        phone\n      }\n    }\n  }\n"]))),qo=Object(bi.default)($a||($a=Object(mi.a)(["\n  query ($boxId: Int!, $offset: Int!) {\n    samples(boxId: $boxId, offset: $offset, limit: 1000) {\n      records {\n        sampleId\n        usState\n        visitId\n        customerSiteCode\n        sampleDate\n        sampleLatitude\n        sampleLongitude\n        siteName\n        siteLatitude\n        siteLongitude\n        waterbodyName\n        sampleType\n        sampleMethod\n        habitatName\n        area\n        fieldSplit\n        labSplit\n        jarCount\n        qualitative\n      }\n      nextOffset\n    }\n  }\n"]))),Bo=Object(bi.default)(Za||(Za=Object(mi.a)(["\n  query ($boxId: Int!, $offset: Int!) {\n    sampleTaxa(boxId: $boxId, offset: $offset, limit: 1000) {\n      records {\n        sampleId\n        class\n        order\n        family\n        genus\n        species\n        scientificName\n        splitCount\n        bigRareCount\n      }\n      nextOffset\n    }\n  }\n"]))),Uo=Object(bi.default)(Ka||(Ka=Object(mi.a)(["\n  query ($boxId: Int!, $offset: Int!) {\n    reportMetrics(reportId: 1, boxId: $boxId, limit: 1000, offset: $offset) {\n      records {\n        sampleId\n        metricName\n        metricValue\n        metricGroupId\n      }\n      nextOffset\n    }\n  }\n"]))),Go=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l,c;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.query(Eo,{boxId:n}),e.queryAllPages(qo,{boxId:n},{dataProperty:"samples"}),e.queryAllPages(Bo,{boxId:n},{dataProperty:"sampleTaxa"}),e.queryAllPages(Uo,{boxId:n},{dataProperty:"reportMetrics"}),Fo.a.get("".concat("","/namc_customer_report.xlsx"),{responseType:"blob"}).then((function(e){return e.data}))]);case 2:return a=t.sent,r=Object(d.a)(a,5),i=r[0].boxInfo,o=r[1].samples.records,s=r[2].sampleTaxa.records,l=r[3].reportMetrics.records,c=r[4],t.abrupt("return",{boxInfo:i,samples:o,sampleTaxa:s,reportMetrics:l,template:c});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Wo=Object(bi.default)(Xa||(Xa=Object(mi.a)(["\n  query ($boxId: Int!) {\n    boxInfo(boxId: $boxId) {\n      boxStateId\n      customer {\n        organizationName\n        phone\n      }\n      latestSubmission {\n        versionId\n        submissionId\n        submitter {\n          firstName\n          lastName\n          email\n          phone\n        }\n        createdDate\n        updatedDate\n      }\n    }\n  }\n"]))),Vo=Object(bi.default)(er||(er=Object(mi.a)(["\n  query ($submissionId: Int!) {\n    submissionData(submissionId: $submissionId)\n  }\n"]))),Ho=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l,c,u,d,p,m,b,f,h,g,y,v,x,O,j,w,I,S,k;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(Wo,{boxId:n});case 2:if(a=t.sent,r=a.boxInfo,i=r.boxStateId,o=r.customer,s=o.organizationName,l=o.phone,c=r.latestSubmission){t.next=6;break}return t.abrupt("return",null);case 6:return u=c.versionId,d=c.submissionId,p=c.submitterId,m=c.submitter,b=m.firstName,f=m.lastName,h=m.email,g=m.phone,y=c.createdDate,v=c.updatedDate,t.next=9,e.query(Vo,{submissionId:d});case 9:if(x=t.sent,t.prev=10,O=x.submissionData,j="".concat(b," ").concat(f),"object"===typeof O){t.next=15;break}throw new Error;case 15:if(w=O.templateVersion,I=O.appVersion,S=O.samples,k=O.newSites,"number"===typeof w){t.next=18;break}throw new Error;case 18:if("string"===typeof I){t.next=20;break}throw new Error;case 20:if(Array.isArray(S)){t.next=22;break}throw new Error;case 22:return t.abrupt("return",{id:d,boxId:n,boxStateId:i,organizationName:s,organizationPhone:l,submitterName:j,submitterEmail:h,submitterPhone:g,version:u,submitterId:p,createdDate:y,updatedDate:v,templateVersion:w,appVersion:I,samples:S,newSites:k});case 25:throw t.prev=25,t.t0=t.catch(10),new Error("Could not parse submissionData");case 28:case"end":return t.stop()}}),t,null,[[10,25]])})));return function(e){return t.apply(this,arguments)}}()},Jo=Object(bi.default)(tr||(tr=Object(mi.a)(["\n  query {\n    lookups {\n      taxa {\n        taxaLevels\n        lifeStages\n        fishDietSpecies\n      }\n      sample {\n        noteTypes\n        boxStates\n        sampleMethods\n        sampleTypes\n        towTypes\n        effortTypes\n        designTypes\n      }\n      geo {\n        systems\n        habitats\n        ecosystems\n        waterbodyTypes\n        states\n        countries\n        modelTypes\n        predictorTypes\n      }\n      entity {\n        organizationTypes\n        roles\n      }\n      metric {\n        metricGroups\n        calculations\n        metricReports\n        rarefactionTypes\n      }\n    }\n  }\n"]))),Yo=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(Jo);case 2:return n=t.sent,t.abrupt("return",n.lookups);case 4:case"end":return t.stop()}}),t)})))},Qo=["metricId","metricName","metricGroupName","metricGroupId"],$o=Object(bi.default)(nr||(nr=Object(mi.a)(["\n  query ($offset: Int!) {\n    metrics(offset: $offset, limit: 1000) {\n      records {\n        metricId\n        metricName\n        abbreviation\n        metricGroupId\n        metricGroupName\n        codeFunction\n        isActive\n        reportIds\n        displayText\n        description\n        calculationId\n        taxonomyIds\n        attributeId\n        attributeValues\n        rarefactionTypeId\n      }\n      nextOffset\n    }\n  }\n"]))),Zo=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages($o,{},{dataProperty:"metrics"});case 2:return n=t.sent,t.abrupt("return",n.metrics.records.map((function(e){var t=e.metricId,n=e.metricName,a=e.metricGroupName,r=e.metricGroupId,i=Object(gi.a)(e,Qo);return me(Object(ba.a)({id:t,name:n,groupName:a,groupId:r},i),{abbreviation:"",description:"",displayText:"",reportIds:[],taxonomyIds:[]})})));case 4:case"end":return t.stop()}}),t)})))},Ko=["sampleId","sampleType","sampleMethod"],Xo=Object(bi.default)(ar||(ar=Object(mi.a)(["\n  query ($sampleIds: [Int], $offset: Int) {\n    samples(limit: 1000, offset: $offset, sampleIds: $sampleIds) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),es=function(e){var t=e.sampleId,n=e.sampleType,a=e.sampleMethod,r=Object(gi.a)(e,Ko);return Object(ba.a)({id:t,type:n,method:a},r)},ts=Object(bi.default)(rr||(rr=Object(mi.a)(["\n  query ($organizationId: Int, $offset: Int) {\n    samples(limit: 1000, offset: $offset, entityId: $organizationId) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),ns=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(ts,{organizationId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(es));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},as=Object(bi.default)(ir||(ir=Object(mi.a)(["\n  query ($polygon: String, $offset: Int) {\n    samples(limit: 1000, offset: $offset, polygon: $polygon) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),rs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.stringify({type:"Polygon",coordinates:n}),t.next=3,e.queryAllPages(as,{polygon:a},{dataProperty:"samples"});case 3:return r=t.sent,t.abrupt("return",r.samples.records.map(es));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},is=Object(bi.default)(or||(or=Object(mi.a)(["\n  query ($siteId: Int, $offset: Int) {\n    samples(limit: 1000, offset: $offset, siteId: $siteId) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),os=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(is,{siteId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(es));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ss=Object(bi.default)(sr||(sr=Object(mi.a)(["\n  query ($taxonId: Int, $offset: Int) {\n    samples(limit: 1000, offset: $offset, taxonomyId: $taxonId) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),ls=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(ss,{taxonId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(es));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},cs=Object(bi.default)(lr||(lr=Object(mi.a)(["\n  query ($usStateId: Int, $offset: Int) {\n    samples(limit: 1000, offset: $offset, usStateId: $usStateId) {\n      records {\n        sampleId\n        sampleDate\n        sampleType\n        sampleMethod\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),us=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(cs,{usStateId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(es));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ds=["modelId","modelName","modelTypeName","modelTypeId"],ps=Object(bi.default)(cr||(cr=Object(mi.a)(["\n  query ($modelId: Int!) {\n    modelInfo(modelId: $modelId) {\n      modelId\n      modelName\n      modelTypeName\n      abbreviation\n      isActive\n      fixedCount\n      predictorCount\n\n      modelTypeId\n      translationId\n      translationName\n      extentDescription\n      codeFunction\n      codeFunction2\n      platform\n      referenceSites\n      groupCount\n      minimumCount\n      oeMean\n      oeStdev\n      taxonomicEffort\n      description\n      predictorIds\n      metricIds\n    }\n  }\n"]))),ms=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l,c;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(ps,{modelId:n});case 2:if((a=t.sent).modelInfo){t.next=5;break}return t.abrupt("return",null);case 5:return r=a.modelInfo,i=r.modelId,o=r.modelName,s=r.modelTypeName,l=r.modelTypeId,c=Object(gi.a)(r,ds),t.abrupt("return",me(Object(ba.a)({id:i,name:o,typeName:s,typeId:l},c),{codeFunction:"",codeFunction2:"",description:"",predictorIds:[],metricIds:[]}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},bs=Object(bi.default)(ur||(ur=Object(mi.a)(["\n  query ($sampleId: Int!, $offset: Int) {\n    modelResults(sampleIds: [$sampleId], limit: 1000, offset: $offset) {\n      records {\n        modelId\n        modelName\n        modelResult\n        fixedCount\n        condition\n        notes\n        updatedDate\n      }\n      nextOffset\n    }\n  }\n"]))),fs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(bs,{sampleId:n},{dataProperty:"modelResults"});case 2:return a=t.sent,t.abrupt("return",Object(A.sortBy)(a.modelResults.records,(function(e){return e.updatedDate||"0"})).reverse());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},hs=["modelId","modelName","modelTypeName"],gs=Object(bi.default)(dr||(dr=Object(mi.a)(["\n  query ($offset: Int!) {\n    models(limit: 500, offset: $offset) {\n      records {\n        modelId\n        modelName\n        modelTypeName\n        abbreviation\n        translationName\n        isActive\n        fixedCount\n        predictorCount\n      }\n      nextOffset\n    }\n  }\n"]))),ys=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(gs,{},{dataProperty:"models"});case 2:return n=t.sent,t.abrupt("return",n.models.records.map((function(e){var t=e.modelId,n=e.modelName,a=e.modelTypeName,r=Object(gi.a)(e,hs);return Object(ba.a)({id:t,name:n,typeName:a},r)})));case 4:case"end":return t.stop()}}),t)})))},vs=Object(bi.default)(pr||(pr=Object(mi.a)(["\n  query {\n    myProfile {\n      id\n      firstName\n      lastName\n      email\n      phone\n      permissions\n      affiliationId\n      organizationName\n      roleIds\n    }\n  }\n"]))),xs=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(vs);case 2:if(n=t.sent,a=n.myProfile){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",Object(ba.a)(Object(ba.a)({},a),{},{permissions:a.permissions||{},fullName:"".concat(a.firstName," ").concat(a.lastName)}));case 7:case"end":return t.stop()}}),t)})))},Os=Object(bi.default)(mr||(mr=Object(mi.a)(["\n  query ($sampleId: Int!, $offset: Int) {\n    sampleTaxa(sampleIds: [$sampleId], limit: 1000, offset: $offset) {\n      records {\n        sampleId\n        organismId\n        lifeStageId\n        taxonomyId\n        levelId\n        levelName\n        splitCount\n        bigRareCount\n        noteTypeIds\n        comments\n      }\n      nextOffset\n    }\n  }\n"]))),js=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Os,{sampleId:n},{dataProperty:"sampleTaxa"});case 2:return a=t.sent,t.abrupt("return",a.sampleTaxa.records.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{id:e.organismId,taxonId:e.taxonomyId,noteTypeIds:e.noteTypeIds.filter((function(e){return null!==e}))})})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ws=Object(bi.default)(br||(br=Object(mi.a)(["\n  query ($organizationId: Int) {\n    organizationsById(ids: [$organizationId]) {\n      records {\n        entityId\n        parentEntityId\n        organizationName\n        organizationType\n        organizationTypeId\n        entityId\n        address1\n        address2\n        city\n        usState\n        usStateId\n        country\n        countryId\n        zipCode\n        phone\n        userCount\n      }\n    }\n  }\n"]))),Is=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(ws,{organizationId:n});case 2:if(a=t.sent,r=a.organizationsById.records[0]){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",me(Cs(r),{name:"",type:"",address1:"",address2:"",city:"",usState:"",country:"",zipCode:"",phone:"",userCount:0}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ss=["entityId","parentEntityId","organizationName","organizationType","organizationTypeId","city"],ks=Object(bi.default)(fr||(fr=Object(mi.a)(["\n  query ($offset: Int!) {\n    organizations(limit: 500, offset: $offset) {\n      records {\n        entityId\n        organizationName\n        parentEntityId\n        city\n        usState\n        usStateId\n        organizationType\n        phone\n      }\n      nextOffset\n    }\n  }\n"]))),Cs=function(e){var t=e.entityId,n=e.parentEntityId,a=e.organizationName,r=e.organizationType,i=e.organizationTypeId,o=e.city,s=Object(gi.a)(e,Ss);return me(Object(ba.a)({id:t,parentId:n,name:a,type:r,typeId:i,city:o},s),{city:""})},Ds=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(ks,{},{dataProperty:"organizations"});case 2:return n=t.sent,t.abrupt("return",Object(A.sortBy)(n.organizations.records.map(Cs),(function(e){return e.name})));case 4:case"end":return t.stop()}}),t)})))},zs=["predictorId","predictorName","predictorType","predictorTypeId"],Ts=Object(bi.default)(hr||(hr=Object(mi.a)(["\n  query ($offset: Int!) {\n    predictors(limit: 500, offset: $offset) {\n      records {\n        abbreviation\n        calculation\n        calculationScript\n        cellRepresents\n        cellSize\n        description\n        geometryFilePath\n        inputType\n        isGee\n        isTemporal\n        isText\n        maxValue\n        minValue\n        modelCount\n        notes\n        predictorId # -> id\n        predictorName # -> name\n        predictorType # -> type\n        predictorTypeId # -> type\n        smallShedException\n        source\n        transformation\n        units\n      }\n      nextOffset\n    }\n  }\n"]))),Ns=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Ts,{},{dataProperty:"predictors"});case 2:return n=t.sent,t.abrupt("return",n.predictors.records.map((function(e){var t=e.predictorId,n=e.predictorName,a=e.predictorType,r=e.predictorTypeId,i=Object(gi.a)(e,zs);return me(Object(ba.a)({id:t,name:n,type:a,typeId:r},i),{calculation:"",calculationScript:"",cellRepresents:"",cellSize:"",description:"",geometryFilePath:"",inputType:"",isGee:"",isText:"",notes:"",smallShedException:"",source:"",transformation:""})})));case 4:case"end":return t.stop()}}),t)})))},As=["projectId","projectName"],Ps=Object(bi.default)(gr||(gr=Object(mi.a)(["\n  query ($offset: Int!) {\n    projects(limit: 500, offset: $offset) {\n      records {\n        projectId\n        projectName\n        contactId\n        contactName\n        description\n        sampleCount\n        modelIds\n        createdDate\n        updatedDate\n        isPrivate\n      }\n      nextOffset\n    }\n  }\n"]))),Ms=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Ps,{},{dataProperty:"projects"});case 2:return n=t.sent,t.abrupt("return",n.projects.records.map((function(e){var t=e.projectId,n=e.projectName,a=Object(gi.a)(e,As);return me(Object(ba.a)({id:t,name:n},a),{contactName:"",description:""})})));case 4:case"end":return t.stop()}}),t)})))},Ls=Object(bi.default)(yr||(yr=Object(mi.a)(["\n  query ($projectId: Int!, $offset: Int) {\n    samples(limit: 1000, offset: $offset, projectId: $projectId) {\n      records {\n        sampleId\n        sampleDate\n        usState\n        sampleType\n        sampleMethod\n        sorterName\n        sortStartDate\n        sortEndDate\n        idErName\n        idStartDate\n        idEndDate\n        customerSiteCode\n        visitId\n        siteName\n        siteId\n        area\n      }\n      nextOffset\n    }\n  }\n"]))),Rs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Ls,{projectId:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(Ao));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_s=Object(bi.default)(vr||(vr=Object(mi.a)(["\n  query ($reportId: Int!, $offset: Int!) {\n    reportData(reportId: $reportId, limit: 500, offset: $offset) {\n      records\n      nextOffset\n    }\n  }\n"]))),Fs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(_s,{reportId:n},{dataProperty:"reportData"});case 2:return a=t.sent,t.abrupt("return",a.reportData.records.map((function(e){return e.jsonData})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Es=["reportId","reportName"],qs=Object(bi.default)(xr||(xr=Object(mi.a)(["\n  query ($offset: Int!) {\n    reports(limit: 500, offset: $offset) {\n      records {\n        reportId\n        reportName\n        description\n        isActive\n      }\n      nextOffset\n    }\n  }\n"]))),Bs=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(qs,{},{dataProperty:"reports"});case 2:return n=t.sent,t.abrupt("return",n.reports.records.filter((function(e){return e.isActive})).map((function(e){var t=e.reportId,n=e.reportName,a=Object(gi.a)(e,Es);return me(Object(ba.a)({id:t,name:n},a),{name:"",description:""})})));case 4:case"end":return t.stop()}}),t)})))},Us=["idEndDate","idErId","idErName","idStartDate","sampleId","sampleType","submittedBy"],Gs=Object(bi.default)(Or||(Or=Object(mi.a)(["\n  query ($sampleId: Int!) {\n    samples(sampleIds: [$sampleId]) {\n      records {\n        area\n        boxId\n        boxState\n        customerName\n        customerSiteCode\n        designTypeId\n        ecosystemId\n        effortTypeId\n        elutriation\n        fieldNotes\n        fieldSplit\n        habitatId\n        idEndDate # -> identificationEndDate\n        idErId # -> identifierId\n        idErName # -> identifierName\n        idStartDate # -> identificationStartDate\n        jarCount\n        labNotes\n        labSplit\n        measurements\n        mesh\n        sampleDate\n        sampleId # -> id\n        sampleLatitude\n        sampleLongitude\n        sampleMethodId\n        sampleType # -> sampleTypeName\n        siteId\n        siteName\n        sortEndDate\n        sorterCount\n        sorterId\n        sorterName\n        sortStartDate\n        sortTime\n        submittedBy # -> submittedByName\n        usState\n        visitId\n      }\n    }\n  }\n"]))),Ws=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l,c,u,d,p;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.query(Gs,{sampleId:n});case 3:if(a=t.sent,r=a.samples.records[0]){t.next=7;break}return t.abrupt("return",null);case 7:return i=r.idEndDate,o=r.idErId,s=r.idErName,l=r.idStartDate,c=r.sampleId,u=r.sampleType,d=r.submittedBy,p=Object(gi.a)(r,Us),t.abrupt("return",me(Object(ba.a)(Object(ba.a)({},p),{},{identificationEndDate:i,identifierId:o,identifierName:s,identificationStartDate:l,id:c,sampleTypeName:u,submittedByName:d}),{customerSiteCode:"",fieldNotes:"",labNotes:"",visitId:""}));case 11:if(t.prev=11,t.t0=t.catch(0),!(t.t0 instanceof te&&"Record not found"===t.t0.message)){t.next=15;break}return t.abrupt("return",null);case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Vs=["predictorValueUpdatedDate","status"],Hs=Object(bi.default)(jr||(jr=Object(mi.a)(["\n  query ($sampleId: Int!, $offset: Int) {\n    samplePredictorValues(sampleIds: [$sampleId], limit: 1000, offset: $offset) {\n      records {\n        predictorName\n        predictorId\n        abbreviation\n        predictorValue\n        isTemporal\n        predictorValueUpdatedDate\n        status\n      }\n      nextOffset\n    }\n  }\n"]))),Js=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Hs,{sampleId:n},{dataProperty:"samplePredictorValues"});case 2:return a=t.sent,t.abrupt("return",Object(A.sortBy)(a.samplePredictorValues.records.map((function(e){var t=e.predictorValueUpdatedDate,n=e.status,a=Object(gi.a)(e,Vs);return Object(ba.a)({updatedDate:t,status:n},a)})),(function(e){return e.updatedDate||"0"})).reverse());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ys=["siteId","siteName"],Qs=(Object(bi.default)(wr||(wr=Object(mi.a)(["\n  query ($offset: Int) {\n    mapSites(limit: 10000, offset: $offset) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n      }\n      nextOffset\n    }\n  }\n"]))),function(e){var t=e.siteId,n=e.siteName,a=Object(gi.a)(e,Ys);return Object(ba.a)({id:t,name:n},a)}),$s=Object(bi.default)(Ir||(Ir=Object(mi.a)(["\n  query ($siteId: Int!) {\n    siteInfo(siteId: $siteId) {\n      siteId\n      siteName\n      latitude\n      longitude\n      usStateId\n      sampleCount\n      waterbodyName\n      waterbodyTypeId\n      waterbodyCode\n      description\n      isReference\n      createdDate\n      updatedDate\n    }\n  }\n"]))),Zs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query($s,{siteId:n});case 2:if(a=t.sent,r=a.siteInfo){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",me(Qs(r),{waterbodyName:"",waterbodyCode:"",description:"",isReference:!1}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ks=Object(bi.default)(Sr||(Sr=Object(mi.a)(["\n  query ($boxId: Int, $offset: Int) {\n    sites(boxIds: [$boxId], limit: 200, offset: $offset) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n      }\n      nextOffset\n    }\n  }\n"]))),Xs=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Ks,{boxId:n},{dataProperty:"sites"});case 2:return a=t.sent,r=a.sites.records,t.abrupt("return",r.map(Qs));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},el=Object(bi.default)(kr||(kr=Object(mi.a)(["\n  query ($projectId: Int, $offset: Int) {\n    sites(projectIds: [$projectId], limit: 200, offset: $offset) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n      }\n      nextOffset\n    }\n  }\n"]))),tl=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(el,{projectId:n},{dataProperty:"sites"});case 2:return a=t.sent,r=a.sites.records,t.abrupt("return",r.map(Qs));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},nl=Object(bi.default)(Cr||(Cr=Object(mi.a)(["\n  query ($offset: Int, $limit: Int) {\n    mapSites(offset: $offset, limit: $limit) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n      }\n      nextOffset\n    }\n  }\n"]))),al=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n,a){var r,i,o;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(nl,{offset:n,limit:a});case 2:return r=t.sent,i=r.mapSites.records.map(Qs),o=r.mapSites.nextOffset,t.abrupt("return",{records:i,nextOffset:o});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},rl=Object(bi.default)(Dr||(Dr=Object(mi.a)(["\n  query {\n    sorters {\n      id\n      firstName\n      lastName\n    }\n  }\n"]))),il=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(rl);case 2:return n=t.sent,a=n.sorters,t.abrupt("return",Object(A.sortBy)(a.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{fullName:"".concat(e.firstName," ").concat(e.lastName)})})),(function(e){return e.fullName})));case 5:case"end":return t.stop()}}),t)})))},ol=["taxonomyId","scientificName","parentTaxonomyId","synonyms"],sl=Object(bi.default)(zr||(zr=Object(mi.a)(['\n  query ($offset: Int) {\n    taxonomy(limit: 1000, offset: $offset, searchTerm: "%") {\n      records {\n        taxonomyId\n        scientificName\n        levelId\n        levelName\n        synonyms\n        parentTaxonomyId\n        notes\n        isTargetEffort\n        notes\n      }\n      nextOffset\n    }\n  }\n']))),ll=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(sl,{},{dataProperty:"taxonomy"});case 2:return n=t.sent,a=n.taxonomy.records,t.abrupt("return",a.map((function(e){var t=e.taxonomyId,n=e.scientificName,a=e.parentTaxonomyId,r=e.synonyms,i=Object(gi.a)(e,ol);return me(Object(ba.a)({id:t,name:n,levelRankOrder:0,parentId:a,synonyms:r?JSON.parse(r):[]},i),{notes:""})})));case 5:case"end":return t.stop()}}),t)})))},cl=["translationGroupId"],ul=Object(bi.default)(Tr||(Tr=Object(mi.a)(["\n  query ($translationId: Int!, $offset: Int!) {\n    translationGroups(translationId: $translationId, offset: $offset, limit: 500) {\n      records {\n        translationGroupId\n        translationScientificName\n        isFinal\n        taxonomyIds\n      }\n      nextOffset\n    }\n  }\n"]))),dl=function(e){var t=e.translationGroupId,n=Object(gi.a)(e,cl);return Object(ba.a)({id:t},n)},pl=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(ul,{translationId:n},{dataProperty:"translationGroups"});case 2:return a=t.sent,t.abrupt("return",a.translationGroups.records.map((function(e){return me(dl(e),{taxonomyIds:[]})})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ml=["translationId","translationName"],bl=Object(bi.default)(Nr||(Nr=Object(mi.a)(["\n  query ($offset: Int!) {\n    translations(limit: 500, offset: $offset) {\n      records {\n        translationId\n        translationName\n        isActive\n        description\n        taxaCount\n        createdDate\n        updatedDate\n      }\n      nextOffset\n    }\n  }\n"]))),fl=function(e){return Object(ui.a)(pi.a.mark((function t(){var n;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(bl,{},{dataProperty:"translations"});case 2:return n=t.sent,t.abrupt("return",n.translations.records.map((function(e){var t=e.translationId,n=e.translationName,a=Object(gi.a)(e,ml);return me(Object(ba.a)({id:t,name:n},a),{description:""})})));case 4:case"end":return t.stop()}}),t)})))},hl=Object(bi.default)(Ar||(Ar=Object(mi.a)(["\n  query ($offset: Int) {\n    userBoxes(limit: 1000, offset: $offset) {\n      records {\n        boxId\n        customerName\n        customerId\n        createdDate\n        boxReceivedDate\n        submittedBy\n        boxState\n        boxStateId\n        sampleCount\n        midges\n        measurements\n        sortComplete\n        idComplete\n        alias\n        submissionCount\n      }\n      nextOffset\n    }\n  }\n"]))),gl=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(hl,{},{dataProperty:"userBoxes"});case 2:return a=t.sent,r=(null!==(n=a.userBoxes.records)&&void 0!==n?n:[]).map(vo),t.abrupt("return",Object(A.sortBy)(r,(function(e){return e.id})).reverse());case 5:case"end":return t.stop()}}),t)})))},yl=Object(bi.default)(Pr||(Pr=Object(mi.a)(["\n  query ($userId: Int!) {\n    user(id: $userId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      affiliationId\n      organizationName\n      roleIds\n    }\n  }\n"]))),vl=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(yl,{userId:n});case 2:if(a=t.sent,r=a.user){t.next=6;break}return t.abrupt("return",null);case 6:return i="".concat(r.firstName," ").concat(r.lastName),t.abrupt("return",me(Object(ba.a)({fullName:i},a.user),{fullName:"",firstName:"",lastName:"",email:"",phone:"",organizationName:"",roleIds:[]}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xl=Object(bi.default)(Mr||(Mr=Object(mi.a)(["\n  query ($offset: Int) {\n    users(limit: 1000, offset: $offset) {\n      records {\n        id\n        firstName\n        lastName\n        email\n        phone\n        organizationName\n        affiliationId\n        roleIds\n      }\n      nextOffset\n    }\n  }\n"]))),Ol=function(e){return Object(ui.a)(pi.a.mark((function t(){var n,a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(xl,{},{dataProperty:"users"});case 2:return n=t.sent,a=n.users.records,t.abrupt("return",a.map((function(e){return Object(ba.a)(Object(ba.a)({fullName:"".concat(e.firstName," ").concat(e.lastName)},e),{},{roleIds:e.roleIds||[],organizationName:e.organizationName||""})})));case 5:case"end":return t.stop()}}),t)})))},jl=Object(bi.default)(Lr||(Lr=Object(mi.a)(["\n  query ($latitude: Float!, $longitude: Float!) {\n    getUSState(latitude: $latitude, longitude: $longitude) {\n      id\n      name\n      abbreviation\n    }\n  }\n"]))),wl=function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query(jl,Object(ba.a)({},n));case 2:return a=t.sent,t.abrupt("return",a.getUSState);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Il=Object(bi.default)(Rr||(Rr=Object(mi.a)(["\n  mutation ($boxId: Int!) {\n    finalizePendingBox(boxId: $boxId) {\n      success\n      stats\n      errors\n      warnings\n    }\n  }\n"]))),Sl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.boxId,n.next=3,e.mutation(Il,{boxId:r});case 3:if(i=n.sent,o=i.finalizePendingBox,s=o.success,l=o.errors,s){n.next=10;break}if(l&&0!==l.length){n.next=8;break}throw new te("unknown error");case 8:throw Q.a.warn(i.finalizePendingBox),new te("submission data contained errors");case 10:return t("boxes"),t("boxSamples"),n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},kl=Object(bi.default)(_r||(_r=Object(mi.a)(["\n  mutation ($sourceBoxId: Int!, $targetBoxId: Int!) {\n    mergeBoxes(sourceBoxId: $sourceBoxId, targetBoxId: $targetBoxId)\n  }\n"]))),Cl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(kl,Object(ba.a)({},a));case 2:if(n.sent.mergeBoxes){n.next=5;break}throw new te("boxes did not merge");case 5:return t("boxes"),t("samples"),t("boxSamples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Dl=Object(bi.default)(Fr||(Fr=Object(mi.a)(["\n  mutation ($boxId: Int!, $fromTaxonomyId: Int!, $toTaxonomyId: Int!) {\n    taxReconciliation(boxId: $boxId, fromTaxonomyId: $fromTaxonomyId, toTaxonomyId: $toTaxonomyId)\n  }\n"]))),zl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Dl,Object(ba.a)({},a));case 2:if(n.sent.taxReconciliation){n.next=5;break}throw new te("taxonomy did not reconcile");case 5:return t("boxTaxa"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Tl=Object(bi.default)(Er||(Er=Object(mi.a)(["\n  mutation ($projectId: Int!, $sampleIds: [Int]) {\n    removeProjectSamples(projectId: $projectId, sampleIds: $sampleIds)\n  }\n"]))),Nl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Tl,Object(ba.a)({},a));case 2:if(null!==n.sent.removeProjectSamples){n.next=5;break}throw new te("project samples did not update");case 5:return t("projectSamples"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Al=Object(bi.default)(qr||(qr=Object(mi.a)(["\n  mutation ($boxId: Int!, $sampleIds: [Int]!) {\n    splitBox(boxId: $boxId, sampleIds: $sampleIds)\n  }\n"]))),Pl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Al,Object(ba.a)({},a));case 2:if((r=n.sent).splitBox){n.next=5;break}throw new te("box did not split");case 5:return t("boxes"),t("samples"),t("boxSamples"),n.abrupt("return",r.splitBox);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ml=Object(bi.default)(Br||(Br=Object(mi.a)(["\n  mutation ($sampleId: Int!) {\n    labStartSort(sampleId: $sampleId)\n  }\n"]))),Ll=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.sampleId,n.next=3,e.mutation(Ml,{sampleId:r});case 3:if(n.sent.labStartSort){n.next=6;break}throw new te("sample sorting did not start");case 6:return t("boxes"),t("samples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Rl=Object(bi.default)(Ur||(Ur=Object(mi.a)(["\n  mutation ($sampleId: Int!) {\n    taxIdentificationStart(sampleId: $sampleId)\n  }\n"]))),_l=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.sampleId,n.next=3,e.mutation(Rl,{sampleId:r});case 3:if(n.sent.taxIdentificationStart){n.next=6;break}throw new te("taxonomy identification did not start");case 6:return t("boxes"),t("samples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Fl=Object(bi.default)(Gr||(Gr=Object(mi.a)(["\n  mutation ($sampleId: Int!) {\n    labStopSort(sampleId: $sampleId)\n  }\n"]))),El=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.sampleId,n.next=3,e.mutation(Fl,{sampleId:r});case 3:if(n.sent.labStopSort){n.next=6;break}throw new te("sample sorting did not stop");case 6:return t("boxes"),t("samples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ql=Object(bi.default)(Wr||(Wr=Object(mi.a)(["\n  mutation ($sampleId: Int!, $time: Float!) {\n    taxIdentificationStop(sampleId: $sampleId, time: $time)\n  }\n"]))),Bl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.sampleId,i=a.time,n.next=3,e.mutation(ql,{sampleId:r,time:i});case 3:if(n.sent.taxIdentificationStop){n.next=6;break}throw new te("taxonomy identification did not stop");case 6:return t("boxes"),t("samples"),n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ul=Object(bi.default)(Vr||(Vr=Object(mi.a)(["\n  mutation (\n    $boxId: Int!\n    $boxStateId: Int!\n    $customerId: Int!\n    $alias: String\n    $description: String\n    $measurements: Boolean!\n    $midges: Boolean!\n    $modelIds: [Int]\n    $receivedDate: String\n  ) {\n    setBoxInfo(\n      boxId: $boxId\n      boxStateId: $boxStateId\n      customerId: $customerId\n      alias: $alias\n      description: $description\n      measurements: $measurements\n      midges: $midges\n      models: $modelIds\n      boxReceivedDate: $receivedDate\n    )\n  }\n"]))),Gl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Ul,Object(ba.a)({},a));case 2:if(n.sent.setBoxInfo){n.next=5;break}throw new te("box did not update");case 5:return t("boxes"),t("samples"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Wl=["sortTime","sorterCount"],Vl=Object(bi.default)(Hr||(Hr=Object(mi.a)(["\n  mutation ($sampleId: Int!, $sorterId: Int!, $count: Int!, $elutriation: Boolean!, $time: Float!, $labSplit: Float!) {\n    labSort(\n      sampleId: $sampleId\n      sorterId: $sorterId\n      count: $count\n      elutriation: $elutriation\n      time: $time\n      labSplit: $labSplit\n    )\n  }\n"]))),Hl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.sortTime,i=a.sorterCount,o=Object(gi.a)(a,Wl),s=Object(ba.a)({time:r,count:i},o),n.next=4,e.mutation(Vl,s);case 4:if(n.sent.labSort){n.next=7;break}throw new te("sample sorting did not update");case 7:return t("boxes"),t("samples"),n.abrupt("return",!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Jl=["id","name","groupId"],Yl=Object(bi.default)(Jr||(Jr=Object(mi.a)(["\n  mutation ($id: Int!, $metric: MetricInput!) {\n    updateMetric(id: $id, metric: $metric)\n  }\n"]))),Ql=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=a.groupId,s=Object(gi.a)(a,Jl),n.next=3,e.mutation(Yl,{id:r,metric:Object(ba.a)({metricName:i,metricGroupId:o},s)});case 3:if(n.sent.updateMetric){n.next=6;break}throw new te("metric did not update");case 6:return t("metrics"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},$l=["id","name","typeId","taxonomicEffort"],Zl=Object(bi.default)(Yr||(Yr=Object(mi.a)(["\n  mutation ($id: Int!, $model: ModelInput!) {\n    updateModel(id: $id, model: $model)\n  }\n"]))),Kl=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s,l;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=a.typeId,s=a.taxonomicEffort,l=Object(gi.a)(a,$l),n.next=3,e.mutation(Zl,{id:r,model:Object(ba.a)({modelName:i,modelTypeId:o,taxonomicEffort:s||null},l)});case 3:if(n.sent.updateModel){n.next=6;break}throw new te("model did not update");case 6:return t("models"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Xl=["id","name","typeId"],ec=Object(bi.default)(Qr||(Qr=Object(mi.a)(["\n  mutation ($id: Int!, $organization: OrganizationInput!) {\n    updateOrganization(id: $id, organization: $organization)\n  }\n"]))),tc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=a.typeId,s=Object(gi.a)(a,Xl),n.next=3,e.mutation(ec,{id:r,organization:Object(ba.a)({organizationName:i,organizationTypeId:o},s)});case 3:if(n.sent.updateOrganization){n.next=6;break}throw new te("organization did not update");case 6:return t("organizations"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},nc=["id","name","typeId"],ac=Object(bi.default)($r||($r=Object(mi.a)(["\n  mutation ($id: Int!, $predictor: PredictorInput!) {\n    updatePredictor(id: $id, predictor: $predictor)\n  }\n"]))),rc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=a.typeId,s=Object(gi.a)(a,nc),n.next=3,e.mutation(ac,{id:r,predictor:Object(ba.a)({predictorName:i,predictorTypeId:o},s)});case 3:if(n.sent.updatePredictor){n.next=6;break}throw new te("predictor did not update");case 6:return t("predictors"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ic=["id","name"],oc=Object(bi.default)(Zr||(Zr=Object(mi.a)(["\n  mutation ($id: Int!, $project: ProjectInput!) {\n    updateProject(id: $id, project: $project)\n  }\n"]))),sc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=Object(gi.a)(a,ic),n.next=3,e.mutation(oc,{id:r,project:Object(ba.a)({projectName:i},o)});case 3:if(n.sent.updateProject){n.next=6;break}throw new te("project did not update");case 6:return t("projects"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},lc=["id"],cc=Object(bi.default)(Kr||(Kr=Object(mi.a)(["\n  mutation ($id: Int!, $sample: SampleInput!) {\n    updateSample(id: $id, sample: $sample)\n  }\n"]))),uc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=Object(gi.a)(a,lc),n.next=3,e.mutation(cc,{id:r,sample:i});case 3:if(n.sent.updateSample){n.next=6;break}throw new te("sample did not update");case 6:return t("samples"),t("boxSamples"),t("projectSamples"),n.abrupt("return",!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},dc=Object(bi.default)(Xr||(Xr=Object(mi.a)(["\n  mutation ($boxId: Int!, $data: JSONObject!) {\n    updateSampleSubmission(boxId: $boxId, data: $data)\n  }\n"]))),pc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(dc,Object(ba.a)(Object(ba.a)({},a),{},{data:JSON.stringify(a.data)}));case 2:if(n.sent.updateSampleSubmission){n.next=5;break}throw new te("submission did not update");case 5:return t("boxes"),n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},mc=["id","name"],bc=Object(bi.default)(ei||(ei=Object(mi.a)(["\n  mutation ($id: Int!, $site: SiteInput!) {\n    updateSite(id: $id, site: $site)\n  }\n"]))),fc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=Object(gi.a)(a,mc),n.next=3,e.mutation(bc,{id:r,site:Object(ba.a)({siteName:i},o)});case 3:if(n.sent.updateSite){n.next=6;break}throw new te("site did not update");case 6:return t("sites"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},hc=["id","name"],gc=Object(bi.default)(ti||(ti=Object(mi.a)(["\n  mutation ($id: Int!, $taxon: TaxonomyInput!) {\n    setTaxonomy(id: $id, taxonomy: $taxon)\n  }\n"]))),yc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=Object(gi.a)(a,hc),n.next=3,e.mutation(gc,{id:r,taxon:Object(ba.a)({scientificName:i},o)});case 3:if(n.sent.setTaxonomy){n.next=6;break}throw new te("taxon did not update");case 6:return t("taxa"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},vc=["id","name"],xc=Object(bi.default)(ni||(ni=Object(mi.a)(["\n  mutation ($id: Int!, $translation: TranslationInput!) {\n    updateTranslation(id: $id, translation: $translation)\n  }\n"]))),Oc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i,o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.name,o=Object(gi.a)(a,vc),n.next=3,e.mutation(xc,{id:r,translation:Object(ba.a)({translationName:i},o)});case 3:if(n.sent.updateTranslation){n.next=6;break}throw new te("translation did not update");case 6:return t("translations"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},jc=["id"],wc=Object(bi.default)(ai||(ai=Object(mi.a)(["\n  mutation ($id: Int!, $translationGroup: TranslationGroupInput!) {\n    updateTranslationGroup(id: $id, translationGroup: $translationGroup)\n  }\n"]))),Ic=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=Object(gi.a)(a,jc),n.next=3,e.mutation(wc,{id:r,translationGroup:i});case 3:if(n.sent.updateTranslationGroup){n.next=6;break}throw new te("translation group did not update");case 6:return t("translations"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Sc=["id"],kc=Object(bi.default)(ri||(ri=Object(mi.a)(["\n  mutation ($id: Int!, $user: IndividualInput!) {\n    updateUser(id: $id, user: $user)\n  }\n"]))),Cc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a,r){var i,o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.id,o=Object(gi.a)(a,Sc),n.next=3,e.mutation(kc,{id:i,user:o});case 3:if(n.sent.updateUser){n.next=6;break}throw new te("user did not update");case 6:return t(r?"myUser":"users"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Dc=Object(bi.default)(ii||(ii=Object(mi.a)(["\n  mutation ($id: Int!, $roleIds: [Int]!) {\n    updateUserRoles(userId: $id, roleIds: $roleIds)\n  }\n"]))),zc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,i=a.roleIds,n.next=3,e.mutation(Dc,{id:r,roleIds:i});case 3:if(n.sent.updateUserRoles){n.next=6;break}throw new te("user roles did not update");case 6:return t("users"),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Tc=Object(bi.default)(oi||(oi=Object(mi.a)(["\n  mutation (\n    $sampleId: Int!\n    $taxonId: Int!\n    $lifeStageId: Int!\n    $splitCount: Int!\n    $bigRareCount: Int\n    $comments: String\n    $noteTypeIds: [Int]\n  ) {\n    createSampleTaxaInfo(\n      sampleId: $sampleId\n      taxonomyId: $taxonId\n      lifeStageId: $lifeStageId\n      splitCount: $splitCount\n      comments: $comments\n      noteTypeIds: $noteTypeIds\n      bigRareCount: $bigRareCount\n    )\n  }\n"]))),Nc=function(e,t){return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var r,i;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.mutation(Tc,Object(ba.a)({lifeStageId:-1},a));case 2:if(r=n.sent,i=r.createSampleTaxaInfo){n.next=6;break}throw new te("organism record did not create or update");case 6:return t("samples"),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};!function(e){e[e.unfetched=0]="unfetched",e[e.fetching=1]="fetching",e[e.fetched=2]="fetched"}(si||(si={}));var Ac,Pc=Object(J.b)({key:"sites/allSitesStatusAtom",default:si.unfetched}),Mc=Object(J.b)({key:"sites/allSitesAtom",default:[]}),Lc=Object(J.b)({key:"SitesListing/sparseSitesDetailAtom",default:[]}),Rc=Object(J.f)({key:"selectors/selectSitesBySiteId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("sites")),r=a(ne),t.next=5,Zs(r)(e);case 5:return i=t.sent,t.abrupt("return",i?[i]:[]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),_c=function(){var e,t=Object(J.h)(Pc),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(J.k)(Mc),o=function(e,t,n){var a=ae();return function r(i,o){return e(a)(i,Math.min(t,o-i)).then((function(e){var t=e.records,a=e.nextOffset;if(n(t),a&&a<o)return r(a,o)}))}}(al,5e3,(e=i,function(t){e((function(e){return Object(A.uniqBy)(pe(pe([],t,!0),e,!0),"id")}))}));return function(){a===si.unfetched&&(r(si.fetching),Promise.all([o(0,1e4),o(1e4,2e4),o(2e4,3e4),o(3e4,1/0)]).then((function(){r(si.fetched)})))}},Fc=function(){var e=ae(),t=Je(),n=Object(J.h)(Lc),a=Object(d.a)(n,2),r=a[0],i=a[1];return function(){var n=Object(ui.a)(pi.a.mark((function n(a){var o;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a&&!r.find((function(e){return e.id===a}))){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Zs(e)(a);case 5:if(o=n.sent){n.next=8;break}return n.abrupt("return");case 8:i((function(e){return[].concat(Object(ci.a)(e),[o])})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),t.error("Failed to retrieve site: ".concat(n.t0));case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},Ec=Object(J.f)({key:"selectSitesByBoxId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("sites")),a(Uc("boxSamples")),r=a(ne),t.abrupt("return",Xs(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),qc=Object(J.f)({key:"selectSitesByProjectId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("sites")),a(Uc("projectSamples")),r=a(ne),t.abrupt("return",tl(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Bc=Object(J.c)({key:"refreshOnState",default:0}),Uc=function(e,t){return Bc("".concat(e,":").concat(t))},Gc=function(){return Object(J.g)((function(e){var t=e.set;return function(e,n){t(Uc(e,n),(function(e){return e+1})),"sites"===e&&(t(Pc,si.unfetched),t(Mc,[]),t(Lc,[]))}}),[])},Wc=function(){var e=Object(s.useRef)([]).current,t=Gc();return[Object(s.useCallback)((function(t,n){e.push([t,n])}),[]),function(){for(;e.length>0;){var n=e.shift();if(!n)return;t.apply(void 0,Object(ci.a)(n))}}]},Vc=function(){var e=Wc(),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){return function(){a()}}),[]),n},Hc=function(e){return e.map((function(e){return{value:e.id,label:e.name}}))},Jc=function(e){return e.map((function(e){return e.name}))},Yc=Object(J.e)({key:"selectors/selectLookups",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(ne),e.abrupt("return",Yo(a)());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Qc=Object(J.e)({key:"selectors/selectTaxaLevels",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).taxa)||void 0===n?void 0:n.taxaLevels){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});!function(e){e[e.kingdom=1]="kingdom",e[e.phylum=5]="phylum",e[e.class=9]="class",e[e.subclass=10]="subclass",e[e.order=13]="order",e[e.family=19]="family",e[e.genus=23]="genus",e[e.species=25]="species"}(Ac||(Ac={}));var $c,Zc=Object(J.e)({key:"selectors/selectLifeStages",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).taxa)||void 0===n?void 0:n.lifeStages){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Kc=Object(J.e)({key:"selectors/selectNoteTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.noteTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Xc=Object(J.e)({key:"selectors/selectBoxStates",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.boxStates){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});!function(e){e[e.pending=1]="pending",e[e.active=5]="active",e[e.complete=6]="complete"}($c||($c={}));var eu,tu,nu,au,ru,iu,ou,su=Object(J.e)({key:"selectors/selectSampleMethods",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.sampleMethods){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),lu=Object(J.e)({key:"selectors/selectSampleTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.sampleTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),cu=Object(J.e)({key:"selectors/selectTowTypeNames",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.towTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),uu=Object(J.e)({key:"selectors/selectEffortTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.effortTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),du=Object(J.e)({key:"selectors/selectDesignTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).sample)||void 0===n?void 0:n.designTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),pu=Object(J.e)({key:"selectors/selectHabitats",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.habitats){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),mu=Object(J.e)({key:"selectors/selectEcosystems",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.ecosystems){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),bu=Object(J.e)({key:"selectors/selectWaterbodyTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.waterbodyTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),fu=Object(J.e)({key:"selectors/selectUsStates",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.states){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",Object(A.sortBy)(r,(function(e){return e.name})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),hu=Object(J.e)({key:"selectors/selectUsCountryId",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.get,o=null!==(n=null===(a=i(Yc).geo)||void 0===a?void 0:a.countries)&&void 0!==n?n:[],s=null===(r=o.find((function(e){return"United States"===e.name})))||void 0===r?void 0:r.id){e.next=5;break}throw new Error("failed to determine United States country ID");case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),gu=Object(J.e)({key:"selectors/selectRoles",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).entity)||void 0===n?void 0:n.roles){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),yu=Object(J.d)(0),vu=Object(J.e)({key:"selectors/selectDefaultOrganizationTypeId",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.get,o=null!==(n=null===(a=i(Yc).entity)||void 0===a?void 0:a.organizationTypes)&&void 0!==n?n:[],s=null===(r=o.find((function(e){return"Other"===e.name})))||void 0===r?void 0:r.id){e.next=5;break}throw new Error("failed to determine default organization type");case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),xu=Object(J.e)({key:"selectors/selectFishDietSpecies",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).taxa)||void 0===n?void 0:n.fishDietSpecies){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ou=(Object(J.e)({key:"selectors/selectSystems",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.systems){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(J.e)({key:"selectors/selectModelTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.modelTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),ju=Object(J.e)({key:"selectors/selectCalculations",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).metric)||void 0===n?void 0:n.calculations){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),wu=Object(J.e)({key:"selectors/selectMetricGroups",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).metric)||void 0===n?void 0:n.metricGroups){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Iu=Object(J.e)({key:"selectors/selectMetricReports",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).metric)||void 0===n?void 0:n.metricReports){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Su=Object(J.e)({key:"selectors/selectPredictorTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).geo)||void 0===n?void 0:n.predictorTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ku=Object(J.e)({key:"selectors/selectRarefactionTypes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.get,r=null===(n=a(Yc).metric)||void 0===n?void 0:n.rarefactionTypes){e.next=4;break}throw new Error("Missing lookup in query");case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Cu=Object(J.f)({key:"selectors/boxSamplesByBoxId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),a(Uc("boxSamples")),r=a(ne),t.abrupt("return",Po(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Du=Object(J.f)({key:"selectors/selectMinimalSamplesByOrganizationId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",ns(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),zu=Object(J.f)({key:"selectors/selectMinimalSamplesByPolygon",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",rs(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Tu=Object(J.f)({key:"selectors/selectMinimalSamplesBySiteId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",os(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Nu=Object(J.f)({key:"selectors/selectMinimalSamplesByTaxonId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",ls(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Au=Object(J.f)({key:"selectors/selectMinimalSamplesByUsStateId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",us(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Pu=Object(J.f)({key:"selectors/selectModelResultsBySampleId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),a(Uc("models")),r=a(ne),t.abrupt("return",fs(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Mu=Object(J.f)({key:"selectors/selectOrganismsBySampleId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",js(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Lu=Object(J.f)({key:"selectors/selectProjectSamplesByProjectId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),a(Uc("projectSamples")),r=a(ne),t.abrupt("return",Rs(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ru=Object(J.f)({key:"selectors/selectSampleById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),r=a(ne),t.abrupt("return",Ws(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),_u=Object(J.f)({key:"selectors/selectSamplePredictorValuesBySampleId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("samples")),a(Uc("predictors")),r=a(ne),t.abrupt("return",Js(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Fu=["id","name"],Eu=Object(J.e)({key:"selectors/boxes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("boxes")),n(Uc("boxSamples")),a=n(ne),e.abrupt("return",xo(a)());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),qu=Object(J.e)({key:"selectors/selectActiveBoxes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("boxes")),n(Uc("boxSamples")),a=n(ne),e.abrupt("return",jo(a)());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Bu=Object(J.e)({key:"selectors/selectUserBoxes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("boxes")),a=n(ne),e.abrupt("return",gl(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Uu=Object(J.f)({key:"selectors/boxById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("boxes")),r=a(ne),t.abrupt("return",zo(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Gu=Object(J.e)({key:"selectors/predictors",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("predictors")),a=n(ne),e.abrupt("return",Ns(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Wu=Object(J.e)({key:"selectors/organizations",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("organizations")),a=n(ne),e.next=5,Ds(a)();case 5:return r=e.sent,i=Object(A.countBy)(r,"name"),e.abrupt("return",r.map((function(e){var t=e.id,n=e.name,a=Object(gi.a)(e,Fu);return Object(ba.a)({id:t,name:i[n]>1?"".concat(n," [").concat(t,"]"):n},a)})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Vu=Object(J.f)({key:"selectors/selectOrganizationById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("organizations")),r=a(ne),t.abrupt("return",Is(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Hu=Object(J.e)({key:"selectors/models",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("models")),a=n(ne),e.abrupt("return",ys(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ju=Object(J.e)({key:"selectors/projects",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("projects")),n(Uc("projectSamples")),a=n(ne),e.abrupt("return",Ms(a)());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Yu=Object(J.e)({key:"selectors/translations",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("translations")),a=n(ne),e.abrupt("return",fl(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Qu=Object(J.f)({key:"selectors/selectTranslationById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=n.get)(Uc("translations")),r=a(Yu),i=a(ne),o=r.find((function(t){return t.id===e}))){t.next=7;break}return t.abrupt("return",null);case 7:return t.next=9,pl(i)(e);case 9:return s=t.sent,t.abrupt("return",Object(ba.a)(Object(ba.a)({},o),{},{groups:s}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),$u=Object(J.f)({key:"selectors/selectUsStateAtCoordinates",get:function(e){var t=e.latitude,n=e.longitude;return function(){var e=Object(ui.a)(pi.a.mark((function e(a){var r,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.get,i=r(ne),e.abrupt("return",wl(i)({latitude:t,longitude:n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Zu=Object(J.f)({key:"selectors/selectLatestSubmissionByBoxId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("boxes")),r=a(ne),t.abrupt("return",Ho(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ku=Object(J.f)({key:"selectors/selectProjectById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.get,i=r(Ju),t.abrupt("return",null!==(a=i.find((function(t){return t.id===e})))&&void 0!==a?a:null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Xu=Object(J.e)({key:"selectors/selectNull",get:function(){return null}}),ed=Object(J.e)({key:"selectors/selectReports",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("reports")),a=n(ne),e.abrupt("return",Bs(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),td=Object(J.e)({key:"selectors/selectMetrics",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("metrics")),a=n(ne),e.abrupt("return",Zo(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),nd=Object(J.f)({key:"selectors/selectMetricById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.get,i=r(td),t.abrupt("return",null!==(a=i.find((function(t){return t.id===e})))&&void 0!==a?a:null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),ad=Object(J.f)({key:"selectors/selectModelById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("models")),r=a(ne),t.abrupt("return",ms(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),rd=Object(J.f)({key:"selectors/selectPredictorById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.get,i=r(Gu),t.abrupt("return",null!==(a=i.find((function(t){return t.id===e})))&&void 0!==a?a:null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),id=Object(J.e)({key:"selectors/selectAttributes",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(ne),e.abrupt("return",ko(a)());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),od=function(e){for(var t=e.reduce((function(e,t){var n=t.levelRankOrder;return Math.max(e,n)}),0),n=e.map((function(e){return Object(ba.a)({},e)})),a=t;a>0;)n.forEach((function(e){if(e.levelRankOrder===a){var t=n.filter((function(t){return t.parentId===e.id}));e.childIds=t.map((function(e){return e.id})),e.descendantIds=t.reduce((function(e,t){var n=t.id,a=t.descendantIds;return[].concat(Object(ci.a)(e),[n],Object(ci.a)(a||[]))}),[])}})),a-=1;return n},sd=Object(J.e)({key:"taxa",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("taxa")),a=n(ne),e.next=5,Promise.all([n(Qc),ll(a)()]);case 5:return r=e.sent,i=Object(d.a)(r,2),o=i[0],s=i[1],e.abrupt("return",od(Object(A.sortBy)(s.map((function(e){var t,n;return Object(ba.a)(Object(ba.a)({},e),{},{levelRankOrder:null!==(t=null===(n=o.find((function(t){return t.id===e.levelId})))||void 0===n?void 0:n.rankOrder)&&void 0!==t?t:-1})})),(function(e){return e.name}))));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ld=Object(J.f)({key:"selectors/selectBoxTaxaByBoxId",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("taxa")),a(Uc("boxTaxa")),r=a(ne),t.abrupt("return",Ro(r)(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),cd=Object(J.e)({key:"selectors/selectHasUser",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(ud),e.abrupt("return",!a.virtual);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ud=Object(J.e)({key:"selectors/selectMyUser",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("myUser")),a=n(ne),e.next=5,xs(a)();case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",{id:-1,affiliationId:-1,email:"",phone:"",firstName:"",lastName:"",fullName:"New User",hasPermission:function(){return!1},organizationName:"",virtual:!0,roleIds:[]});case 8:return i=function(e,t){var n,a,i=!(null===(n=r.permissions[t])||void 0===n||!n.includes(e)),o=!(null===(a=r.permissions[t.replace("Own","Any")])||void 0===a||!a.includes(e));return i||o},e.abrupt("return",Object(ba.a)(Object(ba.a)({},r),{},{hasPermission:i}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),dd=Object(J.e)({key:"selectors/sorterUsers",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("users")),a=n(ne),e.abrupt("return",il(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),pd=Object(J.f)({key:"selectors/selectUserById",get:function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=n.get)(Uc("users")),r=a(ne),t.abrupt("return",vl(r)(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),md=Object(J.e)({key:"selectors/selectUsers",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.get)(Uc("users")),a=n(ne),e.abrupt("return",Ol(a)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),bd=n(190),fd=n.n(bd),hd=function(e){var t=e.className,n=bv(),a=Object(s.useRef)(null),r=Object(s.useState)(""),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(Jt.a)("cmd+o, ctrl+o",(function(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=a.current)||void 0===t||t.focus()})),Object(fe.b)(he.a,{className:t,size:"small",value:o,onChange:function(e){var t=e.target.value;return l(t)},InputProps:{onKeyDown:function(e){switch(e.key){case"Enter":var t=o.trim();if(!t.match(/^\d+$/))return;l("");var r=Number(t);r<=9999?n.boxDetail({boxId:r}):n.sampleDetail({sampleId:r});break;case"Escape":var i;l(""),null===(i=a.current)||void 0===i||i.blur()}}},inputRef:a,placeholder:"Box or Sample ID"})},gd=n(568),yd=n(288),vd=n.n(yd),xd=function(){var e=Object(J.i)(ud);return Object(fe.c)(fe.a,{children:[Object(fe.b)(vd.a,{})," ",e.fullName]})},Od=function(){return Object(fe.c)(fe.a,{children:[Object(fe.b)(Pe.a,{variant:"circular",width:25}),Object(fe.b)(Pe.a,{variant:"text",width:120})]})},jd=function(){return Object(fe.b)("div",{css:{display:"flex",alignItems:"center",justifyContent:"center",height:"3em"},children:Object(fe.b)(s.Suspense,{fallback:Object(fe.b)(Od,{}),children:Object(fe.b)(xd,{})})})},wd=function(e){return Object(fe.b)("div",Object(ba.a)({css:{display:"flex",alignItems:"center",flexDirection:"column"}},e))},Id=sa((function(e){var t=e.onClose,n=bv(),a=Object(J.i)(ud),r=[{label:"Boxes",onClick:function(){return n.boxes()},visible:a.hasPermission(re.NAMCResource.boxes,re.GrantAction.readOwn)},{label:"Sites",onClick:function(){return n.sites()},visible:a.hasPermission(re.NAMCResource.sites,re.GrantAction.readAny)},{label:"Customers",onClick:function(){return n.organizations()},visible:a.hasPermission(re.NAMCResource.organizations,re.GrantAction.readAny)},{label:"Projects",onClick:function(){return n.projects()},visible:a.hasPermission(re.NAMCResource.projects,re.GrantAction.readAny)},{label:"Taxonomy",onClick:function(){return n.taxa()},visible:a.hasPermission(re.NAMCResource.taxonomy,re.GrantAction.readAny)},{label:"Models",onClick:function(){return n.models()},visible:a.hasPermission(re.NAMCResource.models,re.GrantAction.readAny)},{label:"Predictors",onClick:function(){return n.predictors()},visible:a.hasPermission(re.NAMCResource.models,re.GrantAction.readAny)},{label:"Translations",onClick:function(){return n.translations()},visible:a.hasPermission(re.NAMCResource.translations,re.GrantAction.readAny)},{label:"Metrics",onClick:function(){return n.metrics()},visible:a.hasPermission(re.NAMCResource.metrics,re.GrantAction.readAny)},{label:"Billing",onClick:A.noop,disabled:!0,visible:a.hasPermission(re.NAMCResource.billing,re.GrantAction.readAny)},{label:"Users",onClick:function(){return n.users()},visible:a.hasPermission(re.NAMCResource.individuals,re.GrantAction.readAny)},{label:"Reports",onClick:function(){return n.reports()},visible:a.hasPermission(re.NAMCResource.sqlReports,re.GrantAction.readAny)}];return Object(fe.b)(fe.a,{children:r.filter((function(e){return e.visible})).map((function(e){var n=e.label,a=e.onClick;return e.disabled?Object(fe.b)("span",{css:{opacity:.5},children:n},n):Object(fe.b)("a",{onClick:function(){a(),t()},children:n},n)}))})}),(function(){return Object(fe.b)(fe.a,{children:Object(A.times)(10).map((function(e){return Object(fe.b)(Pe.a,{width:"8em"},e)}))})})),Sd=sa((function(e){var t=e.className,n=e.isOpen,a=e.onClose,r=ae(),i=bv(),o=Object(J.i)(cd);return Object(fe.b)(gd.a,{anchor:"left",open:n,onClose:function(){return a()},className:t,children:Object(fe.c)(wd,{css:{minWidth:"20em",height:"100%"},children:[Object(fe.b)(jd,{}),Object(fe.c)("div",{css:{display:"flex",gap:"1em"},children:[o&&Object(fe.b)("a",{onClick:function(){i.profile(),a()},children:"Profile"}),Object(fe.b)("a",{onClick:function(){r.signOut()},children:"Sign Out"})]}),Object(fe.b)("div",{css:{marginTop:"2em",fontSize:"125%",display:"flex",flexDirection:"column",gap:"1em"},children:Object(fe.b)(Id,{onClose:a})}),Object(fe.c)(wd,{css:{marginTop:"auto",padding:"1em 0",gap:"0.25em"},children:[Object(fe.c)("span",{children:["v",b]}),Object(fe.b)("a",{href:"https://github.com/namc-utah/namc-bug-db/issues/new",target:"_blank",rel:"noreferrer",children:"Report Issue"})]})]})})}),(function(){return null})),kd=Object(J.b)({key:"isNavigationOpen",default:!1}),Cd=function(){var e=Object(J.h)(kd),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(fe.b)(Sd,{isOpen:n,onClose:function(){a(!1)}})},Dd=sa((function(){var e=Object(J.i)(cd),t=Object(J.k)(kd);Object(s.useEffect)((function(){m?document.title="".concat(document.title," (local)"):p&&(document.title="".concat(document.title," (staging)"))}),[]);var n=e?"visible":"hidden";return Object(fe.c)("header",{css:{height:"3em",background:"#064270",color:"white",display:"flex",alignItems:"center",padding:"0 0.5em"},children:[Object(fe.b)(Ge.a,{onClick:function(){return t(!0)},children:Object(fe.b)(fd.a,{sx:{fill:"white"}})}),Object(fe.c)("h1",{css:{fontWeight:500,letterSpacing:"0.05em",fontSize:"200%"},children:["INSTAR",p&&Object(fe.b)("span",{css:{color:"yellow"},children:" STAGING"})]}),Object(fe.b)("div",{css:{margin:"0 0.25em 0 auto",visibility:n},children:Object(fe.b)(hd,{css:{".MuiInputBase-root":{background:"white"}}})})]})}),(function(){return null})),zd=n(292),Td=n.n(zd),Nd=n(37),Ad=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Pd=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Md=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ld=Object(bi.default)(eu||(eu=Ad(["\n  query {\n    lookups {\n      taxa {\n        taxaLevels\n        lifeStages\n        fishDietSpecies\n      }\n      sample {\n        noteTypes\n        boxStates\n        sampleMethods\n        sampleTypes\n        towTypes\n        effortTypes\n        designTypes\n      }\n      geo {\n        systems\n        habitats\n        ecosystems\n        waterbodyTypes\n        states\n        countries\n        modelTypes\n        predictorTypes\n      }\n      entity {\n        organizationTypes\n        roles\n      }\n      metric {\n        metricGroups\n        calculations\n        metricReports\n        rarefactionTypes\n      }\n    }\n  }\n"],["\n  query {\n    lookups {\n      taxa {\n        taxaLevels\n        lifeStages\n        fishDietSpecies\n      }\n      sample {\n        noteTypes\n        boxStates\n        sampleMethods\n        sampleTypes\n        towTypes\n        effortTypes\n        designTypes\n      }\n      geo {\n        systems\n        habitats\n        ecosystems\n        waterbodyTypes\n        states\n        countries\n        modelTypes\n        predictorTypes\n      }\n      entity {\n        organizationTypes\n        roles\n      }\n      metric {\n        metricGroups\n        calculations\n        metricReports\n        rarefactionTypes\n      }\n    }\n  }\n"]))),Rd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},_d=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Fd=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ed=Object(bi.default)(tu||(tu=Rd(["\n  query ($offset: Int!, $filters: CSVFiltersInput!) {\n    csvDownload(limit: 1000, offset: $offset, filters: $filters) {\n      records\n      nextOffset\n    }\n  }\n"],["\n  query ($offset: Int!, $filters: CSVFiltersInput!) {\n    csvDownload(limit: 1000, offset: $offset, filters: $filters) {\n      records\n      nextOffset\n    }\n  }\n"]))),qd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Bd=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Ud=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Gd=Object(bi.default)(nu||(nu=qd(["\n  query ($offset: Int!) {\n    projects(limit: 10000, offset: $offset) {\n      records {\n        projectId\n        projectName\n      }\n      nextOffset\n    }\n  }\n"],["\n  query ($offset: Int!) {\n    projects(limit: 10000, offset: $offset) {\n      records {\n        projectId\n        projectName\n      }\n      nextOffset\n    }\n  }\n"]))),Wd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Vd=function(){return Vd=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Vd.apply(this,arguments)},Hd=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Jd=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Yd=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Qd=Object(bi.default)(au||(au=Wd(["\n  query ($offset: Int) {\n    sites(limit: 10000, offset: $offset) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n        methodIds\n        typeIds\n        projectIds\n        years\n      }\n      nextOffset\n    }\n  }\n"],["\n  query ($offset: Int) {\n    sites(limit: 10000, offset: $offset) {\n      records {\n        siteId\n        siteName\n        longitude\n        latitude\n        usStateId\n        methodIds\n        typeIds\n        projectIds\n        years\n      }\n      nextOffset\n    }\n  }\n"]))),$d=function(e){var t=e.siteId,n=e.siteName,a=Yd(e,["siteId","siteName"]);return Vd({id:t,name:n},a)},Zd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Kd.apply(this,arguments)},Xd=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},ep=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tp=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},np=Object(bi.default)(ru||(ru=Zd(["\n  query ($offset: Int) {\n    taxonomies(limit: 10000, offset: $offset) {\n      records {\n        taxonomyId\n        scientificName\n        levelId\n        synonyms\n        parentTaxonomyId\n      }\n      nextOffset\n    }\n  }\n"],["\n  query ($offset: Int) {\n    taxonomies(limit: 10000, offset: $offset) {\n      records {\n        taxonomyId\n        scientificName\n        levelId\n        synonyms\n        parentTaxonomyId\n      }\n      nextOffset\n    }\n  }\n"]))),ap=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},rp=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},ip=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},op=Object(bi.default)(iu||(iu=ap(["\n  query ($taxonId: Int!) {\n    taxaSites(taxonomyId: $taxonId)\n  }\n"],["\n  query ($taxonId: Int!) {\n    taxaSites(taxonomyId: $taxonId)\n  }\n"]))),sp=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},lp=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},cp=Object(J.b)({key:"publicSitesAtom",default:[]}),up=Object(J.e)({key:"selectPublicLookups",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e;return lp(this,(function(n){return e=t(Nd.o),[2,(a=e,function(){return Pd(void 0,void 0,void 0,(function(){return Md(this,(function(e){switch(e.label){case 0:return[4,a.query(Ld)];case 1:return[2,e.sent().lookups]}}))}))})()];var a}))}))}}),dp=Object(J.e)({key:"selectPublicProjectOptions",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e,n;return lp(this,(function(a){switch(a.label){case 0:return e=t(Nd.o),[4,(r=e,function(e){return Bd(void 0,void 0,void 0,(function(){return Ud(this,(function(t){switch(t.label){case 0:return[4,r.queryAllPages(Gd,{},{dataProperty:"projects",onRecords:e})];case 1:return[2,t.sent().projects.records]}}))}))})()];case 1:return n=a.sent(),[2,Object(A.sortBy)(n,(function(e){return e.projectName})).map((function(e){var t=e.projectId,n=e.projectName;return{id:t,optionLabel:n,chipLabel:"in project ".concat(n)}}))]}var r}))}))}}),pp=Object(J.e)({key:"selectPublicUsStateOptions",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e,n;return lp(this,(function(a){if(!(e=null===(n=t(up).geo)||void 0===n?void 0:n.states))throw new Error("Missing lookup in query");return[2,Object(A.sortBy)(e,(function(e){return e.name})).map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"in ".concat(n)}}))]}))}))}}),mp=Object(J.e)({key:"selectPublicTypeOptions",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e,n;return lp(this,(function(a){if(!(e=null===(n=t(up).sample)||void 0===n?void 0:n.sampleTypes))throw new Error("Missing lookup in query");return[2,e.map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"type is ".concat(n)}}))]}))}))}}),bp=Object(J.e)({key:"selectPublicMethodOptions",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e,n;return lp(this,(function(a){if(!(e=null===(n=t(up).sample)||void 0===n?void 0:n.sampleMethods))throw new Error("Missing lookup in query");return[2,e.map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"method is ".concat(n)}}))]}))}))}}),fp=Object(J.e)({key:"selectPublicTaxa",get:function(e){var t=e.get;return sp(void 0,void 0,void 0,(function(){var e;return lp(this,(function(n){return e=t(Nd.o),[2,(a=e,function(e){return Xd(void 0,void 0,void 0,(function(){return ep(this,(function(t){switch(t.label){case 0:return[4,a.queryAllPages(np,{},{dataProperty:"taxonomies",onRecords:e})];case 1:return[2,t.sent().taxonomies.records.map((function(e){var t=e.taxonomyId,n=e.scientificName,a=e.parentTaxonomyId,r=e.synonyms,i=tp(e,["taxonomyId","scientificName","parentTaxonomyId","synonyms"]);return Object(Nd.k)(Kd({id:t,name:n,levelRankOrder:0,parentId:a,synonyms:r?JSON.parse(r):[],levelName:"",notes:"",isTargetEffort:!1},i),{})}))]}}))}))})()];var a}))}))}}),hp=Object(J.f)({key:"PublicMap/selectPublicTaxaSiteIdsByTaxonId",get:function(e){return function(t){var n=t.get;return sp(void 0,void 0,void 0,(function(){var t;return lp(this,(function(a){return t=n(Nd.o),[2,(r=t,function(e){return rp(void 0,void 0,void 0,(function(){return ip(this,(function(t){switch(t.label){case 0:return[4,r.query(op,{taxonId:e})];case 1:return[2,t.sent().taxaSites]}}))}))})(e)];var r}))}))}}}),gp=function(){return gp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},gp.apply(this,arguments)},yp=Object(Nd.s)((function(e){var t=Object(J.i)(dp);return Object(fe.b)(Nd.a,gp({},e,{options:t,label:"Project"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(Nd.e,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"US State"})})),vp=Object(Nd.s)((function(e){var t=Object(J.i)(pp);return Object(fe.b)(Nd.a,gp({},e,{options:t,label:"US State"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(Nd.e,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"US State"})})),xp=Object(Nd.s)((function(e){var t=e.value,n=e.onChange,a=e.gridArea,r=Object(J.i)(fp);return Object(fe.b)(Nd.h,{label:"Taxonomy",options:r,value:t&&t.id,onChange:function(e){var t;n(null===e?null:{id:e,optionLabel:"",chipLabel:"contains ".concat(null===(t=r.find((function(t){return t.id===e})))||void 0===t?void 0:t.name)})},gridArea:a,ungrouped:!0})}),(function(e){var t=e.gridArea;return Object(fe.b)(Nd.e,{gridArea:t,label:"Taxonomy",value:Object(fe.b)(Pe.a,{})})})),Op=Object(Nd.s)((function(e){var t=Object(J.i)(mp);return Object(fe.b)(Nd.a,gp({},e,{options:t,label:"Sample Type"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(Nd.e,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Sample Type"})})),jp=Object(Nd.s)((function(e){var t=Object(J.i)(bp);return Object(fe.b)(Nd.a,gp({},e,{options:t,label:"Sample Method"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(Nd.e,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Sample Method"})})),wp=function(){return wp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},wp.apply(this,arguments)},Ip=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(t){i(t)}}function s(e){try{l(a.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},Sp=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kp=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Cp=function(e){var t=Object(J.h)(Nd.o),n=t[0],a=t[1];return Object(s.useEffect)((function(){var t=new Nd.c(e.apiUrl,null,(function(){}));a(t)}),[]),n instanceof Nd.c?Object(fe.b)(Dp,wp({},e)):Object(fe.b)("div",{})},Dp=function(e){var t=Object(J.i)(Nd.o),n=Object(s.useState)([]),a=n[0],r=n[1],i=Object(s.useState)([]),o=i[0],l=i[1],c=Object(s.useState)(!1),u=c[0],d=c[1],p=Object(s.useState)(),m=p[0],b=p[1],f=Object(s.useState)(!0),g=f[0],y=f[1],v=Object(Nd.p)(),x=Object(J.h)(cp),O=x[0],j=x[1],w=Object(s.useState)(!0),I=w[0],S=w[1];Object(s.useEffect)((function(){var e=function(e,n){return Ip(void 0,void 0,void 0,(function(){var a;return Sp(this,(function(r){switch(r.label){case 0:return[4,(i=t,function(e,t){return Hd(void 0,void 0,void 0,(function(){return Jd(this,(function(n){switch(n.label){case 0:return[4,i.queryAllPages(Qd,{},{dataProperty:"sites",firstOffset:e,lastOffset:t})];case 1:return[2,n.sent().sites.records.map($d)]}}))}))})(e,n)];case 1:return a=r.sent(),j(Object(k.a)((function(e){e.push.apply(e,a)}))),[2]}var i}))}))};Promise.all([e(0,1e4),e(1e4,2e4),e(2e4,1/0)]).then((function(){S(!1)})).catch((function(e){v.error("Failed to fetch sites: ".concat(e))}))}),[]);var C=Object(J.g)((function(e){var t=e.snapshot;return function(e){return Ip(void 0,void 0,void 0,(function(){return Sp(this,(function(n){return[2,t.getPromise(hp(e)).catch((function(e){return v.error("Failed to retrieve taxon data: ".concat(e)),[]}))]}))}))}})),D=Object(s.useState)({minYear:0,maxYear:0,shortcutYears:[],yearOptions:[]}),z=D[0],T=D[1],N=z.minYear,P=z.maxYear,M=z.shortcutYears,L=z.yearOptions;Object(s.useEffect)((function(){if(!I){var e=h()().year(),t=O.reduce((function(e,t){return Math.min.apply(Math,kp([e],t.years,!1))}),e),n=Object(A.range)(e-7+1,e+1),a=Object(A.range)(e,t-1,-1).map((function(e){return{value:e,label:String(e)}}));T({minYear:t,maxYear:e,shortcutYears:n,yearOptions:a}),F((function(n){n.fromYear=t,n.toYear=e}))}}),[I]);var R=Object(Nd.r)({taxon:null,project:null,usState:null,site:null,fromYear:0,toYear:0,type:null,method:null},[]),_=R[0],F=(R[1],R[2]),E=function(e){return function(t){F((function(n){var a;Object.assign(n,((a={})[e]=t,a))}))}},q=function(e){F((function(t){var n;Object.assign(t,((n={})[e]={taxon:null,project:null,usState:null,site:null,fromYear:0,toYear:0,type:null,method:null}[e],n))}))};Object(s.useEffect)((function(){var e=[],t=[];if(_.project){var n=_.project;e.push({id:"project",label:n.chipLabel,filterFn:function(e){return e.projectIds.includes(n.id)},onDelete:function(){return q("project")}})}if(_.usState){var a=_.usState;e.push({id:"usState",label:a.chipLabel,filterFn:function(e){return e.usStateId===a.id},onDelete:function(){return q("usState")}})}if(_.taxon){var i=_.taxon;t.push(C(i.id)),e.push({id:"taxon",label:i.chipLabel,filterFn:function(){return!0},onDelete:function(){return q("taxon")}})}if(_.type){var o=_.type;e.push({id:"type",label:o.chipLabel,filterFn:function(e){return e.typeIds.includes(o.id)},onDelete:function(){return q("type")}})}if(_.method){var s=_.method;e.push({id:"method",label:s.chipLabel,filterFn:function(e){return e.methodIds.includes(s.id)},onDelete:function(){return q("method")}})}if(_.site){var c=_.site;e.push({id:"site",label:c.chipLabel,filterFn:function(e){return e.id===c.id},onDelete:function(){return q("site")}})}if(_.fromYear!==N||_.toYear!==P){var u=_.fromYear,p=_.toYear,m={id:"dateCriteria",onDelete:function(){F((function(e){e.fromYear=N,e.toYear=P}))}};if(u===p)e.push(wp(wp({},m),{label:"sampled in ".concat(u),filterFn:function(e){return e.years.includes(u)}}));else{var b=Object(A.range)(u,p+1);e.push(wp(wp({},m),{label:"sampled between ".concat(u," and ").concat(p),filterFn:function(e){var t=e.years;return Object(A.intersection)(t,b).length>0}}))}}r(e);var f=!1;if(0===e.length)d(!1),l(O);else if(0===t.length){if(d(!1),I)return;l(e.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),O))}else d(!0),Promise.all(t).then((function(t){if(!f&&!I){var n=A.intersection.apply(void 0,t),a=e.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),O);d(!1),l(a.filter((function(e){var t=e.id;return n.includes(t)})))}}));return function(){f=!0}}),[_,O,I]);var B=Object(Nd.q)({sites:o,onSiteClick:function(e){var t=e.id,n=e.name;F((function(e){e.site={id:t,optionLabel:"".concat(n," [").concat(t,"]"),chipLabel:"from site ".concat(n)}}))},showSingleSiteHoverDetail:!0});Object(s.useEffect)((function(){B.smartFitAll()}),[o]);var U=o.length!==O.length,G=u||I,W=!!m,V=function(e){return function(){F((function(t){t.fromYear=e,t.toYear=e}))}};return Object(fe.c)("div",wp({css:{height:"100%",display:"flex"}},{children:[Object(fe.b)("div",wp({css:{width:g?"400px":0,boxSizing:"border-box",borderRight:"1px solid grey",overflow:"hidden",transition:"width 0.5s"}},{children:Object(fe.c)("div",wp({css:{width:"395px"}},{children:[Object(fe.c)("div",wp({css:{display:"flex",height:"40px",alignItems:"center",position:"relative"}},{children:[Object(fe.b)("div",wp({css:{fontWeight:"bold",marginLeft:"0.7rem"}},{children:"Sample Filters"})),Object(fe.b)(Ge.a,wp({css:{position:"absolute",right:0},onClick:function(){return y(!1)}},{children:Object(fe.b)(Td.a,{})}))]})),Object(fe.b)("div",wp({css:{padding:"0.5em"}},{children:Object(fe.c)("div",wp({css:{margin:"0.5em 0",display:"grid",gap:"0.75em",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'\n                  "project      project"\n                  "usState      usState"\n                  "taxon        taxon"\n                  "type         type"\n                  "method       method"\n                  "fromYear     toYear"\n                  "dates        dates"\n            '}},{children:[Object(fe.b)(yp,{gridArea:"project",value:_.project,onChange:E("project")}),Object(fe.b)(xp,{gridArea:"taxon",value:_.taxon,onChange:E("taxon")}),Object(fe.b)(vp,{gridArea:"usState",value:_.usState,onChange:E("usState")}),Object(fe.b)(Op,{gridArea:"type",value:_.type,onChange:E("type")}),Object(fe.b)(jp,{gridArea:"method",value:_.method,onChange:E("method")}),I?Object(fe.b)(Nd.e,{gridArea:"fromYear",label:"From Year",value:Object(fe.b)(Pe.a,{css:{width:"8em"}})}):Object(fe.b)(Nd.f,{gridArea:"fromYear",value:_.fromYear,onChange:function(e){var t=Number(e);F((function(e){e.fromYear=t,e.toYear=Math.max(e.toYear,t)}))},label:"From Year",options:L}),I?Object(fe.b)(Nd.e,{gridArea:"toYear",label:"To Year",value:Object(fe.b)(Pe.a,{css:{width:"8em"}})}):Object(fe.b)(Nd.f,{gridArea:"toYear",value:_.toYear,onChange:function(e){var t=Number(e);F((function(e){e.toYear=t,e.fromYear=Math.min(e.fromYear,t)}))},label:"To Year",options:L}),Object(fe.b)("div",wp({css:{gridArea:"dates",display:"flex"}},{children:I?Object(fe.b)(Pe.a,{css:{flex:1}}):M.map((function(e){return Object(fe.b)("a",wp({onClick:V(e),css:{display:"inline-block",flex:1,textAlign:"center"}},{children:e}),e)}))}))]}))}))]}))})),Object(fe.c)("div",wp({css:{flex:1,display:"flex",flexDirection:"column"}},{children:[Object(fe.c)("div",wp({css:{display:"flex",height:"40px",padding:"0 0.5em"}},{children:[!g&&Object(fe.b)(Ge.a,wp({onClick:function(){y(!0)}},{children:Object(fe.b)(fd.a,{})})),Object(fe.b)("div",wp({css:{display:"flex",flexDirection:"column",justifyContent:"center"}},{children:Object(fe.c)(Nd.i,{children:["NAMC ",Object(fe.b)(Nd.i.Subtitle,{children:"Aquatic Invertebrates Database"})]})}))]})),Object(fe.c)("div",wp({css:{padding:"0 0.5em",flex:1,display:"flex",flexDirection:"column"}},{children:[Object(fe.c)("div",wp({css:{display:"flex",alignItems:"center",gap:"1em",padding:"0.5em 0"}},{children:[Object(fe.b)("div",wp({css:{flex:1}},{children:Object(fe.b)(Nd.b,{filters:a,joinLabel:"and"})})),Object(fe.b)("div",{children:I?Object(fe.b)("span",{children:"Fetching sites..."}):U?0===o.length?Object(fe.b)("span",{children:"No samples found"}):Object(fe.c)("span",{children:["Found samples in ",Object(fe.b)("strong",{children:Object(Nd.m)(o.length)})," ",Object(Nd.n)(o.length,"site")]}):Object(fe.c)("span",{children:["Showing all ",O.length," sites"]})}),W?Object(fe.c)(tt.a,wp({onClick:function(){m&&(m(),b(void 0))},variant:"outlined"},{children:["Cancel Download ",Object(fe.b)(Ot.a,{size:20,sx:{marginLeft:"1em"}})]})):Object(fe.b)(tt.a,wp({onClick:function(){return Ip(void 0,void 0,void 0,(function(){var e,n,a,r,i,o,s,l,c,u,d,p,m,f,h;return Sp(this,(function(g){switch(g.label){case 0:e=_.fromYear!==N||_.toYear!==P||void 0,n=[],a=!1,b((function(){return function(){a=!0}})),r=0,g.label=1;case 1:return null===r||a?[3,3]:[4,(y=t,function(e,t){return _d(void 0,void 0,void 0,(function(){return Fd(this,(function(n){switch(n.label){case 0:return[4,y.query(Ed,{filters:e,offset:t})];case 1:return[2,n.sent().csvDownload]}}))}))})({projectId:null===(u=_.project)||void 0===u?void 0:u.id,usStateId:null===(d=_.usState)||void 0===d?void 0:d.id,taxonomyId:null===(p=_.taxon)||void 0===p?void 0:p.id,typeId:null===(m=_.type)||void 0===m?void 0:m.id,methodId:null===(f=_.method)||void 0===f?void 0:f.id,siteId:null===(h=_.site)||void 0===h?void 0:h.id,fromYear:e&&_.fromYear,toYear:e&&_.toYear},r)];case 2:return i=g.sent(),o=i.records,s=i.nextOffset,n.push.apply(n,o),r=s,[3,1];case 3:return a?[2]:0===n.length?(v.info("No data exists for the filtered samples."),b(void 0),[2]):(l=n.reduce((function(e,t){return Object(A.uniq)(kp(kp([],e,!0),Object.keys(t),!0))}),[]),(c=Object(Nd.j)({wsName:"data",columns:l.map((function(e){return{key:e,header:e}})),rows:n}))?(Object(Nd.l)(c,"namc_data.csv"),b(void 0),[2]):[2])}var y}))}))},variant:"outlined",disabled:G||!U||0===o.length},{children:"Download CSV"}))]})),Object(fe.b)("div",wp({css:{height:"4px"}},{children:G&&Object(fe.b)(Nd.d,{css:{width:"100%"},delayMs:200})})),Object(fe.b)("div",wp({css:{flex:1,position:"relative"}},{children:Object(fe.b)(Nd.g,{controller:B,mapboxToken:e.mapboxToken})}))]}))]}))]}))},zp=n(9),Tp=n(293),Np=(n(447),n(448),n(449),["rows","columnDefs","onSelectedRowsChanged","onGridApisReady","context","gridOptions","rowIdProperty"]),Ap=function(e){var t=e.rows,n=e.columnDefs,a=e.onSelectedRowsChanged,r=e.onGridApisReady,i=e.context,o=e.gridOptions,l=e.rowIdProperty,c=void 0===l?"id":l,u=Object(gi.a)(e,Np),p=Object(s.useState)(),m=Object(d.a)(p,2),b=m[0],f=m[1];Object(s.useEffect)((function(){null!==b&&void 0!==b&&b.api&&(b.api.refreshCells(),b.api.refreshHeader())}),[i,b]);var h=Object(s.useMemo)((function(){return Object(A.merge)({suppressCellSelection:!0,defaultColDef:{sortable:!0,resizable:!0,suppressMovable:!0}},o)}),[o]);return Object(fe.b)("div",{className:"ag-theme-material",css:{width:"100%",height:"100%"},children:Object(fe.b)(Tp.AgGridReact,Object(ba.a)({rowData:t,immutableData:!0,gridOptions:h,columnDefs:n,onSelectionChanged:function(e){var t=e.api;a&&a(t.getSelectedRows())},animateRows:!0,containerStyle:{width:"100%",height:"100%"},getRowNodeId:function(e){return e[c]},context:i,onGridReady:function(e){var t=e.api,n=e.columnApi;f({api:t,columnApi:n}),r&&r({api:t,columnApi:n})}},u))})},Pp=["filterTooltip"],Mp=["valueLabels"],Lp={labelComparator:function(e,t){var n=e.label,a=t.label;return n==a?0:n>a?1:-1}},Rp=function(e){return Object(ba.a)({cellRenderer:"LinkRenderer",comparator:Lp.labelComparator},e)},_p=function(e){return e},Fp=function(e){return Object(ba.a)({valueFormatter:function(e){return e.value.join(", ")}},e)},Ep=function(e){var t=e.filterTooltip,n=Object(gi.a)(e,Pp);return Object(ba.a)({cellRenderer:"FilterableTextRenderer",cellRendererParams:{filterTooltip:t},comparator:Lp.labelComparator},n)},qp=function(e){return Object(ba.a)({valueFormatter:function(e){var t,n=e.value;return null!==(t=w(n))&&void 0!==t?t:""},width:120},e)},Bp=function(e){return Object(ba.a)({cellRenderer:"ProgressRenderer"},e)},Up=function(e){var t=e.valueLabels,n=Object(gi.a)(e,Mp);return Object(ba.a)({valueFormatter:function(e){return e.value?t[1]:t[0]}},n)},Gp=function(e){return Object(ba.a)({type:"numericColumn",valueFormatter:function(e){var t=e.value;return t&&j(t)}},e)},Wp=n(294),Vp=n.n(Wp),Hp=n(295),Jp=n.n(Hp),Yp=n(137),Qp=n.n(Yp),$p={LinkRenderer:function(e){var t=e.value,n=t.label,a=t.onClick,r=t.disabled;return Object(fe.b)("span",{onClick:r?A.noop:a,className:r?void 0:"link",children:n})},ProgressRenderer:function(e){var t=e.value,n="".concat(Math.floor(100*t),"%");return Object(fe.c)("div",{css:{height:"100%",width:"100%",position:"relative"},children:[Object(fe.b)("div",{css:{position:"absolute",background:"lightgrey",width:"100%",height:"50%",top:"25%"}}),Object(fe.b)("div",{css:{position:"absolute",background:"#42d64c",width:n,height:"50%",top:"25%"}}),Object(fe.b)("div",{css:{position:"absolute",width:"100%",textAlign:"center"},children:n})]})},CheckRenderer:function(e){var t=e.value;return Object(fe.b)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:t?Object(fe.b)(Vp.a,{}):Object(fe.b)(Jp.a,{})})},FilterableTextRenderer:function(e){var t=e.value,n=t.label,a=t.onFilter,r=t.disabled,i=e.filterTooltip;return Object(fe.c)("div",{children:[Object(fe.b)("div",{css:{position:"absolute",right:0},children:Object(fe.b)(Ge.a,{onClick:function(){a()},disabled:r,children:$e(Object(fe.b)(Qp.a,{}),i,r)})}),n]})},ActionableTextRenderer:function(e){var t=e.value,n=t.label,a=t.onAction,r=t.disabled,i=e.tooltip,o=e.Icon;return Object(fe.c)("div",{children:[Object(fe.b)("div",{css:{position:"absolute",right:0},children:Object(fe.b)(Ge.a,{onClick:function(){a()},disabled:r,children:$e(Object(fe.b)(o,{}),i,r)})}),n]})}},Zp=function(e){var t=e.children,n=e.className;return Object(fe.b)("div",{className:n,css:{fontSize:"0.8125rem",display:"flex",alignItems:"center",position:"relative"},children:t})},Kp=function(e){var t=e.className,n=e.descriptor,a=e.isLoading,r=e.total,i=e.visible;return Object(fe.c)(Zp,{className:t,children:[a&&Object(fe.b)(Tt,{css:{position:"absolute",width:"100%",bottom:5}}),r===i?"".concat(j(r)," ").concat(S(r,n)):"".concat(j(i)," of ").concat(j(r)," ").concat(S(r,n)," shown")]})},Xp=function(e){var t=e.children;return Object(fe.b)("div",{css:{fontWeight:500,marginLeft:"1em"},children:t})},em=[Rp({headerName:"Sample ID",field:"sampleId",width:120}),qp({field:"sampleDate"}),_p({headerName:"Sample Type",field:"type",width:120}),_p({headerName:"Sample Method",field:"method",width:140}),Rp({headerName:"Site Name",field:"site",width:160}),_p({headerName:"US State",field:"usState",width:120}),_p({headerName:"Visit ID",field:"visitId",width:100}),_p({field:"customerSiteCode",width:220}),_p({headerName:"Sort",field:"sortState",minWidth:120,flex:1}),_p({headerName:"Identification",field:"identificationState",minWidth:120,flex:1})],tm=[{header:"Sample ID",key:"id"},{header:"Sample Date",key:"sampleDate"},{header:"Sample Type",key:"type"},{header:"Sample Method",key:"method"},{header:"Site Name",key:"siteName"},{header:"US State",key:"usState"},{header:"Visit ID",key:"visitId"},{header:"Customer Site Code",key:"customerSiteCode"}],nm=["point"],am=sa((function(e){var t=e.point,n=t.latitude,a=t.longitude,r=Object(gi.a)(e,nm),i=Object(J.i)($u({latitude:n,longitude:a}));return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},r),{},{value:i&&i.abbreviation}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{sx:{width:"3em"}})}))})),rm=sa((function(e){var t,n,a=e.addSampleCount,r=void 0===a?0:a,i=e.children,o=e.onClose,s=e.site,l=Object(J.i)(fu),c=Object(J.i)(bu),u=s.id,d=s.name,p=s.usStateId,m=s.sampleCount,b=void 0===m?0:m,f=s.latitude,h=s.longitude,g=s.waterbodyName,y=s.waterbodyTypeId,v=s.waterbodyCode,x=s.description,O=s.isReference,j=s.createdDate,I=void 0===j?"":j,S=s.updatedDate,k=void 0===S?"":S,C=y&&((null===(t=c.find((function(e){return e.id===y})))||void 0===t?void 0:t.name)||""),D=u<0,z=!D&&"undefined"===typeof x,T=function(e){return D?"N/A":w(e)};return Object(fe.c)("div",{css:{padding:"0.5em"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",paddingLeft:"10px"},children:[Object(fe.b)("div",{css:{width:20,marginRight:"0.5em"},children:Object(fe.b)(Ln,{})}),Object(fe.b)("div",{css:{fontWeight:"bold",fontSize:"120%",flex:1,wordWrap:"break-word",overflow:"hidden"},children:d}),Object(fe.b)("div",{css:{marginLeft:"auto",height:40,width:40},children:o&&Object(fe.b)(Ge.a,{onClick:o,children:Object(fe.b)(Ve.a,{})})})]}),Object(fe.c)("div",{css:{marginTop:"1em",display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"\n                  auto\n                  auto\n                  1em\n                  auto\n                  auto\n                  auto\n                  1em\n                  auto\n                  1em\n                  auto\n                  auto\n                ",gap:"0.5em",gridTemplateAreas:'\n                  "usState id"\n                  "latitude longitude"\n                  ". ."\n                  "waterbodyName waterbodyType"\n                  "waterbodyCode isReference"\n                  "description   description"\n                  ". ."\n                  "sampleCount ."\n                  ". ."\n                  "createdDate updatedDate"\n                  ". ."\n                '},children:[p?Object(fe.b)(je,{gridArea:"usState",label:"State",value:null===(n=l.find((function(e){return e.id===p})))||void 0===n?void 0:n.abbreviation}):Object(fe.b)(am,{gridArea:"usState",label:"State",point:s}),Object(fe.b)(je,{gridArea:"id",label:"ID",value:D?"TBD":u}),Object(fe.b)(je,{gridArea:"latitude",label:"Latitude",value:f}),Object(fe.b)(je,{gridArea:"longitude",label:"Longitude",value:h}),Object(fe.b)(je,{gridArea:"sampleCount",label:"# Samples",value:z?Object(fe.b)(Pe.a,{sx:{width:"3em"}}):b+r}),Object(fe.b)(je,{gridArea:"waterbodyName",label:"Waterbody",value:z?Object(fe.b)(Pe.a,{sx:{width:"10em"}}):g}),Object(fe.b)(je,{gridArea:"waterbodyType",label:"Waterbody Type",value:z?Object(fe.b)(Pe.a,{sx:{width:"10em"}}):C}),Object(fe.b)(je,{gridArea:"waterbodyCode",label:"Waterbody Code",value:z?Object(fe.b)(Pe.a,{sx:{width:"10em"}}):v}),Object(fe.b)(je,{gridArea:"isReference",label:"Reference",value:z?Object(fe.b)(Pe.a,{sx:{width:"10em"}}):O}),Object(fe.b)(je,{gridArea:"description",label:"Description",value:z?Object(fe.b)(Pe.a,{sx:{width:"20em"}}):x}),Object(fe.b)(je,{gridArea:"createdDate",label:"Created",value:z?Object(fe.b)(Pe.a,{sx:{width:"7em"}}):T(I)}),Object(fe.b)(je,{gridArea:"updatedDate",label:"Updated",value:z?Object(fe.b)(Pe.a,{sx:{width:"7em"}}):T(k)})]}),i]})}),(function(){return null})),im=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"30em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"30em",variant:"rectangular"})]})},om=sa((function(e){var t=e.allSitesNormalized,n=e.isOpen,a=e.onCancel,r=e.onSave,i=e.site,o=Je(),s=Hc(Object(J.i)(bu)),l=C(function(e){var t=e.site||{},n=t.name,a=void 0===n?"":n,r=t.latitude,i=void 0===r?null:r,o=t.longitude,s=void 0===o?null:o,l=t.waterbodyName,c=void 0===l?"":l,u=t.waterbodyTypeId,d=void 0===u?null:u,p=t.waterbodyCode,m=void 0===p?"":p,b=t.description,f=void 0===b?"":b,h=t.isReference;return{editMode:"started",isDirty:!1,values:{name:a,latitude:i,longitude:s,waterbodyName:c,waterbodyTypeId:d,waterbodyCode:m,description:f,isReference:void 0!==h&&h}}}({site:i}),[i]),c=Object(d.a)(l,3),u=c[0],p=(c[1],c[2]),m=u.values,b=m.name,f=m.latitude,h=m.longitude,g=m.waterbodyName,y=m.waterbodyTypeId,v=m.waterbodyCode,x=m.description,O=m.isReference,j=u.isDirty,w=u.editMode,I=function(){var e=b.trim().toLowerCase(),n={name:e!==(null===i||void 0===i?void 0:i.name.toLowerCase())&&(!e||!!t.find((function(t){return t.name===e}))),latitude:!f,longitude:!h};if(Object.values(n).some((function(e){return e})))return n}(),S=function(e){return function(t){return function(e,t){p((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))}(e,t)}},k=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p((function(e){e.editMode="stopping"})),e.next=4,r({id:null!==(t=null===i||void 0===i?void 0:i.id)&&void 0!==t?t:0,name:b.trim(),latitude:null!==f&&void 0!==f?f:0,longitude:null!==h&&void 0!==h?h:0,waterbodyName:g.trim(),waterbodyTypeId:y,waterbodyCode:v.trim(),description:x.trim(),isReference:O});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o.error("Failed to save: ".concat(e.t0));case 9:p((function(e){e.editMode="started"}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),D="stopping"===w,z=function(){D||a()};return Object(fe.c)(nt.a,{open:n||D,onClose:z,fullWidth:!0,maxWidth:"sm",children:[Object(fe.b)(rt.a,{children:Object(fe.c)("div",{css:{marginTop:"1em",display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"\n              auto\n              1em\n              auto\n              auto\n              1em\n              auto\n              auto\n              auto\n              ",gap:"0.5em",gridTemplateAreas:'\n              "name          name"\n              ".             ."\n              "usState       id"\n              "latitude      longitude"\n              ".             ."\n              "waterbodyName waterbodyType"\n              "waterbodyCode isReference"\n              "description   description"\n            '},children:[Object(fe.c)("div",{css:{gridArea:"name",display:"flex",alignItems:"center"},children:[Object(fe.b)("div",{css:{width:20,marginRight:"0.5em"},children:Object(fe.b)(Ln,{})}),Object(fe.b)(Ht,{label:"Site Name",InputProps:{sx:{fontWeight:"bold",fontSize:"120%"}},value:b,onChange:S("name"),error:null===I||void 0===I?void 0:I.name,fullWidth:!0,maxLength:50})]}),Object(fe.b)(je,{gridArea:"id",label:"ID",value:i&&i.id>0?i.id:"TBD"}),Object(fe.b)(kt,{gridArea:"latitude",label:"Latitude",value:f,onChange:S("latitude"),step:1e-4,error:null===I||void 0===I?void 0:I.latitude,min:-90,max:90}),Object(fe.b)(kt,{gridArea:"longitude",label:"Longitude",value:h,onChange:S("longitude"),step:1e-4,error:null===I||void 0===I?void 0:I.longitude,min:-180,max:180}),Object(fe.b)(Ht,{gridArea:"waterbodyName",label:"Waterbody",value:g,onChange:S("waterbodyName"),maxLength:255}),Object(fe.b)(Ee,{gridArea:"waterbodyType",label:"Waterbody Type",value:y,onChange:S("waterbodyTypeId"),options:s,isClearable:!0}),Object(fe.b)(Ht,{gridArea:"waterbodyCode",label:"Waterbody Code",value:v,onChange:S("waterbodyCode"),maxLength:100}),Object(fe.b)(ft,{gridArea:"isReference",label:"Reference",value:O,onChange:S("isReference")}),Object(fe.b)(Ht,{gridArea:"description",label:"Description",value:x,onChange:S("description"),multiline:!0,minRows:2})]})}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:z,disabled:D,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:k,disabled:!j||!!I||D,children:"Save"})]})]})}),(function(){return null})),sm=0,lm=Object(J.e)({key:"SitesListing/selectUsStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(fu),e.abrupt("return",[{value:sm,label:"Any"}].concat(Object(ci.a)(a.map((function(e){return{value:e.id,label:e.abbreviation}})))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),cm=Object(J.b)({key:"SitesListing/sitesListingSourceAtom",default:null}),um=Object(J.b)({key:"SitesListing/usStateFilterIdAtom",default:sm}),dm=Object(J.b)({key:"SitesListing/textFilterAtom",default:""}),pm=function(){var e=Object(J.k)(cm),t=Object(J.k)(um),n=Object(J.k)(dm);return Object(s.useCallback)((function(a){e(a),t(sm),n("")}),[])},mm=sa((function(e){var t=e.siteId,n=t?Number(t):null,a="new"===t,r=bv(),i=Je(),o=Object(J.i)(ud),l=ae(),c=Vc(),u=Object(J.i)(lm),p=Object(J.h)(um),m=Object(d.a)(p,2),b=m[0],f=m[1],h=Zt(Object(J.h)(dm)),g=Object(d.a)(h,4),y=g[0],v=g[1],x=g[2],O=g[3],j=Object(s.useState)(!1),w=Object(d.a)(j,2),I=w[0],S=w[1],C=Object(s.useState)(null),D=Object(d.a)(C,2),z=D[0],T=D[1],N=Object(s.useState)(!1),P=Object(d.a)(N,2),M=P[0],L=P[1],R=Object(s.useState)(!1),_=Object(d.a)(R,2),F=_[0],E=_[1],q=Object(s.useState)({latitude:0,longitude:0}),B=Object(d.a)(q,2),U=B[0],G=B[1],W=Object(s.useState)(!1),V=Object(d.a)(W,2),H=V[0],Y=V[1],Q=Object(s.useState)(!1),$=Object(d.a)(Q,2),Z=$[0],K=$[1],X=F||Z,ee=Object(J.h)(cm),te=Object(d.a)(ee,2),ne=te[0],ie=te[1],oe=Object(J.i)(Pc),se=Object(J.h)(Mc),le=Object(d.a)(se,2),ce=le[0],ue=le[1],de=Object(J.h)(Lc),pe=Object(d.a)(de,2),me=pe[0],be=pe[1],he=Object(s.useState)([]),ge=Object(d.a)(he,2),ye=ge[0],ve=ge[1],xe=Object(s.useState)(void 0),Oe=Object(d.a)(xe,2),je=Oe[0],we=Oe[1],Ie=Object(s.useMemo)((function(){return ce.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{name:e.name.toLowerCase()})}))}),[ce]),Se=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Ec(n)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),ke=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(qc(n)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),Ce=_c(),De=Fc();Object(s.useEffect)((function(){switch(null===ne||void 0===ne?void 0:ne.type){case"box":Se(ne.id).then(ve);break;case"project":ke(ne.id).then(ve);break;default:Ce()}}),[ne]),Object(s.useEffect)((function(){ne||ve(ce)}),[ne,ce]),Object(s.useEffect)((function(){De(n)}),[n]);var ze=oe===si.fetching,Te=Object(s.useMemo)((function(){if(n)return me.find((function(e){return e.id===n}))||ye.find((function(e){return e.id===n}))}),[ye,me,n]),Ne=Object(s.useMemo)((function(){var e=[];if(ne){var t="sitesListingSource",n=A.identity,a=X?void 0:function(){return ie(null)};switch(ne.type){case"box":e.push({id:t,label:"Box ".concat(ne.id),filterFn:n,onDelete:a});break;case"project":e.push({id:t,label:"Project ".concat(ne.name),filterFn:n,onDelete:a})}}if(b!==sm){var r,i,o=null!==(r=null===(i=u.find((function(e){return e.value===b})))||void 0===i?void 0:i.label)&&void 0!==r?r:"?";e.push({id:"state",label:"State: ".concat(o),filterFn:function(e){return e.usStateId===b},onDelete:X?void 0:function(){f(sm)}})}return x&&e.push({id:"text",label:'Name contains "'.concat(x,'"'),filterFn:function(e){return e.name.toLowerCase().includes(x.toLowerCase())},onDelete:X?void 0:O}),e}),[ne,b,x,X]),Ae=Object(s.useMemo)((function(){return Ne.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),ye)}),[ye,Ne]),Pe=ln({sites:Ae,onSiteClick:function(e){X?i.info("Cannot select another site while editing a site."):r.siteDetail({siteId:e.id},!0)}});Object(s.useEffect)((function(){we(Te)}),[Te]),Object(s.useEffect)((function(){if(Te){var e=Pe.viewport,t=Pe.centerSite;window.setTimeout((function(){t(Te,{zoom:Math.max(9,e.zoom||0)})}),je?0:200)}}),[n,!!Te]),Object(s.useEffect)((function(){Te||Pe.isViewportReady&&Pe.smartFitAll()}),[Ne]);var Me=Object(s.useState)(!1),Le=Object(d.a)(Me,2),Re=Le[0],_e=Le[1];Object(s.useEffect)((function(){ne&&!Re&&Pe.isViewportReady&&(Pe.smartFitAll(),_e(!0))}),[ne,Pe.isViewportReady]),Object(s.useEffect)((function(){var e,t;a&&(T({id:-1,name:"",latitude:null!==(e=Pe.viewport.latitude)&&void 0!==e?e:0,longitude:null!==(t=Pe.viewport.longitude)&&void 0!==t?t:0,waterbodyCode:"",waterbodyTypeId:null,waterbodyName:"",description:"",isReference:!1}),S(!0))}),[a]);var Fe=je&&!!je.createdDate,qe=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=2;break}throw new Error("No site selected.");case 2:return e.next=4,Be(Object(ba.a)(Object(ba.a)({},je),U));case 4:E(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,o,s,u,d,p,m;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),e.prev=1,p={name:t.name.trim(),latitude:t.latitude,longitude:t.longitude,waterbodyName:(null===(n=t.waterbodyName)||void 0===n?void 0:n.trim())||null,waterbodyTypeId:null!==(o=t.waterbodyTypeId)&&void 0!==o?o:null,waterbodyCode:(null===(s=t.waterbodyCode)||void 0===s?void 0:s.trim())||null,description:(null===(u=t.description)||void 0===u?void 0:u.trim())||null,isReference:null!==(d=t.isReference)&&void 0!==d&&d},!a){e.next=13;break}return e.next=6,qi(l,c)(p);case 6:m=e.sent,ue(Object(k.a)((function(e){e.push({id:m,name:p.name,latitude:p.latitude,longitude:p.longitude})}))),r.siteDetail({siteId:m},!0),i.info("Created site ".concat(p.name)),S(!1),e.next=19;break;case 13:return e.next=15,fc(l,c)(Object(ba.a)(Object(ba.a)({},p),{},{id:t.id}));case 15:ue(Object(k.a)((function(e){var n=e.find((function(e){return e.id===t.id}));if(!n)throw new Error("Site not found.");Object.assign(n,t),n.usStateId=void 0}))),be(Object(k.a)((function(e){var n=e.find((function(e){return e.id===t.id}));if(!n)throw new Error("Site not found.");Object.assign(n,t),n.usStateId=void 0}))),i.info("Saved site ".concat(p.name)),S(!1);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),i.error("Failed to save site: ".concat(e.t0));case 24:L(!1);case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=2;break}throw new Error("No site.");case 2:return K(!0),e.prev=3,e.next=6,po(l,c)(je);case 6:ue(Object(k.a)((function(e){var t=e.findIndex((function(e){return e.id===je.id}));-1!==t&&e.splice(t,1)}))),be(Object(k.a)((function(e){var t=e.findIndex((function(e){return e.id===je.id}));-1!==t&&e.splice(t,1)}))),i.info("Deleted site ".concat(je.name)),r.sites(void 0,!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),i.error("Failed to delete site: ".concat(e.t0));case 15:K(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)(Ee,{value:b,onChange:function(e){return f(Number(e))},options:u,label:"State",css:{width:"10em"},disabled:X}),Object(fe.b)(Ht,{value:y,onChange:function(e){return v(e)},label:"Site Name",css:{width:"20em"},disabled:X}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:o.hasPermission(re.NAMCResource.sites,re.GrantAction.createAny)&&Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){return r.siteCreate()},disabled:X,children:"Create New Site"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",margin:"0.75em 0",display:"flex"},children:[Object(fe.b)(xt,{filters:Ne,joinLabel:"and"}),Object(fe.b)(Kp,{total:ye.length,visible:Ae.length,descriptor:"site",isLoading:ze})]}),Object(fe.c)("div",{css:{flex:1,display:"flex"},children:[Object(fe.c)("div",{css:{flex:1,position:"relative"},children:[ze&&Object(fe.b)(Tt,{delayMs:500,css:{position:"absolute",width:"100%",height:"5px",opacity:.75,zIndex:100}}),Object(fe.b)(zn,{controller:Pe,mapboxToken:ya,children:Te&&Object(fe.b)(Rn,{site:F?Object(ba.a)(Object(ba.a)({},Te),U):Te,onDragEnd:F?function(e){G(e)}:void 0})})]}),Object(fe.b)(Nn,{isOpen:!!je,transitionMs:200,children:je&&Object(fe.b)(rm,{site:je,onClose:X?void 0:function(){r.sites(void 0,!0)},children:Object(fe.c)("div",{css:{marginLeft:"0.8rem",display:"flex",gap:"0.5rem"},children:[!X&&o.hasPermission(re.NAMCResource.sites,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:!Fe,items:[{key:"edit",label:"Edit Site",onClick:function(){T(je),S(!0)}},{key:"drag",label:"Drag Site",onClick:function(){if(!je)throw new Error("No site selected.");E(!0),G(je)}},Et,{key:"delete",label:"Delete Site",onClick:function(){Y(!0)},disabled:!o.hasPermission(re.NAMCResource.sites,re.GrantAction.deleteAny)||"undefined"===typeof je.sampleCount||je.sampleCount>0}]}),F&&Object(fe.c)(fe.a,{children:[Object(fe.b)(tt.a,{onClick:function(){E(!1)},variant:"outlined",disabled:M,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:qe,variant:"contained",disabled:M,children:"Save"})]})]})})})]}),Object(fe.b)(om,{isOpen:I,onCancel:function(){a&&r.sites(void 0,!0),S(!1)},onSave:Be,site:z,allSitesNormalized:Ie}),Object(fe.c)(st,{isOpen:H,onClose:function(){return Y(!1)},onConfirm:Ue,title:"Confirm Delete Site",children:["Are you sure you want to delete site ",null===je||void 0===je?void 0:je.name,"?"]}),F&&Object(fe.b)(gv,{message:"Site location has not been saved. Are you sure you want to leave?"})]})}),(function(){return Object(fe.b)(im,{})})),bm=function(e){var t=e.samples,n=e.sitesListingSource,a=bv(),r=pm(),i=Object(s.useMemo)((function(){return t.map((function(e){var t=e.id,i={label:t,onClick:function(){return a.sampleDetail({sampleId:t})}},o=e.siteId,s=e.siteName,l=e.sortEndDate,c=e.sortStartDate,u=e.sorterName,d=l?"".concat(u," on ").concat(w(l)):c?"Started by ".concat(u," on ").concat(w(c)):"Not sorted",p=e.identifierName,m=e.identificationEndDate,b=e.identificationStartDate,f=m?"".concat(null!==p&&void 0!==p?p:"Unknown"," on ").concat(w(m)):b?"Started by ".concat(p," on ").concat(w(b)):"Not identified",h={label:s,onClick:function(){r(n),a.siteDetail({siteId:o})}};return Object(ba.a)(Object(ba.a)({},e),{},{sampleId:i,site:h,sortState:d,identificationState:f})}))}),[t]);return Object(ue.jsx)(Ap,{columnDefs:em,rows:i,frameworkComponents:$p})},fm=sa((function(e){var t=e.boxId,n=Object(J.i)(Cu(t));return Object(ue.jsx)(bm,{samples:n,sitesListingSource:{type:"box",id:t}})}),(function(){return Object(ue.jsx)(Pe.a,{height:"3em",variant:"rectangular"})})),hm=["fieldSplit","labSplit","customerSiteCode","sampleLatitude","sampleLongitude","siteName","siteLatitude","siteLongitude"],gm=[{header:"Sample ID",key:"sampleId"},{header:"State",key:"usState"},{header:"Visit ID",key:"visitId"},{header:"Site Code",key:"siteIdentifier"},{header:"Sample Date",key:"sampleDate"},{header:"Latitude",key:"latitude"},{header:"Longitude",key:"longitude"},{header:"Waterbody",key:"waterbodyName"},{header:"Sample Type",key:"sampleType"},{header:"Sampler Type",key:"sampleMethod"},{header:"Habitat",key:"habitatName"},{header:"Area",key:"area"},{header:"Field Split",key:"fieldSplit"},{header:"Lab Split",key:"labSplit"},{header:"Jar Count",key:"jarCount"},{header:"Qualitative",key:"qualitative"}],ym=[{header:"Sample ID",key:"sampleId"},{header:"Class",key:"class"},{header:"Order",key:"order"},{header:"Family",key:"family"},{header:"Genus",key:"genus"},{header:"Species",key:"species"},{header:"Scientific Name",key:"scientificName"},{header:"Split Count",key:"splitCount"},{header:"Big Rare Count",key:"bigRareCount"}],vm=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s,l,c,u,p,m,b,f,g,y,v,x,O,j,w,I,S,k,C,D,T,N;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.boxId,a=t.api,r=t.filename,e.next=3,Go(a)(n);case 3:return i=e.sent,o=i.boxInfo,s=o.submittedBy,l=o.submitterEmail,c=o.customer,u=c.organizationName,p=c.address1,m=c.address2,b=c.city,f=c.usState,g=c.zipCode,y=c.phone,v=i.samples,x=i.sampleTaxa,O=i.reportMetrics,j=i.template,w=new z.a.Workbook,e.next=22,new Promise((function(e){var t=new FileReader;t.onload=Object(ui.a)(pi.a.mark((function n(){var a;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=t.result)instanceof ArrayBuffer){n.next=3;break}throw new Error("not an arraybuffer");case 3:return n.next=5,w.xlsx.load(a);case 5:e();case 6:case"end":return n.stop()}}),n)}))),t.readAsArrayBuffer(j)}));case 22:return I=w.worksheets[0],S=function(e){var t=w.definedNames.model.find((function(t){return t.name===e}));if(!t)throw new Error('Named range "'.concat(e,'" not found in workbook.'));return t.ranges[0].split("!")[1]},I.getCell(S("ReportDate")).value=h()().format("YYYY-MM-DD"),I.getCell(S("SubmitterName")).value=s,I.getCell(S("CustomerName")).value=u,I.getCell(S("Address1")).value=p,I.getCell(S("Address2")).value=m,I.getCell(S("CityStateZip")).value="".concat(b,", ").concat(f,"  ").concat(g),I.getCell(S("Telephone")).value=y,I.getCell(S("Email")).value=l,k=v.map((function(e){var t=e.fieldSplit,n=e.labSplit,a=e.customerSiteCode,r=e.sampleLatitude,i=e.sampleLongitude,o=e.siteName,s=e.siteLatitude,l=e.siteLongitude,c=Object(gi.a)(e,hm),u=r&&i?[r,i]:[s,l],p=Object(d.a)(u,2),m=p[0],b=p[1],f=a||o;return Object(ba.a)({fieldSplit:100*t,labSplit:100*n,siteIdentifier:f,latitude:m,longitude:b},c)})),E(w,{wsName:"Samples",columns:gm,rows:k}),E(w,{wsName:"Taxa",columns:ym,rows:x}),C=v.map((function(e){return e.sampleId})),D=Object(A.uniq)(O.map((function(e){return e.metricName}))),T=[{header:"Sample ID",key:"sampleId"}].concat(Object(ci.a)(Object(A.sortBy)(O,(function(e){return e.metricGroupId||0})).map((function(e){var t=e.metricName;return{header:t,key:t}})))),N=C.map((function(e){var t={sampleId:e};return D.forEach((function(n){var a,r=null===(a=O.find((function(t){return t.sampleId===e&&t.metricName===n})))||void 0===a?void 0:a.metricValue;if("undefined"!==typeof r){var i=Number(r);t[n]=isNaN(i)?r:i}})),t})),E(w,{wsName:"Metrics",columns:T,rows:N}),R(w,r),e.abrupt("return",!0);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xm=["boxId","value"],Om=sa((function(e){var t=e.boxId,n=e.value,a=Object(gi.a)(e,xm),r=Object(J.i)(Cu(t)),i=r.filter((function(e){return e.sortEndDate})).length,o=r.length;return Object(ue.jsx)(At,Object(ba.a)(Object(ba.a)({},a),{},{label:"Sorting",value:n,doneCount:i,totalCount:o}))}),(function(e){return Object(ue.jsx)(je,Object(ba.a)(Object(ba.a)({},e),{},{label:"Sorting",value:Object(ue.jsx)(Pe.a,{}),minWidth:120}))})),jm=["boxId","value"],wm=sa((function(e){var t=e.boxId,n=e.value,a=Object(gi.a)(e,jm),r=Object(J.i)(Cu(t)),i=r.filter((function(e){return e.identificationEndDate})).length,o=r.length;return Object(ue.jsx)(At,Object(ba.a)(Object(ba.a)({},a),{},{label:"Identification",value:n,doneCount:i,totalCount:o}))}),(function(e){return Object(ue.jsx)(je,Object(ba.a)(Object(ba.a)({},e),{},{label:"Identification",value:Object(ue.jsx)(Pe.a,{}),minWidth:120}))})),Im=sa((function(e){var t=Object(J.i)(Hu).map((function(e){return{value:e.id,label:e.abbreviation}}));return Object(fe.b)(Se,Object(ba.a)(Object(ba.a)({},e),{},{options:t}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),Sm=n(296),km=n.n(Sm),Cm=300,Dm=300,zm=sa((function(e){var t=e.sitesSelector,n=e.sitesListingSource,a=e.mapboxToken,r=Object(J.i)(t),i=bv(),o=pm(),l=Object(s.useMemo)((function(){return 0===r.length?Object(ba.a)(Object(ba.a)({},rn),{},{zoom:.5}):function(e,t){var n=t.height,a=t.width,r=t.padding,i=void 0===r?50:r,o=t.maxZoom,s=void 0===o?on:o;if(0!==e.length){var l=new Kt.f({width:a,height:n}),c=e.map((function(e){return[e.longitude,e.latitude]})),u=new tn.LngLatBounds([c[0],c[0]]);c.forEach((function(e){return u.extend(e)}));var d=u.getSouthWest(),p=u.getNorthEast(),m=l.fitBounds([[d.lng,d.lat],[p.lng,p.lat]],{padding:i,maxZoom:s});return{longitude:m.longitude,latitude:m.latitude,zoom:m.zoom}}}(r,{height:Cm,width:Dm,maxZoom:9})}),[]),c=ln({sites:r,initialViewport:l,onSiteClick:function(e){o(n),window.setTimeout((function(){return i.siteDetail({siteId:e.id})}))}});return Object(s.useEffect)((function(){0!==r.length&&c.smartFitAll()}),[r]),Object(fe.c)("div",{css:{height:Cm,width:Dm,position:"relative"},children:[Object(fe.b)("div",{css:{position:"absolute",left:0,right:10,zIndex:100},children:Object(fe.b)(Ge.a,{title:"Expand Sites Map",onClick:function(){o(n),window.setTimeout((function(){1===r.length?i.siteDetail({siteId:r[0].id}):i.sites()}))},children:Object(fe.b)(km.a,{})})}),Object(fe.b)(zn,{controller:c,minimal:!0,mapboxToken:a})]})}),(function(){return Object(fe.b)("div",{css:{height:Cm,width:Dm},children:Object(fe.b)(Pe.a,{width:Dm,height:Cm,variant:"rectangular"})})})),Tm=function(e){var t=e.boxId,n=Ec(t);return Object(fe.b)(zm,{sitesSelector:n,sitesListingSource:{type:"box",id:t},mapboxToken:ya})},Nm=n(124),Am=n(191),Pm=n.n(Am),Mm=n(297),Lm=n.n(Mm),Rm=n(569),_m=n(549),Fm=["thisProjectId"],Em=Object(J.e)({key:"SelectSamples/selectBoxOptions",get:function(e){var t=(0,e.get)(Eu);return Object(A.sortBy)(t,(function(e){return e.id})).reverse().map((function(e){var t=e.id,n=e.alias,a=e.sampleCount,r=e.boxState;return{id:t,optionLabel:"Box ".concat(t).concat(n?": ".concat(n):""," (").concat(r,", ").concat(a," samples)"),chipLabel:"from box ".concat(t),disabled:0===a||"Pending"===r}}))}}),qm=Object(J.e)({key:"SelectSamples/selectUsStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(fu),e.abrupt("return",a.map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"in ".concat(n)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Bm=Object(J.e)({key:"SelectSamples/selectOrganizationOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(Wu),e.abrupt("return",Object(A.sortBy)(a,(function(e){return e.name})).map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"for ".concat(n)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Um=Object(J.e)({key:"SelectSamples/selectProjectOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(Ju),e.abrupt("return",Object(A.sortBy)(a,(function(e){return e.name})).map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:n,chipLabel:"in project ".concat(n)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Gm=Object(J.e)({key:"SelectSamples/selectTypeOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(lu),e.abrupt("return",a.map((function(e){var t=e.name;return{id:t,optionLabel:t,chipLabel:"type is ".concat(t)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Wm=Object(J.e)({key:"SelectSamples/selectMethodOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(su),e.abrupt("return",a.map((function(e){var t=e.name;return{id:t,optionLabel:t,chipLabel:"method is ".concat(t)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Vm=sa((function(e){var t=Object(J.i)(Em);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},e),{},{options:t,label:"Box"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Box"})})),Hm=sa((function(e){var t=Object(J.i)(qm);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},e),{},{options:t,label:"US State"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"US State"})})),Jm=sa((function(e){var t=Object(J.i)(Bm);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},e),{},{options:t,label:"Customer"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Customer"})})),Ym=sa((function(e){var t=e.thisProjectId,n=Object(gi.a)(e,Fm),a=Object(J.i)(Um),r=Object(s.useMemo)((function(){return a.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{disabled:e.id===t})}))}),[a]);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},n),{},{options:r,label:"Project"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Project"})})),Qm=sa((function(e){var t=e.value,n=e.onChange,a=e.gridArea,r=Object(J.i)(sd);return Object(fe.b)(aa,{label:"Taxonomy",options:r,value:t&&t.id,onChange:function(e){var t;n(null===e?null:{id:e,optionLabel:"",chipLabel:"contains ".concat(null===(t=r.find((function(t){return t.id===e})))||void 0===t?void 0:t.name)})},gridArea:a})}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{gridArea:t,label:"Taxonomy",value:Object(fe.b)(Pe.a,{})})})),$m=function(e){var t=e.value,n=e.onChange,a=e.gridArea,r=Object(s.useRef)(),i=Object(s.useState)(""),o=Object(d.a)(i,2),l=o[0],c=o[1],u=Object(s.useState)(!1),p=Object(d.a)(u,2),m=p[0],b=p[1],f=function(){n(l.split(/[,\s]+/).filter(A.identity).map((function(e){return Number(e)})))};Object(s.useEffect)((function(){r.current&&clearTimeout(r.current),r.current=setTimeout((function(){m&&f()}),1e3)}),[l,m]);return Object(s.useEffect)((function(){m||c(t.join(", "))}),[t]),Object(fe.b)(Ht,{gridArea:a,label:"Sample IDs",value:l,onChange:function(e){c(e.replace(/[^0-9,\s]/g,""))},onFocus:function(){b(!0)},onBlur:function(){b(!1),f()},multiline:!0,minRows:2,maxRows:2})},Zm=sa((function(e){var t=Object(J.i)(Gm);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},e),{},{options:t,label:"Sample Type"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Sample Type"})})),Km=sa((function(e){var t=Object(J.i)(Wm);return Object(fe.b)(gt,Object(ba.a)(Object(ba.a)({},e),{},{options:t,label:"Sample Method"}))}),(function(e){var t=e.gridArea;return Object(fe.b)(je,{css:{gridArea:t},value:Object(fe.b)(Pe.a,{}),label:"Sample Method"})})),Xm=function(e){var t=e.value,n=e.onChange,a=e.gridArea,r=Object(J.i)(Mc),i=Object(J.i)(Pc),o=_c(),l=Object(s.useState)(""),c=Object(d.a)(l,2),u=c[0],p=c[1],m=Object(s.useState)([]),b=Object(d.a)(m,2),f=b[0],h=b[1],g=Object(s.useCallback)((function(e){return function(t,n){return n.inputValue.length<3&&e?[e]:t.filter((function(e){return e.optionLabel.toLowerCase().includes(n.inputValue.toLowerCase())})).slice(0,100)}}),[]);if(Object(s.useEffect)((function(){switch(i){case si.unfetched:o();break;case si.fetched:h(r.map((function(e){var t=e.id,n=e.name;return{id:t,optionLabel:"".concat(n," [").concat(t,"]"),chipLabel:"from site ".concat(n)}})))}}),[i]),0===f.length)return Object(fe.b)(je,{css:{gridArea:a},label:"Site",value:Object(fe.b)(Pe.a,{})});var y=u.length>=3;return Object(fe.b)(ge.a,{inputValue:u,onInputChange:function(e,t){p(t)},options:y||t?f:[],filterOptions:g(t),noOptionsText:y?"No sites found":"...",getOptionLabel:function(e){return e.optionLabel},getOptionDisabled:function(e){return!!e.disabled},renderInput:function(e){return Object(fe.b)(he.a,Object(ba.a)(Object(ba.a)({},e),{},{label:"Site"}))},onChange:function(e,t){n(t)},size:"small",value:t,css:{gridArea:a}})},eb=function(e){var t=e.gridArea,n=e.value,a=e.onChange,r=Object(s.useState)(n),i=Object(d.a)(r,2),o=i[0],l=i[1],c=q(o,1e3),u=Object(d.a)(c,2),p=u[0],m=u[1];return Object(s.useEffect)((function(){a(p)}),[p]),Object(s.useEffect)((function(){n!==p&&(l(n),m(n))}),[n]),Object(fe.b)(Ht,{gridArea:t,label:"GeoJSON Polygon",value:o,onChange:l,multiline:!0,minRows:2,maxRows:2})},tb=function(){return!0},nb=function(){return!1},ab=Object(J.b)({key:"",default:{}}),rb=function(e){var t=e.boxId,n=e.initialMode,a=e.onOperatingChange,r=e.projectId,i=e.projectName,o=e.samples,l=e.onNewBoxSamplesChange,c=ae(),u=Vc(),p=Je(),m=C({box:null,taxon:null,organization:null,project:null,usState:null,site:null,sampleIds:[],fromDate:null,toDate:null,type:null,method:null,geoJson:"",fromArea:null,toArea:null},[]),b=Object(d.a)(m,3),f=b[0],h=(b[1],b[2]),g=function(e){return function(t){h((function(n){Object.assign(n,Object(zp.a)({},e,t))}))}},y=function(e){h((function(t){Object.assign(t,Object(zp.a)({},e,{box:null,taxon:null,organization:null,project:null,usState:null,site:null,sampleIds:[],fromDate:null,toDate:null,type:null,method:null,geoJson:"",fromArea:null,toArea:null}[e]))}))},v=function(){var e=!!(f.fromDate&&f.toDate&&f.fromDate>f.toDate),t=!!(f.fromArea&&f.toArea&&f.fromArea>f.toArea),n={fromDate:e,toDate:e,fromArea:t,toArea:t};if(Object.values(n).some((function(e){return e})))return n}(),x=Object(s.useState)(o),O=Object(d.a)(x,2),j=O[0],w=O[1],I=Object(s.useState)([]),D=Object(d.a)(I,2),z=D[0],T=D[1],N=Object(s.useState)([]),P=Object(d.a)(N,2),M=P[0],L=P[1],R=Object(s.useState)(null),_=Object(d.a)(R,2),F=_[0],E=_[1],q=Object(s.useState)([]),B=Object(d.a)(q,2),U=B[0],W=B[1],V=Object(s.useState)(!1),H=Object(d.a)(V,2),Y=H[0],Q=H[1],$=Object(s.useState)(n),Z=Object(d.a)($,2),K=Z[0],X=Z[1],ee="split"===K,te="add"===K,ne="remove"===K,re=te||ne;Object(s.useEffect)((function(){a&&a(Y)}),[Y]);var ie=Object(J.h)(ab),oe=Object(d.a)(ie,2),se=oe[0],le=oe[1],ce=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Cu(n)).catch((function(e){return p.error("Failed to retrieve box samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),ue=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Lu(n)).catch((function(e){return p.error("Failed to retrieve project samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),de=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Au(n)).catch((function(e){return p.error("Failed to retrieve US State samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),pe=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Tu(n)).catch((function(e){return p.error("Failed to retrieve site samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),me=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Nu(n)).catch((function(e){return p.error("Failed to retrieve taxon samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),be=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(Du(n)).catch((function(e){return p.error("Failed to retrieve organization samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),he=Object(J.g)((function(e){var t=e.snapshot;return function(){var e=Object(ui.a)(pi.a.mark((function e(n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getPromise(zu(n)).catch((function(e){return p.error("Failed to retrieve polygon samples: ".concat(e)),[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));Object(s.useEffect)((function(){le(Object(k.a)((function(e){o.forEach((function(t){e[t.id]=t}))})))}),[o]);var ge=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&0!==z.length){e.next=2;break}return e.abrupt("return");case 2:t=z.map((function(e){return e.id})),e.prev=3,Q(!0),n=pi.a.mark((function e(){var n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.splice(0,500),e.next=3,hi(c,u)({projectId:r,sampleIds:n});case 3:w((function(e){return[].concat(Object(ci.a)(e),Object(ci.a)(z.filter((function(e){var t=e.id;return n.includes(t)}))))}));case 4:case"end":return e.stop()}}),e)}));case 6:if(!(t.length>0)){e.next=10;break}return e.delegateYield(n(),"t0",8);case 8:e.next=6;break;case 10:p.info("Added ".concat(z.length," ").concat(S(z.length,"sample")," to project")),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(3),p.error("Failed to add samples to project: ".concat(e.t1));case 16:return e.prev=16,Q(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&0!==z.length){e.next=2;break}return e.abrupt("return");case 2:t=z.map((function(e){return e.id})),e.prev=3,Q(!0),n=pi.a.mark((function e(){var n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.splice(0,500),e.next=3,Nl(c,u)({projectId:r,sampleIds:n});case 3:w((function(e){return e.filter((function(e){var t=e.id;return!n.includes(t)}))}));case 4:case"end":return e.stop()}}),e)}));case 6:if(!(t.length>0)){e.next=10;break}return e.delegateYield(n(),"t0",8);case 8:e.next=6;break;case 10:p.info("Removed ".concat(z.length," ").concat(S(z.length,"sample")," from project")),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(3),p.error("Failed to remove samples from project: ".concat(e.t1));case 16:return e.prev=16,Q(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(ui.a)(pi.a.mark((function e(){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==z.length&&l){e.next=2;break}return e.abrupt("return");case 2:n=z.map((function(e){return e.id})),w((function(e){return e.filter((function(e){var t=e.id;return!n.includes(t)}))})),a=[].concat(Object(ci.a)(M),Object(ci.a)(z)),L(a),l(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=[],t=[],n=[],a=[],r=!1,i=function(t,a){var r=f[t];r&&(e.push({id:t,label:r.chipLabel,filterFn:tb,onDelete:function(){return y(t)}}),n.push(a(r.id)))};if(i("box",ce),i("project",ue),i("organization",be),i("site",pe),i("usState",de),f.geoJson){var o=f.geoJson;try{var s=G(o);e.push({id:"geoJson",label:"within polygon",filterFn:tb,onDelete:function(){return y("geoJson")}}),n.push(he(s))}catch(L){e.push({id:"geoJson",label:"within polygon",filterFn:nb,onDelete:function(){return y("geoJson")},chipColor:"error"}),a.push("GeoJSON Polygon error (".concat(L,")"))}}if(i("taxon",me),f.sampleIds.length>0){var l=f.sampleIds,u=function(){return y("sampleIds")};1===l.length&&e.push({id:"sampleIds",label:"ID is ".concat(l[0]),filterFn:tb,onDelete:u}),l.length>1&&e.push({id:"sampleIds",label:"ID is in list (".concat(l.length," samples)"),filterFn:tb,onDelete:u});var d=[],m=[];l.forEach((function(e){se[e]?d.push(se[e]):m.push(e)}));var b=m.length>0?function(e){return function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryAllPages(Xo,{sampleIds:n},{dataProperty:"samples"});case 2:return a=t.sent,t.abrupt("return",a.samples.records.map(es));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c)(m):Promise.resolve([]),h=m.map((function(e){return b.then((function(t){return t.find((function(t){return t.id===e}))}))}));le(Object(k.a)((function(e){m.forEach((function(t,n){e[t]=h[n]}))}))),n.push(Promise.all([].concat(d,Object(ci.a)(h))).then((function(e){return e.filter(A.identity)})).catch((function(e){return p.error("Failed to retrieve samples by ID: ".concat(e)),le(Object(k.a)((function(e){m.forEach((function(t){delete e[t]}))}))),[]})))}var g=te&&0===n.length;if(f.type){var v=f.type;e.push({id:"type",label:v.chipLabel,filterFn:function(e){return e.type===v.id},onDelete:function(){return y("type")},chipColor:g?"warn":"default"})}if(f.method){var x=f.method;e.push({id:"method",label:x.chipLabel,filterFn:function(e){return e.method===x.id},onDelete:function(){return y("method")},chipColor:g?"warn":"default"})}if(f.fromDate||f.toDate){var O=f.fromDate,w=f.toDate,I={id:"dateCriteria",onDelete:function(){y("fromDate"),y("toDate")},chipColor:g?"warn":"default"};O&&!w?e.push(Object(ba.a)(Object(ba.a)({},I),{},{label:"sampled ".concat(O," or later"),filterFn:function(e){return e.sampleDate>=O}})):!O&&w?e.push(Object(ba.a)(Object(ba.a)({},I),{},{label:"sampled ".concat(w," or earlier"),filterFn:function(e){return e.sampleDate<=w}})):O&&O===w?e.push(Object(ba.a)(Object(ba.a)({},I),{},{label:"sampled on ".concat(O),filterFn:function(e){return e.sampleDate===O}})):O&&w&&(O>w?(e.push(Object(ba.a)(Object(ba.a)({},I),{},{label:"sampled between ".concat(O," and ").concat(w),filterFn:nb,chipColor:"error"})),a.push("From Date cannot be after To Date")):e.push(Object(ba.a)(Object(ba.a)({},I),{},{label:"sampled between ".concat(O," and ").concat(w),filterFn:function(e){var t=e.sampleDate;return t>=O&&t<=w}})))}if(f.fromArea||f.toArea){var C=f.fromArea,D=f.toArea,z={id:"areaCriteria",onDelete:function(){y("fromArea"),y("toArea")},chipColor:g?"warn":"default"};C&&!D?e.push(Object(ba.a)(Object(ba.a)({},z),{},{label:"sampled area ".concat(C," m\xb2 or greater"),filterFn:function(e){return e.area>=C}})):!C&&D?e.push(Object(ba.a)(Object(ba.a)({},z),{},{label:"sampled area ".concat(D," m\xb2 or less"),filterFn:function(e){return e.area<=D}})):C&&D&&(C>D?(e.push(Object(ba.a)(Object(ba.a)({},z),{},{label:"sampled area between ".concat(C," m\xb2 and ").concat(D," m\xb2"),filterFn:nb,chipColor:"error"})),a.push("Min Area cannot be greater than Max Area")):e.push(Object(ba.a)(Object(ba.a)({},z),{},{label:"sampled area between ".concat(C," m\xb2 and ").concat(D," m\xb2"),filterFn:function(e){var t=e.area;return t>=C&&t<=D}})))}if(e.length>0){var N=j.map((function(e){return e.id}));te?t.push({id:"thisSource",label:"not already in this project",filterFn:function(e){var t=e.id;return!N.includes(t)}}):ne?t.push({id:"thisSource",label:"currently in this project",filterFn:function(e){var t=e.id;return N.includes(t)}}):ee&&t.push({id:"thisSource",label:"in this box",filterFn:function(e){var t=e.id;return N.includes(t)}},{id:"alreadySelected",label:"not already selected",filterFn:tb})}if(W([].concat(e,t)),T([]),a.length>0)E("Cannot match samples: ".concat(a.join(", "),"."));else if(0===n.length)if(0===e.length)E(null);else if(te)E("Add more criteria to match samples. (Type, Method, Date, and Area may only be used as supplemental criteria when adding samples.)");else{var P=e.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),j);T(P);var M=P.length;E(re?Object(fe.c)("span",{children:["Matched ",Object(fe.b)("strong",{children:M})," ",S(M,"sample")," ",te?"not already":"currently"," in this project."]}):Object(fe.c)("span",{children:["Matched ",Object(fe.b)("strong",{children:M})," ",S(M,"sample"),".",M===j.length?" Cannot select samples as box would be left with 0 samples.":""]}))}else E(Object(fe.b)(Tt,{css:{width:"25rem"}})),Promise.all(n).then((function(n){if(!r){var a=Object(Nm.a)(n),i=a[0],o=a.slice(1).reduce((function(e,t){return Object(A.intersectionBy)(e,t,(function(e){return e.id}))}),i),s=(o=e.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),o)).length;o=t.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),o),T(o);var l=o.length;E(re?Object(fe.c)("span",{children:["Matched ",s," ",S(s,"sample")," of which ",Object(fe.b)("strong",{children:l})," ",S(l,"is")," ",te?"not already":"currently"," in this project."]}):Object(fe.c)("span",{children:["Matched ",Object(fe.b)("strong",{children:l})," ",S(l,"sample"),".",l===j.length?" Cannot select samples as box would be left with 0 samples.":""]}))}}));return function(){r=!0}}),[j,K,f]),Object(fe.c)("div",{children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",minHeight:"2.5em"},children:[re&&Object(fe.c)(ia,{children:["Edit Samples in Project ",i," ",Object(fe.c)(ia.Subtitle,{children:["(",j.length," ",S(j.length,"sample"),")"]})]}),ee&&M&&Object(fe.c)(ia,{children:["Split Box ",t," ",Object(fe.c)(ia.Subtitle,{children:["(".concat(o.length," ").concat(S(o.length,"sample")),M.length>0?" before split, ".concat(o.length-M.length," ").concat(S(o.length-M.length,"sample")," after split)"):")"]})]}),re&&Object(fe.c)(_m.a,{css:{marginLeft:"auto"},value:K,onChange:function(e,t){t&&X(t)},exclusive:!0,children:[Object(fe.b)(Rm.a,{size:"small",value:"add",css:{width:"6em"},children:"Add"},"add"),Object(fe.b)(Rm.a,{size:"small",value:"remove",css:{width:"6em"},children:"Remove"},"remove")]})]}),Object(fe.c)("div",{css:{marginTop:"1rem",display:"grid",gap:"1rem",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateAreas:'\n            "box           box           project       project"\n            "organization  organization  organization  organization"\n            "site          site          siteCode      siteCode"\n            "usState       usState       waterbody     waterbody"\n            "geoJson       geoJson       geoJson       geoJson"\n            "taxon         taxon         taxon         taxon"\n            "sampleIds     sampleIds     sampleIds     sampleIds"\n            "type          type          method        method"\n            "fromDate      toDate        fromArea      toArea"\n          '},children:[re?Object(fe.b)(Vm,{gridArea:"box",value:f.box,onChange:g("box")}):Object(fe.b)(Ee,{gridArea:"box",label:"Box",value:null,onChange:A.noop,options:[],disabled:!0}),Object(fe.b)(Ym,{gridArea:"project",value:f.project,onChange:g("project"),thisProjectId:null!==r&&void 0!==r?r:0}),re?Object(fe.b)(Jm,{gridArea:"organization",value:f.organization,onChange:g("organization")}):Object(fe.b)(Ee,{gridArea:"organization",label:"Customer",value:null,onChange:A.noop,options:[],disabled:!0}),Object(fe.b)(Xm,{gridArea:"site",value:f.site,onChange:g("site")}),Object(fe.b)(Ht,{gridArea:"siteCode",label:"Customer Site Code",value:"",onChange:A.noop,disabled:!0}),Object(fe.b)(Hm,{gridArea:"usState",value:f.usState,onChange:g("usState")}),Object(fe.b)(Ht,{gridArea:"waterbody",label:"Waterbody Name",value:"",onChange:A.noop,disabled:!0}),Object(fe.b)(eb,{gridArea:"geoJson",value:f.geoJson,onChange:g("geoJson")}),Object(fe.b)(Qm,{gridArea:"taxon",value:f.taxon,onChange:g("taxon")}),Object(fe.b)($m,{gridArea:"sampleIds",value:f.sampleIds,onChange:g("sampleIds")}),Object(fe.b)(Zm,{gridArea:"type",value:f.type,onChange:g("type")}),Object(fe.b)(Km,{gridArea:"method",value:f.method,onChange:g("method")}),Object(fe.b)(ut,{gridArea:"fromDate",value:f.fromDate,onChange:g("fromDate"),label:"From Date",error:null===v||void 0===v?void 0:v.fromDate}),Object(fe.b)(ut,{gridArea:"toDate",value:f.toDate,onChange:g("toDate"),label:"To Date",error:null===v||void 0===v?void 0:v.toDate}),Object(fe.b)(kt,{gridArea:"fromArea",value:f.fromArea,onChange:g("fromArea"),label:"Min Area",error:null===v||void 0===v?void 0:v.fromArea,min:0,max:5}),Object(fe.b)(kt,{gridArea:"toArea",value:f.toArea,onChange:g("toArea"),label:"Max Area",error:null===v||void 0===v?void 0:v.toArea,min:0,max:5})]}),Object(fe.c)("div",{css:{marginTop:"1rem",display:"grid",gap:"1rem"},children:[Object(fe.b)(xt,{filters:U,joinLabel:"and",noneNode:Object(fe.b)(et,{label:"No criteria"})}),Object(fe.b)("div",{css:{minHeight:"1.2rem",display:"flex",alignItems:"center"},children:F}),Object(fe.b)("div",{css:{display:"flex"}}),re&&Object(fe.b)(tt.a,{variant:"contained",disabled:0===z.length||Y,onClick:te?ge:ye,startIcon:te?Object(fe.b)(Pm.a,{}):Object(fe.b)(Lm.a,{}),children:te?Y?"Adding samples to project...":0===z.length?"Add samples to project":"Add ".concat(z.length," ").concat(S(z.length,"sample")," to project"):Y?"Removing samples from project...":0===z.length?"Remove samples from project":"Remove ".concat(z.length," ").concat(S(z.length,"sample")," from project")}),ee&&Object(fe.b)(tt.a,{variant:"contained",disabled:0===z.length||z.length===j.length,onClick:ve,children:Y?"Creating box...":0===z.length?"Select samples for new box":"Select ".concat(z.length," ").concat(S(z.length,"sample")," for new box")})]})]})},ib=sa((function(e){var t=e.boxId,n=e.isOpen,a=e.onClose,r=ae(),i=Gc(),o=Je(),l=bv(),c=Object(J.i)(Cu(t)),u=Object(s.useState)(!1),p=Object(d.a)(u,2),m=p[0],b=p[1],f=Object(s.useState)([]),h=Object(d.a)(f,2),g=h[0],y=h[1],v=function(){m||a()},x=function(){var e=Object(ui.a)(pi.a.mark((function e(){var n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,Pl(r,i)({boxId:t,sampleIds:g.map((function(e){return e.id}))});case 4:n=e.sent,l.boxDetail({boxId:n}),o.info("Created Box ".concat(n," with samples transferred from Box ").concat(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),o.error("Failed to split box: ".concat(e.t0)),b(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(nt.a,{open:n,fullWidth:!0,maxWidth:"lg",onClose:v,children:[Object(fe.b)(rt.a,{children:Object(fe.b)(rb,{initialMode:"split",boxId:t,samples:c,onOperatingChange:b,onNewBoxSamplesChange:y})}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:v,disabled:m,children:"Cancel"}),Object(fe.c)(tt.a,{onClick:x,disabled:m||0===g.length,children:["Create Box From ",g.length," ",S(g.length,"sample")]})]})]})}),(function(e){var t=e.isOpen,n=e.onClose;return Object(fe.c)(nt.a,{open:t,fullWidth:!0,maxWidth:"lg",onClose:n,children:[Object(fe.b)(rt.a,{children:Object(fe.b)(Pe.a,{variant:"rectangular",height:"20rem"})}),Object(fe.b)(at.a,{children:Object(fe.b)(tt.a,{onClick:n,children:"Cancel"})})]})})),ob=["boxId"],sb=sa((function(e){var t=e.boxId,n=Object(gi.a)(e,ob),a=Object(J.i)(Eu),r=Object(A.sortBy)(a,(function(e){return e.id})).filter((function(e){return e.id!==t})).reverse().map((function(e){var t=e.id,n=e.alias,a=e.sampleCount,r=e.boxState;return{value:t,label:"Box ".concat(t).concat(n?": ".concat(n):""," (").concat(r,", ").concat(a," samples)")}}));return Object(fe.b)(Ee,Object(ba.a)(Object(ba.a)({},n),{},{options:r}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),lb=sa((function(e){var t=e.boxId,n=e.isOpen,a=e.onClose,r=ae(),i=Gc(),o=Je(),l=bv(),c=Object(J.i)(Uu(t)),u=null===c||void 0===c?void 0:c.sampleCount,p=Object(s.useState)(null),m=Object(d.a)(p,2),b=m[0],f=m[1],h=Object(s.useState)(!1),g=Object(d.a)(h,2),y=g[0],v=g[1],x=Object(s.useState)(!1),O=Object(d.a)(x,2),j=O[0],w=O[1];Object(s.useEffect)((function(){n&&(f(null),v(!1))}),[n]),Object(s.useEffect)((function(){if(b){v(!1);var e=window.setTimeout((function(){v(!0)}),3e3);return function(){return window.clearTimeout(e)}}}),[b]);var I=function(){j||a()},k=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("No target box.");case 2:return e.prev=2,w(!0),e.next=6,Cl(r,i)({sourceBoxId:t,targetBoxId:b});case 6:l.boxDetail({boxId:b},!0),o.info("Merged Box ".concat(t," into Box ").concat(b)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o.error("Failed to merge boxes: ".concat(e.t0));case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(nt.a,{open:n,fullWidth:!0,maxWidth:"sm",onClose:I,children:[Object(fe.c)(rt.a,{children:[Object(fe.c)(ia,{children:["Merge Box ",t," Into Another Box"]}),Object(fe.b)("div",{css:{marginTop:"1em"},children:Object(fe.b)(sb,{boxId:t,label:"Target Box",value:b,onChange:f})}),b&&(y?Object(fe.c)("ul",{children:[Object(fe.c)("li",{children:[u," ",S(u,"sample")," will be transferred from Box ",t," to Box"," ",b]}),Object(fe.c)("li",{children:["Box ",t," will be deleted"]})]}):Object(fe.c)("ul",{children:[Object(fe.b)("li",{children:Object(fe.b)(Pe.a,{width:"20em"})}),Object(fe.b)("li",{children:Object(fe.b)(Pe.a,{width:"10em"})})]}))]}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:I,disabled:j,children:"Cancel"}),Object(fe.c)(tt.a,{onClick:k,disabled:j||!y,children:["Transfer ",u," ",S(u,"Sample")," And Delete Box"]})]})]})}),(function(){return null})),cb=Object(J.e)({key:"BoxDetail/selectOrganizationOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,e.next=3,n(Wu);case 3:return a=e.sent,e.abrupt("return",a.map((function(e){return{value:e.id,label:e.name}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ub=Object(J.e)({key:"BoxDetail/selectBoxStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,e.next=3,n(Xc);case 3:return a=e.sent,e.abrupt("return",a.map((function(e){return{value:e.id,label:e.name}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),db=Object(J.b)({key:"BoxDetail/isExpandedState",default:!0}),pb=function(e){var t=e.box,n=t.boxStateId,a=void 0===n?-1:n,r=t.measurements,i=t.midges,o=t.description,s=void 0===o?"":o,l=t.customerId,c=t.alias,u=t.modelIds;return{values:{boxStateId:a,measurements:r,midges:i,description:s,customerId:l,alias:c,modelIds:void 0===u?[]:u,receivedDate:t.receivedDate},editMode:"stopped",isDirty:!1,isSplitDialogOpen:!1,isMergeDialogOpen:!1}},mb=function(e){var t,n,a=e.box,r=e.user,i=ae(),o=Gc(),l=bv(),c=Je(),u=C(pb({box:a}),[a]),p=Object(d.a)(u,3),m=p[0],b=p[1],f=p[2],g=Object(J.h)(db),y=Object(d.a)(g,2),v=y[0],x=y[1],O=m.editMode,j=m.values,I=j.boxStateId,k=j.measurements,D=j.midges,z=j.description,T=j.customerId,N=j.alias,A=j.modelIds,P=j.receivedDate,M=m.isDirty,L=m.isSplitDialogOpen,R=m.isMergeDialogOpen,_=P&&w(P),F="stopped"===O,E="started"===O,q="stopping"===O,B=function(e){return function(t){return function(e,t){f((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))}(e,t)}},U=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f((function(e){e.editMode="stopping"})),e.prev=1,e.next=4,Gl(i,o)(Object(ba.a)({boxId:a.id},m.values));case 4:f((function(e){e.editMode="stopped",e.isDirty=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),c.error("Failed to save box: ".concat(e.t0)),f((function(e){e.editMode="started"}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),G=Object(s.useMemo)((function(){var e=[{key:"taxonomy",label:"Taxonomy",onClick:function(){return l.boxTaxonomy({boxId:a.id})}},{key:"customerReport",label:"Download Customer Report",onClick:function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c.info("Still creating report...",2500),n=c.info("Still creating report...",3e4),e.next=5,vm({boxId:a.id,api:i,filename:"NAMC_report_".concat(a.id,".xlsx")});case 5:t(),n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c.error("Failed to create report: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),disabled:a.boxStateId!==$c.complete},Et];return r.hasPermission(re.NAMCResource.boxes,re.GrantAction.updateAny)&&(e.push({key:"edit",label:"Edit Box",onClick:function(){x(!0),f((function(e){e.editMode="started"}))}}),a.boxStateId!==$c.pending&&e.push({key:"split",label:"Split Box",onClick:function(){f((function(e){e.isSplitDialogOpen=!0}))}},{key:"merge",label:"Merge Box",onClick:function(){f((function(e){e.isMergeDialogOpen=!0}))}})),r.hasPermission(re.NAMCResource.submissions,re.GrantAction.updateAny)&&a.boxStateId===$c.pending&&e.push({key:"review",label:"Review Box",onClick:function(){l.boxReview({boxId:a.id})}}),e}),[a.boxStateId]);return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)(Ae,{value:v,onChange:x,locked:E,summary:Object(fe.c)(ia,{children:["Box ",a.id," ",Object(fe.c)(ia.Subtitle,{children:["(",a.boxState,", ",a.sampleCount," ",S(a.sampleCount,"sample"),")"]})]}),actions:Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[F&&G.length>0&&Object(fe.b)(qt,{label:"Actions",items:G}),(E||q)&&Object(fe.c)(fe.a,{children:[Object(fe.b)(tt.a,{onClick:function(){b(pb({box:a}))},variant:"outlined",disabled:q,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:function(){U()},variant:"contained",disabled:!M||q,children:"Save"})]})]}),children:Object(fe.c)("div",{css:{flex:1,display:"grid",gap:"0.75em",gridTemplateColumns:"auto auto auto auto auto",gridTemplateAreas:'\n              "boxState     customerId              sorting       identification     map"\n              "measurements submittedByName         modelIds      modelIds           map"\n              "midges       createdDate             modelIds      modelIds           map"\n              "taxaQa       receivedDate            alias         alias              map"\n              "sorterQa     processingCompleteDate  description   description        map"\n              ".            .                       description   description        map"\n            '},children:[Object(fe.b)(Ee,{label:"Box State",optionsSelector:ub,value:I,valueLabel:a.boxState,onChange:B("boxStateId"),readOnly:!E,gridArea:"boxState"}),Object(fe.b)(Ee,{gridArea:"customerId",optionsSelector:cb,valueLabel:a.customerName,value:T,onChange:B("customerId"),label:"Customer",readOnly:!E,css:{minWidth:"20em"}}),Object(fe.b)(je,{gridArea:"submittedByName",value:a.submittedByName,label:"Submitted By"}),Object(fe.b)(je,{gridArea:"createdDate",value:w(null!==(t=a.createdDate)&&void 0!==t?t:null),label:"Submitted On"}),Object(fe.b)(ut,{gridArea:"receivedDate",value:_,onChange:B("receivedDate"),label:"Received On",readOnly:!E,max:h()().format("YYYY-MM-DD")}),Object(fe.b)(je,{gridArea:"processingCompleteDate",value:w(null!==(n=a.processingCompleteDate)&&void 0!==n?n:null),label:"Processing Completed On"}),Object(fe.b)(ft,{label:"Measurements",value:k,onChange:B("measurements"),readOnly:!E,gridArea:"measurements"}),Object(fe.b)(ft,{label:"Midges",value:D,onChange:B("midges"),readOnly:!E,gridArea:"midges"}),Object(fe.b)(je,{label:"Taxonomic QA",value:a.taxaQa,gridArea:"taxaQa"}),Object(fe.b)(je,{label:"Sorting QA",value:a.sorterQa,gridArea:"sorterQa"}),Object(fe.b)(Im,{label:"Models",value:A,onChange:B("modelIds"),readOnly:!E,gridArea:"modelIds"}),Object(fe.b)(Ht,{label:"Alias",value:N,onChange:B("alias"),readOnly:!E,gridArea:"alias"}),Object(fe.b)(Ht,{label:"Description",value:z,onChange:B("description"),readOnly:!E,multiline:!0,minRows:3,gridArea:"description"}),Object(fe.b)(Om,{boxId:a.id,value:a.sortComplete,gridArea:"sorting"}),Object(fe.b)(wm,{boxId:a.id,value:a.identificationComplete,gridArea:"identification"}),"started"!==O&&Object(fe.b)("div",{css:{gridArea:"map"},children:Object(fe.b)(Tm,{boxId:a.id})})]})}),Object(fe.b)(Xp,{children:"Samples"}),Object(fe.b)("div",{css:{flex:1,minHeight:"10em"},children:Object(fe.b)(fm,{boxId:a.id})})]}),Object(fe.b)(ib,{boxId:a.id,isOpen:L,onClose:function(){return f((function(e){e.isSplitDialogOpen=!1}))}}),Object(fe.b)(lb,{boxId:a.id,isOpen:R,onClose:function(){return f((function(e){e.isMergeDialogOpen=!1}))}}),M&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},bb=sa((function(e){var t=e.boxId,n=Object(J.i)(Uu(Number(t))),a=Object(J.i)(ud);return null===n?Object(ue.jsxs)("h2",{children:["Box ",t," not found."]}):Object(ue.jsx)(mb,{box:n,user:a})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),fb=[Rp({headerName:"Box ID",field:"boxId",width:120}),Ep({field:"customer",flex:3,minWidth:400,filterTooltip:"Filter by this customer"}),_p({field:"alias",flex:1,minWidth:110}),Gp({field:"sampleCount",width:130}),_p({field:"boxState",width:110}),Up({field:"measurements",valueLabels:["No","Yes"],width:130}),Up({field:"midges",valueLabels:["No","Yes"],width:90}),qp({field:"receivedDate",width:150}),Bp({headerName:"% Complete Sort",field:"sortComplete",width:140}),Bp({headerName:"% Complete ID",field:"identificationComplete",width:140})],hb=[_p({headerName:"Submission ID",field:"id",width:150}),qp({headerName:"Submitted On",field:"createdDate",width:150}),_p({headerName:"Submission State",field:"boxState",width:150}),Gp({field:"sampleCount",width:130}),Rp({field:"forms",width:160}),Rp({field:"reports",flex:1})],gb=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},yb="ANY",vb=Object(J.b)({key:"PrivilegedBoxesListing/boxStateNameFilter",default:"Active"}),xb=Object(J.b)({key:"PrivilegedBoxesListing/textFilter",default:""}),Ob=Object(J.b)({key:"PrivilegedBoxesListing/addedFilters",default:[]}),jb=sa((function(e){var t=e.boxes,n=e.boxStates,a=e.isLoading,r=bv(),i=Object(J.i)(ud),o=Object(J.h)(vb),l=Object(d.a)(o,2),c=l[0],u=l[1],p=Zt(Object(J.h)(xb)),m=Object(d.a)(p,4),b=m[0],f=m[1],h=m[2],g=m[3],y=Object(J.h)(Ob),v=Object(d.a)(y,2),x=v[0],O=v[1],j=Object(s.useMemo)((function(){var e=[];if(c!==yb&&e.push({id:"state",label:c,filterFn:function(e){return e.boxState===c},onDelete:function(){u(yb)}}),h)if(h.match(/^\d+$/)){var t=Number(h);e.push({id:"text",label:"Box ".concat(h),filterFn:function(e){return e.id===t},onDelete:g})}else e.push({id:"text",label:'Customer contains "'.concat(h,'"'),filterFn:function(e){return e.customerName.toLowerCase().includes(h.toLowerCase())},onDelete:g});return e.push.apply(e,Object(ci.a)(x)),e}),[c,h,x]),w=Object(s.useMemo)((function(){return j.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),t).map((function(e){var t="filter/".concat(String(e.customerId));return Object(ba.a)(Object(ba.a)({},e),{},{boxId:{label:e.id,onClick:function(){return r.boxDetail({boxId:e.id})}},customer:{label:e.customerName,onFilter:function(){g(),O([{id:t,label:e.customerName,filterFn:function(t){return t.customerId===e.customerId},onDelete:function(){return O((function(e){return e.filter((function(e){return e.id!==t}))}))}}])},disabled:!!x.find((function(e){return e.id===t}))}})}))}),[t,j]),I=Object(s.useMemo)((function(){return[{value:yb,label:"Any"}].concat(Object(ci.a)(n.filter((function(e){return e.isActive})).map((function(e){var t=e.name;return{value:t,label:t}}))))}),[n]);return Object(fe.b)(fe.a,{children:Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)(Gt,{value:c,onChange:function(e){return u(String(e))},options:I,label:"Box State"}),Object(fe.b)($t,{value:b,onChange:f,label:"Box ID or Customer"}),i.hasPermission(re.NAMCResource.submissions,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){r.boxSubmission()},children:"Create New Submission"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:j,joinLabel:"and"}),Object(fe.b)(Kp,{total:t.length,visible:w.length,descriptor:"box",isLoading:a})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:w,columnDefs:fb,frameworkComponents:$p})})]})})}),gb),wb=function(e){var t=e.boxes,n=ae(),a=Je(),r=bv(),i=Object(s.useMemo)((function(){return t.map((function(e){var t=e.boxStateId===$c.complete,i=function(){var t=Object(ui.a)(pi.a.mark((function t(){var r,i;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=a.info("Still creating report...",2500),i=a.info("Still creating report...",3e4),t.next=5,vm({boxId:e.id,api:n,filename:"NAMC_report_".concat(e.id,".xlsx")});case 5:r(),i(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a.error("Failed to create report: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(ba.a)(Object(ba.a)({},e),{},{forms:{label:e.submissionCount?"Chain of Custody":"",onClick:function(){r.chainOfCustodyForm({boxId:e.id})}},reports:{label:t?"Download NAMC Report":"In Progress",onClick:i,disabled:!t}})}))}),[t]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{minHeight:"2em",gap:"0.5em",display:"flex"},children:[Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){r.boxSubmission()},children:"Create New Submission"}),Object(fe.b)(Kp,{total:t.length,visible:i.length,descriptor:"submission",css:{marginLeft:"auto"}})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:i,columnDefs:hb,frameworkComponents:$p})})]})},Ib=function(){var e=Object(J.i)(Bu);return Object(ue.jsx)(wb,{boxes:e})},Sb=function(){var e=Object(J.i)(Xc),t=Object(J.i)(Object(J.l)([qu,Eu])),n=Object(d.a)(t,2),a=n[0],r=n[1],i="hasValue"!==r.state,o=i?a.contents:r.contents;return Object(ue.jsx)(jb,{boxes:o,boxStates:e,isLoading:i})},kb=sa((function(){return Object(J.i)(ud).hasPermission(re.NAMCResource.boxes,re.GrantAction.readAny)?Object(ue.jsx)(Sb,{}):Object(ue.jsx)(Ib,{})}),gb),Cb={header:"",key:""},Db=[{header:"Order",key:"order"},{header:"Family",key:"family"},{header:"Scientific Name",key:"name"},Cb,{header:"Total Sample Count",key:"sampleCount"},{header:"Total Split Count",key:"totalCount"}],zb=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s,l,c;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.box,a=t.boxTaxa,r=t.filename,i=new z.a.Workbook,(o=i.addWorksheet("Box Taxonomy Report")).getRow(1).values=["Taxonomic list and sample counts for ".concat(n.sampleCount," samples, Box ID ").concat(n.id,".")],o.getRow(2).values=["List generated on ".concat(h()().format("MMMM D, YYYY"),".")],o.getRow(3).values=["Customer: ".concat(n.customerName,".")],4,s=a.reduce((function(e,t){return Object(A.uniq)([].concat(Object(ci.a)(e),Object(ci.a)(Object.keys(t.taxonomistCounts))))}),[]),(l=[].concat(Db)).splice.apply(l,[Db.findIndex((function(e){return e===Cb})),1].concat(Object(ci.a)(s.map((function(e){return{header:e,key:e}}))))),0===a.length?o.getRow(5).values=["No taxonomy found for box."]:(c=a.map((function(e){return Object(ba.a)(Object(ba.a)({},e),e.taxonomistCounts)})).map((function(e){var t=[];return l.forEach((function(n){var a=n.key;t.push(e[a])})),t})),o.addTable({name:"BoxTaxonomy",ref:"A".concat(4),headerRow:!0,style:{theme:"TableStyleLight1",showRowStripes:!0},columns:l.map((function(e){return{name:e.header,filterButton:!0}})),rows:c}),o.columns.forEach((function(e){var t=e.values;if(t){var n=t.slice(4).map((function(e){return(e||"").toString().length})),a=Math.max.apply(Math,Object(ci.a)(n.filter((function(e){return"number"===typeof e}))));e.width=a+2}})),o.views=[{state:"frozen",xSplit:void 0,ySplit:4,activeCell:"A1"}]),R(i,r),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tb=["skeleton"],Nb=function(e){var t=e.skeleton,n=Object(gi.a)(e,Tb);return t?Object(fe.b)(Pe.a,{variant:"rectangular",height:40}):Object(fe.b)(aa,Object(ba.a)({},n))},Ab=Object(J.b)({key:"BoxTaxonomy/isExpandedState",default:!1}),Pb=function(e){var t=e.box,n=e.boxTaxa,a=ae(),r=Gc(),i=Je(),o=Object(J.j)(sd),l=Object(s.useState)(null),c=Object(d.a)(l,2),u=c[0],p=c[1],m=Object(s.useState)(null),b=Object(d.a)(m,2),f=b[0],h=b[1],g=Object(s.useState)(!1),y=Object(d.a)(g,2),v=y[0],x=y[1],O=Object(s.useState)(!1),j=Object(d.a)(O,2),w=j[0],I=j[1],S=Object(s.useState)([]),k=Object(d.a)(S,2),C=k[0],D=k[1],z=C.length>0;Object(s.useEffect)((function(){o.toPromise().then(D)}),[]);var T=Object(J.h)(Ab),N=Object(d.a)(T,2),P=N[0],M=N[1],L=!!u&&!!f&&u===f,R=n.map((function(e){return e.id})),_=C.filter((function(e){return R.includes(e.id)})).map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{status:"in"})})),F=C.filter((function(e){return!R.includes(e.id)})).map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{status:"notIn"})})),E=n.find((function(e){return e.id===u})),q=C.find((function(e){return e.id===f})),B=n.find((function(e){return e.id===f})),U=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&f){e.next=2;break}throw new Error("Missing taxonomid IDs");case 2:return x(!0),e.prev=3,e.next=6,zl(a,r)({boxId:t.id,fromTaxonomyId:u,toTaxonomyId:f});case 6:p(null),h(null),x(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),i.error("Failed to reconcile taxonomy: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),G=n.reduce((function(e,t){return Object(A.uniq)([].concat(Object(ci.a)(e),Object(ci.a)(Object.keys(t.taxonomistCounts))))}),[]),W=n,V=function(e){return[_p({field:"order",minWidth:160,flex:1}),_p({field:"family",minWidth:160,flex:1}),_p({headerName:"Scientific Name",field:"name",minWidth:160,flex:1})].concat(Object(ci.a)(e.map((function(e){return Gp({headerName:e,field:"taxonomistCounts.".concat(e),minWidth:160,flex:1})}))),[Gp({headerName:"Total Sample Count",field:"sampleCount",minWidth:160}),Gp({headerName:"Total Split Count",field:"totalCount",minWidth:160})])}(G),H=t.boxStateId===$c.active;return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{margin:"16px",display:"flex",alignItems:"center"},children:[Object(fe.c)(ia,{children:["Box ",t.id," Taxonomy"," ",Object(fe.c)(ia.Subtitle,{children:["(",t.boxState,", ",t.sampleCount," samples)"]})]}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:Object(ui.a)(pi.a.mark((function e(){var a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=i.info("Still creating report...",1e3),e.next=4,zb({box:t,boxTaxa:n,filename:"Box Taxonomy Report for Box ID ".concat(t.id)});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i.error("Failed to create box taxonomy report: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),children:"Download Report"})})]}),Object(fe.b)(Ae,{value:P,onChange:M,summary:Object(fe.b)("span",{children:"Reconcile Taxa"}),children:H?Object(fe.c)("div",{css:{display:"grid",gap:"1em",paddingTop:"1em",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'\n            "fromId      toId"\n            "fromMessage toMessage"\n            ".           button"\n            '},children:[Object(fe.b)("div",{css:{gridArea:"fromId"},children:Object(fe.b)(Nb,{label:"Reconcile From",options:_,value:u,onChange:p,disabled:v,skeleton:!z})}),Object(fe.b)("div",{css:{gridArea:"fromMessage"},children:E?Object(fe.c)("span",{children:["Box currently contains ",E.totalCount," ",Object(fe.b)("em",{children:E.name})," records in"," ",E.sampleCount," samples."]}):Object(fe.b)("span",{children:Object(fe.b)("em",{children:"select a taxon"})})}),Object(fe.b)("div",{css:{gridArea:"toId"},children:Object(fe.b)(Nb,{label:"Reconcile To",options:[].concat(Object(ci.a)(_),Object(ci.a)(F)),value:f,onChange:h,disabled:v,skeleton:!z})}),Object(fe.b)("div",{css:{gridArea:"toMessage"},children:L?Object(fe.b)("span",{css:{color:"red"},children:"Cannot reconcile to the same taxon."}):B?Object(fe.c)("span",{children:["Box currently contains ",B.totalCount," ",Object(fe.b)("em",{children:B.name})," records in"," ",B.sampleCount," samples."]}):q?Object(fe.c)("span",{children:["Box does not yet contain any ",Object(fe.b)("em",{children:null===q||void 0===q?void 0:q.name})," records."]}):Object(fe.b)("span",{children:Object(fe.b)("em",{children:"select a taxon"})})}),Object(fe.b)("div",{css:{gridArea:"button",display:"flex",justifyContent:"end"},children:Object(fe.b)(tt.a,{variant:"contained",disabled:!u||!f||L||v,onClick:function(){I(!0)},children:"Reconcile Taxa"})})]}):Object(fe.b)("div",{children:"Box must be active to perform taxa reconciliation."})}),Object(fe.b)("div",{css:{minHeight:"1rem",display:"flex"},children:Object(fe.b)(Kp,{css:{marginLeft:"auto"},total:W.length,visible:W.length,descriptor:"taxa"})}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{columnDefs:V,rows:W})})]}),Object(fe.b)(st,{isOpen:w,title:"Confirm Taxa Reconciliation",onClose:function(){return I(!1)},onConfirm:U,confirmLabel:"Reconcile",children:"Are you sure you want to reconcile the selected taxa? Records will be irreversibly changed."})]})},Mb=sa((function(e){var t=e.boxId,n=Object(J.i)(Uu(Number(t))),a=Object(J.i)(ld(Number(t)));return n?Object(ue.jsx)(Pb,{box:n,boxTaxa:a}):Object(ue.jsxs)("h2",{children:["Box ",t," not found."]})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),Lb=function(e){var t=e.children,n=e.styles;return Object(fe.b)("div",{css:n,children:Object(fe.b)("div",{className:"document",css:{padding:"0 2px"},children:t})})},Rb=function(e){var t=e.qty,n=void 0===t?1:t;return Object(fe.b)(fe.a,{children:Object(A.times)(n).map((function(e){return Object(fe.b)("td",{},e)}))})},_b=function(e){var t=e.children,n=e.borders;return Object(fe.b)("table",{css:{"th,td":{minWidth:"1em",border:n?"1px solid black":"none",padding:"0.1em"},borderCollapse:"collapse",width:"100%"},children:t})},Fb=function(){return Object(fe.b)("div",{css:{height:"1px",pageBreakAfter:"always","@media screen":{borderBottom:"3px dashed green"}}})},Eb=function(){return Object(fe.b)("hr",{css:{borderBottom:"1px solid black",margin:"0.75em 0"}})},qb=function(e){return"string"!==typeof e?"?":h()(e).format("MMMM D, YYYY")},Bb=function(e){return"string"!==typeof e?"?":h()(e).format("M/D/YY")},Ub=Object(be.c)(ou||(ou=Object(mi.a)(["\n  .document {\n    font-family: serif;\n    font-size: 12pt;\n    line-height: 1.2;\n    color: black;\n  }\n  u {\n    text-decoration: underline;\n  }\n  i {\n    text-style: italic;\n  }\n  b {\n    font-weight: bold;\n  }\n  th {\n    text-align: center;\n  }\n  td {\n    text-align: left;\n  }\n  .indent {\n    margin-left: 3em;\n    display: inline-block;\n  }\n  .notes-box {\n    border: 1px solid black;\n    width: 100%;\n    height: 5em;\n  }\n  .float-right {\n    display: inline-block;\n    float: right;\n    padding-right: 2em;\n  }\n"]))),Gb=function(e){var t=e.submission;return Object(fe.c)(Lb,{styles:Ub,children:[Object(fe.c)("p",{children:[t.submitterName," ",Object(fe.b)("br",{}),t.organizationName," ",Object(fe.b)("br",{}),t.submitterPhone," ",Object(fe.b)("br",{}),t.submitterEmail," ",Object(fe.b)("br",{})]}),Object(fe.b)("p",{children:qb(t.createdDate)})," ",Object(fe.c)("p",{children:["Dear ",t.submitterName,","]}),Object(fe.c)("p",{children:["On ",qb(t.createdDate),", ",t.samples.length," samples were electronically submitted to the USU/BLM National Aquatic Monitoring Center (a.k.a. BugLab). The documentation on page 2 is your Chain of Custody form and should be used for sample tracking purposes. As such,"," ",Object(fe.b)("u",{children:"send this documentation with the sample shipment"})," and also retain a copy for your records."]}),Object(fe.c)("p",{children:["Samples should be sent to:",Object(fe.b)("br",{}),Object(fe.c)("span",{className:"indent",children:["USU/BLM National Aquatic Monitoring Center (BugLab) ",Object(fe.b)("br",{}),"Department of Watershed Sciences ",Object(fe.b)("br",{}),"Utah State University ",Object(fe.b)("br",{}),"5210 Old Main Hill ",Object(fe.b)("br",{}),"Logan, Utah 84322 5210 ",Object(fe.b)("br",{})]})]}),Object(fe.c)("p",{children:["Samples should be preserved in ethanol (70-95%) unless you have made prior arrangements with our lab. To prepare for shipping, follow the guidelines for Class 3 (Flammable Liquid) Hazardous Materials according to your chosen carrier's guidelines."," ",Object(fe.b)("u",{children:"If you do not have a hazardous materials permit, samples can be shipped overnight in water as long as the samples were in ethanol prior to shipment. If shipping in water, you must let NAMC know before shipment."})," ","General packaging guidelines are as follows:"]}),Object(fe.c)("ul",{children:[Object(fe.b)("li",{children:"Make sure the lids are on tightly. To be extra careful, you can wrap duct tape around the lids."}),Object(fe.b)("li",{children:"Place individual samples in ziploc baggies or other secondary sealed containers lined with absorbent material (such as paper towels) for support, cushion, and to absorb any leaks."}),Object(fe.c)("li",{children:["Place data sheets, ",Object(fe.b)("b",{children:"including provided chain of custody forms, and any other paper documentation"})," in a separate zip-lock plastic bag."]}),Object(fe.b)("li",{children:"As specified by your carrier, mark package as Hazardous Material and fill out a Shipping Declaration for Dangerous Goods form to accompany the package (and keep a copy for your records)."})]}),Object(fe.b)("p",{children:"For any clarification on these instructions or the submission process, visit www.usu.edu/buglab."}),Object(fe.c)("p",{children:["For additional questions, please contact Trip Armstrong (760-709-1210; ",Object(fe.b)("u",{children:"trip.armstrong@usu.edu"}),"), Scott Miller (435-797-2612; ",Object(fe.b)("u",{children:"scott.miller@usu.edu"}),"), or Matt Tagg (435-797-3945; ",Object(fe.b)("u",{children:"matt.tagg@usu.edu"}),")."]}),Object(fe.c)("p",{children:["Sincerely, ",Object(fe.b)("br",{}),"Scott Miller ",Object(fe.b)("br",{}),"Director ",Object(fe.b)("br",{}),"USU/BLM National Aquatic Monitoring Center (BugLab) ",Object(fe.b)("br",{}),"Department of Watershed Sciences ",Object(fe.b)("br",{}),"Utah State University ",Object(fe.b)("br",{}),"5210 Old Main Hill ",Object(fe.b)("br",{}),"Utah State University ",Object(fe.b)("br",{}),"Logan, Utah 84322"]}),Object(fe.b)(Fb,{}),Object(fe.c)("span",{className:"float-right",children:["BoxID: ",t.boxId," ",Object(fe.b)("br",{}),"(lab use only)"]}),"Customer: ",t.organizationName," ",Object(fe.b)("br",{}),"Number of Samples: ",t.samples.length," ",Object(fe.b)("br",{}),Object(fe.b)("br",{}),Object(fe.b)("b",{children:"Chain of Custody"}),Object(fe.c)(_b,{borders:!0,children:[Object(fe.b)("thead",{children:Object(fe.c)("tr",{children:[Object(fe.b)("th",{}),Object(fe.b)("th",{children:"Date"}),Object(fe.b)("th",{children:"Condition"}),Object(fe.b)("th",{children:"Approved by"}),Object(fe.b)("th",{children:"Signature"}),Object(fe.b)("th",{children:"Data"})]})}),Object(fe.c)("tbody",{children:[Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Submitted"})}),Object(fe.b)("td",{children:Bb(t.createdDate)}),Object(fe.b)("td",{}),Object(fe.b)("td",{children:t.submitterName}),Object(fe.b)("td",{}),Object(fe.b)("td",{})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Shipped"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Received in Lab"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Lab Work Initiated"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Lab Work Finished"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Report Sent"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Jars/Specimens Returned"})}),Object(fe.b)(Rb,{qty:5})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("b",{children:"Returned Jars/Specimens Received"})}),Object(fe.b)(Rb,{qty:5})]})]})]}),Object(fe.b)("br",{}),Object(fe.b)("b",{children:"Notes:"}),Object(fe.b)("div",{className:"notes-box"}),Object(fe.b)(Eb,{}),Object(fe.b)("b",{children:"Special Handling"})," (all additional services are in addition to baseline price. Prior arrangements must be made)"," ",Object(fe.b)("br",{}),Object(fe.b)(_b,{children:Object(fe.c)("tbody",{children:[Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:Object(fe.b)("u",{children:"Measurements"})}),Object(fe.b)("td",{children:Object(fe.b)("u",{children:"Identification"})}),Object(fe.b)("td",{children:Object(fe.b)("u",{children:"QAQC"})}),Object(fe.b)("td",{children:Object(fe.b)("u",{children:"Cataloging"})})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:"Length"}),Object(fe.b)("td",{children:"Midges"}),Object(fe.b)("td",{children:"Sorting ( __ %)"}),Object(fe.b)("td",{children:"Reference Collection"})]}),Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:"Biomass"}),Object(fe.b)("td",{children:"OTUs"}),Object(fe.b)("td",{children:"Taxonomy ( __ %)"}),Object(fe.b)("td",{children:"Return Specimens"})]})]})}),Object(fe.b)(Eb,{}),Object(fe.b)("b",{children:"Sample Log"})," (lab use only) ",Object(fe.b)("br",{}),Object(fe.c)(_b,{borders:!0,children:[Object(fe.b)("thead",{children:Object(fe.c)("tr",{children:[Object(fe.b)("th",{children:"#"}),Object(fe.b)("th",{children:"Jars"}),Object(fe.b)("th",{children:"Station"}),Object(fe.b)("th",{children:"Location"}),Object(fe.b)("th",{children:"Date"}),Object(fe.b)("th",{children:"Sample Type"}),Object(fe.b)("th",{}),Object(fe.b)("th",{children:"Problems"})]})}),Object(fe.b)("tbody",{children:t.samples.map((function(e){return Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:e.sampleIndex}),Object(fe.b)("td",{children:e.jarCount}),Object(fe.b)("td",{children:e.siteId}),Object(fe.b)("td",{children:e.waterbodyName}),Object(fe.b)("td",{children:Bb(e.sampleDate)}),Object(fe.b)("td",{children:e.sampleType}),Object(fe.b)("td",{}),Object(fe.b)("td",{})]},String(e.sampleIndex))}))})]})]})},Wb=function(e){var t=e.submission,n=e.autoPrint;return Object(s.useEffect)((function(){n&&window.setTimeout((function(){window.print()}),500)}),[]),Object(fe.b)(Gb,{submission:t})},Vb=sa((function(e){var t=e.boxId,n=e.autoPrint,a=Object(J.i)(Zu(Number(t)));return null===a?Object(ue.jsxs)("h2",{children:["Submission for box ",t," not found."]}):Object(ue.jsx)(Wb,{submission:a,autoPrint:n})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"1em",width:"20em"}),Object(fe.b)(Pe.a,{height:"1em",width:"20em"}),Object(fe.b)(Pe.a,{height:"1em",width:"20em"}),Object(fe.b)(Pe.a,{height:"1em",width:"20em"}),Object(fe.b)(Pe.a,{height:"10em",width:"40em"})]})})),Hb=n(541),Jb=n(566),Yb=n(533),Qb=n(534),$b=n(548),Zb=n(515),Kb=n(301),Xb=n.n(Kb),ef=n(302),tf=n.n(ef),nf=n(303),af=n.n(nf),rf=n(224),of=n.n(rf),sf=n(32),lf=n(31),cf=n(53),uf=n(76),df=n(120);h.a.extend(y.a);var pf=function(e){if(void 0===e.value||null===e.value)throw new Nf({message:"Cell is required"})},mf=function(e){if(e.value&&"number"!==typeof e.value)throw new Nf({message:"Cell must be a number"})},bf=function(e,t){if(e.value&&(mf(e),e.value!==Math.trunc(Number(e.value))))throw new Nf({message:"Cell must be a whole number"})},ff=function(e,t){return function(n,a){if(n.value&&(mf(n),n.value<e||n.value>t))throw new Nf({message:"Cell must be a number between ".concat(e," and ").concat(t)})}},hf=function(e,t){if(e.value&&(mf(e),e.value<=0))throw new Nf({message:"Cell must be a number greater than 0"})},gf=function(e){return function(t,n){if(t.value){if(null===n||void 0===n||!n.lists[e])throw new Error('Missing lookup list "'.concat(e,'"'));var a=n.lists[e];if(!a.values.map((function(e){return e.toLowerCase()})).includes(String(t.value).toLowerCase()))throw new Nf({message:"Cell must be a valid ".concat(a.descriptor)})}}},yf=function(e){var t="2000-01-01";if(e.value){if(!(e.value instanceof Date))throw new Nf({message:"Cell must be a date"});if(h()(e.value).isBefore(t))throw new Nf({message:"Cell must be a date after ".concat(t)})}},vf=function(e){if(e.value){if(!(e.value instanceof Date))throw new Nf({message:"Cell must be a date"});e.value=h.a.utc(e.value).format("YYYY-MM-DD")}},xf=function(e){e.value=e.value&&String(e.value)},Of=function(e,t){e.value&&(mf(e),"number"===typeof e.value&&(e.value=e.value/100))},jf=function(e){var t=function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.sample,"string"===typeof(r=n.fieldName)){t.next=3;break}return t.abrupt("return");case 3:a[r]=e;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t.isSamplePostProcessor=!0,t},wf=function(e,t,n){var a=function(){var a=Object(ui.a)(pi.a.mark((function a(r){var i,o,s,l,c,u,p;return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=r.sample,"string"===typeof(o=r.fieldName)){a.next=3;break}return a.abrupt("return");case 3:if("string"===typeof(s=i[o])){a.next=6;break}return a.abrupt("return");case 6:l=s.split(e),c=Object(d.a)(l,2),u=c[0],p=c[1],i[t]=u.trim(),i[n]=(null!==p&&void 0!==p?p:"").trim(),delete i[o];case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return a.isSamplePostProcessor=!0,a},If=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s,l;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.config,r=t.rowNumber,i=t.problems,o=n.latitude,s=n.longitude,l=a.api,"number"!==typeof o||"number"!==typeof s){e.next=8;break}return e.next=6,wl(l)({latitude:o,longitude:s});case 6:e.sent||i.push({type:"row",rowNumber:r,message:"Latitude/Longitude is outside of accepted area."});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();If.isSamplePostProcessor=!0;var Sf=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.rowNumber,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Sf.isSamplePostProcessor=!0;var kf=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.sampleNumber,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();kf.isSamplePostProcessor=!0;var Cf=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.templateVersion,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Cf.isSamplePostProcessor=!0;jf("benthic"),ff(1,100),ff(0,100),gf("ecosystemHabitats"),wf(":","ecosystem","habitat"),gf("designTypes"),gf("effortTypes"),function(e){var t=function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.sample,r=n.fieldName,i=n.rowNumber,o=n.columnNumber,s=n.problems,l=a[r],!e(a)||void 0!==l&&null!==l||s.push({type:"row",rowNumber:i,columnNumber:o,message:"Cell is required"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t.isSamplePostProcessor=!0}((function(e){return"Not Standardized"===e.sampleEffortStandardization})),gf("samplerTypes"),gf("nhdTypes"),jf("fishDiet"),ff(1,100),ff(0,100),gf("ecosystems"),gf("samplerTypes"),gf("fishDietSpecies"),gf("nhdTypes"),jf("zooplankton"),ff(1,100),ff(0,100),gf("ecosystemHabitats"),wf(":","ecosystem","habitat"),gf("designTypes"),gf("samplerTypes"),gf("towTypes"),gf("nhdTypes"),jf("drift"),ff(1,100),ff(0,100),gf("ecosystemHabitats"),wf(":","ecosystem","habitat"),gf("samplerTypes"),gf("nhdTypes"),jf("waterQuality"),ff(1,100),gf("samplerTypes"),gf("ecosystems"),gf("nhdTypes"),Object(J.e)({key:"submissions/selectLists",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=Jc(n(mu)),r=Jc(n(pu)),e.abrupt("return",{sampleMethods:{descriptor:"sample method",values:Jc(n(su))},towTypes:{descriptor:"tow type",values:n(cu)},fishDietSpecies:{descriptor:"fish diet species",values:Jc(n(xu))},designTypes:{descriptor:"sample design type",values:Jc(n(du))},effortTypes:{descriptor:"sample effort type",values:Jc(n(uu))},samplerTypes:{descriptor:"sampler type",values:Jc(n(su))},ecosystems:{descriptor:"ecosystem",values:a},habitats:{descriptor:"habitat",values:r},ecosystemHabitats:{descriptor:"ecosystem/habitat",values:a.reduce((function(e,t){return[].concat(Object(ci.a)(e),Object(ci.a)(r.map((function(e){return"".concat(t,": ").concat(e)}))))}),[])},nhdTypes:{descriptor:"NHD type",values:Jc(n(bu))}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var Df,zf,Tf,Nf=function(e){Object(cf.a)(n,e);var t=Object(uf.a)(n);function n(e){var a;return Object(lf.a)(this,n),(a=t.call(this)).problem=void 0,a.problem=e,a}return Object(sf.a)(n)}(Object(df.a)(Error)),Af=Object(be.c)(Df||(Df=Object(mi.a)(["\n  .download-template-columns {\n    display: flex;\n  }\n\n  .download-template-button {\n    width: 15em;\n  }\n"]))),Pf=function(e){var t=e.onDownloadTemplate;return Object(fe.b)("div",{css:Af,children:Object(fe.c)("div",{className:"download-template-columns",children:[Object(fe.c)("div",{children:[Object(fe.b)("p",{children:"Welcome to the NAMC online sample submission process."}),Object(fe.b)("p",{children:"The first step to making a new submission is to download the latest Excel template and fill in the information defining your samples. It's important that you always submit data using the latest template and we recommend that you download it each time you wish to make a submission."}),Object(fe.c)("p",{children:["The template helps you by limiting the values that can be used in certain columns. Further information describing each column is available on the"," ",Object(fe.b)("a",{href:"https://namc-usu.org",target:"_blank",rel:"noreferrer",children:"NAMC web site"}),". Note that the template does allow you to submit different types of samples (benthic, zooplankton, drift, fish diet or water quality) within a single Excel template upload."]}),Object(fe.b)("p",{children:"If you cut and paste information into the template, we recommend using \u201cpaste values\u201d."}),Object(fe.b)("p",{children:"Once you have downloaded and populated the latest version of the template with information describing your samples, click next to upload your Excel file and validate the information."}),Object(fe.c)("p",{children:[Object(fe.b)("a",{href:"https://namc-usu.org/contactus.html",target:"_blank",rel:"noreferrer",children:"Contact the NAMC Lab Manager"})," ","if you have questions or experience problems submitting data."]})]}),Object(fe.b)("div",{children:Object(fe.b)(tt.a,{onClick:t,variant:"contained",className:"download-template-button",children:"Download Template"})})]})})},Mf=Object(be.c)(zf||(zf=Object(mi.a)(["\n  button {\n    margin: 0.5em;\n  }\n"]))),Lf=function(e){var t=e.boxId,n=e.onGoToBoxes,a=e.onGoToChainOfCustody;return Object(fe.c)("div",{css:Mf,children:[Object(fe.c)("p",{children:["Your submission was successful. Your submission reference is ",t,"."]}),Object(fe.b)("p",{children:"You should now print and follow the instructions on the chain of custody form. You can track the status of your submission on the customer box listing."}),Object(fe.b)(tt.a,{variant:"outlined",onClick:n,children:"Customer Submission Listing"}),Object(fe.b)(tt.a,{variant:"outlined",onClick:a,children:"Open Chain of Custody Form"})]})},Rf=(Object(be.c)(Tf||(Tf=Object(mi.a)(["\n  .document {\n    font-family: serif;\n    font-size: 12pt;\n    line-height: 1.2;\n    color: black;\n  }\n  u {\n    text-decoration: underline;\n  }\n  i {\n    text-style: italic;\n  }\n  b {\n    font-weight: bold;\n  }\n  th {\n    text-align: center;\n  }\n  td {\n    text-align: left;\n  }\n  .indent {\n    margin-left: 3em;\n    display: inline-block;\n  }\n  .notes-box {\n    border: 1px solid black;\n    width: 100%;\n    height: 5em;\n  }\n  .float-right {\n    display: inline-block;\n    float: right;\n    padding-right: 2em;\n  }\n"]))),[_p({headerName:"Worksheet",field:"wsName",width:150}),_p({headerName:"Cell",colId:"cell",valueGetter:function(e){var t=e.data,n=t.columnNumber,a=t.rowNumber;return n&&a?"".concat(function(e){for(var t=e-1,n="";t>=0;)n="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[t%26]+n,t=Math.floor(t/26)-1;return n}(n)).concat(a):null},width:100}),_p({headerName:"Problem",field:"message",flex:1,minWidth:150}),Gp({headerName:"Column #",field:"columnNumber",width:100}),Gp({headerName:"Row #",field:"rowNumber",width:100})]),_f=n(309),Ff=n(300),Ef=n.n(Ff),qf=n(299),Bf=n.n(qf);h.a.extend(y.a);var Uf=function(e){if(void 0===e.value||null===e.value)throw new bh({message:"Cell is required"})},Gf=function(e){if(e.value&&"number"!==typeof e.value)throw new bh({message:"Cell must be a number"})},Wf=function(e,t){if(e.value&&(Gf(e),e.value!==Math.trunc(Number(e.value))))throw new bh({message:"Cell must be a whole number"})},Vf=function(e,t){return function(n,a){if(n.value&&(Gf(n),n.value<e||n.value>t))throw new bh({message:"Cell must be a number between ".concat(e," and ").concat(t)})}},Hf=function(e,t){if(e.value&&(Gf(e),e.value<=0))throw new bh({message:"Cell must be a number greater than 0"})},Jf=function(e){return function(t,n){if(t.value){if(null===n||void 0===n||!n.lists[e])throw new Error('Missing lookup list "'.concat(e,'"'));var a=n.lists[e];if(!a.values.map((function(e){return e.toLowerCase()})).includes(String(t.value).toLowerCase()))throw new bh({message:"Cell must be a valid ".concat(a.descriptor)})}}},Yf=function(e){var t="2000-01-01";if(e.value){if(!(e.value instanceof Date))throw new bh({message:"Cell must be a date"});if(h()(e.value).isBefore(t))throw new bh({message:"Cell must be a date after ".concat(t)})}},Qf=function(e){if(e.value){if(!(e.value instanceof Date))throw new bh({message:"Cell must be a date"});e.value=h.a.utc(e.value).format("YYYY-MM-DD")}},$f=function(e){e.value=e.value&&String(e.value)},Zf=function(e,t){e.value&&(Gf(e),"number"===typeof e.value&&(e.value=e.value/100))},Kf=function(e){var t=function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.sample,"string"===typeof(r=n.fieldName)){t.next=3;break}return t.abrupt("return");case 3:a[r]=e;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t.isSamplePostProcessor=!0,t},Xf=function(e,t,n){var a=function(){var a=Object(ui.a)(pi.a.mark((function a(r){var i,o,s,l,c,u,p;return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=r.sample,"string"===typeof(o=r.fieldName)){a.next=3;break}return a.abrupt("return");case 3:if("string"===typeof(s=i[o])){a.next=6;break}return a.abrupt("return");case 6:l=s.split(e),c=Object(d.a)(l,2),u=c[0],p=c[1],i[t]=u.trim(),i[n]=(null!==p&&void 0!==p?p:"").trim(),delete i[o];case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return a.isSamplePostProcessor=!0,a},eh=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s,l;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.config,r=t.rowNumber,i=t.problems,o=n.latitude,s=n.longitude,l=a.api,"number"!==typeof o||"number"!==typeof s){e.next=8;break}return e.next=6,wl(l)({latitude:o,longitude:s});case 6:e.sent||i.push({type:"row",rowNumber:r,message:"Latitude/Longitude is outside of accepted area."});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();eh.isSamplePostProcessor=!0;var th=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.rowNumber,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();th.isSamplePostProcessor=!0;var nh=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.sampleNumber,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();nh.isSamplePostProcessor=!0;var ah=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sample,a=t.fieldName,r=t.templateVersion,"string"===typeof a){e.next=3;break}return e.abrupt("return");case 3:n[a]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();ah.isSamplePostProcessor=!0;var rh,ih,oh,sh=[5],lh="Lookups",ch=[function(e){if(!("string"===typeof e.value||"number"===typeof e.value||"boolean"===typeof e.value||"undefined"===typeof e.value||e.value instanceof Date||null===e.value))throw new bh({message:"Cell must be a simple value (e.g. no formulas)"})},function(e){"string"===typeof e.value&&(e.value=e.value.trim()||null)}],uh={ALL:{sampleIndex:[nh],rowNumber:[th]},Benthic:{sampleType:[Kf("benthic")],siteId:[Uf,$f],visitId:[$f],sampleDate:[Uf,Yf,Qf],jarCount:[Uf,Wf,Vf(1,100)],fieldSplit:[Uf,Vf(0,100),Zf],latitude:[Uf,Gf],longitude:[Uf,Gf],waterbodyName:[Uf],ecosystemHabitat:[Uf,Jf("ecosystemHabitats"),Xf(":","ecosystem","habitat")],sampleDesign:[Uf,Jf("designTypes")],sampleEffortStandardization:[Uf,Jf("effortTypes")],areaTime:[Hf,function(e){var t=function(){var t=Object(ui.a)(pi.a.mark((function t(n){var a,r,i,o,s,l;return pi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.sample,r=n.fieldName,i=n.rowNumber,o=n.columnNumber,s=n.problems,l=a[r],!e(a)||void 0!==l&&null!==l||s.push({type:"row",rowNumber:i,columnNumber:o,message:"Cell is required"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t.isSamplePostProcessor=!0,t}((function(e){return"Not Standardized"===e.sampleEffortStandardization}))],samplerType:[Uf,Jf("samplerTypes")],meshSize:[Hf,Wf],nhdType:[Jf("nhdTypes")],nhdId:[],notes:[$f]},"Fish Diet":{sampleType:[Kf("fishDiet")],siteId:[Uf,$f],visitId:[$f],sampleDate:[Uf,Yf,Qf],jarCount:[Uf,Wf,Vf(1,100)],fieldSplit:[Uf,Vf(0,100),Zf],latitude:[Uf,Gf],longitude:[Uf,Gf],waterbodyName:[Uf],ecosystem:[Uf,Jf("ecosystems")],samplerType:[Uf,Jf("samplerTypes")],fishSpecies:[Uf,Jf("fishDietSpecies")],fishLength:[Uf,Hf],fishMass:[Uf,Hf],nhdType:[Jf("nhdTypes")],nhdId:[],notes:[$f]},Zooplankton:{sampleType:[Kf("zooplankton")],siteId:[Uf,$f],visitId:[$f],sampleDate:[Uf,Yf,Qf],jarCount:[Uf,Wf,Vf(1,100)],fieldSplit:[Uf,Vf(0,100),Zf],latitude:[Uf,Gf],longitude:[Uf,Gf],waterbodyName:[Uf],ecosystemHabitat:[Uf,Jf("ecosystemHabitats"),Xf(":","ecosystem","habitat")],sampleDesign:[Uf,Jf("designTypes")],samplerType:[Uf,Jf("samplerTypes")],meshSize:[Hf,Wf],netArea:[Hf],towLength:[Hf],towType:[Jf("towTypes")],nhdType:[Jf("nhdTypes")],nhdId:[],notes:[$f]},Drift:{sampleType:[Kf("drift")],siteId:[Uf,$f],visitId:[$f],sampleDate:[Uf,Yf,Qf],jarCount:[Uf,Wf,Vf(1,100)],fieldSplit:[Uf,Vf(0,100),Zf],latitude:[Uf,Gf],longitude:[Uf,Gf],waterbodyName:[Uf],ecosystemHabitat:[Uf,Jf("ecosystemHabitats"),Xf(":","ecosystem","habitat")],samplerType:[Uf,Jf("samplerTypes")],meshSize:[Hf,Wf],netArea:[Hf],duration:[Hf],velocity:[Hf],nhdType:[Jf("nhdTypes")],nhdId:[],notes:[$f]},"Water Quality":{sampleType:[Kf("waterQuality")],siteId:[Uf,$f],visitId:[$f],sampleDate:[Uf,Yf,Qf],jarCount:[Uf,Wf,Vf(1,100)],samplerType:[Uf,Jf("samplerTypes")],waterbodyName:[Uf],ecosystem:[Uf,Jf("ecosystems")],latitude:[Uf,Gf],longitude:[Uf,Gf],nhdType:[Jf("nhdTypes")],nhdId:[],notes:[$f]}},dh=Object(J.e)({key:"submissions/selectLists",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=Jc(n(mu)),r=Jc(n(pu)),e.abrupt("return",{sampleMethods:{descriptor:"sample method",values:Jc(n(su))},towTypes:{descriptor:"tow type",values:n(cu)},fishDietSpecies:{descriptor:"fish diet species",values:Jc(n(xu))},designTypes:{descriptor:"sample design type",values:Jc(n(du))},effortTypes:{descriptor:"sample effort type",values:Jc(n(uu))},samplerTypes:{descriptor:"sampler type",values:Jc(n(su))},ecosystems:{descriptor:"ecosystem",values:a},habitats:{descriptor:"habitat",values:r},ecosystemHabitats:{descriptor:"ecosystem/habitat",values:a.reduce((function(e,t){return[].concat(Object(ci.a)(e),Object(ci.a)(r.map((function(e){return"".concat(t,": ").concat(e)}))))}),[])},nhdTypes:{descriptor:"NHD type",values:Jc(n(bu))}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ph=function(e){return e.isSamplePostProcessor},mh=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i,o,s,l,c,u,p;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sample,a=t.schema,r=t.config,i=t.rowNumber,o=t.sampleNumber,s=t.templateVersion,l=t.columnKeys,c=Object(ba.a)({},n),u=[],p=[],Object.entries(a).forEach((function(e){var t=Object(d.a)(e,2),n=t[0];t[1].filter(ph).forEach((function(e){p.push(e({sample:c,config:r,rowNumber:i,columnNumber:l.findIndex((function(e){return e===n})),sampleNumber:o,templateVersion:s,fieldName:n,problems:u}))}))})),e.next=7,Promise.all(p);case 7:return e.abrupt("return",{sample:c,problems:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bh=function(e){Object(cf.a)(n,e);var t=Object(uf.a)(n);function n(e){var a;return Object(lf.a)(this,n),(a=t.call(this)).problem=void 0,a.problem=e,a}return Object(sf.a)(n)}(Object(df.a)(Error)),fh=function(e){return!e.isSamplePostProcessor},hh=function(){var e=Object(ui.a)(pi.a.mark((function e(t,n){var a,r,i,o,s,l,c,u,p;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],r=[],i={},o=[],e.prev=4,s=t.worksheets.find((function(e){return e.name===lh}))){e.next=8;break}throw new bh({type:"fatal",message:"File does not appear to be a valid template."});case 8:if(l=function(){var e={};return t.definedNames.model.forEach((function(t){var n=t.name,a=t.ranges,r=Object(d.a)(a,1)[0],i=s.getCell(r.split("!")[1]).value;e[n]=i})),e}(),c=l.FirstDataRow,u=l.TemplateVersion,"number"===typeof c){e.next=12;break}throw new bh({type:"fatal",message:'File does not appear to be a valid template: "FirstDataRow" is missing.'});case 12:if("number"===typeof u){e.next=14;break}throw new bh({type:"fatal",message:'File does not appear to be a valid template: "TemplateVersion" is missing.'});case 14:if(sh.includes(u)){e.next=16;break}throw new bh({type:"fatal",message:"File version of ".concat(u," is not accepted. Accepted versions are: ").concat(sh.map((function(e){return"".concat(e)})).join(", "),".")});case 16:return p=1,t.eachSheet((function(e){var t=e.name;if(t!==lh){var s=e.getRow(c-1).values.map(String),l=uh[t];if(!l)throw new bh({wsName:t,type:"fatal",message:'Unrecognized worksheet "'.concat(t,'".')});var d=uh.ALL,m=Object(ba.a)(Object(ba.a)({},d),l);e.eachRow((function(e,l){if(!(l<c)){try{var d={},b=[];e.eachCell({includeEmpty:!0},(function(e,a){var r=s[a];if(r||e.value){if(!r)throw new bh({type:"row",wsName:t,rowNumber:l,columnNumber:a,message:"Unidentified cell: not in known column"});var i=m[r];if(!i)throw new bh({type:"row",wsName:t,rowNumber:l,columnNumber:a,message:"Unexpected cell: column is not in schema"});try{ch.filter(fh).forEach((function(t){t(e,n)})),i.filter(fh).forEach((function(t){t(e,n)})),"string"===typeof e.value||"number"===typeof e.value||"boolean"===typeof e.value||"undefined"===typeof e.value||null===e.value?d[r]=e.value:d[r]="UNKNOWN"}catch(o){if(!(o instanceof bh))throw o;b.push(Object(ba.a)({wsName:t,type:"row",rowNumber:l,columnNumber:a},o.problem))}}})),o.push(mh({sample:d,schema:m,config:n,rowNumber:l,sampleNumber:p,templateVersion:u,columnKeys:s}).then((function(e){var n=[].concat(b,Object(ci.a)(e.problems.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{wsName:t})}))));n.length>0?r.push.apply(r,Object(ci.a)(n)):(i[t]=(i[t]||0)+1,a.push(e.sample))})))}catch(f){if(!(f instanceof bh))throw f;r.push(f.problem)}p+=1}}))}})),e.next=20,Promise.all(o);case 20:return e.abrupt("return",{samples:a,info:i,problems:r,templateVersion:u});case 23:if(e.prev=23,e.t0=e.catch(4),!(e.t0 instanceof bh)){e.next=27;break}return e.abrupt("return",{samples:[],info:{},problems:[e.t0.problem],templateVersion:null});case 27:return e.abrupt("return",{samples:[],info:{},problems:[{type:"fatal",message:"Fatal error while processing file: ".concat(e.t0)}],templateVersion:null});case 28:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t,n){return e.apply(this,arguments)}}(),gh=(Object(be.c)(rh||(rh=Object(mi.a)(["\n  .download-template-columns {\n    display: flex;\n  }\n\n  .download-template-button {\n    width: 15em;\n  }\n"]))),Object(be.c)(ih||(ih=Object(mi.a)(["\n  button {\n    margin: 0.5em;\n  }\n"]))),function(e){var t=e.updateState,n=e.processingToken,a=e.processingStatus,r=e.filename,i=Object(J.i)(dh),o=ae(),s=Object(_f.a)({onDrop:function(e){var a=function(e){t((function(t){t.processingStatus="empty",t.processResult=Dh,t.filename="",t.errorMessage=e}))};if(e.length>1)a("Only a single template file is allowed.");else{var r=e[0],s=new FileReader,l=n+1;t((function(e){e.lastProcessingStatus=e.processingStatus,e.processingStatus="uploading",e.processingToken=l,e.errorMessage=""})),s.onerror=function(){a("Could not read template file.")},s.onload=Object(ui.a)(pi.a.mark((function e(){var n,c,u;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t((function(e){e.processingStatus="processing",e.lastFilename=e.filename,e.filename=r.name})),e.prev=1,(n=s.result)instanceof ArrayBuffer){e.next=5;break}throw new Error("ArrayBuffer error");case 5:return c=new z.a.Workbook,e.next=8,c.xlsx.load(n);case 8:return e.next=10,hh(c,{lists:i,api:o});case 10:u=e.sent,t((function(e){e.processingToken===l&&(e.processingStatus="processed",e.processResult=u)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a("Could not parse template file.");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));try{s.readAsArrayBuffer(r)}catch(c){a("Could not read template file.")}}},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=s.getRootProps,c=s.getInputProps,u=s.isDragActive,d="uploading"===a||"processing"===a;return Object(fe.c)("div",Object(ba.a)(Object(ba.a)({},d?{}:l()),{},{css:{border:u?"3px dashed blue":"3px dashed lightgrey",minHeight:"6em",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:d?"default":"pointer",position:"relative"},children:[d?Object(fe.c)("div",{css:{width:"80%"},children:[Object(fe.b)(Ct.a,{}),Object(fe.b)("div",{css:{textAlign:"center"},children:Object(fe.b)(tt.a,{onClick:function(){t((function(e){e.processingStatus=e.lastProcessingStatus,e.filename=e.lastFilename,e.processingToken++}))},children:"Cancel"})})]}):Object(fe.c)("div",{css:{display:"flex",width:"80%",minHeight:"3em"},children:[Object(fe.b)("div",{css:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",borderRight:"1px solid grey",paddingRight:"1em",textAlign:"center"},children:r?Object(fe.c)(fe.a,{children:[Object(fe.b)(Bf.a,{})," ",r]}):Object(fe.c)(fe.a,{children:[Object(fe.b)(Ef.a,{})," No template"]})}),Object(fe.b)("div",{css:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"1em",textAlign:"center"},children:Object(fe.c)("span",{children:["Drop here or\xa0",Object(fe.b)("a",{children:"choose template"})]})})]}),Object(fe.b)("input",Object(ba.a)({},c()))]}))}),yh=function(){return Object(fe.c)("div",{css:{height:"100%",maxWidth:"70rem",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"1em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"10em",variant:"rectangular"})]})},vh=["active","className","children"],xh=function(e){var t=e.active,n=e.className,a=e.children,r=Object(gi.a)(e,vh);return Object(fe.b)("div",Object(ba.a)(Object(ba.a)({className:n,css:{width:"100%",height:"100%",position:"absolute",visibility:t?"visible":"hidden"}},r),{},{children:a}))},Oh="".concat("","/namc_sample_upload_template.xlsx");!function(e){e[e.prepare=0]="prepare",e[e.upload=1]="upload",e[e.review=2]="review",e[e.finished=3]="finished"}(oh||(oh={}));var jh=["Download Submission Template","Upload Template","Review","Finished"],wh=function(){var e={},t=1;return function(n){var a=JSON.stringify(n);return e[a]||(e[a]=t++),e[a]}}(),Ih=Object(J.e)({key:"CustomerSubmission/selectOrganizationOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(Wu),e.abrupt("return",a.map((function(e){return{value:e.id,label:e.name}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Sh=Object(J.e)({key:"CustomerSubmission/selectUserOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(md),e.abrupt("return",a.map((function(e){var t=e.id,n=e.fullName,a=e.organizationName;return{value:t,label:"".concat(n," (").concat(a,")")}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),kh=Object(J.e)({key:"CustomerSubmission/selectUsStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(fu),e.abrupt("return",a.map((function(e){return{value:e.id,label:e.abbreviation}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ch=Object(J.b)({key:"CustomerSubmission/expandJsonState",default:!1}),Dh={samples:[],info:{},problems:[],templateVersion:null},zh=function(e){return Object(fe.b)("div",Object(ba.a)({css:{margin:"1em 0",fontWeight:"bold",display:"flex",alignItems:"center"}},e))},Th=sa((function(){var e=Object(J.h)(Ch),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(J.i)(ud),i=Object(J.i)(hu),o=Object(J.i)(vu),c=bv(),u=ae(),m=Gc(),f=Je(),h=Object(s.useRef)(null),g=C(function(e){var t=e.user;return{processingStatus:"empty",processResult:Dh,filename:"",processingToken:0,errorMessage:"",lastProcessingStatus:"empty",lastFilename:"",values:{existingOrganizationId:t.affiliationId,submitterId:t.id,organizationMode:"existing",organizationName:"",address1:"",address2:"",city:"",usStateId:null,zipCode:"",phone:""}}}({user:r}),[]),y=Object(d.a)(g,3),v=y[0],x=(y[1],y[2]),O=l.a.useState(oh.prepare),j=Object(d.a)(O,2),w=j[0],I=j[1],S=v.processingStatus,k=v.processingToken,D=v.processResult,z=v.errorMessage,T=v.filename,N=v.boxId,A=v.values,P=function(){var e={};switch(A.organizationMode){case"existing":e={existingOrganizationId:!A.existingOrganizationId};break;case"new":e={organizationName:A.organizationName.trim().length<3,address1:!A.address1.trim(),city:!A.city.trim(),zipCode:!A.zipCode.trim().match(/^[\d-]{5,}$/),usStateId:!A.usStateId,phone:!A.phone}}if(Object.values(e).some((function(e){return e})))return e}(),M=D.samples,L=D.info,R=D.problems,_=D.templateVersion,F=function(e,t){x((function(n){Object.assign(n.values,Object(zp.a)({},e,t))}))},E=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n,a,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,x((function(e){e.processingStatus="submitting"})),e.t0=A.organizationMode,e.next="new"===e.t0?5:"existing"===e.t0?13:17;break;case 5:if("number"===typeof A.usStateId){e.next=7;break}throw new Error("missing state");case 7:return e.next=9,ki(u,m)({name:A.organizationName.trim(),typeId:o,address1:A.address1.trim(),address2:A.address2.trim(),city:A.city.trim(),phone:A.phone.trim(),usStateId:A.usStateId,countryId:i,zipCode:A.zipCode.trim()});case 9:return n=e.sent,x((function(e){e.createdOrganizationId=n})),t=n,e.abrupt("break",17);case 13:if(A.existingOrganizationId){e.next=15;break}throw new Error("missing customer ID");case 15:return t=A.existingOrganizationId,e.abrupt("break",17);case 17:if(a=A.submitterId){e.next=20;break}throw new Error("missing submitter ID");case 20:if(_){e.next=22;break}throw new Error("parsing did not return template version");case 22:return e.next=24,_i(u,m)({customerId:t,submitterId:a,data:{appVersion:b,templateVersion:_,samples:M}});case 24:r=e.sent,x((function(e){e.processingStatus="submitted",e.boxId=r})),I(oh.finished),e.next=34;break;case 29:return e.prev=29,e.t1=e.catch(0),x((function(e){e.processingStatus="processed"})),f.error("Failed to create submission: ".concat(e.t1)),e.abrupt("return");case 34:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}(),q=Object(s.useMemo)((function(){return R.map((function(e){return Object(ba.a)({id:wh(e)},e)}))}),[R]),B=M.length>0&&0===R.length&&"processed"===S&&!P,U=D.problems.some((function(e){return"fatal"===e.type})),G=!U&&D.problems.length>0,W="processed"===S&&0===D.samples.length,V=z?Object(fe.c)("span",{children:["Error reading file. Did you choose the correct file? (",z,")"]}):U?Object(fe.c)("span",{children:["Error processing file. Did you choose the correct file? (",D.problems[0].message,")"]}):G?Object(fe.c)("span",{children:["Correct the following ",D.problems.length," problems and try uploading again:"]}):W?Object(fe.b)("span",{children:"File does not contain any samples."}):null,H=r.hasPermission(re.NAMCResource.individuals,re.GrantAction.readAny),Y=r.hasPermission(re.NAMCResource.organizations,re.GrantAction.readAny)&&r.hasPermission(re.NAMCResource.organizations,re.GrantAction.createAny);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",maxWidth:"70rem"},children:[Object(fe.b)(Hb.a,{activeStep:w,children:jh.map((function(e){return Object(fe.b)(Jb.a,{children:Object(fe.b)(Yb.a,{children:e})},e)}))}),Object(fe.c)("div",{css:{display:"flex",alignItems:"center",margin:"2em 0"},children:[Object(fe.b)("div",{children:Object(fe.c)(tt.a,{variant:"outlined",onClick:function(){return I((function(e){return e-1}))},disabled:w===oh.prepare||w===oh.finished||"submitting"===S,children:[Object(fe.b)(Xb.a,{}),"Back"]})}),Object(fe.c)("div",{css:{flex:1,textAlign:"center",fontSize:"125%"},children:["Step ",w+1,": ",jh[w]]}),Object(fe.c)("div",{children:[w<oh.review&&Object(fe.c)(tt.a,{variant:"outlined",onClick:function(){return I((function(e){return e+1}))},disabled:w===oh.upload&&!B,children:["Next",Object(fe.b)(tf.a,{})]}),w>=oh.review&&Object(fe.c)(tt.a,{variant:w===oh.finished?"outlined":"contained",onClick:E,disabled:!B||w===oh.finished,children:["Submit\xa0",Object(fe.b)(af.a,{})]})]})]}),Object(fe.c)("div",{css:{flex:1,position:"relative"},children:[Object(fe.c)(xh,{active:w===oh.prepare,children:[Object(fe.b)("a",{ref:h,href:Oh,css:{visibility:"hidden",position:"absolute"},download:!0}),Object(fe.b)(Pf,{onDownloadTemplate:function(){var e;null===(e=h.current)||void 0===e||e.click()}})]}),Object(fe.c)(xh,{active:w===oh.upload,css:{display:"flex",flexDirection:"column"},children:[Object(fe.b)(gh,{updateState:x,processingToken:k,processingStatus:S,filename:T}),V&&Object(fe.c)(zh,{children:[Object(fe.b)(Ue.a,{}),"\xa0",V]}),B&&Object(fe.c)(zh,{children:[Object(fe.b)(of.a,{}),"\xa0Ready to review. Click Next to continue."]}),G&&Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{columnDefs:Rf,rows:q})})]}),Object(fe.c)(xh,{active:w===oh.review&&"submitting"!==S,children:[Object(fe.c)("div",{css:{display:"flex",gap:"1em"},children:[Object(fe.c)("div",{css:{minWidth:"20em",flex:1},children:[Object(fe.c)(ve.a,{component:"fieldset",css:{width:"100%"},children:[Object(fe.b)(Zb.a,{component:"legend",children:"User"}),H?Object(fe.b)(Ee,{optionsSelector:Sh,valueLabel:r.fullName,value:A.submitterId,onChange:function(e){return F("submitterId",e)}}):Object(fe.b)(je,{value:r.fullName})]}),Object(fe.b)("div",{css:{paddingTop:"1em"},children:Object(fe.c)(ve.a,{component:"fieldset",css:{width:"100%"},children:[Object(fe.b)(Zb.a,{component:"legend",children:"Organization"}),Y&&Object(fe.c)($b.a,{row:!0,value:A.organizationMode,onChange:function(e,t){return F("organizationMode",t)},children:[Object(fe.b)(mt.a,{value:"existing",control:Object(fe.b)(Qb.a,{}),label:"Existing"}),Object(fe.b)(mt.a,{value:"new",control:Object(fe.b)(Qb.a,{}),label:"New"})]})]})}),"existing"===A.organizationMode&&(Y?Object(fe.b)(Ee,{optionsSelector:Ih,valueLabel:r.organizationName,value:A.existingOrganizationId,onChange:function(e){return F("existingOrganizationId",e)},error:null===P||void 0===P?void 0:P.existingOrganizationId}):Object(fe.b)(je,{value:r.organizationName})),"new"===A.organizationMode&&Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'\n                        "organizationName organizationName"\n                        "address1         address1"\n                        "address2         address2"\n                        "city             city"\n                        "usStateId        zipCode"\n                        "phone            ."\n                      '},children:[Object(fe.b)(Ht,{gridArea:"organizationName",value:A.organizationName,onChange:function(e){return F("organizationName",e)},label:"Organization Name",error:null===P||void 0===P?void 0:P.organizationName}),Object(fe.b)(Ht,{gridArea:"address1",value:A.address1,onChange:function(e){return F("address1",e)},label:"Address 1",error:null===P||void 0===P?void 0:P.address1}),Object(fe.b)(Ht,{gridArea:"address2",value:A.address2,onChange:function(e){return F("address2",e)},label:"Address 2",error:null===P||void 0===P?void 0:P.address2}),Object(fe.b)(Ht,{gridArea:"city",value:A.city,onChange:function(e){return F("city",e)},label:"City",error:null===P||void 0===P?void 0:P.city}),Object(fe.b)(Ee,{gridArea:"usStateId",value:A.usStateId,valueLabel:"State",onChange:function(e){return F("usStateId",e)},optionsSelector:kh,label:"State",error:null===P||void 0===P?void 0:P.usStateId,isClearable:!0}),Object(fe.b)(Ht,{gridArea:"zipCode",value:A.zipCode,onChange:function(e){return F("zipCode",e)},label:"Zip",error:null===P||void 0===P?void 0:P.zipCode}),Object(fe.b)(Ht,{gridArea:"phone",value:A.phone,onChange:function(e){return F("phone",e)},label:"Phone",error:null===P||void 0===P?void 0:P.phone})]})]}),Object(fe.c)("div",{css:{flex:1},children:[Object(fe.b)(Zb.a,{component:"legend",children:"Submission Summary"}),Object(fe.c)("table",{css:{borderCollapse:"collapse",th:{fontWeight:"normal"},td:{border:"1px solid grey"},"th,td":{padding:"0.75em"}},children:[Object(fe.b)("thead",{children:Object(fe.c)("tr",{children:[Object(fe.b)("th",{children:"Sample Type"}),Object(fe.b)("th",{children:"# Samples"})]})}),Object(fe.b)("tbody",{children:Object.entries(L).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(fe.c)("tr",{children:[Object(fe.b)("td",{children:n}),Object(fe.b)("td",{css:{textAlign:"right"},children:a})]},n)}))})]})]})]}),B&&Object(fe.c)(zh,{children:[Object(fe.b)(of.a,{}),"\xa0Ready to submit. Click Submit to finish."]}),P&&Object(fe.c)(zh,{children:[Object(fe.b)(Ue.a,{}),"\xa0Correct the above address issues."]}),p&&Object(fe.c)("div",{children:[Object(fe.b)(tt.a,{onClick:function(){a((function(e){return!e}))},children:n?"Hide Sample Data":"Show Sample Data"}),n&&Object(fe.b)("pre",{children:JSON.stringify(M,null,2)})]})]}),Object(fe.b)(xh,{active:w===oh.review&&"submitting"===S,children:Object(fe.b)(Ct.a,{})}),Object(fe.b)(xh,{active:w===oh.finished,children:N&&Object(fe.b)(Lf,{boxId:N,onGoToBoxes:function(){return c.boxes()},onGoToBoxDetail:function(){return c.boxDetail({boxId:N})},onGoToChainOfCustody:function(){return c.chainOfCustodyForm({boxId:N})}})})]})]})}),(function(){return Object(fe.b)(yh,{})})),Nh=function(e){var t=e.isOpen,n=e.onClose,a=e.taxa,r=e.onAdd,i=Object(s.useState)(null),o=Object(d.a)(i,2),l=o[0],c=o[1];return Object(fe.c)(nt.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"md",children:[Object(fe.b)(it.a,{children:"Add Taxonomy Filtering"}),Object(fe.b)(rt.a,{children:Object(fe.b)("div",{css:{padding:"1em 0"},children:Object(fe.b)(aa,{label:"Taxonomy",value:l,onChange:c,options:a,ungrouped:!0})})}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:n,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:function(){l&&(r(l),n(),c(null))},disabled:!l,children:"Add"})]})]})},Ah=["attributeValuesText"],Ph=["rarefactionTypeId","calculationId"],Mh=function(e){var t,n=e.metric,a=ae(),r=Gc(),i=Je(),o=bv(),l=Object(J.i)(ud),c=!n,u=Hc(Object(J.i)(wu)),p=Hc(Object(J.i)(ju)),m=Hc(Object(J.i)(Iu)),b=Hc(Object(J.i)(ku)),f=Hc(Object(J.i)(id)),h=Object(J.i)(sd),g=C(function(e){var t,n,a=e.metric,r=null!==a&&void 0!==a?a:{},i=r.name,o=void 0===i?"":i,s=r.abbreviation,l=void 0===s?"":s,c=r.groupId,u=void 0===c?null:c,d=r.displayText,p=void 0===d?"":d,m=r.isActive,b=void 0!==m&&m,f=r.description,h=void 0===f?"":f,g=r.calculationId,y=void 0===g?null:g,v=r.reportIds,x=void 0===v?[]:v,O=r.rarefactionTypeId,j=void 0===O?null:O,w=r.taxonomyIds,I=void 0===w?[]:w,S=r.attributeId;return{editMode:a?"stopped":"started",isDirty:!1,values:{name:o,abbreviation:l,groupId:u,displayText:p,isActive:b,description:h,calculationId:y,reportIds:x,rarefactionTypeId:j,taxonomyIds:I,attributeId:void 0===S?null:S,attributeValuesText:null!==(t=null===a||void 0===a||null===(n=a.attributeValues)||void 0===n?void 0:n.join(", "))&&void 0!==t?t:""}}}({metric:n}),[n]),y=Object(d.a)(g,3),v=y[0],x=(y[1],y[2]),O=Object(s.useState)(!1),j=Object(d.a)(O,2),w=j[0],I=j[1],S=Object(s.useState)(!1),k=Object(d.a)(S,2),D=k[0],z=k[1],T=v.values,N=v.editMode,P=v.isDirty,M=T.attributeValuesText.split(",").map((function(e){return e.trim()})).filter(A.identity),L=function(){var e={name:!T.name.trim(),abbreviation:!T.abbreviation.trim(),groupId:!T.groupId,calculationId:!T.calculationId,rarefactionTypeId:!T.rarefactionTypeId,attributeValuesText:!!T.attributeId&&0===M.length||!T.attributeId&&M.length>0};if(Object.values(e).some((function(e){return e})))return e}(),R="stopped"===N,_="started"===N,F="stopping"===N,E="deleting"===N,q=function(e,t){x((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},B=function(e){return function(t){return q(e,t)}},G=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,s,l,u,d,p;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x((function(e){e.editMode="stopping"})),T.attributeValuesText,t=Object(gi.a)(T,Ah),s=U(Object(ba.a)({attributeValues:M},t)),l=s.rarefactionTypeId,u=s.calculationId,d=Object(gi.a)(s,Ph),l&&u){e.next=6;break}throw new Error("Missing Rarefaction type or Calculation.");case 6:if(!c){e.next=14;break}return e.next=9,xi(a,r)(Object(ba.a)({rarefactionTypeId:l,calculationId:u},d));case 9:p=e.sent,x((function(e){e.editMode="stopped",e.isDirty=!1})),window.setTimeout((function(){o.metricDetail({metricId:p},!0)})),e.next=17;break;case 14:return e.next=16,Ql(a,r)(Object(ba.a)(Object(ba.a)({},d),{},{rarefactionTypeId:l,calculationId:u,id:n.id}));case 16:x((function(e){e.editMode="stopped",e.isDirty=!1}));case 17:e.next=30;break;case 19:e.prev=19,e.t0=e.catch(0),e.t1=e.t0.message,e.next='duplicate key value violates unique constraint "metrics_metric_name_key"'===e.t1?24:'duplicate key value violates unique constraint "metrics_abbreviation_key"'===e.t1?26:28;break;case 24:return i.error('Failed to save: name "'.concat(T.name,'" already in use')),e.abrupt("break",29);case 26:return i.error('Failed to save: abbreviation "'.concat(T.abbreviation,'" already in use')),e.abrupt("break",29);case 28:i.error("Failed to save: ".concat(e.t0));case 29:x((function(e){e.editMode="started"}));case 30:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No metric.");case 3:return x((function(e){e.editMode="deleting"})),e.next=6,Zi(a,r)(n);case 6:i.info("Deleted metric ".concat(n.name)),o.metrics(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),i.error("Failed to delete: ".concat(e.t0)),x((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),V=Object(s.useMemo)((function(){return h.filter((function(e){return!T.taxonomyIds.includes(e.id)}))}),[h,T.taxonomyIds]);return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",minHeight:"3rem",marginBottom:"1rem",gap:"1rem"},children:[_?Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ht,{label:"Metric Name",value:T.name,onChange:function(e){return q("name",e)},error:null===L||void 0===L?void 0:L.name,InputProps:{sx:{fontWeight:"700"}},maxLength:255,fullWidth:!0})}):Object(fe.b)(ia,{children:T.name}),Object(fe.c)("div",{css:{display:"flex",gap:"0.5em",marginLeft:"auto"},children:[(R||E)&&l.hasPermission(re.NAMCResource.metrics,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:E,items:[{key:"edit",label:"Edit Metric",onClick:function(){x((function(e){e.editMode="started",e.lastValues=e.values}))}},Et,{key:"delete",label:"Delete Metric",onClick:function(){I(!0)},disabled:!l.hasPermission(re.NAMCResource.metrics,re.GrantAction.deleteAny)}]}),(_||F)&&Object(fe.c)(fe.a,{children:[!c&&Object(fe.b)(tt.a,{onClick:function(){x((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:F,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:G,variant:"contained",disabled:!P||F||!!L,children:"Save"})]})]})]}),Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateAreas:'\n              "abbreviation         groupId                 id"\n              "rarefactionTypeId    calculationId           isActive"\n              "displayText          reportIds               reportIds"\n              "description          description             description"\n              "taxonomyIds          attributeId             attributeValuesText"\n            '},children:[Object(fe.b)(je,{gridArea:"id",value:null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"TBD",label:"Metric ID"}),Object(fe.b)(Ht,{gridArea:"abbreviation",value:T.abbreviation,onChange:B("abbreviation"),label:"Abbreviation",readOnly:!_,error:null===L||void 0===L?void 0:L.abbreviation,maxLength:50}),Object(fe.b)(Ee,{gridArea:"groupId",label:"Metric Group",value:T.groupId,onChange:B("groupId"),options:u,readOnly:!_,error:null===L||void 0===L?void 0:L.groupId}),Object(fe.b)(Ee,{gridArea:"rarefactionTypeId",label:"Rarefaction",value:T.rarefactionTypeId,onChange:B("rarefactionTypeId"),options:b,readOnly:!_,error:null===L||void 0===L?void 0:L.rarefactionTypeId}),Object(fe.b)(Ee,{gridArea:"calculationId",label:"Calculation",value:T.calculationId,onChange:B("calculationId"),options:p,readOnly:!_,error:null===L||void 0===L?void 0:L.calculationId}),Object(fe.b)(ft,{gridArea:"isActive",value:T.isActive,onChange:B("isActive"),label:"Is Active",readOnly:!_}),Object(fe.b)(Ht,{gridArea:"displayText",value:T.displayText,onChange:B("displayText"),label:"Display Text",readOnly:!_,error:null===L||void 0===L?void 0:L.displayText,maxLength:255}),Object(fe.b)(Se,{gridArea:"reportIds",label:"Included In the Following Reports",value:T.reportIds,onChange:B("reportIds"),options:m,readOnly:!_,error:null===L||void 0===L?void 0:L.reportIds}),Object(fe.b)(Ht,{gridArea:"description",value:T.description,onChange:B("description"),label:"Description",readOnly:!_,error:null===L||void 0===L?void 0:L.description,multiline:!0,minRows:2}),Object(fe.b)("div",{css:{gridArea:"taxonomyIds"},children:Object(fe.b)(je,{label:"Taxonomy Filtering",value:Object(fe.c)("div",{css:{flex:1,display:"flex",flexWrap:"wrap",gap:"0.4em",alignItems:"center"},children:[T.taxonomyIds.length>0?T.taxonomyIds.map((function(e){var t,n;return Object(fe.b)(et,{label:null!==(t=null===(n=h.find((function(t){return t.id===e})))||void 0===n?void 0:n.name)&&void 0!==t?t:"?",onDelete:_?function(){q("taxonomyIds",T.taxonomyIds.filter((function(t){return t!==e})))}:void 0},e)})):!_&&"\u2014",_&&Object(fe.b)(Ge.a,{onClick:function(){z(!0)},children:Object(fe.b)(Pm.a,{})})]})})}),Object(fe.b)(Ee,{gridArea:"attributeId",label:"Attribute Filter",value:T.attributeId,onChange:B("attributeId"),options:f,readOnly:!_,error:null===L||void 0===L?void 0:L.attributeId,isClearable:!0}),Object(fe.b)(Ht,{gridArea:"attributeValuesText",value:T.attributeValuesText,onChange:B("attributeValuesText"),label:"Attribute Values",readOnly:!_,error:null===L||void 0===L?void 0:L.attributeValuesText,multiline:!0,minRows:2})]})]}),Object(fe.b)(st,{title:"Confirm Delete Metric",isOpen:w,onClose:function(){I(!1)},onConfirm:W,children:"Are you sure you want to delete this metric?"}),Object(fe.b)(Nh,{isOpen:D,taxa:V,onClose:function(){z(!1)},onAdd:function(e){q("taxonomyIds",[].concat(Object(ci.a)(T.taxonomyIds),[e]))}}),P&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},Lh=sa((function(e){var t=e.metricId,n=Object(J.i)(t?nd(Number(t)):Xu);return t&&!n?Object(ue.jsxs)("h2",{children:["Metric ",t," not found."]}):Object(ue.jsx)(Mh,{metric:n})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular",width:"100%"}),Object(fe.b)(Pe.a,{height:"10em",variant:"rectangular",width:"100%"})]})})),Rh=[Rp({headerName:"Metric Name",field:"title",flex:1,minWidth:140}),_p({headerName:"Metric ID",field:"id",width:120}),_p({field:"abbreviation",flex:1,minWidth:140}),_p({field:"groupName",flex:1,minWidth:140}),_p({field:"codeFunction",flex:1,minWidth:140})],_h=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},Fh=Object(J.b)({key:"MetricsListing/textFilterState",default:""}),Eh=sa((function(){var e=bv(),t=Object(J.i)(ud),n=Object(J.i)(td),a=Zt(Object(J.h)(Fh)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];return l&&e.push({id:"text",label:'Name/Abbreviation contains "'.concat(l,'"'),filterFn:function(e){var t=e.name,n=e.abbreviation;return t.toLowerCase().includes(l.toLowerCase())||n.toLowerCase().includes(l.toLowerCase())},onDelete:c}),e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(t){return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:t.name,onClick:function(){e.metricDetail({metricId:t.id})}}})}))}),[u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)($t,{value:i,onChange:o,label:"Metric Name or Abbreviation"}),t.hasPermission(re.NAMCResource.metrics,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){e.metricCreate()},children:"Create New Metric"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:p.length,descriptor:"metric"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:Rh,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(_h,{})})),qh=sa((function(e){var t=Object(J.i)(Gu).map((function(e){return{value:e.id,label:e.abbreviation}}));return Object(fe.b)(Se,Object(ba.a)(Object(ba.a)({},e),{},{options:t}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),Bh=sa((function(e){var t=Object(J.i)(td).map((function(e){return{value:e.id,label:e.abbreviation}}));return Object(fe.b)(Se,Object(ba.a)(Object(ba.a)({},e),{},{options:t}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),Uh=Object(J.e)({key:"ModelDetail/selectTranslationOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,e.next=3,n(Yu);case 3:return a=e.sent,e.abrupt("return",a.map((function(e){return{value:e.id,label:e.name}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Gh=function(e){var t,n,a=e.model,r=ae(),i=Gc(),o=Je(),l=bv(),c=Object(J.i)(ud),u=!a,p=Hc(Object(J.i)(Ou)),m=C(function(e){var t=e.model,n=null!==t&&void 0!==t?t:{},a=n.name,r=void 0===a?"":a,i=n.abbreviation,o=void 0===i?"":i,s=n.typeId,l=void 0===s?null:s,c=n.translationId,u=void 0===c?null:c,d=n.extentDescription,p=void 0===d?"":d,m=n.codeFunction,b=void 0===m?"":m,f=n.codeFunction2,h=void 0===f?"":f,g=n.platform,y=void 0===g?"":g,v=n.referenceSites,x=void 0===v?null:v,O=n.groupCount,j=void 0===O?null:O,w=n.minimumCount,I=void 0===w?null:w,S=n.oeMean,k=void 0===S?null:S,C=n.oeStdev,D=void 0===C?null:C,z=n.taxonomicEffort,T=void 0===z?"":z,N=n.fixedCount,A=void 0===N?null:N,P=n.description,M=void 0===P?"":P,L=n.predictorIds,R=void 0===L?[]:L,_=n.metricIds,F=void 0===_?[]:_,E=n.isActive;return{editMode:t?"stopped":"started",isDirty:!1,values:{name:r,abbreviation:o,typeId:l,translationId:u,extentDescription:p,codeFunction:b,codeFunction2:h,platform:y,referenceSites:x,groupCount:j,minimumCount:I,oeMean:k,oeStdev:D,taxonomicEffort:T,fixedCount:A,description:M,predictorIds:R,metricIds:F,isActive:void 0!==E&&E}}}({model:a}),[a]),b=Object(d.a)(m,3),f=b[0],h=(b[1],b[2]),g=Object(s.useState)(!1),y=Object(d.a)(g,2),v=y[0],x=y[1],O=f.values,j=f.editMode,w=f.isDirty,I=function(){var e={name:!O.name.trim(),abbreviation:!O.abbreviation.trim(),typeId:!O.typeId};if(Object.values(e).some((function(e){return e})))return e}(),S="stopped"===j,k="started"===j,D="stopping"===j,z="deleting"===j,T=function(e,t){h((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},N=function(e){return function(t){return T(e,t)}},A=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h((function(e){e.editMode="stopping"})),t=U(O),!u){e.next=11;break}return e.next=6,wi(r,i)(t);case 6:n=e.sent,h((function(e){e.editMode="stopped",e.isDirty=!1})),window.setTimeout((function(){l.modelDetail({modelId:n},!0)})),e.next=14;break;case 11:return e.next=13,Kl(r,i)(Object(ba.a)(Object(ba.a)({},t),{},{id:a.id}));case 13:h((function(e){e.editMode="stopped",e.isDirty=!1}));case 14:e.next=27;break;case 16:e.prev=16,e.t0=e.catch(0),e.t1=e.t0.message,e.next='duplicate key value violates unique constraint "models_model_name_key"'===e.t1?21:'duplicate key value violates unique constraint "models_abbreviation_key"'===e.t1?23:25;break;case 21:return o.error('Failed to save: name "'.concat(O.name,'" already in use')),e.abrupt("break",26);case 23:return o.error('Failed to save: abbreviation "'.concat(O.abbreviation,'" already in use')),e.abrupt("break",26);case 25:o.error("Failed to save: ".concat(e.t0));case 26:h((function(e){e.editMode="started"}));case 27:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No model.");case 3:return h((function(e){e.editMode="deleting"})),e.next=6,Xi(r,i)(a);case 6:o.info("Deleted model ".concat(a.name)),l.models(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),o.error("Failed to delete: ".concat(e.t0)),h((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",minHeight:"3rem",marginBottom:"1rem",gap:"1rem"},children:[k?Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ht,{label:"Model Name",value:O.name,onChange:function(e){return T("name",e)},error:null===I||void 0===I?void 0:I.name,InputProps:{sx:{fontWeight:"700"}},maxLength:255,fullWidth:!0})}):Object(fe.b)(ia,{children:O.name}),Object(fe.c)("div",{css:{display:"flex",gap:"0.5em",marginLeft:"auto"},children:[(S||z)&&c.hasPermission(re.NAMCResource.models,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:z,items:[{key:"edit",label:"Edit Model",onClick:function(){h((function(e){e.editMode="started",e.lastValues=e.values}))}},Et,{key:"delete",label:"Delete Model",onClick:function(){x(!0)},disabled:!c.hasPermission(re.NAMCResource.models,re.GrantAction.deleteAny)}]}),(k||D)&&Object(fe.c)(fe.a,{children:[!u&&Object(fe.b)(tt.a,{onClick:function(){h((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:D,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:A,variant:"contained",disabled:!w||D||!!I,children:"Save"})]})]})]}),Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateAreas:'\n              "abbreviation     typeId           isActive            id"\n              "oeMean           oeStdev          codeFunction        codeFunction2"\n              "referenceSites   groupCount       minimumCount        fixedCount"\n              "translationId    taxonomicEffort  platform            ."\n              "predictorIds     predictorIds     predictorIds        predictorIds"\n              "metricIds        metricIds        metricIds           metricIds"\n              "description      description      extentDescription   extentDescription"\n            '},children:[Object(fe.b)(je,{gridArea:"id",value:null!==(t=null===a||void 0===a?void 0:a.id)&&void 0!==t?t:"TBD",label:"Model ID"}),Object(fe.b)(Ht,{gridArea:"abbreviation",value:O.abbreviation,onChange:N("abbreviation"),label:"Abbreviation",readOnly:!k,error:null===I||void 0===I?void 0:I.abbreviation,maxLength:50}),Object(fe.b)(Ee,{gridArea:"typeId",label:"Type",value:O.typeId,onChange:N("typeId"),readOnly:!k,error:null===I||void 0===I?void 0:I.typeId,options:p}),Object(fe.b)(ft,{gridArea:"isActive",value:O.isActive,onChange:N("isActive"),label:"Active",readOnly:!k}),Object(fe.b)(kt,{gridArea:"oeMean",value:O.oeMean,onChange:N("oeMean"),label:"O2E Mean",readOnly:!k,error:null===I||void 0===I?void 0:I.oeMean}),Object(fe.b)(kt,{gridArea:"oeStdev",value:O.oeStdev,onChange:N("oeStdev"),label:"O2E StDev",readOnly:!k,error:null===I||void 0===I?void 0:I.oeStdev}),Object(fe.b)(Ht,{gridArea:"codeFunction",value:O.codeFunction,onChange:N("codeFunction"),label:"Code Function",readOnly:!k,error:null===I||void 0===I?void 0:I.codeFunction,maxLength:255}),Object(fe.b)(Ht,{gridArea:"codeFunction2",value:O.codeFunction2,onChange:N("codeFunction2"),label:"Code Function 2",readOnly:!k,error:null===I||void 0===I?void 0:I.codeFunction2,maxLength:255}),Object(fe.b)(kt,{gridArea:"referenceSites",value:O.referenceSites,onChange:N("referenceSites"),label:"Reference Sites",readOnly:!k,error:null===I||void 0===I?void 0:I.referenceSites}),Object(fe.b)(kt,{gridArea:"groupCount",value:O.groupCount,onChange:N("groupCount"),label:"Group Count",readOnly:!k,error:null===I||void 0===I?void 0:I.groupCount}),Object(fe.b)(kt,{gridArea:"minimumCount",value:O.minimumCount,onChange:N("minimumCount"),label:"Minimum Count",readOnly:!k,error:null===I||void 0===I?void 0:I.minimumCount}),Object(fe.b)(kt,{gridArea:"fixedCount",value:O.fixedCount,onChange:N("fixedCount"),label:"Fixed Count",readOnly:!k,error:null===I||void 0===I?void 0:I.fixedCount}),Object(fe.b)(Ee,{gridArea:"translationId",label:"Translation",optionsSelector:Uh,valueLabel:null!==(n=null===a||void 0===a?void 0:a.translationName)&&void 0!==n?n:"",value:O.translationId,onChange:N("translationId"),readOnly:!k,isClearable:!0}),Object(fe.b)(Ee,{gridArea:"taxonomicEffort",label:"Taxonomic Effort",value:O.taxonomicEffort,onChange:N("taxonomicEffort"),readOnly:!k,error:null===I||void 0===I?void 0:I.taxonomicEffort,options:[{value:"Standard",label:"Standard"},{value:"Midges",label:"Midges"}],isClearable:!0}),Object(fe.b)(Ht,{gridArea:"platform",value:O.platform,onChange:N("platform"),label:"Platform",readOnly:!k,error:null===I||void 0===I?void 0:I.platform,maxLength:255}),Object(fe.b)(qh,{gridArea:"predictorIds",label:"Predictors",value:O.predictorIds,onChange:N("predictorIds"),readOnly:!k,error:null===I||void 0===I?void 0:I.predictorIds}),Object(fe.b)(Bh,{gridArea:"metricIds",label:"Metrics",value:O.metricIds,onChange:N("metricIds"),readOnly:!k,error:null===I||void 0===I?void 0:I.metricIds}),Object(fe.b)(Ht,{gridArea:"description",value:O.description,onChange:N("description"),label:"Description",readOnly:!k,error:null===I||void 0===I?void 0:I.description,multiline:!0,minRows:2}),Object(fe.b)(Ht,{gridArea:"extentDescription",value:O.extentDescription,onChange:N("extentDescription"),label:"Extent Description",readOnly:!k,error:null===I||void 0===I?void 0:I.extentDescription,multiline:!0,minRows:2})]})]}),Object(fe.b)(st,{title:"Confirm Delete Model",isOpen:v,onClose:function(){x(!1)},onConfirm:P,children:"Are you sure you want to delete this model?"}),w&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},Wh=sa((function(e){var t=e.modelId,n=Object(J.i)(t?ad(Number(t)):Xu);return t&&!n?Object(ue.jsxs)("h2",{children:["Model ",t," not found."]}):Object(ue.jsx)(Gh,{model:n})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),Vh=[Rp({headerName:"Model ID",field:"title",width:120}),_p({field:"abbreviation",flex:1}),_p({field:"name",flex:2}),_p({headerName:"Type",field:"typeName",flex:1}),_p({field:"translationName",flex:1}),Gp({field:"fixedCount",width:140}),Up({headerName:"Active",field:"isActive",valueLabels:["No","Yes"],width:100}),Gp({field:"predictorCount",width:140})],Hh=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},Jh=Object(J.b)({key:"ModelsListing/textFilterState",default:""}),Yh=sa((function(){var e=bv(),t=Object(J.i)(ud),n=Object(J.i)(Hu),a=Zt(Object(J.h)(Jh)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];return l&&e.push({id:"text",label:'Name/Abbreviation contains "'.concat(l,'"'),filterFn:function(e){var t=e.name,n=e.abbreviation;return t.toLowerCase().includes(l.toLowerCase())||n.toLowerCase().includes(l.toLowerCase())},onDelete:c}),e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(t){return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:String(t.id),onClick:function(){e.modelDetail({modelId:t.id})}}})}))}),[u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)($t,{value:i,onChange:o,label:"Model Name or Abbreviation"}),t.hasPermission(re.NAMCResource.models,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){e.modelCreate()},children:"Create New Model"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:p.length,descriptor:"model"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:Vh,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(Hh,{})})),Qh=[Rp({headerName:"Organization Name",field:"title",flex:1,minWidth:140}),_p({headerName:"Organization ID",field:"id",width:140}),_p({headerName:"Parent Organization Name",field:"parentName",flex:1,minWidth:140}),_p({field:"city",width:150}),Ep({headerName:"State",field:"filterableUsState",width:160,filterTooltip:"Filter by this state"}),_p({field:"type",width:150}),_p({field:"phone",width:150})],$h=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},Zh=0,Kh=Object(J.e)({key:"OrganizationsListing/selectUsStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(fu),e.abrupt("return",[{value:Zh,label:"Any"}].concat(Object(ci.a)(a.map((function(e){return{value:e.id,label:e.name}})))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Xh=Object(J.b)({key:"OrganizationsListing/usStateFilterIdAtom",default:Zh}),eg=Object(J.b)({key:"OrganizationsListing/textFilterState",default:""}),tg=sa((function(){var e=Object(J.i)(Wu),t=Object(J.i)(Kh),n=Zt(Object(J.h)(eg)),a=Object(d.a)(n,4),r=a[0],i=a[1],o=a[2],l=a[3],c=Object(J.h)(Xh),u=Object(d.a)(c,2),p=u[0],m=u[1],b=Object(s.useMemo)((function(){var e=[];if(p!==Zh){var n,a,r=null!==(n=null===(a=t.find((function(e){return e.value===p})))||void 0===a?void 0:a.label)&&void 0!==n?n:"?";e.push({id:"state",label:"State: ".concat(r),filterFn:function(e){return e.usStateId===p},onDelete:function(){m(Zh)}})}if(o){var i=o.toLowerCase();if(o.match(/^\d+$/)){var s=Number(o);e.push({id:"text",label:"Organization ".concat(o),filterFn:function(e){return e.id===s},onDelete:l})}else e.push({id:"text",label:'Organization/Parent Name or City contains "'.concat(o,'"'),filterFn:function(e){var t=e.name,n=e.parentName,a=e.city;return t.toLowerCase().includes(i)||n.toLowerCase().includes(i)||a.toLowerCase().includes(i)},onDelete:l})}return e}),[p,o]),f=Object(s.useMemo)((function(){return e.map((function(t){var n;return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:t.name,onClick:A.noop,disabled:!0},parentName:(null===(n=e.find((function(e){return e.id===t.parentId})))||void 0===n?void 0:n.name)||"",filterableUsState:{label:t.usState,onFilter:function(){var e;m(null!==(e=t.usStateId)&&void 0!==e?e:Zh)},disabled:t.usStateId===p||!t.usStateId}})}))}),[e,b]),h=Object(s.useMemo)((function(){return b.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),f)}),[f,b]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)(Ee,{value:p,onChange:function(e){return m(Number(e))},options:t,label:"State",css:{width:"10em"}}),Object(fe.b)($t,{value:r,onChange:i,label:"Organization/Parent Name or City"})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:b,joinLabel:"and"}),Object(fe.b)(Kp,{total:e.length,visible:h.length,descriptor:"organization"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:h,columnDefs:Qh,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)($h,{})})),ng=[Gp({headerName:"Sample #",cellRenderer:"SampleIndexRenderer",field:"isSelected",width:100}),_p({headerName:"Customer Site Code",field:"customerSiteCode",flex:1}),_p({headerName:"Matched Site",field:"siteName",flex:1}),{colId:"actions",width:80,cellRenderer:"ActionsRenderer",sortable:!1,pinned:"right"}],ag=function(e){var t=e.sample,n=e.onClose;return Object(fe.c)("div",{css:{padding:"0.5em"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",paddingLeft:"10px"},children:[Object(fe.b)("div",{css:{width:20,marginRight:"0.5em"},children:Object(fe.b)(Ln,{color:mg,largeDot:!0})}),Object(fe.b)("div",{css:{fontWeight:"bold",fontSize:"120%",flex:1,wordWrap:"break-word",overflow:"hidden"},children:Object(fe.b)("div",{children:t.customerSiteCode})}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(Ge.a,{onClick:n,children:Object(fe.b)(Ve.a,{})})})]}),Object(fe.c)("div",{css:{marginTop:"1em",display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"\n                  auto\n                  auto\n                  1em\n                  auto\n                  auto\n                ",gap:"0.5em",gridTemplateAreas:'\n                  "usState            sampleIndex"\n                  "latitude           longitude"\n                  ".                  ."\n                  "habitat            ecosystem"\n                  "waterbodyName      waterbodyType"\n                '},children:[Object(fe.b)(am,{gridArea:"usState",label:"US State",point:t}),Object(fe.b)(je,{gridArea:"sampleIndex",label:"Sample #",value:t.sampleIndex}),Object(fe.b)(je,{gridArea:"latitude",label:"Latitude",value:t.latitude}),Object(fe.b)(je,{gridArea:"longitude",label:"Longitude",value:t.longitude}),Object(fe.b)(je,{gridArea:"habitat",label:"Habitat",value:t.habitat}),Object(fe.b)(je,{gridArea:"ecosystem",label:"Ecosystem",value:t.ecosystem}),Object(fe.b)(je,{gridArea:"waterbodyName",label:"Waterbody",value:t.waterbodyName}),Object(fe.b)(je,{gridArea:"waterbodyType",label:"Waterbody Type",value:t.waterbodyType})]})]})},rg=function(e){var t=e.from,n=e.to;return Object(fe.c)(fe.a,{children:[Object(fe.b)(Kt.e,{id:"MatchedSiteLine",type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[t.longitude,t.latitude],[n.longitude,n.latitude]]}}}),Object(fe.b)(Kt.b,{type:"line",source:"MatchedSiteLine",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Mn,"line-width":2,"line-dasharray":[2,2]}})]})},ig=n(107),og=n.n(ig),sg=function(e){var t=e.data,n=t.sampleIndex,a=t.isSelected;return Object(fe.c)("div",{css:{display:"flex",alignItems:"center"},children:[a&&Object(fe.b)("div",{css:{height:30,width:15},children:Object(fe.b)(Ln,{color:mg,largeDot:!0})}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:n})]})},lg=function(e){var t=e.data.onEdit;return Object(fe.b)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:Object(fe.b)(Ge.a,{onClick:t,children:$e(Object(fe.b)(og.a,{}),"Edit sample match")})})},cg=function(e){return!!e&&e.id<0},ug=function(e){var t=e.reviewableSamples,n=e.allSitesNormalized;return t.map((function(e){var t=e.sampleIndex,a=e.suppressAutoMatch,r="ineligible",i=null;if(e.databaseSiteId)r="matched",i=e.databaseSiteId;else{var o=n.find((function(t){return t.name===e.customerSiteCode.toLowerCase()})),s=o&&V(o,e)<.01&&o.id,l=H(n,e,.01).filter((function(e){return e.distance<.005})).map((function(e){return e.site.id}));s?0===l.length||l[0]===s?(r="eligible",i=s):r="ambiguous":1===l.length?(r="eligible",i=l[0]):l.length>1&&(r="ambiguous")}return{sampleIndex:t,status:r,databaseSiteId:i,suppressed:a}}))},dg=function(e){var t,n=e.fromSample,a=e.newSiteId,r=e.allSitesNormalized,i=e.waterbodyTypes;return{id:a,name:function(){for(var e="",t=0,a=function(){var a=(e="".concat(n.customerSiteCode).concat(t?" (".concat(t,")"):"")).toLowerCase();if(!r.find((function(e){return e.name===a})))return"break";t++};;){if("break"===a())break}return e}(),latitude:n.latitude,longitude:n.longitude,waterbodyName:n.waterbodyName,waterbodyTypeId:(null!==(t=i.find((function(e){return e.name===n.waterbodyType})))&&void 0!==t?t:{id:null}).id,waterbodyCode:"",description:"",isReference:!1}},pg=["name"],mg="#0055dd",bg="suggested",fg=[{value:"any",label:"Any"},{value:"unmatched",label:"Unmatched"},{value:"matched",label:"Matched"}],hg=function(e){var t,n,r=e.submission,i=ae(),o=Je(),l=Vc(),c=bv(),u=Object(J.i)(Mc),p=Object(J.i)(Pc),m=Fc(),f=Object(J.i)(bu),h=C({samples:r.samples,newSites:null!==(t=r.newSites)&&void 0!==t?t:[],isDirty:!1},[r]),g=Object(d.a)(h,3),y=g[0],v=(g[1],g[2]),x=r.boxId,O=r.templateVersion,j=r.organizationName,I=r.createdDate,k=y.samples,D=y.newSites,z=y.isDirty,T=Object(s.useState)(void 0),N=Object(d.a)(T,2),P=N[0],M=N[1],L=Zt(Object(s.useState)("")),R=Object(d.a)(L,4),_=R[0],F=R[1],E=R[2],q=R[3],B=Object(s.useState)(null),U=Object(d.a)(B,2),G=U[0],V=U[1],Y=Object(s.useState)(void 0),Q=Object(d.a)(Y,2),$=Q[0],Z=Q[1],K=Object(s.useState)("any"),X=Object(d.a)(K,2),ee=X[0],te=X[1],ne=Object(s.useState)(!1),re=Object(d.a)(ne,2),ie=re[0],oe=re[1],se=Object(s.useState)(!1),le=Object(d.a)(se,2),ce=le[0],ue=le[1],de=Object(s.useState)(!1),pe=Object(d.a)(de,2),me=pe[0],be=pe[1],he=Object(s.useState)(!1),ge=Object(d.a)(he,2),ye=ge[0],ve=ge[1],xe=_c();Object(s.useEffect)((function(){p===si.unfetched&&xe()}),[p]);var Oe=Object(s.useMemo)((function(){return[].concat(Object(ci.a)(u),Object(ci.a)(D))}),[u,D]),we=p!==si.fetched,Ie=Object(s.useMemo)((function(){return Oe.map((function(e){var t=e.name,n=Object(gi.a)(e,pg);return Object(ba.a)({name:t.toLowerCase()},n)}))}),[Oe]),Se=Object(s.useMemo)((function(){var e=[];switch(ee){case"unmatched":e.push({id:"matchStatus",label:"Unmatched",filterFn:function(e){var t=e.databaseSiteId,n=e.sampleIndex;return!t||n===P},onDelete:function(){te("any")}});break;case"matched":e.push({id:"matchStatus",label:"Matched",filterFn:function(e){var t=e.databaseSiteId,n=e.sampleIndex;return!!t||n===P},onDelete:function(){te("any")}})}return e}),[ee,P]),ke=function(e){var t=e.sampleIndex,n=e.customerSiteCode;V({id:bg,label:"Suggested for Sample ".concat(t),filterFn:function(){return!0},filterAllFn:function(t){var a=n.toLowerCase(),r=t.find((function(e){return e.name.toLowerCase()===a}));if(r)return[r];var i=H(t,e),o=i[0],s=Math.min(Math.max(3*o.distance,.1),5);return i.filter((function(e){return e.distance<s})).map((function(e){return e.site}))},onDelete:function(){return V(null)}})},Ce=Object(s.useMemo)((function(){return k.map((function(e){var t=e.sampleIndex,n=e.siteId,a=e.latitude,r=e.longitude,i=e.habitat,o=e.ecosystem,s=e.nhdType,l=e.waterbodyName,c=e.databaseSiteId,u=e.suppressAutoMatch;if("number"!==typeof t||0===t)throw new Error("sampleIndex is not a number or is zero (not allowed).");var d=c&&Oe.find((function(e){return e.id===c}));return{isSelected:t===P,sampleIndex:t,customerSiteCode:String(n),latitude:Number(a),longitude:Number(r),databaseSiteId:c?Number(c):void 0,suppressAutoMatch:!!u,onEdit:function(){M(t)},siteName:d?d.name:"",habitat:i?String(i):"",ecosystem:o?String(o):"",waterbodyType:s?String(s):"",waterbodyName:l?String(l):""}}))}),[Oe,k,P]),De=Object(s.useMemo)((function(){return Se.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),Ce)}),[Se,Ce]),ze=P&&Ce.find((function(e){return e.sampleIndex===P}));Object(s.useEffect)((function(){ze?(Z(ze.databaseSiteId),ke(ze)):V(null)}),[P]);var Te=Object(J.i)(Lc),Ne=Object(s.useMemo)((function(){if($)return Te.find((function(e){return e.id===$}))||Oe.find((function(e){return e.id===$}))}),[Oe,Te,$]),Ae=ze&&ze.databaseSiteId&&Oe.find((function(e){return e.id===ze.databaseSiteId}));Object(s.useEffect)((function(){Ne&&!cg(Ne)&&m($)}),[$]),Object(s.useEffect)((function(){if(!we){var e=ug({reviewableSamples:Ce,allSitesNormalized:Ie}).filter((function(e){var t=e.status,n=e.suppressed;return"eligible"===t&&!n})),t=e.length;0!==t&&(v((function(t){e.forEach((function(e){var n=e.sampleIndex,a=e.databaseSiteId,r=t.samples.find((function(e){return e.sampleIndex===n}));if(!r)throw new Error("Sample not found.");r.databaseSiteId=a})),t.isDirty=!0})),o.info("Auto-matched ".concat(t," ").concat(S(t,"sample")," with ").concat(S(t,"site"))))}}),[Ce,Ie]);var Me=Object(s.useMemo)((function(){var e=[];return G&&e.push(G),E&&e.push({id:"text",label:'Name contains "'.concat(E,'"'),filterFn:function(){return!0},filterAllFn:function(e){return e.filter((function(e){return e.name.toLowerCase().includes(E.toLowerCase())}))},onDelete:q}),e}),[G,E]),Le=Object(s.useMemo)((function(){if(0===Me.length)return Oe;var e=Me.reduce((function(e,t){return Object(A.uniq)([].concat(Object(ci.a)(e),Object(ci.a)(t.filterAllFn(Oe))))}),[]);return Ae?Object(A.uniq)([].concat(Object(ci.a)(e),[Ae])):e}),[Oe,Me]),Re=ln({sites:Le,onSiteClick:function(e){Ae&&Ae.id!==e.id?o.info("Cannot select site: sample already has a confirmed match. (To match to this site, unmatch existing site first.)"):Z(e.id)}});Object(s.useEffect)((function(){var e=Re.isViewportReady,t=Re.centerSite,n=Re.fitSites;if(0!==Me.length&&e&&(0!==Le.length||ze))if(0===Le.length&&ze)t(ze,{zoom:14,suppressZoomOut:!0});else if(1!==Le.length||ze){var a=Le;ze&&a.push(ze),n(a)}else t(Le[0])}),[Me,P]);var _e=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pc(i,l)({boxId:x,data:{templateVersion:O,appVersion:b,samples:k,newSites:D}});case 3:v((function(e){e.isDirty=!1})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o.error("Failed to save updated submission: ".concat(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ue("finalizing"),e.next=4,Sl(i,l)({boxId:x});case 4:c.boxDetail({boxId:x}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),ue("prompt"),o.error("Failed to finalize box submission: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){v((function(e){var t=e.samples.find((function(e){return e.sampleIndex===P}));if(!t)throw new Error("Sample not found.");t.databaseSiteId=null,t.suppressAutoMatch=!0,e.isDirty=!0}))},qe=function(){var e=function(e){return Math.min.apply(Math,[0].concat(Object(ci.a)(e.map((function(e){return e.id})))))-1}(D),t=Ce.find((function(e){return e.sampleIndex===P}));if(!t)throw new Error("Sample not found.");var n=dg({fromSample:t,newSiteId:e,allSitesNormalized:Ie,waterbodyTypes:f});v((function(e){var t=e.samples.find((function(e){return e.sampleIndex===P}));if(!t)throw new Error("Sample not found.");t.databaseSiteId=n.id,e.newSites.push(n),e.isDirty=!0})),Z(e)},Be=function(){var e=Object(ui.a)(pi.a.mark((function e(t){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v((function(e){var n=e.newSites.findIndex((function(e){return e.id===t.id}));if(-1===n)throw new Error("New site not found.");e.newSites[n]=t,e.isDirty=!0})),oe(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.latitude,a=t.longitude,v((function(e){var t=e.newSites.find((function(e){return e.id===$}));if(!t)throw new Error("Site not found.");t.latitude=n,t.longitude=a,e.isDirty=!0}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){be(!1)}),[$]);var Ge=Object(s.useMemo)((function(){return Ae?cg(Ae)?Object(fe.b)("strong",{children:"Matched New Site"}):Object(fe.b)("strong",{children:"Matched Site"}):Object(fe.b)("strong",{children:"Unmatched"})}),[Ae]),We=Object(s.useMemo)((function(){if(!ze||!Ne)return"";var e=W.distance(W.point([ze.longitude,ze.latitude]),W.point([Ne.longitude,Ne.latitude]));return e>=1?Object(fe.c)("strong",{children:[e.toFixed(1)," km"]}):Object(fe.c)("strong",{children:[(1e3*e).toFixed(2)," m"]})}),[ze,Ne]),Ve=null!==(n=Ne&&Ce.filter((function(e){return e.databaseSiteId===$})).length)&&void 0!==n?n:0,He=!z&&k.every((function(e){return e.databaseSiteId}));return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"3rem"},children:[Object(fe.c)(ia,{children:["Box ",x," Submission Review"]}),Object(fe.b)(je,{label:"Customer",value:j}),Object(fe.b)(je,{label:"Received Date",value:w(I)}),Object(fe.c)("div",{css:{marginLeft:"auto",display:"flex",gap:"0.5rem"},children:[Object(fe.b)(tt.a,{variant:"outlined",onClick:_e,disabled:!z,children:"Save Review Progress"}),Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){return ue("prompt")},disabled:!He,children:"Finalize Review"})]})]}),Object(fe.c)("div",{css:{flex:1,display:"flex",paddingTop:"1rem"},children:[Object(fe.c)("div",{css:{minWidth:500,flex:.4,padding:"0 2rem 0 0",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)(Gt,{value:ee,onChange:function(e){return te(String(e))},options:fg,label:"Match Status"}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{onClick:function(){ve(!0)},variant:"outlined",disabled:we||Ce.every((function(e){return e.databaseSiteId})),children:"Create Remaining Sites"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",margin:"0.75em 0",display:"flex"},children:[Object(fe.b)(xt,{filters:Se,joinLabel:"or"}),Object(fe.b)(Kp,{total:Ce.length,visible:De.length,descriptor:"sample"})]}),we?Object(fe.b)(Pe.a,{variant:"rectangular",height:600}):Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rowIdProperty:"sampleIndex",rows:De,columnDefs:ng,frameworkComponents:a})})]}),Object(fe.c)("div",{css:{flex:1,display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)(tt.a,{onClick:function(){ze&&ke(ze)},variant:"outlined",disabled:!ze||!!Me.find((function(e){return e.id===bg})),children:"Suggested"}),Object(fe.b)(Ht,{value:_,onChange:function(e){return F(e)},label:"Site Name",css:{width:"20em"}})]}),Object(fe.c)("div",{css:{minHeight:"2em",margin:"0.75em 0",display:"flex"},children:[Object(fe.b)(xt,{filters:Me,joinLabel:"or"}),Object(fe.b)(Kp,{total:Oe.length,visible:Le.length,descriptor:"site",isLoading:we})]}),Object(fe.c)("div",{css:{flex:1,display:"flex"},children:[Object(fe.b)("div",{css:{flex:1,position:"relative"},children:Object(fe.c)(zn,{controller:Re,mapboxToken:ya,children:[we&&Object(fe.b)(Tt,{delayMs:500,css:{position:"absolute",width:"100%",height:"5px",opacity:.75,zIndex:100}}),ze&&Object(fe.b)(Rn,{site:ze,color:mg,largeDot:!0}),Ne&&Object(fe.b)(Rn,{site:Ne,onDragEnd:me?Ue:void 0}),Ae&&Object(fe.b)(rg,{from:ze,to:Ae})]})}),Object(fe.c)(Nn,{isOpen:!!ze||!!Ne,transitionMs:200,css:{display:"flex",flexDirection:"column","@media (max-height: 1150px)":{fontSize:"75%"}},children:[Object(fe.b)("div",{css:{display:"flex",flexDirection:"column",minHeight:"200px"},children:ze?Object(fe.c)(fe.a,{children:[Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(ag,{sample:ze,onClose:function(){M(void 0),Z(void 0)}})}),Object(fe.b)("div",{css:{borderBottom:"1px solid lightgrey",height:"1px"}}),Object(fe.c)("div",{css:{padding:"1em 0.5em"},children:[Object(fe.c)("div",{css:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[Object(fe.b)(je,{label:"Match Status",value:Ge}),Object(fe.b)(je,{label:"Distance",value:We})]}),Object(fe.c)("div",{css:{display:"grid",gap:"0.5em",gridTemplateColumns:"1fr 1fr"},children:[Ne?Object(fe.b)(tt.a,{variant:"contained",disabled:!Ne||!!ze.databaseSiteId,onClick:function(){v((function(e){var t=e.samples.find((function(e){return e.sampleIndex===P}));if(!t||!Ne)throw new Error("Sample or Site not found.");t.databaseSiteId=$,e.isDirty=!0}))},children:"Match Site"}):Object(fe.b)(tt.a,{variant:"contained",onClick:function(){return qe()},children:"New Site"}),cg(Ne)&&1===Ve?Object(fe.b)(tt.a,{variant:"outlined",disabled:!ze.databaseSiteId,onClick:function(){Ee(),v((function(e){var t=e.newSites.findIndex((function(e){return e.id===$}));if(-1===t)throw new Error("New site not found.");e.newSites.splice(t,1),e.isDirty=!0}))},children:"Discard New Site"}):Object(fe.b)(tt.a,{variant:"outlined",disabled:!ze||!ze.databaseSiteId,onClick:Ee,children:"Unmatch Site"})]})]})]}):Object(fe.b)("div",{css:{padding:"1em"},children:"No sample selected."})}),Object(fe.b)("div",{css:{borderBottom:"1px solid lightgrey",height:"1px"}}),Object(fe.b)("div",{css:{flex:1},children:Ne?Object(fe.b)(rm,{site:Ne,addSampleCount:Ve,onClose:Ae?void 0:function(){Z(void 0)},children:cg(Ne)&&Object(fe.c)("div",{css:{marginLeft:"10px",display:"flex",gap:"0.5em"},children:[Object(fe.b)(tt.a,{onClick:function(){oe(!0)},variant:"outlined",children:"Edit Site"}),Object(fe.b)(ft,{label:"Enable draggable pin",value:me,onChange:be})]})}):Object(fe.b)("div",{css:{padding:"1em"},children:"No site selected."})})]})]})]})]})]}),Ne&&Object(fe.b)(om,{isOpen:ie,site:Ne,allSitesNormalized:Ie,onCancel:function(){return oe(!1)},onSave:Be}),Object(fe.c)(nt.a,{open:!!ce,onClose:"finalizing"===ce?A.noop:function(){return ue(!1)},children:[Object(fe.b)(it.a,{children:"Confirm Finalize Review"}),Object(fe.b)(rt.a,{children:Object(fe.c)("ul",{children:[Object(fe.c)("li",{children:[Ce.length," sample ",S(Ce.length,"record")," will be created"]}),Object(fe.c)("li",{children:[D.length," ",S(D.length,"site")," will be created"]}),Object(fe.c)("li",{children:["Box will be set to ",Object(fe.b)("em",{children:"Waiting"})]})]})}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:function(){return ue(!1)},disabled:"finalizing"===ce,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:Fe,disabled:"finalizing"===ce,children:"Finalize"})]})]}),z&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"}),ye&&Object(fe.b)(st,{title:"Confirm Site Auto-Creation",isOpen:ye,onClose:function(){return ve(!1)},onConfirm:function(){return function(){var e=Math.min.apply(Math,[0].concat(Object(ci.a)(D.map((function(e){return e.id})))))-1,t=Object(ci.a)(Ie),n=0,a=ug({reviewableSamples:Ce,allSitesNormalized:Ie});v((function(r){Ce.forEach((function(i){var o=i.databaseSiteId,s=i.sampleIndex;if(!o){var l=r.samples.find((function(e){return e.sampleIndex===s}));if(!l)throw new Error("Sample not found.");l.suppressAutoMatch=!1;var c=a.find((function(e){return e.sampleIndex===s}));if(!c)throw new Error("Could not determine sample auto-match status.");if("ineligible"===c.status){var u=dg({fromSample:i,allSitesNormalized:t,waterbodyTypes:f,newSiteId:e});t.push(Object(ba.a)(Object(ba.a)({},u),{},{name:u.name.toLowerCase()})),a=ug({reviewableSamples:Ce,allSitesNormalized:t}),e-=1,r.newSites.push(u),n+=1}}})),r.isDirty=!0})),o.info("Auto-created ".concat(n," ").concat(S(n,"site")))}()},children:"Selecting this option will attempt to automatically generate a new official NAMC site for all sampled locations in this submission without a matched site. The submitted latitude and longitudes will be used for the locations. You can still interact with each submitted site location afterward and modify any of the site locations or matches. Are you sure that you want to generate all remaining sites?"})]})},gg=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"50em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"30em",variant:"rectangular"})]})},yg=sa((function(e){var t=e.boxId,n=Object(J.i)(Zu(Number(t)));return n&&n.boxStateId===$c.pending?Object(ue.jsx)(hg,{submission:n}):Object(ue.jsxs)("h2",{children:["Box ",t," not found or it is not in Pending state."]})}),(function(){return Object(ue.jsx)(gg,{})})),vg=["typeId"],xg=function(e){var t,n=e.predictor,a=ae(),r=Gc(),i=Je(),o=bv(),l=Object(J.i)(ud),c=!n,u=Hc(Object(J.i)(Su)),p=C(function(e){var t=e.predictor,n=null!==t&&void 0!==t?t:{},a=n.abbreviation,r=void 0===a?"":a,i=n.calculation,o=void 0===i?"":i,s=n.calculationScript,l=void 0===s?"":s,c=n.cellRepresents,u=void 0===c?"":c,d=n.cellSize,p=void 0===d?"":d,m=n.description,b=void 0===m?"":m,f=n.geometryFilePath,h=void 0===f?"":f,g=n.inputType,y=void 0===g?"":g,v=n.isGee,x=void 0===v?"":v,O=n.isTemporal,j=void 0!==O&&O,w=n.isText,I=void 0===w?"":w,S=n.maxValue,k=void 0===S?null:S,C=n.minValue,D=void 0===C?null:C,z=n.name,T=void 0===z?"":z,N=n.notes,A=void 0===N?"":N,P=n.smallShedException,M=void 0===P?"":P,L=n.source,R=void 0===L?"":L,_=n.transformation,F=void 0===_?"":_,E=n.typeId,q=void 0===E?null:E,B=n.units;return{editMode:t?"stopped":"started",isDirty:!1,values:{abbreviation:r,calculation:o,calculationScript:l,cellRepresents:u,cellSize:p,description:b,geometryFilePath:h,inputType:y,isGee:x,isTemporal:j,isText:I,maxValue:k,minValue:D,name:T,notes:A,smallShedException:M,source:R,transformation:F,typeId:q,units:void 0===B?"":B}}}({predictor:n,user:l}),[n]),m=Object(d.a)(p,3),b=m[0],f=(m[1],m[2]),h=Object(s.useState)(!1),g=Object(d.a)(h,2),y=g[0],v=g[1],x=b.values,O=b.editMode,j=b.isDirty,w=function(){var e={name:!x.name.trim(),abbreviation:!x.abbreviation.trim(),typeId:!x.typeId};if(Object.values(e).some((function(e){return e})))return e}(),I="stopped"===O,S="started"===O,k="stopping"===O,D="deleting"===O,z=function(e,t){f((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},T=function(e){return function(t){return z(e,t)}},N=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,s,l,u;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f((function(e){e.editMode="stopping"})),t=U(x),s=t.typeId,l=Object(gi.a)(t,vg),s){e.next=5;break}throw new Error("No predictor type.");case 5:if(!c){e.next=13;break}return e.next=8,Ai(a,r)(Object(ba.a)({typeId:s},l));case 8:u=e.sent,f((function(e){e.editMode="stopped",e.isDirty=!1})),window.setTimeout((function(){o.predictorDetail({predictorId:u},!0)})),e.next=16;break;case 13:return e.next=15,rc(a,r)(Object(ba.a)(Object(ba.a)({},l),{},{typeId:s,id:n.id}));case 15:f((function(e){e.editMode="stopped",e.isDirty=!1}));case 16:e.next=29;break;case 18:e.prev=18,e.t0=e.catch(0),e.t1=e.t0.message,e.next='duplicate key value violates unique constraint "predictors_predictor_name_key"'===e.t1?23:'duplicate key value violates unique constraint "predictors_abbreviation_key"'===e.t1?25:27;break;case 23:return i.error('Failed to save: name "'.concat(x.name,'" already in use')),e.abrupt("break",28);case 25:return i.error('Failed to save: abbreviation "'.concat(x.abbreviation,'" already in use')),e.abrupt("break",28);case 27:i.error("Failed to save: ".concat(e.t0));case 28:f((function(e){e.editMode="started"}));case 29:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No predictor.");case 3:return f((function(e){e.editMode="deleting"})),e.next=6,io(a,r)(n);case 6:i.info("Deleted predictor ".concat(n.name)),o.predictors(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),i.error("Failed to delete: ".concat(e.t0)),f((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center",minHeight:"3rem",marginBottom:"1rem",gap:"1rem"},children:[S?Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ht,{label:"Predictor Name",value:x.name,onChange:function(e){return z("name",e)},error:null===w||void 0===w?void 0:w.name,InputProps:{sx:{fontWeight:"700"}},maxLength:255,fullWidth:!0})}):Object(fe.b)(ia,{children:x.name}),Object(fe.c)("div",{css:{display:"flex",gap:"0.5em",marginLeft:"auto"},children:[(I||D)&&l.hasPermission(re.NAMCResource.models,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:D,items:[{key:"edit",label:"Edit Predictor",onClick:function(){f((function(e){e.editMode="started",e.lastValues=e.values}))}},Et,{key:"delete",label:"Delete Predictor",onClick:function(){v(!0)},disabled:!l.hasPermission(re.NAMCResource.models,re.GrantAction.deleteAny)}]}),(S||k)&&Object(fe.c)(fe.a,{children:[!c&&Object(fe.b)(tt.a,{onClick:function(){f((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:k,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:N,variant:"contained",disabled:!j||k||!!w,children:"Save"})]})]})]}),Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateAreas:'\n              "abbreviation           typeId            id"\n              "units                  source            inputType"\n              "isTemporal             isText            isGee"\n              "cellRepresents         cellSize          smallShedException" \n              "transformation         minValue          maxValue"\n              "calculationScript      geometryFilePath  ."\n              "calculation            description       notes"\n            '},children:[Object(fe.b)(je,{gridArea:"id",value:null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"TBD",label:"Predictor ID"}),Object(fe.b)(Ht,{gridArea:"abbreviation",value:x.abbreviation,onChange:T("abbreviation"),label:"Abbreviation",readOnly:!S,error:null===w||void 0===w?void 0:w.abbreviation,maxLength:50}),Object(fe.b)(Ee,{gridArea:"typeId",label:"Type",value:x.typeId,onChange:T("typeId"),readOnly:!S,error:null===w||void 0===w?void 0:w.typeId,options:u}),Object(fe.b)(Ht,{gridArea:"units",value:x.units,onChange:T("units"),label:"Units",readOnly:!S,error:null===w||void 0===w?void 0:w.units,maxLength:255}),Object(fe.b)(Ht,{gridArea:"source",value:x.source,onChange:T("source"),label:"Source",readOnly:!S,error:null===w||void 0===w?void 0:w.source,maxLength:255}),Object(fe.b)(Ht,{gridArea:"inputType",value:x.inputType,onChange:T("inputType"),label:"Input Type",readOnly:!S,error:null===w||void 0===w?void 0:w.inputType,maxLength:255}),Object(fe.b)(ft,{gridArea:"isTemporal",value:x.isTemporal,onChange:T("isTemporal"),label:"Is Temporal",readOnly:!S}),Object(fe.b)(Ht,{gridArea:"isText",value:x.isText,onChange:T("isText"),label:"Is Text",readOnly:!S,error:null===w||void 0===w?void 0:w.isText,maxLength:255}),Object(fe.b)(Ht,{gridArea:"isGee",value:x.isGee,onChange:T("isGee"),label:"Is GEE",readOnly:!S,error:null===w||void 0===w?void 0:w.isGee,maxLength:255}),Object(fe.b)(Ht,{gridArea:"cellRepresents",value:x.cellRepresents,onChange:T("cellRepresents"),label:"Cell Represents",readOnly:!S,error:null===w||void 0===w?void 0:w.cellRepresents,maxLength:255}),Object(fe.b)(Ht,{gridArea:"cellSize",value:x.cellSize,onChange:T("cellSize"),label:"Cell Size",readOnly:!S,error:null===w||void 0===w?void 0:w.cellSize,maxLength:255}),Object(fe.b)(Ht,{gridArea:"smallShedException",value:x.smallShedException,onChange:T("smallShedException"),label:"Small Watershed Exception",readOnly:!S,error:null===w||void 0===w?void 0:w.smallShedException,maxLength:255}),Object(fe.b)(Ht,{gridArea:"transformation",value:x.transformation,onChange:T("transformation"),label:"Transformation",readOnly:!S,error:null===w||void 0===w?void 0:w.transformation,maxLength:255}),Object(fe.b)(kt,{gridArea:"minValue",value:x.minValue,onChange:T("minValue"),label:"Minimum Value",readOnly:!S,error:null===w||void 0===w?void 0:w.minValue}),Object(fe.b)(kt,{gridArea:"maxValue",value:x.maxValue,onChange:T("maxValue"),label:"Maximum Value",readOnly:!S,error:null===w||void 0===w?void 0:w.maxValue}),Object(fe.b)(Ht,{gridArea:"calculationScript",value:x.calculationScript,onChange:T("calculationScript"),label:"Calculation Script",readOnly:!S,error:null===w||void 0===w?void 0:w.calculationScript,maxLength:255}),Object(fe.b)(Ht,{gridArea:"geometryFilePath",value:x.geometryFilePath,onChange:T("geometryFilePath"),label:"Geometry File Path",readOnly:!S,error:null===w||void 0===w?void 0:w.geometryFilePath,maxLength:255}),Object(fe.b)(Ht,{gridArea:"calculation",value:x.calculation,onChange:T("calculation"),label:"Calculation",readOnly:!S,error:null===w||void 0===w?void 0:w.calculation,multiline:!0,minRows:2}),Object(fe.b)(Ht,{gridArea:"description",value:x.description,onChange:T("description"),label:"Description",readOnly:!S,error:null===w||void 0===w?void 0:w.description,multiline:!0,minRows:2}),Object(fe.b)(Ht,{gridArea:"notes",value:x.notes,onChange:T("notes"),label:"Notes",readOnly:!S,error:null===w||void 0===w?void 0:w.notes,multiline:!0,minRows:2})]})]}),Object(fe.b)(st,{title:"Confirm Delete Predictor",isOpen:y,onClose:function(){v(!1)},onConfirm:A,children:"Are you sure you want to delete this predictor?"}),j&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},Og=sa((function(e){var t=e.predictorId,n=Object(J.i)(t?rd(Number(t)):Xu);return t&&!n?Object(ue.jsxs)("h2",{children:["Predictor ",t," not found."]}):Object(ue.jsx)(xg,{predictor:n})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),jg=[Rp({headerName:"Predictor ID",field:"title",width:120}),_p({field:"abbreviation",flex:1}),_p({field:"name",flex:3}),_p({field:"units",width:150}),Up({field:"isTemporal",valueLabels:["No","Yes"],width:120}),Gp({field:"modelCount",width:120}),_p({field:"type",width:180})],wg=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},Ig=Object(J.b)({key:"PredictorsListing/textFilterState",default:""}),Sg=sa((function(){var e=bv(),t=Object(J.i)(ud),n=Object(J.i)(Gu),a=Zt(Object(J.h)(Ig)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];return l&&e.push({id:"text",label:'Name/Abbreviation contains "'.concat(l,'"'),filterFn:function(e){var t=e.name,n=e.abbreviation;return t.toLowerCase().includes(l.toLowerCase())||n.toLowerCase().includes(l.toLowerCase())},onDelete:c}),e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(t){return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:String(t.id),onClick:function(){e.predictorDetail({predictorId:t.id})}}})}))}),[u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)($t,{value:i,onChange:o,label:"Predictor Name or Abbreviation"}),t.hasPermission(re.NAMCResource.models,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){e.predictorCreate()},children:"Create New Predictor"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:p.length,descriptor:"predictor"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:jg,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(wg,{})})),kg=sa((function(e){var t=e.projectId,n=e.projectName,a=e.canModify,r=Object(J.i)(ud),i=Object(J.i)(Lu(t)),o=Object(s.useState)(!1),l=Object(d.a)(o,2),c=l[0],u=l[1],p=Object(s.useState)(null),m=Object(d.a)(p,2),b=m[0],f=m[1],h=function(){c||f(null)};return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{minHeight:"2em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(fe.b)("div",{css:{fontWeight:500,marginLeft:"1em",marginRight:"auto"},children:"Samples"}),r.hasPermission(re.NAMCResource.projects,re.GrantAction.updateAny)&&Object(fe.c)(fe.a,{children:[Object(fe.b)(tt.a,{css:{width:"6em"},variant:"outlined",disabled:!a,onClick:function(){f("add")},children:"Add"}),Object(fe.b)(tt.a,{css:{width:"6em"},variant:"outlined",disabled:0===i.length||!a,onClick:function(){f("remove")},children:"Remove"})]}),Object(fe.b)(tt.a,{variant:"outlined",disabled:0===i.length,onClick:function(){var e=F({wsName:"Samples",columns:tm,rows:i});R(e,"Project ".concat(n," Samples.xlsx"))},children:"Download"}),Object(fe.b)(Kp,{total:i.length,visible:i.length,descriptor:"sample"})]}),Object(fe.b)("div",{css:{flex:1,minHeight:"10em"},children:Object(fe.b)(bm,{samples:i,sitesListingSource:{type:"project",id:t,name:n}})}),Object(fe.c)(nt.a,{open:!!b,fullWidth:!0,maxWidth:"lg",onClose:h,children:[Object(fe.b)(rt.a,{children:Object(fe.b)(rb,{initialMode:b||"add",projectId:t,projectName:n,samples:i,onOperatingChange:u})}),Object(fe.b)(at.a,{children:Object(fe.b)(tt.a,{onClick:h,disabled:c,children:"Close"})})]})]})}),(function(){return Object(fe.b)(Pe.a,{css:{marginTop:"1rem"},height:"10rem",variant:"rectangular"})})),Cg=function(e){var t=e.projectId,n=e.projectName,a=qc(t);return Object(fe.b)(zm,{sitesSelector:a,sitesListingSource:{type:"project",id:t,name:n},mapboxToken:ya})},Dg=Object(J.b)({key:"ProjectDetail/isExpandedState",default:!0}),zg=Object(J.e)({key:"ProjectDetail/selectUserOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a,r,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(md),r=a.map((function(e){var t=e.id,n=e.fullName,a=e.organizationName;return{value:t,label:"".concat(n," (").concat(a,")")}})),i=Object(A.countBy)(r,"label"),e.abrupt("return",r.map((function(e){var t=e.value,n=e.label;return{value:t,label:i[n]>1?"".concat(n," [").concat(t,"]"):n}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Tg=function(e){var t,n,a,r,i=e.project,o=ae(),l=Gc(),c=Je(),u=bv(),p=Object(J.i)(ud),m=!i,b=C(function(e){var t,n,a,r,i,o=e.project,s=e.user;return{editMode:o?"stopped":"started",isDirty:!1,values:{name:null!==(t=null===o||void 0===o?void 0:o.name)&&void 0!==t?t:"",contactId:null!==(n=null===o||void 0===o?void 0:o.contactId)&&void 0!==n?n:s.id,isPrivate:null===(a=null===o||void 0===o?void 0:o.isPrivate)||void 0===a||a,description:null!==(r=null===o||void 0===o?void 0:o.description)&&void 0!==r?r:"",modelIds:null!==(i=null===o||void 0===o?void 0:o.modelIds)&&void 0!==i?i:[]}}}({project:i,user:p}),[i]),f=Object(d.a)(b,3),h=f[0],g=(f[1],f[2]),y=Object(J.h)(Dg),v=Object(d.a)(y,2),x=v[0],O=v[1],j=Object(s.useState)(!1),I=Object(d.a)(j,2),S=I[0],k=I[1],D=h.values,z=h.editMode,T=h.isDirty,N=function(){var e={name:!D.name.trim()};if(Object.values(e).some((function(e){return e})))return e}(),A="stopped"===z,P="started"===z,M="stopping"===z,L="deleting"===z;Object(s.useEffect)((function(){P&&O(!0)}),[P]);var R=function(e,t){g((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},_=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g((function(e){e.editMode="stopping"})),t={name:D.name.trim(),isPrivate:D.isPrivate,description:D.description.trim(),contactId:D.contactId,modelIds:D.modelIds},!m){e.next=11;break}return e.next=6,Li(o,l)(t);case 6:n=e.sent,g((function(e){e.editMode="stopped",e.isDirty=!1})),window.setTimeout((function(){u.projectDetail({projectId:n},!0)})),e.next=14;break;case 11:return e.next=13,sc(o,l)(Object(ba.a)(Object(ba.a)({},t),{},{id:i.id}));case 13:g((function(e){e.editMode="stopped",e.isDirty=!1}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),'duplicate key value violates unique constraint "projects_project_name_key"'===e.t0.message?c.error('Failed to save: name "'.concat(D.name,'" already in use')):c.error("Failed to save: ".concat(e.t0)),g((function(e){e.editMode="started"}));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i){e.next=3;break}throw new Error("No project.");case 3:return g((function(e){e.editMode="deleting"})),e.next=6,so(o,l)(i);case 6:c.info("Deleted project ".concat(i.name)),u.projects(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c.error("Failed to delete: ".concat(e.t0)),g((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)(Ae,{value:x,onChange:O,locked:P,summary:P?Object(fe.c)("div",{css:{display:"flex",alignItems:"baseline"},children:[Object(fe.b)(ia,{children:"Project\xa0"}),Object(fe.b)(Ht,{value:D.name,onChange:function(e){return R("name",e)},error:null===N||void 0===N?void 0:N.name,css:{width:"30em"},InputProps:{sx:{fontWeight:"700"}}})]}):Object(fe.c)(ia,{children:["Project ",D.name," ",Object(fe.c)(ia.Subtitle,{children:["(",null!==(t=null===i||void 0===i?void 0:i.sampleCount)&&void 0!==t?t:0," samples)"]})]}),actions:Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[(A||L)&&p.hasPermission(re.NAMCResource.projects,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:L,items:[{key:"edit",label:"Edit Project",onClick:function(){g((function(e){e.editMode="started",e.lastValues=e.values}))}},Et,{key:"delete",label:"Delete Project",onClick:function(){k(!0)},disabled:!p.hasPermission(re.NAMCResource.projects,re.GrantAction.deleteAny)}]}),(P||M)&&Object(fe.c)(fe.a,{children:[!m&&Object(fe.b)(tt.a,{onClick:function(){g((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:M,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:_,variant:"contained",disabled:!T||M||!!N,children:"Save"})]})]}),children:Object(fe.c)("div",{css:{flex:1,display:"grid",gap:"0.75em",gridTemplateColumns:"auto 1fr auto",gridTemplateAreas:'\n              "id              contactId          map"\n              "createdDate     isPrivate          map"\n              ".               modelIds           map"\n              ".               description        map"\n              ".               .                  map"\n            '},children:[Object(fe.b)(je,{gridArea:"id",value:null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:"",label:"Project ID"}),Object(fe.b)(je,{gridArea:"createdDate",value:w(null!==(a=null===i||void 0===i?void 0:i.createdDate)&&void 0!==a?a:null),label:"Created On"}),Object(fe.b)(Ee,{gridArea:"contactId",value:D.contactId,onChange:function(e){return R("contactId",e)},valueLabel:null!==(r=null===i||void 0===i?void 0:i.contactName)&&void 0!==r?r:"",optionsSelector:zg,label:"Contact Name",readOnly:!P}),Object(fe.b)(ft,{gridArea:"isPrivate",value:!D.isPrivate,onChange:function(e){return R("isPrivate",!e)},label:"Project samples appear in the public web map",readOnly:!P}),Object(fe.b)(Im,{gridArea:"modelIds",value:D.modelIds,onChange:function(e){return R("modelIds",e)},label:"Models",readOnly:!P}),Object(fe.b)(Ht,{gridArea:"description",value:D.description,onChange:function(e){return R("description",e)},label:"Description",readOnly:!P,multiline:!0,minRows:3}),Object(fe.b)("div",{css:{gridArea:"map",minHeight:"300px"},children:!P&&i&&Object(fe.b)(Cg,{projectId:i.id,projectName:D.name})})]})}),i&&Object(fe.b)(kg,{projectId:i.id,projectName:D.name,canModify:A})]}),Object(fe.b)(st,{title:"Confirm Delete Project",isOpen:S,onClose:function(){k(!1)},onConfirm:F,children:"Are you sure you want to delete this project?"}),T&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},Ng=sa((function(e){var t=e.projectId,n=Object(J.i)(t?Ku(Number(t)):Xu);return t&&!n?Object(ue.jsxs)("h2",{children:["Project ",t," not found."]}):Object(ue.jsx)(Tg,{project:n})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),Ag=[Rp({field:"title",flex:1,minWidth:140}),_p({headerName:"Project ID",field:"id",width:120}),Ep({field:"owner",filterTooltip:"Filter by this owner",flex:1,minWidth:140}),Gp({field:"sampleCount",width:140}),Gp({headerName:"Model Count",colId:"modelCount",valueGetter:function(e){return e.data.modelIds.length},width:140}),qp({headerName:"Created",field:"createdDate",width:140}),qp({headerName:"Updated",field:"updatedDate",width:140})],Pg=Object(J.b)({key:"ProjectsListing/textFilterState",default:""}),Mg=Object(J.b)({key:"ProjectsListing/addedFiltersState",default:[]}),Lg=sa((function(){var e=bv(),t=Object(J.i)(ud),n=Object(J.i)(Ju),a=Zt(Object(J.h)(Pg)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(J.h)(Mg),p=Object(d.a)(u,2),m=p[0],b=p[1],f=Object(s.useMemo)((function(){var e=[];if(l)if(l.match(/^\d+$/)){var t=Number(l);e.push({id:"text",label:"Project ".concat(l),filterFn:function(e){return e.id===t},onDelete:c})}else e.push({id:"text",label:'Title/Owner contains "'.concat(l,'"'),filterFn:function(e){var t=e.name,n=e.contactName;return t.toLowerCase().includes(l.toLowerCase())||n.toLowerCase().includes(l.toLowerCase())},onDelete:c});return e.push.apply(e,Object(ci.a)(m)),e}),[l,m]),h=Object(s.useMemo)((function(){return f.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(t){var n="filter/".concat(String(t.contactName));return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:t.name,onClick:function(){return e.projectDetail({projectId:t.id})}},owner:{label:t.contactName,onFilter:function(){c(),b([{id:n,label:t.contactName,filterFn:function(e){return e.contactName===t.contactName},onDelete:function(){return b((function(e){return e.filter((function(e){return e.id!==n}))}))}}])},disabled:!!m.find((function(e){return e.id===n}))||!t.contactName}})}))}),[n,f]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)($t,{value:i,onChange:o,label:"Project ID, Title, Owner"}),t.hasPermission(re.NAMCResource.projects,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){e.projectCreate()},children:"Create New Project"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:f,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:h.length,descriptor:"project"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:h,columnDefs:Ag,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(Pe.a,{height:"20em"})})),Rg=[_p({field:"name",flex:1,minWidth:200}),_p({field:"description",flex:2,minWidth:200}),Rp({headerName:"Download XLSX",field:"downloadXlsx",width:150}),Rp({headerName:"Download CSV",field:"downloadCsv",width:150})],_g=Object(J.b)({key:"ReportsListing/textFilterState",default:""}),Fg=sa((function(){var e=ae(),t=Je(),n=Object(J.i)(ed),a=Zt(Object(J.h)(_g)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];return l&&e.push({id:"text",label:'Name/Description contains "'.concat(l,'"'),filterFn:function(e){var t=e.name,n=e.description;return t.toLowerCase().includes(l.toLowerCase())||n.toLowerCase().includes(l.toLowerCase())},onDelete:c}),e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(n){var a=n.id,r=n.name,i=n.description,o=function(){var n=Object(ui.a)(pi.a.mark((function n(){var i,o,s;return pi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=t.info("Still creating report...",2500),n.next=4,Fs(e)(a);case 4:return o=n.sent,i(),s=o.reduce((function(e,t){return Object(A.uniq)([].concat(Object(ci.a)(e),Object(ci.a)(Object.keys(t))))}),[]),n.abrupt("return",F({wsName:r,columns:s.map((function(e){return{key:e,header:e}})),rows:o}));case 10:n.prev=10,n.t0=n.catch(0),t.error("Failed to create report: ".concat(n.t0));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return{id:a,name:r,description:i,downloadXlsx:{label:"Download XLSX",onClick:function(){var e=Object(ui.a)(pi.a.mark((function e(){var t;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:R(t,"Report ".concat(r,".xlsx"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},downloadCsv:{label:"Download CSV",onClick:function(){var e=Object(ui.a)(pi.a.mark((function e(){var t;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:_(t,"Report ".concat(r,".csv"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}}))}),[n,u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)("div",{css:{display:"flex",gap:"0.5em"},children:Object(fe.b)($t,{value:i,onChange:o,label:"Report Name or Description"})}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:p.length,descriptor:"report"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:Rg,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(Pe.a,{variant:"rectangular",height:"20em"})})),Eg=[_p({field:"predictorName",flex:2,minWidth:150}),Up({headerName:"Type",field:"isTemporal",valueLabels:["Spatial","Temporal"],flex:1,minWidth:120}),_p({field:"predictorValue",flex:1,minWidth:150}),qp({headerName:"Calculation Date",field:"updatedDate",flex:1,minWidth:150}),_p({field:"status",valueFormatter:function(e){switch(e.value){case"current":return"Valid";case"missing":return"Missing";case"expired":return"Expired"}},flex:1,minWidth:120})],qg=[_p({field:"modelName",flex:3,minWidth:150}),Gp({headerName:"Fixed Count",field:"fixedCount",flex:1,minWidth:120}),Gp({field:"modelResult",flex:1,minWidth:120}),_p({field:"condition",flex:1,minWidth:150}),_p({field:"notes",flex:3,minWidth:150}),qp({headerName:"Calculation Date",field:"updatedDate",flex:1,minWidth:150})],Bg=sa((function(e){var t=e.sampleId,n=Object(J.i)(_u(t));return Object(fe.c)("div",{css:{flex:n.length?1:0,minHeight:"10rem",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex"},children:[Object(fe.b)(Xp,{children:"Predictors"}),Object(fe.b)(Kp,{total:n.length,visible:n.length,descriptor:"sample predictor value",css:{marginLeft:"auto"}})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rowIdProperty:"predictorId",rows:n,columnDefs:Eg,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)("div",{css:{minHeight:"10rem"},children:Object(fe.b)(Pe.a,{variant:"rectangular",height:"10rem"})})})),Ug=sa((function(e){var t=e.sampleId,n=Object(J.i)(Pu(t));return Object(fe.c)("div",{css:{flex:n.length?1:0,minHeight:"10rem",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex"},children:[Object(fe.b)(Xp,{children:"Models"}),Object(fe.b)(Kp,{total:n.length,visible:n.length,descriptor:"model result",css:{marginLeft:"auto"}})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rowIdProperty:"modelId",rows:n,columnDefs:qg,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)("div",{css:{minHeight:"10rem"},children:Object(fe.b)(Pe.a,{variant:"rectangular",height:"10rem"})})})),Gg=["siteId"],Wg=sa((function(e){var t=e.siteId,n=Object(gi.a)(e,Gg),a=Object(J.i)(Rc(t));return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},n),{},{value:a[0].waterbodyName}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),Vg=function(e){var t=e.gridArea,n=e.label,a=e.onChange,r=e.readOnly,i=e.value,o=e.valueLabel,l=bv(),c=Object(J.i)(Mc),u=Object(J.i)(Pc),p=_c(),m=Object(s.useState)(""),b=Object(d.a)(m,2),f=b[0],h=b[1],g=Object(s.useState)([]),y=Object(d.a)(g,2),v=y[0],x=y[1],O=Object(s.useCallback)((function(e){return function(t,n){var a=n.inputValue;if(a.length<3&&e){var r=t.find((function(t){return t.value===e}));return r?[r]:[]}return t.filter((function(e){return e.label.toLowerCase().includes(a.toLowerCase())})).slice(0,100)}}),[]);if(Object(s.useEffect)((function(){if(!r)switch(u){case si.unfetched:p();break;case si.fetched:x(c.map((function(e){var t=e.id,n=e.name;return{value:t,label:"".concat(n," [").concat(t,"]")}})))}}),[u,r]),r)return Object(fe.b)(je,{label:"Site",gridArea:t,value:Object(fe.b)("a",{onClick:function(){l.siteDetail({siteId:i})},children:o})});if(0===v.length)return Object(fe.b)(je,{css:{gridArea:t},label:n,value:Object(fe.b)(Pe.a,{})});var j=f.length>=3;return Object(fe.b)(ge.a,{inputValue:f,onInputChange:function(e,t){h(t)},options:j?v:[],filterOptions:O(i),noOptionsText:j?"No sites found":"...",getOptionLabel:function(e){return e.label},getOptionDisabled:function(e){return!!e.disabled},renderInput:function(e){return Object(fe.b)(he.a,Object(ba.a)(Object(ba.a)({},e),{},{label:n}))},onChange:function(e,t){a(null===t||void 0===t?void 0:t.value)},size:"small",value:v.find((function(e){return e.value===i})),css:{gridArea:t},disableClearable:!0})},Hg=Object(J.b)({key:"SampleDetail/isExpandedState",default:!0}),Jg=function(e){var t=e.sample,n=bv(),a=ae(),r=Gc(),i=Je(),o=Object(J.i)(ud),l=Hc(Object(J.i)(su)),c=Hc(Object(J.i)(pu)),u=Hc(Object(J.i)(mu)),p=Hc(Object(J.i)(uu)),m=Hc(Object(J.i)(du)),b=t.boxId,f=t.boxState,g=t.customerName,y=t.id,v=t.measurements,x=t.sampleTypeName,O=t.siteName,j=t.submittedByName,I=t.usState,S=C(function(e){var t=e.sample,n=t.area,a=t.customerSiteCode,r=t.designTypeId,i=t.ecosystemId,o=t.effortTypeId,s=t.fieldNotes,l=t.fieldSplit,c=t.habitatId,u=t.jarCount,d=t.labNotes,p=t.mesh,m=t.sampleDate,b=t.sampleLatitude,f=t.sampleLongitude,h=t.sampleMethodId,g=t.siteId,y=t.visitId;return{editMode:"stopped",isDirty:!1,values:{area:n,customerSiteCode:a,designTypeId:r,ecosystemId:i,effortTypeId:o,fieldNotes:s,fieldSplitPercent:l&&Object(A.round)(100*l,3),habitatId:c,jarCount:u,labNotes:d,mesh:p,sampleDate:m,sampleLatitude:b,sampleLongitude:f,sampleMethodId:h,siteId:g,visitId:y}}}({sample:t}),[t]),k=Object(d.a)(S,3),D=k[0],z=(k[1],k[2]),T=Object(J.h)(Hg),N=Object(d.a)(T,2),P=N[0],M=N[1],L=Object(s.useState)(!1),R=Object(d.a)(L,2),_=R[0],F=R[1],E=D.values,q=E.area,B=E.customerSiteCode,U=E.designTypeId,G=E.ecosystemId,W=E.effortTypeId,V=E.fieldNotes,H=E.fieldSplitPercent,Y=E.habitatId,Q=E.jarCount,$=E.labNotes,Z=E.mesh,K=E.sampleDate,X=E.sampleLatitude,ee=E.sampleLongitude,te=E.sampleMethodId,ne=E.siteId,ie=E.visitId,oe=D.editMode,se=D.isDirty,le=function(){var e={jarCount:!Q,sampleLatitude:null===X&&null!==ee,sampleLongitude:null===ee&&null!==X};if(Object.values(e).some((function(e){return e})))return e}(),ce="stopped"===oe,ue="started"===oe,de="stopping"===oe,pe="deleting"===oe,me=function(e){return function(t){return function(e,t){z((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))}(e,t)}},be=function(){var e=Object(ui.a)(pi.a.mark((function e(){var n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z((function(e){e.editMode="stopping"})),n={area:q,customerSiteCode:B.trim(),designTypeId:U,ecosystemId:G,effortTypeId:W,fieldNotes:V.trim(),fieldSplit:H/100,habitatId:Y,jarCount:Q,labNotes:$.trim(),mesh:Z,sampleDate:K,sampleLatitude:X,sampleLongitude:ee,sampleMethodId:te,siteId:ne,visitId:ie.trim()},e.next=5,uc(a,r)(Object(ba.a)(Object(ba.a)({},n),{},{id:t.id}));case 5:z((function(e){e.editMode="stopped",e.isDirty=!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i.error("Failed to save: ".concat(e.t0)),z((function(e){e.editMode="started"}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No sample.");case 3:return z((function(e){e.editMode="deleting"})),e.next=6,co(a,r)(t);case 6:i.info("Deleted sample ".concat(y)),n.boxDetail({boxId:b}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),i.error("Failed to delete: ".concat(e.t0)),z((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ge=t.sortEndDate,ye=t.sortStartDate,ve=t.sorterName,xe=ge?"".concat(ve," on ").concat(w(ge)):ye?"Started by ".concat(ve," on ").concat(w(ye)):"Not sorted",Oe=t.identifierName,we=t.identificationEndDate,Ie=t.identificationStartDate,Se=we?"".concat(null!==Oe&&void 0!==Oe?Oe:"Unknown"," on ").concat(w(we)):Ie?"Started by ".concat(Oe," on ").concat(w(Ie)):"Not identified",ke=o.hasPermission(re.NAMCResource.samples,re.GrantAction.updateAny),Ce=o.hasPermission(re.NAMCResource.samples,re.GrantAction.deleteAny);return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)(Ae,{value:P,onChange:M,locked:ue,summary:Object(fe.c)(ia,{children:["Sample ",y," ",Object(fe.c)(ia.Subtitle,{children:["(Box ",b,")"]})]}),actions:Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[ce&&(ke||Ce)&&Object(fe.b)(qt,{label:"Actions",disabled:pe,items:[{key:"sorting",label:"Sorting",onClick:function(){return n.sampleSorting({sampleId:t.id})}},{key:"taxonomy",label:"Taxonomy",onClick:function(){return n.sampleTaxonomyIdentification({sampleId:t.id})}},Et,{key:"edit",label:"Edit Sample",onClick:function(){M(!0),z((function(e){e.editMode="started",e.lastValues=e.values}))},disabled:!ke},Et,{key:"delete",label:"Delete Sample",onClick:function(){F(!0)},disabled:!Ce}]}),(ue||de)&&Object(fe.c)(fe.a,{children:[Object(fe.b)(tt.a,{onClick:function(){z((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:de,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:be,variant:"contained",disabled:!se||de||!!le,children:"Save"})]})]}),children:Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateAreas:'\n                "boxId           customerName         customerName      map"\n                "boxState        submittedByName      siteId            map"\n                "measurements    usState              customerSiteCode  map"\n                "sampleMethodId  sampleDate            waterbodyName    map"\n                "habitatId       sampleTypeName       sampleLatitude    map"\n                "ecosystemId     jarCount             sampleLongitude   map"\n                "effortTypeId    fieldSplitPercent    area              sortState"\n                "designTypeId    mesh                 visitId           identificationState"\n                "fieldNotes      fieldNotes           labNotes          labNotes"\n              '},children:[Object(fe.b)("div",{css:{gridArea:"map",minHeight:"300px"},children:Object(fe.b)(zm,{sitesListingSource:null,sitesSelector:Rc(ne),mapboxToken:ya})}),Object(fe.b)(je,{gridArea:"boxId",label:"Box ID",value:Object(fe.b)("a",{onClick:function(){n.boxDetail({boxId:b})},children:b})}),Object(fe.b)(je,{gridArea:"customerName",label:"Customer",value:g}),Object(fe.b)(je,{gridArea:"boxState",label:"Box State",value:f}),Object(fe.b)(je,{gridArea:"submittedByName",label:"Submitted By",value:j}),Object(fe.b)(Vg,{gridArea:"siteId",label:"Site",value:ne,onChange:me("siteId"),valueLabel:O,readOnly:!ue}),Object(fe.b)(je,{gridArea:"measurements",label:"Measurements",value:v}),Object(fe.b)(je,{gridArea:"usState",label:"US State",value:I}),Object(fe.b)(Ht,{gridArea:"customerSiteCode",label:"Customer Site Code",value:B,onChange:me("customerSiteCode"),readOnly:!ue,error:null===le||void 0===le?void 0:le.customerSiteCode,maxLength:100}),Object(fe.b)(Ee,{gridArea:"sampleMethodId",label:"Sample Method",value:te,onChange:me("sampleMethodId"),readOnly:!ue,error:null===le||void 0===le?void 0:le.sampleMethodId,options:l}),Object(fe.b)(ut,{gridArea:"sampleDate",label:"Sample Date",value:K,onChange:me("sampleDate"),readOnly:!ue,error:null===le||void 0===le?void 0:le.sampleDate,max:h()().format("YYYY-MM-DD")}),Object(fe.b)(Wg,{gridArea:"waterbodyName",label:"Waterbody Name",siteId:ne}),Object(fe.b)(Ee,{gridArea:"habitatId",label:"Habitat",value:Y,onChange:me("habitatId"),readOnly:!ue,options:c}),Object(fe.b)(je,{gridArea:"sampleTypeName",label:"Sample Type",value:x}),Object(fe.b)(kt,{gridArea:"sampleLatitude",label:"Sampled Latitude",value:X,onChange:me("sampleLatitude"),readOnly:!ue,error:null===le||void 0===le?void 0:le.sampleLatitude,min:-90,max:90}),Object(fe.b)(Ee,{gridArea:"ecosystemId",label:"Ecosystem",value:G,onChange:me("ecosystemId"),readOnly:!ue,options:u,isClearable:!0}),Object(fe.b)(kt,{gridArea:"jarCount",label:"Jar Count",value:Q,onChange:me("jarCount"),readOnly:!ue,error:null===le||void 0===le?void 0:le.jarCount,min:1,precision:0}),Object(fe.b)(kt,{gridArea:"sampleLongitude",label:"Sampled Longitude",value:ee,onChange:me("sampleLongitude"),readOnly:!ue,error:null===le||void 0===le?void 0:le.sampleLongitude,min:-180,max:180}),Object(fe.b)(Ee,{gridArea:"effortTypeId",label:"Effort Type",value:W,onChange:me("effortTypeId"),readOnly:!ue,options:p,isClearable:!0}),Object(fe.b)(kt,{gridArea:"fieldSplitPercent",label:"Field Split %",value:H,onChange:me("fieldSplitPercent"),readOnly:!ue,error:null===le||void 0===le?void 0:le.fieldSplitPercent,min:0,max:100,precision:3}),Object(fe.b)(kt,{gridArea:"area",label:"Area Sampled (m\xb2)",value:q,onChange:me("area"),readOnly:!ue,error:null===le||void 0===le?void 0:le.area,min:0,max:5}),Object(fe.b)(je,{gridArea:"sortState",label:"Sorting",value:Object(fe.b)("a",{onClick:function(){n.sampleSorting({sampleId:t.id})},children:xe})}),Object(fe.b)(Ee,{gridArea:"designTypeId",label:"Design Type",value:U,onChange:me("designTypeId"),readOnly:!ue,options:m,isClearable:!0}),Object(fe.b)(kt,{gridArea:"mesh",label:"Mesh Size (\u03bcm)",value:Z,onChange:me("mesh"),readOnly:!ue,error:null===le||void 0===le?void 0:le.mesh}),Object(fe.b)(Ht,{gridArea:"visitId",label:"Visit ID",value:ie,onChange:me("visitId"),readOnly:!ue,error:null===le||void 0===le?void 0:le.visitId,maxLength:100}),Object(fe.b)(je,{gridArea:"identificationState",label:"Identification",value:Object(fe.b)("a",{onClick:function(){n.sampleTaxonomyIdentification({sampleId:t.id})},children:Se})}),Object(fe.b)(Ht,{gridArea:"fieldNotes",label:"Field Notes",value:V,onChange:me("fieldNotes"),readOnly:!ue,error:null===le||void 0===le?void 0:le.fieldNotes}),Object(fe.b)(Ht,{gridArea:"labNotes",label:"Lab Notes",value:$,onChange:me("labNotes"),readOnly:!ue,error:null===le||void 0===le?void 0:le.labNotes})]})}),Object(fe.b)(Bg,{sampleId:t.id}),Object(fe.b)("div",{css:{borderBottom:"1px solid lightgrey",height:"1px",margin:"1rem 0"}}),Object(fe.b)(Ug,{sampleId:t.id})]}),Object(fe.b)(st,{title:"Confirm Delete Sample",isOpen:_,onClose:function(){F(!1)},onConfirm:he,children:"Are you sure you want to delete this sample?"}),se&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},Yg=sa((function(e){var t=e.sampleId,n=Object(J.i)(Ru(Number(t)));return null===n?Object(ue.jsxs)("h2",{children:["Sample ",t," not found."]}):Object(ue.jsx)(Jg,{sample:n})}),(function(){return Object(fe.b)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})})})),Qg=Object(J.b)({key:"SampleInfoPanel/isExpanded",default:!0}),$g=function(e){var t=e.sample,n=e.actions,a=void 0===n?null:n,r=bv(),i=Object(J.h)(Qg),o=Object(d.a)(i,2),s=o[0],l=o[1];if(!t)return Object(fe.b)(Pe.a,{variant:"rectangular"});var c=t.id,u=t.boxId,p=t.sorterName,m=void 0===p?"":p,b=t.sampleDate,f=t.sortEndDate,h=t.customerName,g=t.siteName,y=t.siteId;return Object(fe.b)(Ae,{value:s,onChange:l,summary:Object(fe.c)(ia,{children:["Sample ",c," ",Object(fe.c)(ia.Subtitle,{children:["(Box ",u,")"]})]}),actions:a,children:Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"auto 1fr auto",gridTemplateAreas:'\n            "boxId        customerName      map"\n            "sampleDate   siteName          map"\n            "sortEndDate  sorterName        map"\n            ".            .                 map"\n          '},children:[Object(fe.b)("div",{css:{gridArea:"map",minHeight:"300px"},children:Object(fe.b)(zm,{sitesListingSource:null,sitesSelector:Rc(y),mapboxToken:ya})}),Object(fe.b)(je,{gridArea:"boxId",label:"Box ID",value:Object(fe.b)("a",{onClick:function(){r.boxDetail({boxId:u})},children:u})}),Object(fe.b)(je,{gridArea:"customerName",label:"Customer",value:h}),Object(fe.b)(je,{gridArea:"sampleDate",label:"Sample Date",value:w(b)}),Object(fe.b)(je,{gridArea:"sorterName",label:"Sorter",value:m}),Object(fe.b)(je,{gridArea:"sortEndDate",label:"Sort Date",value:w(f)}),Object(fe.b)(je,{gridArea:"siteName",label:"Site",value:Object(fe.b)("a",{onClick:function(){r.siteDetail({siteId:y})},children:g})})]})})},Zg=n(193),Kg=n.n(Zg),Xg=function(e){var t=e.userId,n=e.sample,a=e.editMode,r=e.canStopOwn,i=e.canStopOther,o=e.actions,s=n.sortStartDate&&!n.sortEndDate&&n.sorterId!==t,l="Active"!==n.boxState?"The sorting for this sample cannot be edited because the box it is associated with is not currently active.":s&&!i?"Sorting for this sample is already underway by another user.":void 0,c="stopped"!==a&&"starting"!==a||s,u=!!l||"starting"===a||"stopping"===a||"started"===a&&!r;return $e(Object(ue.jsx)(tt.a,{disabled:u,onClick:function(){"started"===a||s?o.stopSort():o.startSort()},startIcon:c?Object(ue.jsx)(Kg.a,{}):Object(ue.jsx)(og.a,{}),variant:c?"contained":"outlined",children:c?"Stop Sorting":"Start Sorting"}),l,u)},ey={values:{sorterId:"",labSplitPercent:null,sorterCount:null,sortTime:null,sortDate:"",elutriation:!1},editMode:"stopped",persistence:"unsaved",errors:void 0},ty=function(e){var t={sorterId:!e.sorterId,labSplitPercent:null===e.labSplitPercent,sorterCount:null===e.sorterCount,sortTime:null===e.sortTime};if(Object.values(t).some((function(e){return e})))return t},ny=3,ay=function(e){var t=e.sorterUsers,n=e.sample,a=e.user,r=Object(s.useMemo)((function(){var e=Object(ci.a)(t);return t.find((function(e){return e.id===a.id}))||e.push(a),e}),[t]),i=function(e){var t=e.sample,n=e.user,a=e.sorterUsers,r=ae(),i=Vc(),o=Je(),s=C(ey,[]),l=Object(d.a)(s,3),c=l[0],u=l[1],p=l[2],m={reset:function(){var e=t.sorterId,a=t.sorterCount,r=t.sortTime,i=t.labSplit,o=t.elutriation,s={sorterId:e||"",sorterCount:a,sortTime:r,labSplitPercent:i&&Object(A.round)(100*i,ny),elutriation:!!o};u((function(){return Object(ba.a)(Object(ba.a)({},ey),{},{sample:t,userId:n.id,values:s,persistence:ty(s)?"unsaved":"saved",editMode:t.sorterId!==n.id||t.sortEndDate?"stopped":"started"})}))},setFieldValue:function(){var e=Object(ui.a)(pi.a.mark((function e(t,n){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.sample){e.next=2;break}throw new Error("No sample");case 2:p((function(e){Object.assign(e.values,Object(zp.a)({},t,n)),e.persistence="dirty"}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),saveSort:function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n,s,l,u,d,m,b,f,h,g;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=c.values,u=l.sorterId,d=l.labSplitPercent,m=l.sorterCount,b=l.sortTime,f=l.elutriation,null!==(t=c.sample)&&void 0!==t&&t.id&&""!==u&&null!==d&&null!==m&&null!==b){e.next=4;break}throw new Error("Missing values.");case 4:return h={sampleId:c.sample.id,sorterId:u,labSplit:d/100,sorterCount:m,sortTime:b,elutriation:f},p((function(e){e.persistence="saving"})),e.next=8,Hl(r,i)(h);case 8:g=null!==(n=null===(s=a.find((function(e){return e.id===h.sorterId})))||void 0===s?void 0:s.fullName)&&void 0!==n?n:c.sample.sorterName,p((function(e){e.persistence="saved",Object.assign(e.sample,Object(ba.a)(Object(ba.a)({},h),{},{sorterName:g}))})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),o.error("Failed to update Lab Sort: ".concat(e.t0)),p((function(e){e.persistence="dirty"}));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),startSort:function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.sample){e.next=2;break}throw new Error("No sample");case 2:return e.prev=2,p((function(e){e.editMode="starting"})),e.next=6,Ll(r,i)({sampleId:c.sample.id});case 6:p((function(e){if(!e.sample)throw new Error("No sample.");e.editMode="started",e.values.sorterId=n.id,e.sample.sorterId=n.id,e.sample.sorterName=n.fullName})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o.error("Failed to start Lab Sort: ".concat(e.t0)),p((function(e){e.editMode="stopped"}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),stopSort:function(){var e=Object(ui.a)(pi.a.mark((function e(){var t;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.sample){e.next=2;break}throw new Error("No sample");case 2:return e.prev=2,p((function(e){e.editMode="stopping"})),e.next=6,El(r,i)({sampleId:c.sample.id});case 6:t=h()().toISOString(),p((function(e){if(!e.sample)throw new Error("No sample.");e.editMode="stopped",e.sample.sortEndDate=t})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),o.error("Failed to stop Lab Sort: ".concat(e.t0)),p((function(e){e.editMode="started"}));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},b="stopped"===c.editMode?void 0:ty(c.values);return[Object(ba.a)(Object(ba.a)({},c),{},{errors:b}),m]}({sample:n,user:a,sorterUsers:r}),o=Object(d.a)(i,2),l=o[0],c=o[1],u=l.values,p=u.sorterId,m=u.labSplitPercent,b=u.sorterCount,f=u.sortTime,g=u.elutriation,y=l.errors,v=l.editMode,x=c.setFieldValue,O="started"===v;Object(s.useEffect)((function(){c.reset()}),[n.id]);var j=r.map((function(e){return{value:e.id,label:e.fullName}}));n.sorterId&&!r.find((function(e){return e.id===p}))&&j.push({value:p,label:n.sorterName});var w=a.hasPermission(re.NAMCResource.sorting,re.GrantAction.updateOwn),I=a.hasPermission(re.NAMCResource.sorting,re.GrantAction.updateAny),S="started"===l.editMode&&"saved"===l.persistence,k=I,D="dirty"===l.persistence,z=D&&!y;return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[l.sample&&Object(fe.b)($g,{sample:l.sample,actions:w&&Object(fe.b)(Xg,{userId:a.id,sample:l.sample,actions:c,canStopOwn:S,canStopOther:k,editMode:l.editMode})}),Object(fe.c)("div",{css:{display:"grid",gridTemplateColumns:"20em",gap:"1em"},children:[Object(fe.b)(Gt,{label:"Sorter",value:p,onChange:function(e){return x("sorterId",e)},options:j,error:null===y||void 0===y?void 0:y.sorterId,readOnly:!O,disabled:!I}),Object(fe.b)(kt,{label:"Split %",value:m,onChange:function(e){return x("labSplitPercent",e)},min:0,max:100,precision:ny,error:null===y||void 0===y?void 0:y.labSplitPercent,readOnly:!O}),Object(fe.b)(kt,{label:"Number of bugs",value:b,onChange:function(e){return x("sorterCount",e)},min:0,max:999999,error:null===y||void 0===y?void 0:y.sorterCount,readOnly:!O}),Object(fe.b)(ft,{label:"Elutriation",value:g,onChange:function(e){return x("elutriation",e)},readOnly:!O}),Object(fe.b)(kt,{label:"Sort time (hours)",value:f,onChange:function(e){return x("sortTime",e)},min:0,max:999999,error:null===y||void 0===y?void 0:y.sortTime,readOnly:!O}),("started"===v||"stopping"===v)&&Object(fe.b)(tt.a,{onClick:c.saveSort,disabled:!z,variant:"contained",children:"Save"})]})]}),D&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},ry=sa((function(e){var t=e.sampleId,n=Object(J.i)(dd),a=Object(J.i)(ud),r=Object(J.i)(Ru(Number(t)));return null===r?Object(ue.jsxs)("h2",{children:["Sample ",t," not found."]}):Object(ue.jsx)(ay,{sorterUsers:n,sample:r,user:a})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"9em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})]})})),iy=n(117),oy=n.n(iy),sy=function(){return"row/".concat(Object(A.uniqueId)())},ly={sample:void 0,organisms:[],measurements:!1,organismFilters:[],editMode:"stopped",scrollToRowId:null},cy=function(e,t){if(Q.a.debug("dispatched:",t),"reset"===t.type){var n=t.payload,a=n.sample,r=n.organisms,i=n.user;return Object(ba.a)(Object(ba.a)({},ly),{},{sample:a,organisms:r.map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{rowId:sy(),persistence:"saved"})})),editMode:a.identifierId!==i.id||a.identificationEndDate?"stopped":"started",measurements:!!a.measurements})}return Object(k.a)(e,(function(n){switch(t.type){case"createLocalOrganism":var a=t.payload;n.organisms.push(Object(ba.a)(Object(ba.a)({},a),{},{persistence:"unsaved"})),n.scrollToRowId=a.rowId;break;case"updateLocalOrganism":var r=t.payload,i=r.rowId,o=r.fields,s=n.organisms.find((function(e){return e.rowId===i}));if(!s)return;Object.assign(s,o);break;case"deleteLocalOrganism":var l=t.payload.rowId;n.organisms=n.organisms.filter((function(e){return e.rowId!==l}));break;case"createFilter":var c=t.payload.taxonId;if(e.organismFilters.find((function(e){return e.taxonId===c})))return;n.organismFilters.push({taxonId:c});break;case"deleteFilter":var u=t.payload.taxonId;n.organismFilters=n.organismFilters.filter((function(e){return e.taxonId!==u}));break;case"setEditMode":var d=t.payload;n.editMode=d,"stopped"===d&&(n.organisms=n.organisms.filter((function(e){return"unsaved"!==e.persistence})));break;case"setScrollToRowId":n.scrollToRowId=t.payload}}))},uy=function(e){var t=e.colDef.field,n=e.newValue,a=e.data;return e.context.actions.updateOrganism(Object(ba.a)(Object(ba.a)({},a),{},Object(zp.a)({},t,n))),!1},dy=[{headerName:"",field:"persistence",width:70,hide:!0,cellRenderer:"PersistenceRenderer"},{headerName:"Taxon",field:"taxonName",width:300,cellRenderer:"TaxonRenderer"},{field:"levelName",headerName:"Level",width:150,comparator:function(e,t,n,a){return n.data.levelRankOrder-a.data.levelRankOrder}},{field:"lifeStageId",headerName:"Life Stage",width:150,editable:!0,cellEditor:"LifeStageEditor",cellRenderer:"LifeStageRenderer",valueSetter:uy,cellClassRules:{"DataGrid__cell--error":function(e){return!e.value}},comparator:function(e,t,n,a){return n.data.lifeStageRankOrder-a.data.lifeStageRankOrder}},{field:"splitCount",width:150,editable:!0,cellEditor:"NumberEditor",cellRenderer:"NumberRenderer",type:"numericColumn",valueSetter:uy,cellClassRules:{"DataGrid__cell--error":function(e){var t=e.data,n=e.value;return"unsaved"===t.persistence&&n}}},{field:"bigRareCount",width:150,editable:!0,cellEditor:"NumberEditor",cellRenderer:"NumberRenderer",type:"numericColumn",valueSetter:uy,cellClassRules:{"DataGrid__cell--error":function(e){var t=e.data,n=e.value;return"unsaved"===t.persistence&&n}}},{field:"bugSize",headerName:"Size",width:150,editable:!0,cellEditor:"NumberEditor",cellEditorParams:{precisionAllowed:1},cellRenderer:"NumberRenderer",type:"numericColumn",valueSetter:uy,cellClassRules:{"DataGrid__cell--error":function(e){return!e.value}}},{colId:"notesAndComments",headerName:"Notes/Comments",width:150,editable:!0,cellRenderer:"NotesAndCommentsRenderer",cellEditor:"NotesAndCommentsEditor",valueSetter:function(e){var t=e.newValue,n=t.noteTypeIds,a=t.comments,r=e.data;return e.context.actions.updateOrganism(Object(ba.a)(Object(ba.a)({},r),{},{noteTypeIds:n,comments:a})),!1},flex:1,cellClassRules:{"DataGrid__cell--error":function(e){var t=e.data;return"unsaved"===t.persistence&&(t.noteTypeIds.length>0||t.comments)}}},{colId:"actions",width:150,cellRenderer:"ActionsRenderer",pinned:"right"}],py=function(e){var t=e.isOpen;return Object(fe.b)(nt.a,{open:t,disableEscapeKeyDown:!0,children:Object(fe.b)(my,Object(ba.a)({},e))})},my=function(e){var t=e.onConfirm,n=Object(s.useState)(null),a=Object(d.a)(n,2),r=a[0],i=a[1],o=Object(s.useRef)(null),l=null===r,c=function(){null!==r&&t({time:r})};return Object(s.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[o.current]),Object(fe.c)(fe.a,{children:[Object(fe.b)(it.a,{children:"Metrics"}),Object(fe.b)(rt.a,{children:Object(fe.b)("div",{css:{padding:"0.5em"},children:Object(fe.b)(kt,{inputRef:o,label:"Hours",value:r,onChange:i,error:l,min:0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),c())}})})}),Object(fe.b)(at.a,{children:Object(fe.b)(tt.a,{disabled:null===r,onClick:c,children:"OK"})})]})},by=function(e){var t=e.userId,n=e.sample,a=e.editMode,r=e.actions,i=e.canLeave,o="Active"!==n.boxState?"The taxa for this sample cannot be edited because the box it is associated with is not currently active.":n.sortEndDate?n.identificationStartDate&&!n.identificationEndDate&&n.identifierId!==t?"Taxonomic identification for this sample is already underway by another user.":void 0:"The taxa for this sample cannot be edited because the box has not been sorted.";if(o)return $e(Object(ue.jsx)(tt.a,{disabled:!0,variant:"outlined",startIcon:Object(ue.jsx)(og.a,{}),children:"Start Identification"}),o,!0);var s="stopped"!==a&&"starting"!==a;return Object(ue.jsx)(tt.a,{disabled:"started"!==a&&"stopped"!==a||!i,onClick:function(){"started"===a?r.stopTaxonomyIdentification():r.startTaxonomyIdentification()},startIcon:s?Object(ue.jsx)(Kg.a,{}):Object(ue.jsx)(og.a,{}),variant:s?"contained":"outlined",children:s?"Stop Identification":"Start Identification"})},fy=n(194),hy=n.n(fy),gy=n(306),yy=n.n(gy),vy=n(305),xy=n.n(vy),Oy=n(304),jy=n.n(Oy),wy=Object(s.forwardRef)((function(e,t){var n=e.value,a=e.data.canEdit,r=e.precisionAllowed,i=void 0===r?0:r,o=e.negativeAllowed,l=void 0!==o&&o,c=Object(s.useState)(n||""),u=Object(d.a)(c,2),p=u[0],m=u[1],b=Object(s.useRef)(null);Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=b.current)||void 0===e?void 0:e.focus()}))}),[]),Object(s.useImperativeHandle)(t,(function(){return{getValue:function(){return p||0},isCancelBeforeStart:function(){return!a},isCancelAfterEnd:function(){return!1},isPopup:function(){return!1}}}));return Object(fe.b)("input",{type:"number",ref:b,value:p,onChange:function(e){var t=e.target.value,n=Number(t);Number(n.toFixed(i))===n&&(!l&&n<0||m(n))},style:{width:"100%",textAlign:"right"}})}));wy.displayName="NumberEditor";var Iy=Object(s.forwardRef)((function(e,t){var n=e.value,a=e.data,r=a.allowedLifeStages,i=a.canEdit,o=Object(s.useState)(n),l=Object(d.a)(o,2),c=l[0],u=l[1],p=Object(s.useState)(!1),m=Object(d.a)(p,2),b=m[0],f=m[1],h=Object(s.useRef)(null);Object(s.useEffect)((function(){}),[b]),Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=h.current)||void 0===e?void 0:e.focus()}))}),[]),Object(s.useImperativeHandle)(t,(function(){return{getValue:function(){return Number(c)},isCancelBeforeStart:function(){return!i||c},isCancelAfterEnd:function(){return!1},isPopup:function(){return!1}}}));var g=r.map((function(e){return{value:e.id,label:e.name}}));return c||g.unshift({value:-1,label:""}),Object(fe.b)("select",{value:c,onChange:function(e){var t=e.target.value;u(Number(t)),f(!0)},ref:h,style:{width:"100%"},children:g.map((function(e){var t=e.value,n=e.label;return Object(fe.b)("option",{value:t,children:n},t)}))})}));Iy.displayName="LifeStageEditor";var Sy=function(e){var t,n=e.context,a=e.value;return(null===(t=n.lifeStages.find((function(e){var t=e.id;return a===t})))||void 0===t?void 0:t.name)||""},ky=function(e){return e.value||""},Cy=function(e){var t=e.value,n=e.data.isTargetEffort;return Object(fe.c)("span",{children:[t,n&&Object(fe.b)(Xe,{})]})},Dy=function(e){var t=e.data,n=t.noteTypeIds,a=t.comments,r=e.context.noteTypes;return Object(fe.c)("div",{children:[n.map((function(e){var t=r.find((function(t){return t.id===e}));return Object(fe.b)(Ke,{badgeColor:"#cc7000",textColor:"white",tooltip:(null===t||void 0===t?void 0:t.name)||"Unknown",css:{marginRight:"0.2em"},label:(null===t||void 0===t?void 0:t.abbreviation)||"?"},e)})),Object(fe.b)("span",{children:a})]})},zy=Object(s.forwardRef)((function(e,t){var n=e.data,a=n.noteTypeIds,r=n.comments,i=n.canEdit,o=e.context.noteTypes,l=Object(s.useState)(a),c=Object(d.a)(l,2),u=c[0],p=c[1],m=Object(s.useState)(r),b=Object(d.a)(m,2),f=b[0],h=b[1],g=Object(s.useRef)(null);return Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=g.current)||void 0===e?void 0:e.focus()}))}),[]),Object(s.useImperativeHandle)(t,(function(){return{getValue:function(){return{noteTypeIds:u,comments:f}},isCancelBeforeStart:function(){return!i},isCancelAfterEnd:function(){return!1},isPopup:function(){return!0}}})),Object(fe.c)("div",{css:{minWidth:"20em"},children:[Object(fe.b)("textarea",{ref:g,value:f,onChange:function(e){return h(e.target.value)},css:{width:"95%",height:"3em",fontFamily:"Roboto"}}),Object(fe.b)("div",{children:o.map((function(e){var t=e.id,n=e.name,a=e.abbreviation;return Object(fe.c)("div",{css:{margin:"0.2em 0"},children:[Object(fe.b)("input",{type:"checkbox",checked:u.includes(t),onChange:function(e){e.target.checked?p((function(){return[].concat(Object(ci.a)(u),[t])})):p((function(){return u.filter((function(e){return e!==t}))}))}}),"(",Object(fe.b)("span",{css:{fontWeight:"bold"},children:a}),") - ",n]},t)}))})]})}));zy.displayName="NotesAndCommentsEditor";var Ty=function(e){var t=e.data,n=e.context,a=n.actions,r=n.setDeletionCandidateOrganism,i=t.splitCount,o=t.bigRareCount,s=t.noteTypeIds,l=t.comments,c=t.canDuplicate,u=t.canFilter,d=t.canDelete,p=t.persistence;return Object(fe.c)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:[Object(fe.b)(Ge.a,{disabled:!c,onClick:function(){a.duplicateOrganism(t)},children:$e(Object(fe.b)(oy.a,{}),"Create a similar organism record")}),Object(fe.b)(Ge.a,{disabled:!u,onClick:function(){a.createFilter(t)},children:$e(Object(fe.b)(Qp.a,{}),"Filter by this taxonomy")}),Object(fe.b)(Ge.a,{disabled:!d,onClick:function(){"saved"===p||i||o||0!==s.length||l?r(t):a.deleteOrganism(t)},children:$e(Object(fe.b)(hy.a,{}),"Delete this organism record")})]})},Ny=function(e){var t=e.value;return Object(fe.b)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:function(){switch(t){case"unsaved":return $e(Object(fe.b)(jy.a,{}),"Record is not ready to be saved to database.");case"saving":return $e(Object(fe.b)(xy.a,{}),"Record is saving to database...");case"saved":return $e(Object(fe.b)(yy.a,{}),"Record is saved in database.");case"error":return $e(Object(fe.b)(Ue.a,{css:{path:{fill:"red"}}}),"Record had an error saving or deleting.")}return null}()})},Ay=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"9em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})]})},Py={stopEditingWhenCellsLoseFocus:!0,suppressCellSelection:!1},My=sa((function(e){var t=e.sample,n=e.sampleOrganisms,a=Object(J.i)(sd),i=Object(J.i)(Zc),o=Object(J.i)(Kc),l=Object(J.i)(ud),c=function(){var e=ae(),t=Vc(),n=Je(),a=function(){var a=Object(ui.a)(pi.a.mark((function a(r){var i;return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.lifeStageId){a.next=13;break}return l({type:"updateLocalOrganism",payload:{rowId:r.rowId,fields:{persistence:"saving"}}}),a.prev=2,a.next=5,Nc(e,t)(r);case 5:i=a.sent,l({type:"updateLocalOrganism",payload:{rowId:r.rowId,fields:{id:i,persistence:"saved"}}}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),l({type:"updateLocalOrganism",payload:{rowId:r.rowId,fields:{persistence:"error"}}}),n.error("Failed to save organism record: ".concat(a.t0));case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}(),r=Object(s.useReducer)(cy,ly),i=Object(d.a)(r,2),o=i[0],l=i[1],c=Object(s.useMemo)((function(){return{createOrganism:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,r,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.taxonId,o.sample){e.next=3;break}throw new Error("No sample");case 3:return r=sy(),i={rowId:r,taxonId:n,sampleId:o.sample.id,splitCount:0,bigRareCount:null,noteTypeIds:[],comments:""},l({type:"createLocalOrganism",payload:i}),e.next=8,a(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),duplicateOrganism:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,r;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.sample){e.next=2;break}throw new Error("No sample");case 2:return n=sy(),r={rowId:n,taxonId:t.taxonId,sampleId:o.sample.id,splitCount:0,bigRareCount:null,noteTypeIds:[],comments:""},l({type:"createLocalOrganism",payload:r}),e.next=7,a(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateOrganism:function(){var e=Object(ui.a)(pi.a.mark((function e(t){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"updateLocalOrganism",payload:{rowId:t.rowId,fields:t}}),e.next=3,a(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteOrganism:function(){var a=Object(ui.a)(pi.a.mark((function a(r){return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"unsaved"===r.persistence){a.next=5;break}return l({type:"updateLocalOrganism",payload:{rowId:r.rowId,fields:{persistence:"deleting"}}}),a.next=5,to(e,t)(r);case 5:l({type:"deleteLocalOrganism",payload:r}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),l({type:"updateLocalOrganism",payload:{rowId:r.rowId,fields:{persistence:"error"}}}),n.error("Failed to delete organism record: ".concat(a.t0));case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}(),createFilter:function(e){return l({type:"createFilter",payload:e})},deleteFilter:function(e){return l({type:"deleteFilter",payload:e})},reset:function(){var e=Object(ui.a)(pi.a.mark((function e(t){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({type:"reset",payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),startTaxonomyIdentification:function(){var a=Object(ui.a)(pi.a.mark((function a(){return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o.sample){a.next=3;break}throw new Error("No sample");case 3:return l({type:"setEditMode",payload:"starting"}),a.next=6,_l(e,t)({sampleId:o.sample.id});case 6:l({type:"setEditMode",payload:"started"}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),l({type:"setEditMode",payload:"stopped"}),n.error("Failed to start taxonomy identification: ".concat(a.t0));case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(){return a.apply(this,arguments)}}(),stopTaxonomyIdentification:function(){l({type:"setEditMode",payload:"stoppingPrompt"})},finishTaxonomyIdentification:function(){var a=Object(ui.a)(pi.a.mark((function a(r){var i;return pi.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=r.time,a.prev=1,o.sample){a.next=4;break}throw new Error("No sample");case 4:return l({type:"setEditMode",payload:"stoppingSaving"}),a.next=7,Bl(e,t)({sampleId:o.sample.id,time:i});case 7:l({type:"setEditMode",payload:"stopped"}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),l({type:"setEditMode",payload:"started"}),n.error("Failed to stop taxonomy identification: ".concat(a.t0));case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}(),setScrollToRowId:function(e){l({type:"setScrollToRowId",payload:e})}}}),[e,o.sample]);return[o,c]}(),u=Object(d.a)(c,2),p=u[0],m=u[1],b=p.organisms,f=p.organismFilters,h=p.editMode,g=p.scrollToRowId,y=(p.sample||{}).measurements,v="started"===h,x=Object(s.useState)(null),O=Object(d.a)(x,2),j=O[0],w=O[1],I=Object(s.useState)(),k=Object(d.a)(I,2),C=k[0],D=k[1],z=Object(s.useRef)(null);Object(s.useEffect)((function(){m.reset({sample:t,organisms:n,user:l})}),[t,n,l]),Object(s.useEffect)((function(){C&&C.columnApi.setColumnVisible("bugSize",!!y)}),[C,y]),Object(s.useEffect)((function(){C&&C.columnApi.setColumnVisible("persistence",v)}),[C,v]),Object(s.useEffect)((function(){C&&g&&(window.setTimeout((function(){C.api.ensureNodeVisible((function(e){return e.data.rowId===g}))})),m.setScrollToRowId(null))}),[C,g,m.setScrollToRowId]);var T=Object(s.useMemo)((function(){return{lifeStages:i,noteTypes:o,actions:m,setDeletionCandidateOrganism:w}}),[i,o,m]),N=Object(s.useCallback)((function(e){return a.find((function(t){return t.id===e}))}),[a]),P=Object(s.useMemo)((function(){return f.reduce((function(e,t){var n=t.taxonId,a=N(n);return a?[].concat(Object(ci.a)(e),[a]):e}),[])}),[f,N]),M=Object(s.useMemo)((function(){return 0===P.length?null:P.reduce((function(e,t){var n=t.id,a=t.descendantIds;return[].concat(Object(ci.a)(e),[n],Object(ci.a)(a||[]))}),[])}),[P]),L=Object(s.useMemo)((function(){var e=M?b.filter((function(e){var t=e.taxonId;return M.includes(t)})):b,n=i.filter((function(e){return e.isActive}));return e.filter((function(e){return"deleting"!==e.persistence})).map((function(e){var a,r,o,s,l=N(e.taxonId),c=(null===l||void 0===l?void 0:l.name)||"?",u=(null===l||void 0===l?void 0:l.levelName)||"?",d=null!==(a=null===l||void 0===l?void 0:l.levelRankOrder)&&void 0!==a?a:-1,p=null!==(r=null===(o=i.find((function(t){return t.id===e.lifeStageId})))||void 0===o?void 0:o.rankOrder)&&void 0!==r?r:0,m=null!==(s=null===l||void 0===l?void 0:l.isTargetEffort)&&void 0!==s&&s,h=v&&(t.measurements||b.filter((function(t){return t.taxonId===e.taxonId})).length<n.length),g=!f.find((function(t){return t.taxonId===e.taxonId})),y=v,x=v,O=b.filter((function(t){var n=t.id;return t.taxonId===e.taxonId&&n!==e.id})).map((function(e){return e.lifeStageId})),j=n.filter((function(e){var t=e.id;return!O.includes(t)}));return Object(ba.a)(Object(ba.a)({},e),{},{taxonName:c,levelName:u,levelRankOrder:d,lifeStageRankOrder:p,isTargetEffort:m,canDuplicate:h,canFilter:g,canDelete:y,canEdit:x,allowedLifeStages:j})}))}),[N,M,b,f,i,v]),R=Object(s.useMemo)((function(){var e=b.map((function(e){return e.taxonId})),t=a.filter((function(t){return e.includes(t.id)})).map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{status:"in"})})),n=a.filter((function(t){return!e.includes(t.id)})).map((function(e){return Object(ba.a)(Object(ba.a)({},e),{},{status:"notIn"})})),r=function(e){m.createOrganism({taxonId:e.id}),M&&!M.includes(e.id)&&m.createFilter({taxonId:e.id})},i=function(e){return m.createFilter({taxonId:e.id})};return[].concat(Object(ci.a)(t),Object(ci.a)(n)).map((function(e){var t=v?function(){return r(e)}:function(){return i(e)},n=Object(fe.c)("div",{css:{display:"grid",gridGap:"0.25em",gridTemplateColumns:"auto auto"},children:[Object(fe.b)(Xn,{onClick:function(){return r(e)},isDefault:v,disabled:!v,startIcon:Object(fe.b)(oy.a,{}),children:"Add Organism"}),Object(fe.b)(Xn,{onClick:function(){return i(e)},isDefault:!v,startIcon:Object(fe.b)(Qp.a,{}),children:"Add Filter"})]});return Object(ba.a)(Object(ba.a)({},e),{},{actions:n,onChoose:t})}))}),[a,b,v]);Object(Jt.a)("/",(function(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=z.current)||void 0===t||t.focus()}));var _=l.hasPermission(re.NAMCResource.organisms,re.GrantAction.createAny),F=L.every((function(e){var t=e.persistence;return"unsaved"===t||"saved"===t})),E=Object(A.sumBy)(L,(function(e){return e.splitCount})),q=Object(A.uniqBy)(L,(function(e){return e.taxonId})).length,B=L.length;return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[p.sample&&Object(fe.b)($g,{sample:p.sample,actions:_&&Object(fe.b)(by,{userId:l.id,sample:p.sample,actions:m,editMode:p.editMode,canLeave:F})}),Object(fe.b)("div",{children:Object(fe.b)(ea,{inputRef:z,options:R})}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:f.map((function(e){var t=e.taxonId,n=N(t);return{id:String(t),filterFn:function(){return!0},label:"".concat(null===n||void 0===n?void 0:n.levelName,": ").concat(null===n||void 0===n?void 0:n.name),onDelete:function(){return m.deleteFilter({taxonId:t})}}})),joinLabel:"or"}),Object(fe.b)(Zp,{children:"".concat(E," ").concat(S(E,"organism"),", across ").concat(q," ").concat(S(q,"taxon")," and ").concat(B," ").concat(S(B,"record")).concat(b.length===B?"":" (filtered)")})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:L,rowIdProperty:"rowId",columnDefs:dy,frameworkComponents:r,context:T,gridOptions:Py,onGridApisReady:D})})]}),Object(fe.b)(st,{title:"Confirm Delete Organism",isOpen:!!j,onClose:function(){return w(null)},onConfirm:function(){j&&m.deleteOrganism(j)},confirmLabel:"Delete"}),Object(fe.b)(py,{isOpen:"stoppingPrompt"===h,onConfirm:function(e){var t=e.time;m.finishTaxonomyIdentification({time:t})}}),!F&&Object(fe.b)(gv,{message:"Some data hasn't finished saving or deleting. Are you sure you want to leave?"})]})}),Ay),Ly=sa((function(e){var t=e.sampleId,n=Object(J.i)(Ru(Number(t))),a=Object(J.i)(Mu(Number(t)));return null===n?Object(ue.jsxs)("h2",{children:["Sample ",t," not found."]}):Object(ue.jsx)(My,{sample:n,sampleOrganisms:a})}),Ay),Ry=[_p({headerName:"Scientific Name",field:"hierarchy",minWidth:110,width:400,cellRenderer:"TaxonNameRenderer"}),_p({headerName:"Taxonomic Level",field:"levelName",minWidth:110,width:200}),_p({headerName:"Relationship",field:"hierarchy.relationship",minWidth:110,flex:1})],_y=function(e){var t=e.data,n=t.name,a=t.hierarchy,r=a.indent,i=void 0===r?0:r,o=a.onClick,s=a.relationship,l=t.isTargetEffort;return Object(fe.b)("div",{css:{display:"flex",alignItems:"baseline",paddingLeft:13*i},children:Object(fe.c)("span",{children:["Descendant"===s&&"... ",o?Object(fe.b)("a",{onClick:o,children:n}):Object(fe.b)("span",{children:n}),l&&Object(fe.b)(Xe,{})]})})},Fy=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"100%"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"100%"},children:Object(fe.b)(Pe.a,{height:"15em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"100%"},children:Object(fe.b)(Pe.a,{height:"15em",variant:"rectangular"})})]})},Ey=function(e){var t=e.taxon,n=e.isNew,a=null!==t&&void 0!==t?t:{},r=a.name,i=void 0===r?"":r,o=a.levelId,s=void 0===o?null:o,l=a.synonyms,c=void 0===l?[]:l,u=a.isTargetEffort,d=void 0!==u&&u,p=a.parentId,m=void 0===p?null:p,b=a.notes,f=void 0===b?"":b;return{editMode:n?"started":"stopped",isDirty:!1,values:{name:i,levelId:s,synonymsText:c.join(", "),isTargetEffort:d,parentId:m,notes:f}}},qy={defaultColDef:{sortable:!1},rowClassRules:{"DataGrid__row--target":function(e){return""===e.data.hierarchy.relationship}}},By=Object(J.b)({key:"TaxonDetail/showAllDescendantsAtom",default:!1}),Uy=sa((function(e){var t,n=e.taxonId,a=e.isNew,r=ae(),o=Gc(),l=Wc(),c=Object(d.a)(l,2),u=c[0],p=c[1],m=bv(),b=Je(),f=Object(J.i)(ud),h=Object(J.i)(sd),g=Object(J.i)(Qc),y=Object(s.useState)(null),v=Object(d.a)(y,2),x=v[0],O=v[1],j=Object(J.h)(By),w=Object(d.a)(j,2),I=w[0],k=w[1],D=Object(s.useMemo)((function(){return h.find((function(e){return e.id===x}))}),[h,x]),z=C(Ey({taxon:D,isNew:a}),[D,a]),T=Object(d.a)(z,3),N=T[0],P=T[1],M=T[2],L=N.values,R=L.name,_=L.levelId,F=L.synonymsText,E=L.isTargetEffort,q=L.parentId,B=L.notes,U=N.editMode,G=N.isDirty,W="stopped"===U,V="started"===U,H="stopping"===U,Y=Object(s.useMemo)((function(){return h.filter((function(e){return e.id!==(null===D||void 0===D?void 0:D.id)})).map((function(e){return e.name.toLowerCase()}))}),[h,D]),Q=function(){var e=R.trim().toLowerCase(),t={name:!e||Y.includes(e),levelId:!_,parentId:!q};if(Object.values(t).some((function(e){return e})))return t}();Object(s.useEffect)((function(){if(a)O(null);else{if(n)O(Number(n));else{var e=h.find((function(e){return"Animalia"===e.name}));if(!e)throw new Error('Could not find "Animalia".');O(e.id)}M((function(e){e.editMode="stopped"}))}}),[n,a]);var $=function(e){return function(t){return function(e,t){M((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))}(e,t)}},Z=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M((function(e){e.editMode="stopping"})),e.prev=1,_&&q){e.next=4;break}throw new Error("Missing fields.");case 4:if(t={name:R.trim(),levelId:_,parentId:q,isTargetEffort:E,synonyms:Object(A.uniq)(F.split(/[,\n]/).map((function(e){return e.trim()})).filter(A.identity)),notes:B.trim()},!a){e.next=12;break}return e.next=8,Gi(r,u)(t);case 8:n=e.sent,window.setTimeout((function(){m.taxonDetail({taxonId:n},!0),p()})),e.next=16;break;case 12:if(x){e.next=14;break}throw new Error("No taxon ID.");case 14:return e.next=16,yc(r,o)(Object(ba.a)(Object(ba.a)({},t),{},{id:x}));case 16:M((function(e){e.editMode="stopped",e.isDirty=!1})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),b.error("Failed to save taxon: ".concat(e.t0)),M((function(e){e.editMode="started"}));case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),K=Object(s.useMemo)((function(){if(!D)return[];var e=D.childIds,t=D.descendantIds;if(!e||!t)throw new Error("Taxon missing childIds/descendantIds.");for(var n=[],a=D.parentId,r=!0,i=function(){var e=h.find((function(e){return e.id===a}));if(!e)throw new Error("Missing ancestor taxon");n.unshift(Object(ba.a)(Object(ba.a)({},e),{},{hierarchy:{relationship:r?"Parent":"Ancestor",onClick:W?function(){return m.taxonDetail({taxonId:e.id})}:void 0}})),a=e.parentId,r=!1};a;)i();n.push(Object(ba.a)(Object(ba.a)({},D),{},{hierarchy:{relationship:""}}));var o=n.length,s=I?t:e;return n.push.apply(n,Object(ci.a)(s.map((function(t){var n=h.find((function(e){return e.id===t}));if(!n)throw new Error("Missing child taxon");return Object(ba.a)(Object(ba.a)({},n),{},{hierarchy:{relationship:!I||e.includes(t)?"Child":"Descendant",onClick:W?function(){return m.taxonDetail({taxonId:n.id})}:void 0}})})))),n.map((function(e,t){return Object(ba.a)(Object(ba.a)({},e),{},{hierarchy:Object(ba.a)(Object(ba.a)({},e.hierarchy),{},{indent:Math.min(t,o)})})}))}),[h,D,I,W]),X=Object(s.useMemo)((function(){var e,t=(null===(e=g.find((function(e){return e.id===_})))||void 0===e?void 0:e.rankOrder)||1/0;return h.filter((function(e){return e.levelRankOrder<t}))}),[g,h,_]),ee=Object(s.useMemo)((function(){var e,t,n=null!==(e=null===(t=h.find((function(e){return e.id===q})))||void 0===t?void 0:t.levelRankOrder)&&void 0!==e?e:0,a=(null===D||void 0===D?void 0:D.childIds)&&Math.min.apply(Math,Object(ci.a)(h.filter((function(e){var t,n=e.id;return null===(t=D.childIds)||void 0===t?void 0:t.includes(n)})).map((function(e){return e.levelRankOrder}))))||1/0;return g.filter((function(e){return e.isActive})).map((function(e){return{value:e.id,label:e.name,disabled:e.rankOrder<=n||e.rankOrder>=a}}))}),[g,D,q]),te=Object(s.useMemo)((function(){var e;return null===(e=h.find((function(e){return e.id===q})))||void 0===e?void 0:e.name}),[q]),ne=K.filter((function(e){var t=e.hierarchy.relationship;return"Ancestor"===t||"Parent"===t})).length,ie=K.length-ne-1;return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{margin:"0.5em 0 2em 0",display:"flex",gap:"0.5em"},children:[Object(fe.b)(aa,{label:"Taxon",options:h,value:x,onChange:function(e){e?m.taxonDetail({taxonId:e}):m.taxa()},disabled:!W,disableClearable:!0,ungrouped:!0,css:{flex:1}}),f.hasPermission(re.NAMCResource.taxonomy,re.GrantAction.createAny)&&Object(fe.b)(tt.a,{disabled:!W,variant:"outlined",onClick:function(){m.taxonCreate()},children:"Create New Taxon"})]}),D||a?Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{display:"grid",gap:"1em",gridTemplateColumns:"1fr 1fr 1fr auto",gridTemplateRows:"auto auto 6em",gridTemplateAreas:'\n                    "parentId       id            .               buttons"\n                    "name           levelId       isTargetEffort  ."\n                    "synonyms       synonyms      notes           notes" \n                  '},children:[f.hasPermission(re.NAMCResource.taxonomy,re.GrantAction.updateAny)&&Object(fe.b)("div",{css:{gridArea:"buttons",display:"flex",gap:"0.5em"},children:W?Object(fe.b)(qt,{label:"Actions",items:[{key:"edit",label:"Edit Taxon",onClick:function(){M((function(e){e.editMode="started"}))},disabled:(null===D||void 0===D?void 0:D.levelId)===Ac.kingdom}]}):Object(fe.c)(fe.a,{children:[Object(fe.b)(tt.a,{onClick:function(){a?m.taxa():P(Ey({taxon:D,isNew:!1}))},variant:"outlined",disabled:H,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:Z,variant:"contained",disabled:!G||H||!!Q,children:"Save"})]})}),Object(fe.b)(je,{gridArea:"id",label:"Taxonomy ID",value:null!==(t=null===D||void 0===D?void 0:D.id)&&void 0!==t?t:"TBD"}),V?Object(fe.b)(Ht,{gridArea:"name",label:"Scientific Name",value:R,onChange:$("name"),error:null===Q||void 0===Q?void 0:Q.name,InputProps:{sx:{fontWeight:"700"}}}):Object(fe.b)(je,{gridArea:"name",label:"Scientific Name",value:Object(fe.c)(ia,{children:[R,Object(fe.b)("span",{css:{fontSize:"1rem"},children:E&&Object(fe.b)(Xe,{})})]})}),Object(fe.b)(Ht,{gridArea:"synonyms",label:"Synonyms",value:F,onChange:$("synonymsText"),readOnly:!V,inputProps:{spellCheck:!1},multiline:!0,minRows:3,error:null===Q||void 0===Q?void 0:Q.synonymsText}),Object(fe.b)(Ht,{gridArea:"notes",label:"Notes",value:B,onChange:$("notes"),readOnly:!V,multiline:!0,minRows:3,error:null===Q||void 0===Q?void 0:Q.notes}),Object(fe.b)(Ee,{gridArea:"levelId",label:"Taxonomic Level",value:_,onChange:$("levelId"),readOnly:!V,options:ee,error:null===Q||void 0===Q?void 0:Q.levelId}),Object(fe.b)(ft,{gridArea:"isTargetEffort",label:"Is SAFIT II target effort",value:E,onChange:$("isTargetEffort"),readOnly:!V}),V?Object(fe.b)(aa,{gridArea:"parentId",label:"Parent",options:X,value:q,onChange:$("parentId"),error:null===Q||void 0===Q?void 0:Q.parentId,disableClearable:!0,ungrouped:!0}):Object(fe.b)(je,{gridArea:"parentId",label:"Parent",value:te})]}),!a&&Object(fe.c)("div",{css:{flex:1,display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",alignItems:"center"},children:[Object(fe.b)("div",{css:{fontWeight:500,marginLeft:"1em",marginRight:"4em"},children:"Hierarchy"}),Object(fe.b)(ft,{value:I,onChange:k,label:"Show all descendants"}),Object(fe.c)(Zp,{css:{marginLeft:"auto"},children:["Showing ",ne," ",S(ne,"ancestor"),q&&" (including parent)",", ",ie," ",I?"total ".concat(S(ie,"descendant")):"".concat(S(ie,"child"))]})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{columnDefs:Ry,rows:K,frameworkComponents:i,gridOptions:qy})})]})]}):Object(fe.b)("div",{children:"Select a taxon"})]}),G&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})}),(function(){return Object(fe.b)(Fy,{})})),Gy=function(e){var t=[_p({headerName:"OTU Name",field:"translationScientificName",minWidth:110,width:300}),Up({headerName:"Final",field:"isFinal",width:110,valueLabels:["","Final"]}),{headerName:"Taxa",field:"taxa",minWidth:110,flex:1,cellRenderer:"TaxaRenderer",comparator:function(e,t){var n=Object(d.a)(e,1)[0],a=Object(d.a)(t,1)[0];return n.name>a.name}}];return e.hasPermission(re.NAMCResource.translations,re.GrantAction.updateAny)&&t.push({colId:"actions",width:120,cellRenderer:"ActionsRenderer",pinned:"right",sortable:!1}),t},Wy=function(e){var t=e.data.taxa;return Object(fe.b)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:t.map((function(e){return Object(fe.b)(et,{chipColor:"#eee",label:"".concat(e.name," (").concat(e.levelName,")"),css:{marginRight:"0.5rem"}},e.id)}))})},Vy=function(e){var t=e.data,n=t.onEdit,a=t.onDelete,r=t.canOperate;return Object(fe.c)("div",{css:{display:"flex",alignItems:"center",height:"100%"},children:[Object(fe.b)(Ge.a,{onClick:n,disabled:!r,children:$e(Object(fe.b)(og.a,{}),"Edit OTU Name",!r)}),Object(fe.b)(Ge.a,{onClick:a,disabled:!r,children:$e(Object(fe.b)(hy.a,{}),"Delete OTU Name",!r)})]})},Hy=sa((function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdate,r=e.translationId,i=e.targetGroupId,o=e.groups,l=e.taxa,c=ae(),u=Je(),p=Vc(),m=o.find((function(e){return e.id===i})),b=C(function(e){var t=e.group;return{editMode:"started",isDirty:!1,values:{translationScientificName:(null===t||void 0===t?void 0:t.translationScientificName)||"",isFinal:(null===t||void 0===t?void 0:t.isFinal)||!0,taxonomyIds:(null===t||void 0===t?void 0:t.taxonomyIds)||[]}}}({group:m}),[t]),f=Object(d.a)(b,3),h=f[0],g=(f[1],f[2]),y=h.editMode,v=h.values,x=h.isDirty,O=v.translationScientificName,j=v.isFinal,w=v.taxonomyIds,I=O.trim().toLowerCase(),S=Object(s.useMemo)((function(){return o.filter((function(e){return e.id!==(null===m||void 0===m?void 0:m.id)})).map((function(e){return e.translationScientificName.toLowerCase()}))}),[o,I]),k=function(){var e={translationScientificName:!O||!!S.find((function(e){return e===I})),taxonomyIds:0===w.length};if(Object.values(e).some((function(e){return e})))return e}(),D="stopping"===y,z=function(e,t){g((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},T=function(e){return function(t){return z(e,t)}},N=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,i;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g((function(e){e.editMode="stopping"})),null===m||void 0===m||!m.id){e.next=9;break}return t=Object(ba.a)({id:m.id},v),e.next=6,Ic(c,p)(t);case 6:a(t),e.next=13;break;case 9:return e.next=11,Qi(c,p)(Object(ba.a)({translationId:r},v));case 11:i=e.sent,a(Object(ba.a)({id:i},v));case 13:n(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),u.error("Failed to update OTU Name: ".concat(e.t0)),g((function(e){e.editMode="started"}));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),A=w.map((function(e){var t=l.find((function(t){return t.id===e}));if(!t)throw new Error("Taxon not found.");return t})),P=Object(s.useMemo)((function(){var e,t=(e=o.filter((function(e){return e.id!==(null===m||void 0===m?void 0:m.id)})).reduce((function(e,t){return[].concat(Object(ci.a)(e),Object(ci.a)(t.taxonomyIds))}),[])).concat.apply(e,Object(ci.a)(w));return l.map((function(e){var n=!t.includes(e.id),a=function(){var t;n&&(t=e.id,z("taxonomyIds",[].concat(Object(ci.a)(w),[t])))},r=Object(fe.b)(Xn,{onClick:a,isDefault:!0,disabled:!n,startIcon:Object(fe.b)(oy.a,{}),children:"Add Taxon"});return Object(ba.a)(Object(ba.a)({},e),{},{status:"in",actions:r,onChoose:a})}))}),[l,o,w]);return Object(fe.c)(nt.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"lg",children:[Object(fe.c)(it.a,{children:[m?"Edit":"Create"," OTU Name"]}),Object(fe.b)(rt.a,{children:Object(fe.c)("div",{css:{marginTop:"1em",display:"grid",gridTemplateColumns:"1fr auto",gap:"1em",gridTemplateAreas:'\n                "translationScientificName isFinal"\n                "taxonomyIds taxonomyIds"\n                "addTaxon addTaxon"\n            '},children:[Object(fe.b)(Ht,{gridArea:"translationScientificName",label:"OTU Name",value:O,onChange:T("translationScientificName"),error:null===k||void 0===k?void 0:k.translationScientificName,fullWidth:!0,disabled:D}),Object(fe.b)(ft,{gridArea:"isFinal",label:"Final",value:j,onChange:T("isFinal"),disabled:D}),Object(fe.c)(ve.a,{css:{gridArea:"taxonomyIds"},children:[Object(fe.b)(xe.a,{shrink:!0,error:null===k||void 0===k?void 0:k.taxonomyIds,children:"Taxa"}),Object(fe.c)("div",{css:{display:"flex",flexWrap:"wrap",gap:"0.5rem",minHeight:"32px",padding:"8.5px"},children:[(null===k||void 0===k?void 0:k.taxonomyIds)&&Object(fe.b)("span",{css:{color:"#d32f2f",margin:"7px"},children:"\u2014"}),A.map((function(e){return Object(fe.b)(et,{chipColor:"#eee",label:"".concat(e.name," (").concat(e.levelName,")"),onDelete:D?void 0:function(){var t;t=e.id,z("taxonomyIds",w.filter((function(e){return e!==t})))}},e.id)}))]})]}),Object(fe.b)("div",{css:{gridArea:"addTaxon"},children:Object(fe.b)(ea,{options:P,label:"Add Taxa",ungrouped:!0})})]})}),Object(fe.c)(at.a,{children:[Object(fe.b)(tt.a,{onClick:n,disabled:D,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:N,disabled:!x||!!k||D,children:"Save"})]})]})}),(function(){return null})),Jy=function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"5em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})},Yy=Object(J.b)({key:"TranslationDetail/isExpandedState",default:!0}),Qy=sa((function(e){var t,n,a,r,i=e.translation,l=ae(),c=Je(),u=bv(),p=Object(J.i)(ud),m=Gc(),b=Vc(),f=Object(J.i)(sd),h=!i,g=C(function(e){var t=e.translation,n=null!==t&&void 0!==t?t:{},a=n.name,r=void 0===a?"":a,i=n.isActive,o=void 0===i||i,s=n.description;return{editMode:t?"stopped":"started",isDirty:!1,values:{name:r,isActive:o,description:void 0===s?"":s}}}({translation:i}),[i]),y=Object(d.a)(g,3),v=y[0],x=(y[1],y[2]),O=C(null!==(t=null===i||void 0===i?void 0:i.groups)&&void 0!==t?t:[],[i]),j=Object(d.a)(O,3),w=j[0],I=(j[1],j[2]),S=Zt(Object(s.useState)("")),k=Object(d.a)(S,4),D=k[0],z=k[1],T=k[2],N=k[3],A=Object(s.useState)(!1),P=Object(d.a)(A,2),M=P[0],L=P[1],R=Object(s.useState)(!1),_=Object(d.a)(R,2),F=_[0],E=_[1],q=Object(s.useState)(!1),B=Object(d.a)(q,2),G=B[0],W=B[1],V=Object(s.useState)(),H=Object(d.a)(V,2),Y=H[0],Q=H[1],$=Object(J.h)(Yy),Z=Object(d.a)($,2),K=Z[0],X=Z[1],ee=v.values,te=v.editMode,ne=v.isDirty,ie=function(){var e={name:!ee.name.trim()};if(Object.values(e).some((function(e){return e})))return e}(),oe="stopped"===te,se="started"===te,le="stopping"===te,ce="deleting"===te,ue=function(e,t){x((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},de=function(){var e=Object(ui.a)(pi.a.mark((function e(){var t,n;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x((function(e){e.editMode="stopping"})),t=U(ee),!h){e.next=11;break}return e.next=6,Hi(l,m)(t);case 6:n=e.sent,x((function(e){e.editMode="stopped",e.isDirty=!1})),window.setTimeout((function(){u.translationDetail({translationId:n},!0)})),e.next=14;break;case 11:return e.next=13,Oc(l,m)(Object(ba.a)(Object(ba.a)({},t),{},{id:i.id}));case 13:x((function(e){e.editMode="stopped",e.isDirty=!1}));case 14:e.next=25;break;case 16:e.prev=16,e.t0=e.catch(0),e.t1=e.t0.message,e.next='duplicate key value violates unique constraint "translations_translation_name_key"'===e.t1?21:23;break;case 21:return c.error('Failed to save: name "'.concat(ee.name,'" already in use')),e.abrupt("break",24);case 23:c.error("Failed to save: ".concat(e.t0));case 24:x((function(e){e.editMode="started"}));case 25:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i){e.next=3;break}throw new Error("No translation.");case 3:return x((function(e){e.editMode="deleting"})),e.next=6,bo(l,m)(i);case 6:c.info("Deleted translation ".concat(i.name)),u.translations(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c.error("Failed to delete: ".concat(e.t0)),x((function(e){e.editMode="stopped"}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(ui.a)(pi.a.mark((function e(){return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Y){e.next=3;break}throw new Error("No group.");case 3:return e.next=5,ho(l,b)({id:Y});case 5:I((function(e){var t=e.findIndex((function(e){return e.id===Y}));-1!==t&&e.splice(t,1)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.error("Failed to delete OTU Name: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),be=Object(s.useMemo)((function(){var e=[];if(T){var t=T.toLowerCase();e.push({id:"text",label:'OTU Name contains "'.concat(T,'"'),filterFn:function(e){return e.translationScientificName.toLowerCase().includes(t)},onDelete:N})}return e}),[T]),he=Object(s.useMemo)((function(){return be.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),w).map((function(e){var t=e.taxonomyIds.map((function(e){var t=f.find((function(t){return t.id===e}));if(!t)throw new Error("Taxon not found");return t})),n=oe;return Object(ba.a)(Object(ba.a)({},e),{},{taxa:t,onEdit:function(){L(!0),Q(e.id)},onDelete:function(){W(!0),Q(e.id)},canOperate:n})}))}),[w,f,be,oe]);return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)(Ae,{value:K,onChange:X,locked:se,summary:se?Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ht,{label:"Translation Name",value:ee.name,onChange:(r="name",function(e){return ue(r,e)}),error:null===ie||void 0===ie?void 0:ie.name,InputProps:{sx:{fontWeight:"700"}},css:{width:"30em"},maxLength:255})}):Object(fe.b)(ia,{children:ee.name}),actions:Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[(oe||ce)&&p.hasPermission(re.NAMCResource.translations,re.GrantAction.updateAny)&&Object(fe.b)(qt,{label:"Actions",disabled:ce,items:[{key:"edit",label:"Edit Translation",onClick:function(){x((function(e){e.editMode="started",e.lastValues=e.values}))}},Et,{key:"delete",label:"Delete Translation",onClick:function(){E(!0)},disabled:!p.hasPermission(re.NAMCResource.translations,re.GrantAction.deleteAny)}]}),(se||le)&&Object(fe.c)(fe.a,{children:[!h&&Object(fe.b)(tt.a,{onClick:function(){x((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},variant:"outlined",disabled:le,children:"Cancel"}),Object(fe.b)(tt.a,{onClick:de,variant:"contained",disabled:!ne||le||!!ie,children:"Save"})]})]}),children:Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"1fr 1fr 4fr",gridTemplateAreas:'\n                  "id     isActive     description"\n                  ".      .     description"\n                '},children:[Object(fe.b)(je,{gridArea:"id",value:null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:"TBD",label:"Translation ID"}),Object(fe.b)(ft,{gridArea:"isActive",value:!ee.isActive,onChange:function(e){return ue("isActive",!e)},label:"Active",readOnly:!se}),Object(fe.b)(Ht,{gridArea:"description",value:ee.description,onChange:function(e){return ue("description",e)},label:"Description",readOnly:!se,multiline:!0,minRows:3})]})}),Object(fe.c)("div",{css:{display:"flex"},children:[Object(fe.b)(Ht,{value:D,onChange:z,label:"OTU Name",css:{width:"25em"},disabled:!oe}),Object(fe.b)("div",{css:{marginLeft:"auto"},children:p.hasPermission(re.NAMCResource.translations,re.GrantAction.updateAny)&&Object(fe.b)(tt.a,{onClick:function(){L(!0),Q(void 0)},variant:"outlined",startIcon:Object(fe.b)(oy.a,{}),disabled:!oe,children:"Add OTU Name"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:be,joinLabel:"and"}),Object(fe.b)(Kp,{total:w.length,visible:he.length,descriptor:"OTU Name"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{columnDefs:Gy(p),rows:he,frameworkComponents:o})})]}),(null===i||void 0===i?void 0:i.id)&&Object(fe.b)(Hy,{isOpen:M,translationId:i.id,targetGroupId:Y,onClose:function(){return L(!1)},onUpdate:function(e){I((function(t){var n=t.findIndex((function(t){return t.id===e.id}));-1===n?t.push(e):t[n]=e}))},groups:w,taxa:f}),Object(fe.b)(st,{title:"Confirm Delete Translation",isOpen:F,onClose:function(){E(!1)},onConfirm:pe,children:"Are you sure you want to delete this translation?"}),Object(fe.c)(st,{title:"Confirm Delete OTU Name",isOpen:G,onClose:function(){W(!1)},onConfirm:me,children:["Are you sure you want to delete ",null===(a=w.find((function(e){return e.id===Y})))||void 0===a?void 0:a.translationScientificName,"?"]}),ne&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})}),(function(){return Object(fe.b)(Jy,{})})),$y=sa((function(e){var t=e.translationId,n=Object(J.i)(t?Qu(Number(t)):Xu);return t&&!n?Object(ue.jsxs)("h2",{children:["Translation ",t," not found."]}):Object(ue.jsx)(Qy,{translation:n})}),Jy),Zy=[Rp({headerName:"Translation Name",field:"title",flex:1}),_p({headerName:"Translation ID",field:"id",width:150}),Up({field:"isActive",valueLabels:["No","Yes"],width:120}),Gp({headerName:"# OTU Names",field:"taxaCount",width:150}),qp({headerName:"Created",field:"createdDate",width:140}),qp({headerName:"Updated",field:"updatedDate",width:140})],Ky=Object(J.b)({key:"TranslationsListing/textFilterState",default:""}),Xy=sa((function(){var e=bv(),t=Object(J.i)(ud),n=Object(J.i)(Yu),a=Zt(Object(J.h)(Ky)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];return l&&e.push({id:"text",label:'Name contains "'.concat(l,'"'),filterFn:function(e){return e.name.toLowerCase().includes(l.toLowerCase())},onDelete:c}),e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),n).map((function(t){return Object(ba.a)(Object(ba.a)({},t),{},{title:{label:t.name,onClick:function(){e.translationDetail({translationId:t.id})}}})}))}),[n,u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em"},children:[Object(fe.b)($t,{value:i,onChange:o,label:"Translation Name"}),t.hasPermission(re.NAMCResource.translations,re.GrantAction.createAny)&&Object(fe.b)("div",{css:{marginLeft:"auto"},children:Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){e.translationCreate()},children:"Create New Translation"})})]}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:n.length,visible:p.length,descriptor:"translation"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:Zy,frameworkComponents:$p})})]})}),(function(){return Object(fe.b)(Pe.a,{height:"20em"})})),ev=["value","onChange","hideRoleLevel"],tv=sa((function(e){var t=e.value,n=e.onChange,a=e.hideRoleLevel,r=void 0===a?-1:a,i=Object(gi.a)(e,ev),o=Object(J.i)(gu),s=o.filter((function(e){return e.level<=r})).map((function(e){return e.id})),l=o.filter((function(e){var t=e.id;return!s.includes(t)})).map((function(e){return{value:e.id,label:e.name}})),c=t.filter((function(e){return!s.includes(Number(e))})),u=t.filter((function(e){return s.includes(Number(e))}));return Object(fe.b)(Se,Object(ba.a)(Object(ba.a)({value:c,onChange:function(e){return n(Object(A.uniq)([].concat(Object(ci.a)(e),Object(ci.a)(u))))}},i),{},{options:l}))}),(function(e){return Object(fe.b)(je,Object(ba.a)(Object(ba.a)({},e),{},{value:Object(fe.b)(Pe.a,{})}))})),nv=Object(J.e)({key:"UserDetail/selectOrganizationOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(Wu),e.abrupt("return",a.map((function(e){return{value:e.id,label:e.name}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),av=Object(J.e)({key:"UserDetail/selectUsStateOptions",get:function(){var e=Object(ui.a)(pi.a.mark((function e(t){var n,a;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,a=n(fu),e.abrupt("return",a.map((function(e){return{value:e.id,label:e.abbreviation}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),rv=function(e){var t=e.user,n=e.organization,a=e.isSelf,r=ae(),i=Gc(),o=Vc(),s=Je(),l=C(function(e){var t=e.user,n=e.organization;return{editMode:t||n?"stopped":"started",isDirty:!1,values:{firstName:(null===t||void 0===t?void 0:t.firstName)||"",lastName:(null===t||void 0===t?void 0:t.lastName)||"",userPhone:(null===t||void 0===t?void 0:t.phone)||"",affiliationId:(null===t||void 0===t?void 0:t.affiliationId)||null,deleteOldOrganization:!0,roleIds:(null===t||void 0===t?void 0:t.roleIds)||[],organizationName:(null===n||void 0===n?void 0:n.name)||"",address1:(null===n||void 0===n?void 0:n.address1)||"",address2:(null===n||void 0===n?void 0:n.address2)||"",city:(null===n||void 0===n?void 0:n.city)||"",usStateId:(null===n||void 0===n?void 0:n.usStateId)||null,zipCode:(null===n||void 0===n?void 0:n.zipCode)||"",organizationPhone:(null===n||void 0===n?void 0:n.phone)||""}}}({user:t,organization:n}),[t,n]),c=Object(d.a)(l,3),u=c[0],p=(c[1],c[2]),m=Object(J.i)(ud),b=Object(J.i)(hu),f=Object(J.i)(vu),h=Object(J.i)(gu),g=Object(J.i)(yu),y=u.values,v=u.editMode,x=u.isDirty,O=m.hasPermission(re.NAMCResource.individuals,re.GrantAction.updateOwn),j=m.hasPermission(re.NAMCResource.individuals,re.GrantAction.updateAny),w=!t&&!n,I=!a&&((null===t||void 0===t?void 0:t.roleIds)||[]).some((function(e){return h.find((function(t){var n=t.id,a=t.level;return e===n&&a===g}))})),S="started"===v,k=S,D=S&&a,z=!a&&j,T=z&&S&&y.affiliationId!==(null===t||void 0===t?void 0:t.affiliationId)&&1===(null===n||void 0===n?void 0:n.userCount),N=function(){var e={};if(k&&(e.firstName=!y.firstName.trim(),e.lastName=!y.lastName.trim()),D&&(e.organizationName=y.organizationName.trim().length<3),Object.values(e).some((function(e){return e})))return e}(),A=function(e,t){p((function(n){Object.assign(n.values,Object(zp.a)({},e,t)),n.isDirty=!0}))},P=function(){var e=Object(ui.a)(pi.a.mark((function e(){var l;return pi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p((function(e){e.editMode="stopping"})),!w){e.next=7;break}return e.next=5,zi(r,i)({organization:{name:y.organizationName,typeId:f,address1:y.address1,address2:y.address2,city:y.city,countryId:b,phone:y.organizationPhone,usStateId:y.usStateId,zipCode:y.zipCode},user:{firstName:y.firstName,lastName:y.lastName,phone:y.userPhone}});case 5:e.next=36;break;case 7:if(!D){e.next=16;break}if(null!==n&&void 0!==n&&n.id){e.next=10;break}throw new Error("no organization ID");case 10:if(null!==n&&void 0!==n&&n.countryId){e.next=12;break}throw new Error("no organization country ID");case 12:if(null!==n&&void 0!==n&&n.typeId){e.next=14;break}throw new Error("no organization type ID");case 14:return e.next=16,tc(r,o)({id:n.id,name:y.organizationName,address1:y.address1,address2:y.address2,city:y.city,zipCode:y.zipCode,usStateId:y.usStateId,countryId:n.countryId,phone:y.organizationPhone,typeId:n.typeId});case 16:if(!k){e.next=22;break}if(null!==t&&void 0!==t&&t.id){e.next=19;break}throw new Error("no user ID");case 19:return l=t.affiliationId!==y.affiliationId,e.next=22,Cc(r,l?i:o)({id:t.id,firstName:y.firstName,lastName:y.lastName,affiliationId:y.affiliationId,phone:y.userPhone},!!a);case 22:if(!z){e.next=27;break}if(null!==t&&void 0!==t&&t.id){e.next=25;break}throw new Error("no user ID");case 25:return e.next=27,zc(r,o)({id:t.id,roleIds:y.roleIds});case 27:if(!T||!y.deleteOldOrganization){e.next=36;break}return e.prev=28,e.next=31,ao(r,i)(n);case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(28),s.error("Failed to delete organization: ".concat(e.t0));case 36:p((function(e){e.editMode="stopped",e.isDirty=!1})),e.next=43;break;case 39:e.prev=39,e.t1=e.catch(0),s.error("Failed to save: ".concat(e.t1)),p((function(e){e.editMode="started"}));case 43:case"end":return e.stop()}}),e,null,[[0,39],[28,33]])})));return function(){return e.apply(this,arguments)}}();return Object(fe.c)(fe.a,{children:[Object(fe.c)("div",{css:{maxWidth:"40rem"},children:[Object(fe.c)("div",{css:{display:"flex",gap:"0.5em",alignItems:"center"},children:[Object(fe.b)(ia,{css:{marginRight:"auto"},children:w?"Create New User":(null===t||void 0===t?void 0:t.email)||Object(fe.b)("em",{children:"no email address"})}),"stopped"!==v&&!w&&Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){p((function(e){if(!e.lastValues)throw new Error("no values to revert to");e.editMode="stopped",e.values=e.lastValues,e.isDirty=!1}))},disabled:"stopping"===v,children:"Cancel"}),"stopped"!==v&&Object(fe.b)(tt.a,{variant:"contained",onClick:P,disabled:!!N||"stopping"===v||!x,children:"Save"}),"stopped"===v&&(a&&O||j)&&Object(fe.b)(tt.a,{variant:"outlined",onClick:function(){p((function(e){e.editMode="started",e.lastValues=e.values}))},disabled:I,children:"Edit"})]}),Object(fe.b)("h4",{css:{margin:"0.75em 0"},children:"User"}),Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'\n              "firstName  lastName"\n              "userPhone  ."\n          '},children:[Object(fe.b)(Ht,{gridArea:"firstName",value:y.firstName,onChange:function(e){return A("firstName",e)},label:"First Name",error:null===N||void 0===N?void 0:N.firstName,readOnly:!k,maxLength:255}),Object(fe.b)(Ht,{gridArea:"lastName",value:y.lastName,onChange:function(e){return A("lastName",e)},label:"Last Name",error:null===N||void 0===N?void 0:N.lastName,readOnly:!k,maxLength:255}),Object(fe.b)(Ht,{gridArea:"userPhone",value:y.userPhone,onChange:function(e){return A("userPhone",e)},label:"Phone",error:null===N||void 0===N?void 0:N.userPhone,readOnly:!k,maxLength:50})]}),z&&Object(fe.c)(fe.a,{children:[Object(fe.b)("h4",{css:{margin:"0.75em 0"},children:"Roles and Affiliation"}),Object(fe.c)("div",{css:{display:"flex",flexDirection:"column",gap:"0.75em"},children:[Object(fe.b)(Ee,{label:"Belongs To",gridArea:"affiliationId",optionsSelector:nv,valueLabel:(null===t||void 0===t?void 0:t.organizationName)||"",value:y.affiliationId,onChange:function(e){return A("affiliationId",e)},error:null===N||void 0===N?void 0:N.affiliationId,readOnly:!S}),T&&Object(fe.b)(ft,{label:'Delete "'.concat(null===t||void 0===t?void 0:t.organizationName,'" organization with no remaining users and move any orphaned resources to the selected organization'),gridArea:"deleteOldOrganization",value:y.deleteOldOrganization,onChange:function(e){return A("deleteOldOrganization",e)}}),Object(fe.b)(tv,{label:"Roles",gridArea:"roleIds",value:y.roleIds,onChange:function(e){return A("roleIds",e)},error:null===N||void 0===N?void 0:N.roleIds,readOnly:!S,hideRoleLevel:I?void 0:g})]})]}),Object(fe.b)("h4",{css:{margin:"0.75em 0"},children:"Organization"}),Object(fe.c)("div",{css:{display:"grid",gap:"0.75em",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'\n                        "organizationName   organizationName"\n                        "address1           address1"\n                        "address2           address2"\n                        "city               city"\n                        "usStateId          zipCode"\n                        "organizationPhone  ."\n                      '},children:[Object(fe.b)(Ht,{gridArea:"organizationName",value:y.organizationName,onChange:function(e){return A("organizationName",e)},label:"Organization Name",error:null===N||void 0===N?void 0:N.organizationName,readOnly:!D,maxLength:255}),Object(fe.b)(Ht,{gridArea:"address1",value:y.address1,onChange:function(e){return A("address1",e)},label:"Address 1",error:null===N||void 0===N?void 0:N.address1,readOnly:!D,maxLength:255}),Object(fe.b)(Ht,{gridArea:"address2",value:y.address2,onChange:function(e){return A("address2",e)},label:"Address 2",error:null===N||void 0===N?void 0:N.address2,readOnly:!D,maxLength:255}),Object(fe.b)(Ht,{gridArea:"city",value:y.city,onChange:function(e){return A("city",e)},label:"City",error:null===N||void 0===N?void 0:N.city,readOnly:!D,maxLength:255}),Object(fe.b)(Ee,{gridArea:"usStateId",value:y.usStateId,valueLabel:"State",onChange:function(e){return A("usStateId",e)},optionsSelector:av,label:"State",error:null===N||void 0===N?void 0:N.usStateId,readOnly:!D,isClearable:!0}),Object(fe.b)(Ht,{gridArea:"zipCode",value:y.zipCode,onChange:function(e){return A("zipCode",e)},label:"Zip",error:null===N||void 0===N?void 0:N.zipCode,readOnly:!D,maxLength:20}),Object(fe.b)(Ht,{gridArea:"organizationPhone",value:y.organizationPhone,onChange:function(e){return A("organizationPhone",e)},label:"Phone",error:null===N||void 0===N?void 0:N.organizationPhone,readOnly:!D,maxLength:50})]})]}),x&&Object(fe.b)(gv,{message:"Some changes are not saved. Are you sure you want to leave?"})]})},iv=function(){return Object(fe.c)("div",{css:{height:"100%",width:"40rem",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"5em",variant:"rectangular"}),Object(fe.b)(Pe.a,{height:"15em",variant:"rectangular"})]})},ov=sa((function(e){var t=e.userId,n=Object(J.i)(pd(Number(t))),a=Object(J.i)(Vu((null===n||void 0===n?void 0:n.affiliationId)||0));return n?a?Object(ue.jsx)(rv,{user:n,organization:a}):Object(ue.jsxs)("h2",{children:["User ",t," organization not found."]}):Object(ue.jsxs)("h2",{children:["User ",t," not found."]})}),iv),sv=sa((function(){var e,t=Object(J.i)(ud),n=null!==(e=Object(J.i)(Vu(t.affiliationId)))&&void 0!==e?e:void 0;return Object(ue.jsx)(rv,{user:t,organization:n,isSelf:!0})}),iv),lv=sa((function(){return Object(ue.jsx)(rv,{isSelf:!0})}),iv),cv=[Rp({headerName:"User ID",field:"userId",width:120}),_p({field:"firstName",flex:1,minWidth:120}),_p({field:"lastName",flex:1,minWidth:120}),_p({headerName:"Telephone",field:"phone",flex:1,minWidth:120}),_p({field:"email",flex:1,minWidth:120}),_p({headerName:"Affiliation",field:"organizationName",flex:1,minWidth:120}),Fp({field:"roles",flex:1,minWidth:120})],uv=Object(J.b)({key:"UsersListing/textFilterState",default:""}),dv=sa((function(){var e=bv(),t=Object(J.i)(md),n=Object(J.i)(gu),a=Zt(Object(J.h)(uv)),r=Object(d.a)(a,4),i=r[0],o=r[1],l=r[2],c=r[3],u=Object(s.useMemo)((function(){var e=[];if(l){var t=l.toLowerCase();e.push({id:"text",label:'Name/Affiliation contains "'.concat(l,'"'),filterFn:function(e){var n=e.fullName,a=e.organizationName;return n.toLowerCase().includes(t)||a.toLowerCase().includes(t)},onDelete:c})}return e}),[l]),p=Object(s.useMemo)((function(){return u.reduce((function(e,t){var n=t.filterFn;return e.filter(n)}),t).map((function(t){return Object(ba.a)(Object(ba.a)({},t),{},{userId:{label:String(t.id),onClick:function(){return e.userDetail({userId:t.id})}},roles:Object(A.sortBy)(t.roleIds).map((function(e){var t;return(null===(t=n.find((function(t){return t.id===e})))||void 0===t?void 0:t.name)||"Unknown"}))})}))}),[t,u]);return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(fe.b)("div",{css:{display:"flex",gap:"0.5em"},children:Object(fe.b)($t,{value:i,onChange:o,label:"User Name or Affiliation"})}),Object(fe.c)("div",{css:{minHeight:"2em",marginTop:"0.75em",display:"flex"},children:[Object(fe.b)(xt,{filters:u,joinLabel:"and"}),Object(fe.b)(Kp,{total:t.length,visible:p.length,descriptor:"users"})]}),Object(fe.b)("div",{css:{flex:1},children:Object(fe.b)(Ap,{rows:p,columnDefs:cv,frameworkComponents:$p})})]})}),(function(){return Object(fe.c)("div",{css:{height:"100%",display:"flex",flexDirection:"column",gap:"1em"},children:[Object(fe.b)("div",{css:{width:"40em"},children:Object(fe.b)(Pe.a,{height:"3em",variant:"rectangular"})}),Object(fe.b)("div",{css:{width:"10em"},children:Object(fe.b)(Pe.a,{height:"2em",variant:"rectangular"})}),Object(fe.b)(Pe.a,{height:"20em",variant:"rectangular"})]})})),pv=function(e){var t=e.history,n=e.openNewWindowTo;return{boxDetail:function(e,n){var a=e.boxId;return t[n?"replace":"push"]("/boxes/".concat(a))},boxes:function(){return t.push("/boxes")},boxReview:function(e){var n=e.boxId;return t.push("/boxes/".concat(n,"/review"))},boxSubmission:function(){return t.push("/boxes/new")},boxTaxonomy:function(e){var n=e.boxId;return t.push("/boxes/".concat(n,"/taxonomy"))},chainOfCustodyForm:function(e){var t=e.boxId;return n("/forms/custody/".concat(t))},home:function(){return t.push("/")},metricCreate:function(){return t.push("/metrics/new")},metricDetail:function(e,n){var a=e.metricId;return t[n?"replace":"push"]("/metrics/".concat(a))},metrics:function(){return t.push("/metrics")},modelCreate:function(){return t.push("/models/new")},modelDetail:function(e,n){var a=e.modelId;return t[n?"replace":"push"]("/models/".concat(a))},models:function(){return t.push("/models")},organizations:function(){return t.push("/organizations")},predictorCreate:function(){return t.push("/predictors/new")},predictorDetail:function(e,n){var a=e.predictorId;return t[n?"replace":"push"]("/predictors/".concat(a))},predictors:function(){return t.push("/predictors")},profile:function(){return t.push("/profile")},projectCreate:function(){return t.push("/projects/new")},projectDetail:function(e,n){var a=e.projectId;return t[n?"replace":"push"]("/projects/".concat(a))},projects:function(){return t.push("/projects")},reports:function(){return t.push("/reports")},sampleDetail:function(e){var n=e.sampleId;return t.push("/samples/".concat(n))},sampleSorting:function(e){var n=e.sampleId;return t.push("/samples/".concat(n,"/sorting"))},sampleTaxonomyIdentification:function(e){var n=e.sampleId;return t.push("/samples/".concat(n,"/taxonomy"))},siteCreate:function(){return t.push("/sites/new")},siteDetail:function(e,n){var a=e.siteId;return t[n?"replace":"push"]("/sites/".concat(a))},sites:function(e,n){return t[n?"replace":"push"]("/sites")},taxa:function(){return t.push("/taxonomy")},taxonCreate:function(){return t.push("/taxonomy/new")},taxonDetail:function(e,n){var a=e.taxonId;return t[n?"replace":"push"]("/taxonomy/".concat(a))},translationCreate:function(){return t.push("/translations/new")},translationDetail:function(e,n){var a=e.translationId;return t[n?"replace":"push"]("/translations/".concat(a))},translations:function(){return t.push("/translations")},userDetail:function(e){var n=e.userId;return t.push("/users/".concat(n))},users:function(){return t.push("/users")}}},mv=Object(J.b)({key:"AppRouter/navigate",default:pv({history:{push:function(e){return Q.a.debug("history.push:",e)},replace:function(e){return Q.a.debug("history.replace:",e)}},openNewWindowTo:function(e){return Q.a.debug("new window:",e)}})}),bv=function(){return Object(J.i)(mv)},fv=function(e){return e.includes("/forms/")},hv=sa((function(){var e=Object(J.i)(cd),t=Object(J.k)(mv),n=Object(li.h)(),a=Object(s.useState)(fv(n.location.pathname)),r=Object(d.a)(a,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){t((function(){return pv({history:n,openNewWindowTo:function(e){return window.open(window.location.href.replace(/#.*/,"#".concat(e)))}})}))}),[]),Object(s.useEffect)((function(){return n.listen((function(e){var t=e.pathname;o(fv(t))}))}),[]),i?Object(fe.c)(li.e,{children:[Object(fe.b)(li.c,{exact:!0,path:"/forms/custody/:boxId",render:function(e){var t=e.match;return Object(fe.b)(Vb,{boxId:t.params.boxId,autoPrint:!0})}}),Object(fe.b)(li.c,{path:"*",children:Object(fe.b)("h2",{children:"Page not found."})})]}):Object(fe.c)("div",{css:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(fe.b)(Dd,{}),Object(fe.b)(Cd,{}),Object(fe.b)("div",{css:{flex:1,padding:"0.5em"},children:Object(fe.b)(pt,{children:Object(fe.c)(li.e,{children:[!e&&Object(fe.b)(li.c,{path:"*",children:Object(fe.b)(lv,{})}),Object(fe.b)(li.c,{exact:!0,path:"/",children:Object(fe.b)(li.b,{to:"/boxes"})}),Object(fe.b)(li.c,{exact:!0,path:"/boxes",render:function(){return Object(fe.b)(kb,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/boxes/new",render:function(){return Object(fe.b)(Th,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/boxes/:boxId",render:function(e){var t=e.match;return Object(fe.b)(bb,{boxId:t.params.boxId})}}),Object(fe.b)(li.c,{exact:!0,path:"/boxes/:boxId/review",render:function(e){var t=e.match;return Object(fe.b)(yg,{boxId:t.params.boxId})}}),Object(fe.b)(li.c,{exact:!0,path:"/boxes/:boxId/taxonomy",render:function(e){var t=e.match;return Object(fe.b)(Mb,{boxId:t.params.boxId})}}),Object(fe.b)(li.c,{exact:!0,path:"/map",render:function(){return Object(fe.b)(Cp,{apiUrl:ga.public_graphql,mapboxToken:ya})}}),Object(fe.b)(li.c,{exact:!0,path:"/metrics",render:function(){return Object(fe.b)(Eh,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/metrics/new",render:function(){return Object(fe.b)(Lh,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/metrics/:metricId",render:function(e){var t=e.match;return Object(fe.b)(Lh,{metricId:t.params.metricId})}}),Object(fe.b)(li.c,{exact:!0,path:"/models",render:function(){return Object(fe.b)(Yh,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/models/new",render:function(){return Object(fe.b)(Wh,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/models/:modelId",render:function(e){var t=e.match;return Object(fe.b)(Wh,{modelId:t.params.modelId})}}),Object(fe.b)(li.c,{exact:!0,path:"/organizations",render:function(){return Object(fe.b)(tg,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/predictors",render:function(){return Object(fe.b)(Sg,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/predictors/new",render:function(){return Object(fe.b)(Og,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/predictors/:predictorId",render:function(e){var t=e.match;return Object(fe.b)(Og,{predictorId:t.params.predictorId})}}),Object(fe.b)(li.c,{exact:!0,path:"/profile",render:function(){return Object(fe.b)(sv,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/projects",render:function(){return Object(fe.b)(Lg,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/projects/new",render:function(){return Object(fe.b)(Ng,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/projects/:projectId",render:function(e){var t=e.match;return Object(fe.b)(Ng,{projectId:t.params.projectId})}}),Object(fe.b)(li.c,{exact:!0,path:"/reports",render:function(){return Object(fe.b)(Fg,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/samples/:sampleId",render:function(e){var t=e.match;return Object(fe.b)(Yg,{sampleId:t.params.sampleId})}}),Object(fe.b)(li.c,{exact:!0,path:"/samples/:sampleId/sorting",render:function(e){var t=e.match;return Object(fe.b)(ry,{sampleId:t.params.sampleId})}}),Object(fe.b)(li.c,{exact:!0,path:"/samples/:sampleId/taxonomy",render:function(e){var t=e.match;return Object(fe.b)(Ly,{sampleId:t.params.sampleId})}}),Object(fe.b)(li.c,{exact:!0,path:"/sites/:siteId?",render:function(e){var t=e.match;return Object(fe.b)(mm,{siteId:t.params.siteId})}}),Object(fe.b)(li.c,{exact:!0,path:"/taxonomy",render:function(){return Object(fe.b)(Uy,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/taxonomy/new",render:function(){return Object(fe.b)(Uy,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/taxonomy/:taxonId",render:function(e){var t=e.match;return Object(fe.b)(Uy,{taxonId:t.params.taxonId})}}),Object(fe.b)(li.c,{exact:!0,path:"/translations",render:function(){return Object(fe.b)(Xy,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/translations/new",render:function(){return Object(fe.b)($y,{isNew:!0})}}),Object(fe.b)(li.c,{exact:!0,path:"/translations/:translationId",render:function(e){var t=e.match;return Object(fe.b)($y,{translationId:t.params.translationId})}}),Object(fe.b)(li.c,{exact:!0,path:"/users",render:function(){return Object(fe.b)(dv,{})}}),Object(fe.b)(li.c,{exact:!0,path:"/users/:userId",render:function(e){var t=e.match;return Object(fe.b)(ov,{userId:t.params.userId})}}),Object(fe.b)(li.c,{path:"*",children:Object(fe.b)("h2",{children:"Page not found."})})]})})})]})}),(function(){return Object(fe.b)(wt,{children:"Retrieving profile..."})})),gv=function(e){var t=e.message,n=Object(li.h)();return Object(s.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),n?Object(ue.jsx)(li.a,{when:!0,message:t}):null},yv=(n(453),n(454),function(e){var t=e.signOut,n=e.auth,a=Object(J.h)(ne),r=Object(d.a)(a,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){var e=new ce(ga.graphql,n,t);o(e)}),[]),i instanceof ce?Object(fe.b)(fa.a,{children:Object(fe.b)(hv,{})}):Object(fe.b)("div",{})}),vv=function(e){return Object(fe.b)(J.a,{children:Object(fe.b)(qe.a,{children:Object(fe.b)(yv,Object(ba.a)({},e))})})},xv=function(){var e=Object(s.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],c=function(e,t,n){var a=Object(s.useState)({isAuthenticated:!1,isAuthComplete:!1,error:null,user:null}),r=a[0],i=a[1],o=Object(s.useRef)();o.current=r;var l=Object(s.useCallback)((function(){return la.a.federatedSignIn().catch((function(e){i({error:e,user:null,isAuthenticated:!1,isAuthComplete:!0})}))}),[]),c=Object(s.useCallback)((function(){return la.a.currentSession().then((function(e){var t,a={error:null,user:e,isAuthenticated:!0,isAuthComplete:!0};return P.a.isEqual(null===(t=o.current)||void 0===t?void 0:t.user,a.user)||(n&&Q.a.debug("useHosted::refreshState::setLoginState::RESULT",{stateRef:o.current,newState:a}),i(a)),e})).catch((function(e){var n=e;"not authenticated"===e||"No current user"===e?n=null:Q.a.error("useHosted::refreshState::ERROR",e),i({error:n,user:null,isAuthenticated:!1,isAuthComplete:!0}),t&&l()}))}),[n,t,l]),u=Object(s.useCallback)((function(){return pa(void 0,void 0,void 0,(function(){var e;return ma(this,(function(t){switch(t.label){case 0:return[4,c()];case 1:e=t.sent();try{if(e.accessToken.jwtToken.length>0)return[2,e&&e.accessToken?e.accessToken.jwtToken:""];throw new Error("Failed to get current token")}catch(n){throw new Error("Failed to get current token")}return[2]}}))}))}),[c]),d=Object(s.useCallback)((function(){return la.a.signOut().then((function(){i({error:null,user:null,isAuthenticated:!1,isAuthComplete:!0})})).catch((function(e){Q.a.error("useHosted::signOut::ERROR",e),i({error:e,user:null,isAuthenticated:!1,isAuthComplete:!0})}))}),[]);return Object(s.useLayoutEffect)((function(){if(e){la.a.configure(e),n&&(ca.a.LOG_LEVEL="DEBUG"),c();var t=function(e){var t=e.payload;switch(t.event){case"configured":case"signIn_failure":case"signOut":default:break;case"signIn":Q.a.debug("signIn",t)}};return ua.a.listen("auth",t),function(){ua.a.remove("auth",t)}}}),[e,c]),da(da({},r),{signIn:l,getCurrentToken:u,signOut:d})}(n,!1,!1);return Object(s.useEffect)((function(){re.api.authCheck(ga.graphql,"",va).then((function(e){var t;Q.a.debug("authResp",e);var n=null===(t=e.data)||void 0===t?void 0:t.auth;n&&n.region&&(a({region:n.region,userPoolId:n.userPool,userPoolWebClientId:n.clientId,mandatorySignIn:!0,oauth:{domain:n.domain,scope:["email","profile","openid"],redirectSignIn:xa.toString(),redirectSignOut:xa.toString(),responseType:"code"}}),l(!1))})).catch((function(e){Q.a.error("api.authCheck error",e)}))}),[]),Object(s.useEffect)((function(){!c.isAuthenticated&&c.isAuthComplete&&c.signIn()}),[c.isAuthenticated,c.isAuthComplete]),c.isAuthenticated?Object(fe.b)(vv,{signOut:c.signOut,auth:c}):o?Object(fe.b)(wt,{children:"Loading..."}):c.isAuthComplete?Object(fe.b)(wt,{children:"Redirecting..."}):Object(fe.b)(wt,{children:"Authenticating..."})},Ov=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,570)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};nn.a.workerClass=n(455).default;var jv=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://6dsntufqt9.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_PUBLIC_GRAPHQL:"https://zqc171btcj.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_VERSION:"1.0.14",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoibm9ydGhhcnJvd3Jlc2VhcmNoIiwiYSI6ImNrbDhjN25hcTIxZnYyb2xjOXZzaGxoMDcifQ.JlXGE_yO53x3iVlUb4MCLg"}).REACT_APP_LOGLEVEL;switch(jv){case"trace":case"debug":case"info":case"warn":case"error":case"silent":Q.a.setLevel(jv);break;default:Q.a.setLevel("warn")}u.a.render(Object(ue.jsx)(l.a.StrictMode,{children:Object(ue.jsx)(xv,{})}),document.getElementById("root")),Ov()}},[[456,1,2]]]);
//# sourceMappingURL=main.6d1a833e.chunk.js.map